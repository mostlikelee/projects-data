[
  {
    "timestamp": "2025-07-28T23:39:54.88270301Z",
    "items": [
      {
        "assignees": [
          "iansltx"
        ],
        "content": {
          "body": "\u003c!-- **This issue's remaining effort can be completed in ≤1 sprint.  It will be valuable even if nothing else ships.**\nIt is [planned and ready](https://fleetdm.com/handbook/company/development-groups#making-changes) to implement.  It is on the proper kanban board. --\u003e\n\n\n## Goal\n\n| User story  |\n|:---------------------------------------------------------------------------|\n| As an IT admin managing software via GitOps,\n| I want to override FMA install/uninstall scripts\n| so that I can customize the install/uninstall behavior.\n\n## Key result\n\n- Auto-update (patch) any software without writing custom policies\n- Customer request\n\n## Original requests\n\n- #21825\n\n## Context\n- Product designer: @iansltx  \n- Engineering: @iansltx  \n\n## Changes\n\n### Product\n- [x] UI changes: No changes\n- [x] CLI (fleetctl) usage changes: No changes (we'll make changes in GitOps code that lives in fleetctl, but nothing in the CLI interface changes not covered by YAML)\n- [ ] YAML changes: #30826\n- [x] GitOps generation changes: No changes; FMAs are currently generated as custom packages with URLs, with install/uninstall/pre-install/post-install specified, and switching generated YAML to use FMA slugs is out of scope of this story.\n- [x] REST API changes: No changes to public API endpoints\n- [x] Fleet's agent (fleetd) changes: No changes\n- [x] Activity changes: No changes\n- [x] Permissions changes: No changes\n- [x] Changes to paid features or tiers: Software is Fleet Premium\n- [x] Transparency changes: No changes\n- [x] First draft of test plan added\n- [x] Other reference documentation changes: No changes\n- [ ] Once shipped, requester has been notified\n- [ ] Once shipped, dogfooding issue has been filed\n\n### Engineering\n- [x] Test plan is finalized\n- [ ] Contributor endpoint for uploading custom packages + FMAs no longer overrides install/uninstall scripts when a slug is supplied and install/uninstall scripts are supplied\n- [ ] Add pre-install query, install/uninstall/post-install scripts to fields recognized when deserializing FMA YAML, pass to batch software endpoint\n\nNOTE: There are no contributor API docs changes for this story because the requisite fields already exist on the batch payload.\n\n## QA\n\n### Risk assessment\n\n- Risk level: Low\n\n### Test plan\n\n1. Create a YAML file with all four new fields added. Apply the YAML. Confirm that the FMA in the UI reflects all fields.\n2. Remove all but the install script, revise the install script, and re-apply. Confirm that the FMA in the UI blanks out pre-install query/post-install script, revises the install script, and reverts to the manifest version of the uninstall script.\n3. Remove the install script field in YAML and re-apply. Confirm that the FMA in the UI reverts to the manifest version of the install script.\n\n### Confirmation\n\u003c!-- The engineer responsible for implementing this user story completes the test plan before moving to the \"Ready for QA\" column. --\u003e\n\n1. [ ] Engineer: Added comment to user story confirming successful completion of test plan.\n2. [ ] QA: Added comment to user story confirming successful completion of test plan.\n",
          "number": 25636,
          "repository": "fleetdm/fleet",
          "title": "GitOps: Override Fleet-maintained app install/uninstall scripts",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/25636"
        },
        "estimate": 3,
        "id": "PVTI_lADOBDAnic4A4BEUzgdCoeo",
        "labels": [
          "story",
          ":release",
          "customer-schur",
          "customer-eponym",
          "customer-easterwood",
          "customer-numa",
          "customer-mozartia",
          "customer-gispen",
          "customer-fourier",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-29T00:00:00Z",
          "title": "4.73.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "status": "✔️Awaiting QA",
        "title": "GitOps: Override Fleet-maintained app install/uninstall scripts",
        "comments": [
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Reviewing the #25499 recording from yesterday, the topic came up of what is/isn't editable for FMAs in the Edit UI.\n\nThinking that now that we have install scripts for FMAs on GitHub, and those scripts can be pushed as part of an FMA update as of this ticket, we remove editability for install and uninstall scripts in particular. If we got something wrong, we can link users to the FMA slug to suggest a change. This has the side effect of notifying us when we have something wrong, versus an IT admin performing a one-off fix that we don't know anything about.\n\nPost-install script and pre-install query would stay editable since we don't have defaults for either.\n\nIf we need an escape hatch, we can offer admins the ability to unlink the package from being Fleet-maintained, at which point it behaves as a custom package (and we'd switch any Fleet-maintained policies to \"you're on your own for this\" mode at the same time). If an admin wants to opt back into us maintaining the package, they can delete/re-add, which is relatively low-effort since we're handling the heavy parts of config."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Per design review today, we'll keep all scripts editable, and overwrite them when we import a new FMA version."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Self-assigning this to give @jahzielv more room this sprint."
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "@noahtalerman @eugkuo this was requested by `customer-numa` yesterday.  I think we should prioritize this in the next design sprint.\n\nCC: @zayhanlon @ddribeiro "
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "@eugkuo during feature fest, we decided to come back to this in a future design sprint. Prioritizing other work."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "One tricky bit on FMA updates is for (un)install scripts where the script needs to be modified by the IT admin to e.g. add a license key as an argument to a vendor-supplied install script. Idea is that these actions can't be performed in a post-install script (which we don't manage with FMAs), so an IT admin would need to munge the install script, and on an update of the app we'd need to either give them a heads-up or incorporate their changes.\n\n@mostlikelee you mentioned that this is already an issue with Cloudflare WARP for a license key or similar. Do you have docs on that? I saw #24216 and [Cloudflare's manual deployment docs](https://developers.cloudflare.com/cloudflare-one/connections/connect-devices/warp/deployment/manual-deployment/), but the former doesn't appear to be configurable via the CLI, and the latter references a CLI that could be included in a post-install script (similar to what we see with SentinelOne configuration).\n\nSo either I'm missing something or there's probably a better example out there of install/uninstall (not post-install) scripts that would need to be tweaked by an IT admin after an FMA is imported, and we can use that example to determine how we can reasonably persist config across FMA updates (e.g. via extra env vars)."
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "@noahtalerman the customer ask here is to manage this via gitops to support the following workflow:\n1. customer updates app to latest version on canary team\n2. customer deploys app to hosts on canary team\n3. customer tests app on canary team\n4. customer deploys app to production team\n\nMy proposal:\n\n1. Add a `version` field to FMAs:\n```\nfleet_maintained_apps:\n    - slug: zoom/darwin\n      self_service: true\n      version: 1.0.1\n      categories:\n        - Productivity\n```\n\n2.  Add an option to bump versions in gitops config:\n\nbump all apps in file:\n```\nfleetctl gitops --bump-fma -f canary.yml\n```\nbump one app in file:\n```\nfleetctl gitops --bump-fma --app zoom/darwin -f canary.yaml\n```"
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "@allenhouchins what do you think ^"
          },
          {
            "author": {
              "login": "allenhouchins"
            },
            "body": "@noahtalerman I added a note for us to start with this at tomorrow's unpacking meeting. "
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "@mostlikelee just chatted with @allenhouchins and we think the IT admin expectation is that Fleet, on each GitOps run, will just update any out-of-date Fleet-maintained apps.\n\nMeaning, we think we don't want to add any new keys as part of this story. When we ship this improvement, Fleet's Fleet-maintained apps should update without updating the [`it-and-security/` YAML](https://github.com/fleetdm/fleet/blob/main/it-and-security/teams/workstations.yml).\n\nThe best practice for the staged rollout will be to update the canary team's automatic install policy first and then the production team's policy after things look good.\n\nCheck out the \"Unpacking the why\" recording from 2025-06-24 for more context."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@noahtalerman Flagging the suggested behavior as a BC break from the previously decided implementation. Existing impl doesn't change FMAs once they've been uploaded, and we intentionally opted into that when we spec'd FMAs-in-GitOps the first time.\n\nAdding `version: latest` as an opt-in for the logic you're describing resolves the BC break."
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "\u003e the suggested behavior as a BC break from the previously decided implementation\n\n@iansltx that's ok. I think we want to be brave here and update the default behavior now that we understand what the IT admin expects.\n\nThat's why we marked these features as experimental!"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@noahtalerman Given this change in expected development for this story, does it still make sense to lump script edits in here? At this point those changes are orthogonal to what we'd need to do to switch from \"never update if the FMA is already in the library\" to \"always update.\"\n\nIf script override ability was discussed and determined to be required as part of this behavior change in Unpacking the why, fair enough, though without that scope this story is nearly spec-complete."
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "\u003e The best practice for the staged rollout will be to update the canary team's automatic install policy first and then the production team's policy after things look good.\n\nHere is a scenario that may occur if we don't support version pinning:\n1. Prod team is currently getting patched to MyApp v1.0 via policy (rule: install if version less than 1.0)  \n2. MyApp v2.0 is added to canary team\n3. MyApp 2.0 is deployed to canary team via policy (rule: install if version less than 2.0) and tests successfully\n4. MyApp updated to 3.0 in FMA catalog\n5. Cannot add 2.0 to prod because it's no longer available in FMA catalog.  MyApp 3.0 cannot be deployed to prod because it's not tested.\n6. Gitops updates MyApp to 3.0 in canary\n7.  Wait for 3.0 to finish deploying again to canary team\n8.  GitOps run updates app to 4.0\n9.  etc... customer can never deploy to prod because canary is updating too frequently\n\nOne workaround here is to not run GitOps unless you plan on bumping FMA versions, but this will block other GitOps runs that have other intentions.\n\nAnother option could be to support a flag that does not bump FMAs (ie.  `fleetctl gitops --no-fma-updates`)\n\n@noahtalerman @allenhouchins \n "
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "\u003e does it still make sense to lump script edits in here? At this point those changes are orthogonal to what we'd need to do to switch from \"never update if the FMA is already in the library\" to \"always update.\"\n\n@iansltx I think we want to keep the script edits as part of this story for now. At least during drafting. Why? To think a bit broader. I don't think we've fully thought through the world in which Fleet-maintained apps are updated but some apps have scripts that are overridden. \n\nDoes Fleet update the package for those apps but leave the scripts alone? I'm thinking probably but worth discussing and putting ourselves in `numa`'s shoes before deciding.\n\nThen, once the designs are settled then we can decide to split it up.\n"
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "\u003e Here is a scenario that may occur if we don't support version pinning\n\nI understand what you're saying @mostlikelee. \n\nI still think we want to update the default behavior to match IT admin expectations: that Fleet, on each GitOps run, will update any out-of-date Fleet-maintained apps.\n\nYou're thinking about the version pinning (version ceiling) problem. I think we want to solve that too."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@noahtalerman Re: updating packages but leaving scripts alone, unless scripts are being explicitly provided we _wouldn't_ want to take that route, because:\n\n1. If we find a bug in our (un)install scripts, we want to be able to broadcast the fix to that bug aloneside other maintained app updates, vs. requiring admins to take manual action. The ability to push bugfixes on scripts was a big reason for the rearchitecture of Fleet-maintained apps that landed in v4.66.\n2. As versions of software get bumped, sometimes what counts as the correct (un)install script changes, so if we bump the software package but not the associated scripts we'll wind up delivering a broken (un)install. Currently, \"sometimes\" is \"all the time\" for MSI uninstall scripts, since we use ProductCode for uninstalls there; without bumping scripts alongside installer packages, as soon as a maintained app's version is bumped the associated uninstall script will silently stop working.\n\nOf the above, reason 2 will come up more often."
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "\u003e Re: updating packages but leaving scripts alone, unless scripts are being explicitly provided we wouldn't want to take that route\n\n@iansltx I think we're saying the same thing!\n\nTo rephrase [my comment above](https://github.com/fleetdm/fleet/issues/25636#issuecomment-3002016399), I think Fleet always updates/fixes scripts if they're not explicitly provided.\n\nFleet only leaves scripts along, but updates packages, if scripts are explicitly provided."
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "@iansltx given the change in scope above, do you think the tshirt size is still an `M`?"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@mostlikelee With revised scope, inclusive of adding script overrides (plus post-install script and pre-install query) this feels like at/just above XS. Hard to call this an S tee-shirt size because S is ~3x the size of XS and swapping default plus adding the requisite gitops params isn't going to take a whole dev-sprint."
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "Decided to push this story (T-shirt size: S) out of the current design sprint because we don't think we'll have space to ship it in 4.72. Here's what we're shipping instead:\n\n- Fleet-maintained apps bugs\n- https://github.com/fleetdm/fleet/issues/30240\n- https://github.com/fleetdm/fleet/issues/27983"
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "Customer feedback:\n\nCan the update mechanism run server side instead? Updating FMAs only during gitops runs will impact processes and how we think about gitops.  ie.  if you want to ensure FMAs update 1x/hr you have to schedule gitops runs (with no yaml changes) at that frequency.\n\ncc: @kennyb-222 "
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "updated the title as this ability already exists for custom packages"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@marko-lisica based on the late, significant scope reduction on https://github.com/fleetdm/fleet/issues/27983, there's now enough backend capacity in the 4.72 sprint to bring this in if it's ready in time (and, with the reduction in scope of this story due to FMAs already being bumped on each GitOps run, T-shirt size is more like an XS, so it's rather easy to fit in). Happy to help get this ready, as the correct scope of work here (we're also missing post-install script and pre-install query) is covered in #30250."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@marko-lisica I believe the above may be ready for User Story Review, depending on your thoughts on the product part of the story description, plus answers to the below questions:\n\n1. Do we want to allow specifying FMA details in a separate file, similar to software packages? I'm assuming not in the YAML PR. If we _do_ want that option, do we want to deprecate the current inline option like we did for software packages, or do we want to keep it since the common case would involve specifying slug, self-service, and nothing else?\n2. Do we want to include pre-install query/post-install script as part of this work? I assumed that we do.\n\nOne caveat: 4.71 docs are out of date with `main` and have conflicts, and my bet is that 4.73 docs are even further behind. Let me know when the 4.73 docs branch is caught up with main/4.71/4.72 and I'll re-roll the YAML PR as needed. It's ready for review as-is (/cc @rachaelshaw) but I expect I'll need to re-roll it, as if I recall correctly the software YAML docs have changed a fair amount recently. The anticipated re-roll won't change the semantics of specified behavior though, so the embedded product decisions can be reviewed now, and exact verbiage can be dialed in post-reroll."
          },
          {
            "author": {
              "login": "marko-lisica"
            },
            "body": "@iansltx This looks good to me! Let's review it once more with Noah today during design review, and I think we can move it to the user story review after that."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Async User Story Review signoffs:\n\n- [x] @mostlikelee \n- [x] @jmwatts "
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "Just one thing from the test plan:\n\u003e Create a YAML file with all four new fields added\n\nthere are only 3 based on the yaml PR, which is correct?\n\n"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@mostlikelee\n\n1. install script\n2. Uninstall script\n3. Pre-install query\n4. Post-install script"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "The YAML PR mentions pre-install query in the description but not the example, matching what we're doing elsewhere."
          }
        ]
      },
      {
        "assignees": [
          "iansltx"
        ],
        "content": {
          "body": "\n## Goal\n\n| User story  |\n|:---------------------------------------------------------------------------|\n| As a user of vulnerability management,\n| I want to see fixed false-positive vulnerabilities cleared as soon as I finish a vulnerabilities cron run\n| so that I can quickly see the results of fixed false-positives.\n\n## Key result\n\nPreventing erroneous customer bug report noise where the solution is \"wait for vulnerabilities to run a few more times\" and speeding up dev/QA of functionality touching vulnerabilities.\n\n## Context\n- Product designer: @iansltx  \u003c!-- Who is the product designer to contact if folks have questions about the UI, CLI, or API changes? --\u003e\n\nOriginally filed as bug #25898, to both mitigate QA overhead for vulnerability fixes and avoid customer back-and-forth e.g. #25571.\n\n## Changes\n\n### Product\n- [x] First draft of test plan added\n- [ ] Other reference documentation changes: Last paragraph of [this section of the vulnerabilities article](https://fleetdm.com/guides/vulnerability-processing#coverage)\n- [ ] Once shipped, requester has been notified\n- [ ] Once shipped, dogfooding issue has been filed\n\n### Engineering\n- [ ] Revise `DeleteOutOfDateVulnerabilities` and `DeleteOutOfDateOSVulnerabilities` in the datastore to clear vulnerabilities updated before a set timestamp, rather than by a lookback period\n- [ ] Get the current time right before `checkNVDVulnerabilities` is called in `scanVulnerabilities` in `cron.go` (probably directly from the database to avoid clock skew issues between app servers and the database) and pass that to the modified `DeleteOutOfDate*Vulnerabilities` calls\n- [x] Test plan is finalized\n\n\u003e ℹ️  Please read this issue carefully and understand it.  Pay [special attention](https://fleetdm.com/handbook/company/development-groups#developing-from-wireframes) to UI wireframes, especially \"dev notes\".\n\n## QA\n\n### Risk assessment\n\n- Requires load testing: No\n- Risk level: Low\n\n### Test plan\n\n1. Introduce a false positive vulnerability (e.g. by reverting a previous false positive fix in the CPE matching rules JSON file).\n2. Run vulnerability scanning.\n3. Confirm that the false positive shows up.\n4. Fix the false positive.\n5. Run vulnerability scanning again.\n6. Confirm that the false positive no longer shows up.\n\n### Testing notes\n\u003c!-- Any additional testing notes relevant to this story or tools required for testing. --\u003e\n\n### Confirmation\n\u003c!-- The engineer responsible for implementing this user story completes the test plan before moving to the \"Ready for QA\" column. --\u003e\n\n1. [ ] Engineer: Added comment to user story confirming successful completion of test plan.\n2. [ ] QA: Added comment to user story confirming successful completion of test plan.\n",
          "number": 26404,
          "repository": "fleetdm/fleet",
          "title": "Clean up timing for clearing stale false-positive vulnerabilities",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/26404"
        },
        "estimate": 1,
        "id": "PVTI_lADOBDAnic4A4BEUzgdCo1s",
        "labels": [
          "story",
          ":release",
          "~engineering-initiated",
          "~vulnerability-management",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-29T00:00:00Z",
          "title": "4.73.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "status": "✔️Awaiting QA",
        "title": "Clean up timing for clearing stale false-positive vulnerabilities",
        "comments": [
          {
            "author": {
              "login": "lukeheath"
            },
            "body": "@iansltx Thanks for following the new [engineering-initiated process](https://fleetdm.com/handbook/engineering#create-an-engineering-initiated-story). This sounds like a good value add effort, so I'm prioritizing for drafting and assigning you as the product designer to complete the [draft an engineering-initiated story](https://fleetdm.com/handbook/engineering#draft-an-engineering-initiated-story) process."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "This actually looks product-complete, so pulling into User Story Review."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Note that per the eng-init section of the handbook, irrelevant product checkboxes were deleted from the issue description."
          },
          {
            "author": {
              "login": "lukeheath"
            },
            "body": "@iansltx One thing I'm not clear on from this ticket is what is the current state? How long does it currently take for the false positive to clear?"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Current state is two hours. See\n\nhttps://github.com/fleetdm/fleet/blob/33a703920378a7084319da99a5af5c52a1cff6a2/articles/vulnerability-processing.md?plain=1#L28\n\n(I have a PR to fix the typo there)\n\nwhich maps to this code:\n\nhttps://github.com/fleetdm/fleet/blob/33a703920378a7084319da99a5af5c52a1cff6a2/server/vulnerabilities/nvd/cve.go#L326-L336"
          },
          {
            "author": {
              "login": "lukeheath"
            },
            "body": "@iansltx Got it. And currently the Fleet cron runs hourly, so this change will take it from up to two hour to up to one hour? "
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@lukeheath (sorry, misunderstood your comment, one moment)"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@lukeheath With this revision, the vulns run after a false positive is fixed would correct the issue. Via cron, that would happen every hour, but you could make it happen more quickly by triggering the job manually."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Hey team! Please [add your planning poker estimate](https://app.zenhub.com/workspaces/Drafting-6192dd66ea2562000faea25c/issues/gh/fleetdm/fleet/26404?planning-poker) with Zenhub @jahzielv @ksykulev"
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "@lukeheath chatted with @mostlikelee and decided to deprioritize this one. We want to get to customer requests first and we need to make some room."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "```go\nnumberOfTimesExistingStaleVulnHandlingIncreasedFrictionOnVulnManagementWork++\n```\n\nFor #28983.\n"
          },
          {
            "author": {
              "login": "jahzielv"
            },
            "body": "yeah I forgot about that this morning: https://fleetdm.slack.com/archives/C086V2QK76X/p1747311488652479"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Ready for async User story review. Whoever signs off on this last, please move this directly to \"Ready for estimate\" and start Planning Poker, as this one's already spec-complete.\n\n- [x] @mostlikelee \n- [x] @jmwatts (you checked the \"test plan finalized\" box back on April 8, and the test plan hasn't been modified since, so...should be good here?)"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "@iansltx yes this one should be good"
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "[planning poker](https://fleetdm.slack.com/archives/C08RXDH5LHZ/p1753214019845799)"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Tested this by inserting an extra `software_cve` entry pointed at a combination of existing CVE and existing software (but a CVE that didn't actually apply to that software), with NVD as the source ID, then ran the cron. Existing vulns stuck around, but my manually inserted false positive didn't. Still traverses the relevant code paths, but took less time to verify."
          }
        ]
      },
      {
        "assignees": [
          "ksykulev"
        ],
        "content": {
          "body": "**Fleet version**: \u003c!-- Copy this from the \"My account\" page in the Fleet UI, or run `fleetctl --version` --\u003e\n4.70.1\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\nThe customer added a software installer with install/uninstall scripts that used Fleet secrets. The secrets were present as gitops env variables, but dry run failed.\n\n\u003cimg width=\"2350\" height=\"1254\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/a4aaca6e-277b-4152-9e97-516ea347fbce\" /\u003e\n\nThe workaround is to use contributor API to add dummy secrets: https://github.com/fleetdm/fleet/blob/main/docs/Contributing/reference/api-for-contributors.md#store-secret-variables\n\n### 🧑‍💻  Steps to reproduce\n\u003c!-- Provide step-by-step actions of how to recreate this bug in a clean install of Fleet. (This helps others understand and fix it more quickly.) --\u003e\n1. Create software installer with install/uninstall scripts with secrets.\n2. Make sure the secrets are NOT saved in the Fleet DB `secret_variables`\n3. Run gitops dry run.\n\n### 🕯️ More info _(optional)_\n\u003c!-- Add any additional details you think could be relevant to solving or reproducing the bug (e.g., \"this does not reproduce when...\") --\u003e\nN/A\n\n\u003c!-- If this is a performance issue, follow these steps to generate and attach a debug archive: https://fleetdm.com/docs/using-fleet/monitoring-fleet#debugging-performance-issues --\u003e\n\n\u003c!-- ### 🛠️ To fix --\u003e\n\u003c!-- If this bug requires additional product design work, uncomment the heading above and add instructions to fix, Figma link, etc. here once design changes are settled. --\u003e\n\u003c!-- Product designer: _________________________ --\u003e \u003c!-- Who is the product designer to contact if folks have questions about this fix? --\u003e\n",
          "number": 30853,
          "repository": "fleetdm/fleet",
          "title": "Unable to apply software installers with Fleet secrets via GitOps",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/30853"
        },
        "estimate": 3,
        "id": "PVTI_lADOBDAnic4A4BEUzgdCxH8",
        "labels": [
          "bug",
          ":release",
          "~released bug",
          "P2",
          "#g-software",
          "prospect-coppelia"
        ],
        "milestone": {
          "dueOn": "2025-08-29T00:00:00Z",
          "title": "4.73.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "status": "✔️Awaiting QA",
        "title": "Unable to apply software installers with Fleet secrets via GitOps",
        "comments": [
          {
            "author": {
              "login": "getvictor"
            },
            "body": "@mostlikelee I believe this is a P1 since this feature is broken right now. However, I've marked it a P2 since customer was OK waiting until 4.73 for the fix.\n\n@harrisonravazzolo Please add the customer label since I couldn't find it."
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "planning poker: https://fleetdm.slack.com/archives/C08RXDH5LHZ/p1752521340977199"
          }
        ]
      },
      {
        "assignees": [
          "ksykulev"
        ],
        "content": {
          "body": "To track carry over work",
          "number": 31334,
          "repository": "fleetdm/fleet",
          "title": "FMA automation carryover",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/31334"
        },
        "estimate": 2,
        "id": "PVTI_lADOBDAnic4A4BEUzgdC06A",
        "labels": [
          ":release",
          "~sub-task",
          "#g-software"
        ],
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "status": "Done",
        "title": "FMA automation carryover"
      },
      {
        "assignees": [
          "iansltx"
        ],
        "content": {
          "body": "**Fleet version**: 4.70 RC\n\nSpotted in dogfood logs from June 27 2025, so probably not running the final released build\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\nSaw the following message while reviewing dogfood logs with @MagnusHJensen . Also saw similar errors for installers 6189 and 6190.\n{\"component\":\"uninstall_software_migration\",\"cron\":\"uninstall_software_migration\",\"err\":\"unsupported file type\",\"level\":\"warn\",\"msg\":\"extracting metadata from installer\",\"software_installer_id\":6187,\"storage_id\":\"72b23a02f937043caa03ebf88b83a2651249b68c00590d13dd835bcd73d46dd7\",\"ts\":\"2025-06-27T21:34:33.733540456Z\"}\n\nThese installers represent the following apps:\n6187 Brave-Browser-arm64.dmg 1.79.126.0 \n6189 Docker.dmg 4.42.1\n6190 MicrosoftEdge-137.0.3296.93.dmg\n\n### 🧑‍💻  Steps to reproduce\n1. Upload a variety of package types\n2. Run `fleetctl trigger --name uninstall_software_migration` and watch the logs for warnings\n\n### 🕯️ More info _(optional)_\nLink to relevant slack thread: https://fleetdm.slack.com/archives/C071NNMSP2R/p1751552544401869\nThe following log insights query will find them:\n```\nfields @timestamp, @message, @logStream, @log\n| filter ispresent(error) or ispresent(err) or level = 'error'\n| filter @message like /uninstall_software_migration/\n| filter level != 'debug'\n| filter level != 'info'\n| sort @timestamp desc\n| limit 10000\n```\n\n\u003c!-- If this is a performance issue, follow these steps to generate and attach a debug archive: https://fleetdm.com/docs/using-fleet/monitoring-fleet#debugging-performance-issues --\u003e\n\n\u003c!-- ### 🛠️ To fix --\u003e\n\u003c!-- If this bug requires additional product design work, uncomment the heading above and add instructions to fix, Figma link, etc. here once design changes are settled. --\u003e\n\u003c!-- Product designer: _________________________ --\u003e \u003c!-- Who is the product designer to contact if folks have questions about this fix? --\u003e\n",
          "number": 30565,
          "repository": "fleetdm/fleet",
          "title": "Warning from uninstall_software_migration cron: unsupported file type",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/30565"
        },
        "estimate": 1,
        "id": "PVTI_lADOBDAnic4A4BEUzgdCos4",
        "labels": [
          "bug",
          ":release",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-29T00:00:00Z",
          "title": "4.73.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "status": "✔️Awaiting QA",
        "title": "Warning from uninstall_software_migration cron: unsupported file type",
        "comments": [
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "Reproduced. Had many installers uploaded to my fleet instance. Ran `fleetctl trigger --name uninstall_software_migration` and observed the following output:\n\n\n```\nlevel=debug ts=2025-07-07T15:20:22.899346Z component=http user=admin@fake.com method=POST uri=\"/api/latest/fleet/trigger?name=uninstall_software_migration\" took=8.484917ms\nlevel=debug ts=2025-07-07T15:20:22.90024Z cron=uninstall_software_migration component=uninstall_software_migration schedule=uninstall_software_migration instanceID=\"zzLKQdD0TOOTJLjckKrXV61MNHMn52+qHzuEhS5Wp0UuZvFUuRptmwjW0Eae1vfP5moE7h5kdiQqAlsdbTpXLQ==\" msg=\"done, trigger received\"\nlevel=info ts=2025-07-07T15:20:22.915365Z cron=uninstall_software_migration component=uninstall_software_migration schedule=uninstall_software_migration instanceID=\"zzLKQdD0TOOTJLjckKrXV61MNHMn52+qHzuEhS5Wp0UuZvFUuRptmwjW0Eae1vfP5moE7h5kdiQqAlsdbTpXLQ==\" status=pending\nlevel=debug ts=2025-07-07T15:20:22.915439Z cron=uninstall_software_migration component=uninstall_software_migration schedule=uninstall_software_migration instanceID=\"zzLKQdD0TOOTJLjckKrXV61MNHMn52+qHzuEhS5Wp0UuZvFUuRptmwjW0Eae1vfP5moE7h5kdiQqAlsdbTpXLQ==\" msg=starting jobID=uninstall_software_migration\nSDK 2025/07/07 10:20:22 WARN Response has no supported checksum. Not validating response payload.\nSDK 2025/07/07 10:20:23 WARN Response has no supported checksum. Not validating response payload.\nSDK 2025/07/07 10:20:23 WARN Response has no supported checksum. Not validating response payload.\nSDK 2025/07/07 10:20:23 WARN Response has no supported checksum. Not validating response payload.\nSDK 2025/07/07 10:20:23 WARN Response has no supported checksum. Not validating response payload.\nSDK 2025/07/07 10:20:23 WARN Response has no supported checksum. Not validating response payload.\nSDK 2025/07/07 10:20:23 WARN Response has no supported checksum. Not validating response payload.\nSDK 2025/07/07 10:20:23 WARN Response has no supported checksum. Not validating response payload.\nlevel=warn ts=2025-07-07T15:20:24.777168Z cron=uninstall_software_migration component=uninstall_software_migration msg=\"extracting metadata from installer\" software_installer_id=543 storage_id=no_check err=\"unsupported file type\"\nSDK 2025/07/07 10:20:24 WARN Response has no supported checksum. Not validating response payload.\nSDK 2025/07/07 10:20:24 WARN Response has no supported checksum. Not validating response payload.\nSDK 2025/07/07 10:20:24 WARN Response has no supported checksum. Not validating response payload.\nlevel=warn ts=2025-07-07T15:20:25.682907Z cron=uninstall_software_migration component=uninstall_software_migration msg=\"extracting metadata from installer\" software_installer_id=544 storage_id=no_check err=\"unsupported file type\"\nlevel=warn ts=2025-07-07T15:20:28.107299Z cron=uninstall_software_migration component=uninstall_software_migration msg=\"extracting metadata from installer\" software_installer_id=545 storage_id=3ccb062c081bd7ac5b8a9183ebb6a52cfd6046411e6d51a89f12e132b6672f63 err=\"unsupported file type\"\nlevel=warn ts=2025-07-07T15:20:28.308374Z cron=uninstall_software_migration component=uninstall_software_migration msg=\"extracting metadata from installer\" software_installer_id=547 storage_id=67dfa6f184794373a490d5d7ae1ae00b5db80d710c946f8be1ee210d12e54a05 err=\"unsupported file type\"\nlevel=info ts=2025-07-07T15:20:28.314756Z cron=uninstall_software_migration component=uninstall_software_migration schedule=uninstall_software_migration instanceID=\"zzLKQdD0TOOTJLjckKrXV61MNHMn52+qHzuEhS5Wp0UuZvFUuRptmwjW0Eae1vfP5moE7h5kdiQqAlsdbTpXLQ==\" status=completed\nlevel=debug ts=2025-07-07T15:20:28.317486Z cron=uninstall_software_migration component=uninstall_software_migration schedule=uninstall_software_migration instanceID=\"zzLKQdD0TOOTJLjckKrXV61MNHMn52+qHzuEhS5Wp0UuZvFUuRptmwjW0Eae1vfP5moE7h5kdiQqAlsdbTpXLQ==\" msg=\"23h55m27.682518s remaining until next tick\"\n```\n\n\nThose ids correspond to:\n```\nmysql\u003e select id, filename, extension from software_installers where id in (543, 544, 545, 547);\n+-----+----------------------------------------+-----------+\n| id  | filename                               | extension |\n+-----+----------------------------------------+-----------+\n| 543 | googlechrome.dmg                       | dmg       |\n| 544 | googlechromestandaloneenterprise64.msi | msi       |\n| 545 | AcroRdrDC_2500120529_MUI.dmg           | dmg       |\n| 547 | nice-dcv-viewer-2024.0.8004.arm64.dmg  | dmg       |\n+-----+----------------------------------------+-----------+\n4 rows in set (0.01 sec)\n```\n\nI noticed earlier occurrences of this in my logs as well, those packages corresponded to:\n```\n+-----+--------------------------------+-----------+\n| id  | filename                       | extension |\n+-----+--------------------------------+-----------+\n| 341 | A+ Suite for Mac_sign.pkg      | pkg       |\n| 342 | AcrobatUpd10116.pkg            | pkg       |\n| 343 | AddWindowsExplorerShortcut.exe | exe       |\n| 345 | Airtame.pkg                    | pkg       |\n| 346 | AutodeskFusion-005.pkg         | pkg       |\n| 347 | AutoPkg-2.7.3.pkg              | pkg       |\n| 348 | AWS VPN Client.pkg             | pkg       |\n| 349 | AWS_VPN_Client.msi             | msi       |\n| 351 | BoxDrive.pkg                   | pkg       |\n| 353 | cli-arm64.exe                  | exe       |\n| 354 | cli.exe                        | exe       |\n| 355 | CloudflareWARP.pkg             | pkg       |\n| 358 | Egnyte Connect-3.14.18.pkg     | pkg       |\n| 360 | Elmedia Player-8.22.pkg        | pkg       |\n+-----+--------------------------------+-----------+\n```\n\nSo, not certain this is related to a specific package type. "
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@jmwatts FWIW `no_check` in the DB was a different issue (fixed in 4.71 or 4.72; we shouldn't have anything with a storage ID of `no_check`). Other errors were likely because the DB had software in it that wasn't in object storage. Fix I just PR'd fixed the original issue; the other ones look to be environmental to your local and/or resolved elsewhere already."
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "merged before kickoff, so i'm assigning this to sprint 44.  will do the same next sprint so it's consistent."
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "changing my mind here. this wont actually affect the burndown chart.  moving back to 45"
          }
        ]
      },
      {
        "assignees": [
          "RachelElysia"
        ],
        "content": {
          "body": "## Related user story\n\n#27983\n\n## Task\n\nWrite a feature guide for self-service updates, linked from [the existing self-service guide](https://fleetdm.com/guides/software-self-service). We'll want the extra space of a full guide to walk through how we determine what shows up for updates I think, versus adding update references as a subheading for the existing article.\n\nCriteria are in Figma dev notes + [the self-service update flowchart](https://drive.google.com/file/d/1dtCo-CzVIcJkk1GIDHMKflqu6mSNyzfw/view?usp=sharing)\n\n## Condition of satisfaction\n\nGuide is written and merged into the appropriate release docs branch.",
          "number": 29914,
          "repository": "fleetdm/fleet",
          "title": "Self-Service Updates: Guide/Docs",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/29914"
        },
        "estimate": 2,
        "id": "PVTI_lADOBDAnic4A4BEUzgcX120",
        "labels": [
          ":improve documentation",
          ":release",
          "~sub-task",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-08T00:00:00Z",
          "title": "4.72.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "status": "Done",
        "title": "Self-Service Updates: Guide/Docs"
      },
      {
        "assignees": [
          "iansltx"
        ],
        "content": {
          "number": 31319,
          "repository": "fleetdm/fleet",
          "title": "Eng DRI: Custom Icons",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/31319"
        },
        "estimate": 5,
        "id": "PVTI_lADOBDAnic4A4BEUzgdCnk8",
        "labels": [
          ":release",
          "~timebox",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-29T00:00:00Z",
          "title": "4.73.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "status": "Done",
        "title": "Eng DRI: Custom Icons"
      },
      {
        "assignees": [
          "jahzielv"
        ],
        "content": {
          "body": "## Related user story\n\n#30738.\n\n## Task\n\nImplement the specified API so that vulnerabilities show up in the OS list endpoint for Linux hosts, and kernels show up on the OS entity endpoint, with host counts reflecting only hosts with that combination of OS and kernel software (filtering out hosts with the same kernel software but a different OS version).\n\nThis includes validating which software packages correspond to kernels on all supported Linux distributions, adding an is-kernel flag on software titles, populating the flag on software ingestion, and setting up the flag when running the database migration.\n\nPotentially helpful query:\n\n```\nSELECT DISTINCT software_cve.cve\nFROM software_cve\nJOIN software ON software.id = software_cve.software_id\nJOIN software_titles ON software_titles.id = software.title_id AND software.is_kernel = TRUE\nJOIN host_software ON host_software.software_id = software.id\nJOIN host_operating_system ON host_operating_system.host_id = host_software.host_id\nJOIN operating_systems ON operating_systems.id = host_operating_system\nWHERE [operating system query]\n```\n\n## Condition of satisfaction\n\nAPI responses are available, in unoptimized form; data should be pulled in realtime via a bunch of joins; optimization is its own subtask.\n\nInventorying kernels that we don't already see in software inventory via revised detail queries is out of scope, though if we can't get kernel information for an OS, document it on the parent issue.\n\n- [ ] Database schema migrations: Add an is_kernel column to software_titles and populate as appropriate for all supported Linux distributions (test with a VM for each; kernels won't show up in containers). Going forward, is_kernel should be set when a software title is created.",
          "number": 31213,
          "repository": "fleetdm/fleet",
          "title": "Linux Vulns: API changes",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/31213"
        },
        "estimate": 8,
        "id": "PVTI_lADOBDAnic4A4BEUzgdCpoc",
        "labels": [
          "~backend",
          ":release",
          "~sub-task",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-29T00:00:00Z",
          "title": "4.73.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "status": "✔️Awaiting QA",
        "title": "Linux Vulns: API changes",
        "comments": [
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "[planning poker](https://fleetdm.slack.com/archives/C08RXDH5LHZ/p1753366962030809)"
          }
        ]
      },
      {
        "assignees": [
          "jahzielv"
        ],
        "content": {
          "body": "### 💥  Actual behavior\n\nWinGet based Chrome FMAs refer to a non-versioned download URL, so the latest version of Chrome gets downloaded rather than the version specified in the manifest we pulled. This means that the hash of the installer won't match if we don't immediately detect and merge an update to the installer in our own manifests, if we specify a hash. #27755 avoids this by dropping hash checking there as well, but this means that we don't verify that the installer downloaded matches the one we expected.\n\n### 🧑‍💻  Steps to reproduce\n\n1. Point to a non-current Chrome Windows FMA manifest with a hash specified (anything at or earlier than April 1 ~3pm CDT).\n2. Attempt to add the Chrome Windows FMA.\n\n### 🛠️ To fix\n\nEXE versions of Chrome are available that include version in the URL. Tradeoff is those EXEs will need a custom install script, and may not include an UpgradeCode for building a version-agnostic uninstall script.",
          "number": 27756,
          "repository": "fleetdm/fleet",
          "title": "🪲Windows Chrome FMAs don't have hashes specified in manifests",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/27756"
        },
        "estimate": 2,
        "id": "PVTI_lADOBDAnic4A4BEUzgcX6m4",
        "labels": [
          "bug",
          "~backend",
          ":release",
          "~released bug",
          "#g-software",
          "~qa-on-branch"
        ],
        "milestone": {
          "dueOn": "2025-08-08T00:00:00Z",
          "title": "4.72.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "80d566cb",
          "startDate": "2025-07-07",
          "title": "Sprint 44"
        },
        "status": "✅ Ready for release",
        "title": "🪲Windows Chrome FMAs don't have hashes specified in manifests",
        "comments": [
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Need to decide on a desired fix here. Only thing I'm sure about on my estimate is doing this for Windows, and I'm adding padding for macOS."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Hey team! Please [add your planning poker estimate](https://app.zenhub.com/workspaces/Drafting-6192dd66ea2562000faea25c/issues/gh/fleetdm/fleet/27756?planning-poker) with Zenhub @jahzielv @ksykulev"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Per discussion yesterday, split off the macOS work; this is now a Windows-only ticket, and was already estimated as such."
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "**QA Notes**\n\n- [x] Chrome can be added to library as FMA\n- [x] Chrome is added as .exe file, version 138.0.7204.158\n- [x] Chrome installs successfully on Windows host\n- [x] Chrome launches successfully\n- [x] Chrome uninstalls successfully on host\n- [x] Activity items are created"
          }
        ]
      },
      {
        "assignees": [
          "iansltx"
        ],
        "content": {
          "body": "**Fleet version**: Latest on dogfood\n\n**Web browser and operating system**: Any\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\nThe default uninstall script that Fleet provides for msi custom packages, executes correctly (uninstalls the software) but outputs the following error:\n`script execution error: exec: WaitDelay expired before I/O complete`\n\nThis is because the command to execute the uninstall is not finishing before the script attempts to post the exit code and exit the script. \n\n### 🧑‍💻  Steps to reproduce\n\u003c!-- Provide step-by-step actions of how to recreate this bug in a clean install of Fleet. (This helps others understand and fix it more quickly.) --\u003e\n1. Upload an msi custom package\n2. Install the software\n3. Run the uninstall script and observe the error\n\n### 🕯️ More info _(optional)_\n\u003c!-- Add any additional details you think could be relevant to solving or reproducing the bug (e.g., \"this does not reproduce when...\") --\u003e\n\n\u003cimg width=\"759\" height=\"405\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/98b5e423-6729-44fb-bf9b-447e5d94865d\" /\u003e\n\n ### 🛠️ To fix ",
          "number": 31077,
          "repository": "fleetdm/fleet",
          "title": "Fleet provided uninstall script for msi custom packages works but outputs errors",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/31077"
        },
        "estimate": 1,
        "id": "PVTI_lADOBDAnic4A4BEUzgcz8Es",
        "labels": [
          "bug",
          ":release",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-08T00:00:00Z",
          "title": "4.72.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "80d566cb",
          "startDate": "2025-07-07",
          "title": "Sprint 44"
        },
        "status": "✅ Ready for release",
        "title": "Fleet provided uninstall script for msi custom packages works but outputs errors",
        "comments": [
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Self-assigning this and pulling it onto the software release board as this interacts with #27758. Will set up a separate PR for FLeet-maintained apps, which will need this same fix, so there's less that needs to be QA'd on-branch."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Moving to In review because there are two PRs and one hasn't yet been approved, even though the whole thing has been QA'd."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Both PRs are merged. FMA updates (for Box/WARP) are now live. Custom package updates will be live in 4.72.0 alongside the other uninstall improvements."
          }
        ]
      },
      {
        "assignees": [
          "ksykulev"
        ],
        "content": {
          "body": "**Fleet version**: 4.71.0\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\nSoftware shows in Inventory tab even though it has not been installed \n\n\u003cimg width=\"1482\" height=\"581\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/bc8ccb34-503b-4421-b145-e34db2e9541d\" /\u003e\n\u003cimg width=\"1485\" height=\"623\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/0c4c5159-d175-434b-83e1-f01c464f2391\" /\u003e\n\nThe software also shows in My device \u003e\u003e Software tab\n\n\u003cimg width=\"1143\" height=\"675\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/3769f882-99f2-46c1-84b6-5c316cbdf730\" /\u003e\n\n### 🧑‍💻  Steps to reproduce\n\u003c!-- Provide step-by-step actions of how to recreate this bug in a clean install of Fleet. (This helps others understand and fix it more quickly.) --\u003e\n1. Add software to the team's library\n2. From the Host record \u003e\u003e Software \u003e\u003e Library tab, click Install\n3. Before the software has been installed (or after a failed install) go to the Host record \u003e\u003e Software \u003e\u003e Inventory tab\n\n\n### 🕯️ Expected behavior\nSoftware should not show on the Inventory tab unless it is installed on the host. \n\n\u003c!-- If this is a performance issue, follow these steps to generate and attach a debug archive: https://fleetdm.com/docs/using-fleet/monitoring-fleet#debugging-performance-issues --\u003e\n\n\u003c!-- ### 🛠️ To fix --\u003e\n\u003c!-- If this bug requires additional product design work, uncomment the heading above and add instructions to fix, Figma link, etc. here once design changes are settled. --\u003e\n\u003c!-- Product designer: _________________________ --\u003e \u003c!-- Who is the product designer to contact if folks have questions about this fix? --\u003e\n",
          "number": 30747,
          "repository": "fleetdm/fleet",
          "title": "Pending and failed software installs show in Host \u003e\u003e Software \u003e\u003e Inventory tab",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/30747"
        },
        "estimate": 3,
        "id": "PVTI_lADOBDAnic4A4BEUzgcdwYg",
        "labels": [
          "bug",
          ":release",
          "~released bug",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-08T00:00:00Z",
          "title": "4.72.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "80d566cb",
          "startDate": "2025-07-07",
          "title": "Sprint 44"
        },
        "status": "✅ Ready for release",
        "title": "Pending and failed software installs show in Host \u003e\u003e Software \u003e\u003e Inventory tab",
        "comments": [
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "changing the status to a released bug as we can duplicate this behavior in the API on an earlier version.  because this bug is now a lot more prominent after UI changes, we are prioritizing this for 4.72.0"
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "blocked until we discuss API changes on Friday"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "**QA Notes**\n\nConfirmed software is no longer showing when:\n- It is not currently installed on the host\n- It is pending install or it has failed the install\n\nChecked both in the Self service software tab and on the Host \u003e\u003e Software \u003e\u003e Inventory tab"
          }
        ]
      },
      {
        "assignees": [
          "iansltx"
        ],
        "content": {
          "body": "**Fleet version**: v4.65.0\n**Web browser and operating system**: \u003c!-- e.g. Chrome 88.0.4324 running on macOS --\u003e\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\n\u003c!-- What did you see?  Paste a screenshot, include a 30s video, or write 1-2 sentences describing the issue you observed. --\u003e\nAPI call:\n`\n/api/latest/fleet/vulnerabilities?team_id=8\u0026order_key=hosts_count\u0026order_direction=desc\u0026page=0\u0026per_page=20\u0026exploit=true\u0026query=202`\n(Yes, 202 is the query, I was going for a year and just typed 202)\n\nAPI returning:\n```\n{\n  \"vulnerabilities\": [\n    {\n      \"cve\": \"CVE-2024-44308\",\n      \"details_link\": \"https://nvd.nist.gov/vuln/detail/CVE-2024-44308\",\n      \"cvss_score\": 8.8,\n      \"epss_probability\": 0.0549,\n      \"cisa_known_exploit\": true,\n      \"cve_published\": \"2024-11-20T00:15:00Z\",\n      \"cve_description\": \"The issue was addressed with improved checks. This issue is fixed in Safari 18.1.1, iOS 17.7.2 and iPadOS 17.7.2, macOS Sequoia 15.1.1, iOS 18.1.1 and iPadOS 18.1.1, visionOS 2.1.1. Processing maliciously crafted web content may lead to arbitrary code execution. Apple is aware of a report that this issue may have been actively exploited on Intel-based Mac systems.\",\n      \"hosts_count\": 50,\n      \"hosts_count_updated_at\": \"2025-03-27T17:06:29Z\",\n      \"created_at\": \"2024-12-17T18:25:02Z\"\n    },\n    {\n      \"cve\": \"CVE-2025-24201\",\n      \"details_link\": \"https://nvd.nist.gov/vuln/detail/CVE-2025-24201\",\n      \"cvss_score\": 8.8,\n      \"epss_probability\": 0.00206,\n      \"cisa_known_exploit\": true,\n      \"cve_published\": \"2025-03-11T18:15:00Z\",\n      \"cve_description\": \"An out-of-bounds write issue was addressed with improved checks to prevent unauthorized actions. This issue is fixed in visionOS 2.3.2, iOS 18.3.2 and iPadOS 18.3.2, macOS Sequoia 15.3.2, Safari 18.3.1. Maliciously crafted web content may be able to break out of Web Content sandbox. This is a supplementary fix for an attack that was blocked in iOS 17.2. (Apple is aware of a report that this issue may have been exploited in an extremely sophisticated attack against specific targeted individuals on versions of iOS before iOS 17.2.).\",\n      \"hosts_count\": 50,\n      \"hosts_count_updated_at\": \"2025-03-27T17:06:29Z\",\n      \"created_at\": \"2025-03-12T14:06:31Z\"\n    },\n    {\n      \"cve\": \"CVE-2025-24085\",\n      \"details_link\": \"https://nvd.nist.gov/vuln/detail/CVE-2025-24085\",\n      \"cvss_score\": 7.8,\n      \"epss_probability\": 0.07839,\n      \"cisa_known_exploit\": true,\n      \"cve_published\": \"2025-01-27T22:15:00Z\",\n      \"cve_description\": \"A use after free issue was addressed with improved memory management. This issue is fixed in visionOS 2.3, iOS 18.3 and iPadOS 18.3, macOS Sequoia 15.3, watchOS 11.3, tvOS 18.3. A malicious application may be able to elevate privileges. Apple is aware of a report that this issue may have been actively exploited against versions of iOS before iOS 17.2.\",\n      \"hosts_count\": 50,\n      \"hosts_count_updated_at\": \"2025-03-27T17:06:29Z\",\n      \"created_at\": \"2025-01-28T15:26:19Z\"\n    },\n    {\n      \"cve\": \"CVE-2024-23222\",\n      \"details_link\": \"https://nvd.nist.gov/vuln/detail/CVE-2024-23222\",\n      \"cvss_score\": 8.8,\n      \"epss_probability\": 0.00132,\n      \"cisa_known_exploit\": true,\n      \"cve_published\": \"2024-01-23T01:15:00Z\",\n      \"cve_description\": \"A type confusion issue was addressed with improved checks. This issue is fixed in iOS 17.3 and iPadOS 17.3, macOS Sonoma 14.3, tvOS 17.3. Processing maliciously crafted web content may lead to arbitrary code execution. Apple is aware of a report that this issue may have been exploited.\",\n      \"hosts_count\": 49,\n      \"hosts_count_updated_at\": \"2025-03-27T17:06:29Z\",\n      \"created_at\": \"2024-12-30T16:25:00Z\"\n    },\n    {\n      \"cve\": \"CVE-2024-23296\",\n      \"details_link\": \"https://nvd.nist.gov/vuln/detail/CVE-2024-23296\",\n      \"cvss_score\": 7.8,\n      \"epss_probability\": 0.05242,\n      \"cisa_known_exploit\": true,\n      \"cve_published\": \"2024-03-05T20:16:00Z\",\n      \"cve_description\": \"A memory corruption issue was addressed with improved validation. This issue is fixed in iOS 17.4 and iPadOS 17.4. An attacker with arbitrary kernel read and write capability may be able to bypass kernel memory protections. Apple is aware of a report that this issue may have been exploited.\",\n      \"hosts_count\": 49,\n      \"hosts_count_updated_at\": \"2025-03-27T17:06:29Z\",\n      \"created_at\": \"2024-12-30T16:25:00Z\"\n    },\n    {\n      \"cve\": \"CVE-2024-23225\",\n      \"details_link\": \"https://nvd.nist.gov/vuln/detail/CVE-2024-23225\",\n      \"cvss_score\": 7.8,\n      \"epss_probability\": 0.05242,\n      \"cisa_known_exploit\": true,\n      \"cve_published\": \"2024-03-05T20:16:00Z\",\n      \"cve_description\": \"A memory corruption issue was addressed with improved validation. This issue is fixed in iOS 16.7.6 and iPadOS 16.7.6, iOS 17.4 and iPadOS 17.4. An attacker with arbitrary kernel read and write capability may be able to bypass kernel memory protections. Apple is aware of a report that this issue may have been exploited.\",\n      \"hosts_count\": 49,\n      \"hosts_count_updated_at\": \"2025-03-27T17:06:29Z\",\n      \"created_at\": \"2024-12-30T16:25:00Z\"\n    },\n    {\n      \"cve\": \"CVE-2023-23397\",\n      \"details_link\": \"https://nvd.nist.gov/vuln/detail/CVE-2023-23397\",\n      \"cvss_score\": 9.8,\n      \"epss_probability\": 0.93567,\n      \"cisa_known_exploit\": true,\n      \"cve_published\": \"2023-03-14T17:15:00Z\",\n      \"cve_description\": \"Microsoft Outlook Elevation of Privilege Vulnerability\",\n      \"hosts_count\": 8,\n      \"hosts_count_updated_at\": \"2025-03-27T17:06:29Z\",\n      \"created_at\": \"2024-12-30T16:24:53Z\"\n    },\n    {\n      \"cve\": \"CVE-2023-35311\",\n      \"details_link\": \"https://nvd.nist.gov/vuln/detail/CVE-2023-35311\",\n      \"cvss_score\": 8.8,\n      \"epss_probability\": 0.24384,\n      \"cisa_known_exploit\": true,\n      \"cve_published\": \"2023-07-11T18:15:00Z\",\n      \"cve_description\": \"Microsoft Outlook Security Feature Bypass Vulnerability\",\n      \"hosts_count\": 8,\n      \"hosts_count_updated_at\": \"2025-03-27T17:06:29Z\",\n      \"created_at\": \"2024-12-30T16:24:56Z\"\n    },\n    {\n      \"cve\": \"CVE-2024-38226\",\n      \"details_link\": \"https://nvd.nist.gov/vuln/detail/CVE-2024-38226\",\n      \"cvss_score\": 7.3,\n      \"epss_probability\": 0.70819,\n      \"cisa_known_exploit\": true,\n      \"cve_published\": \"2024-09-10T17:15:00Z\",\n      \"cve_description\": \"Microsoft Publisher Security Feature Bypass Vulnerability\",\n      \"hosts_count\": 7,\n      \"hosts_count_updated_at\": \"2025-03-27T17:06:29Z\",\n      \"created_at\": \"2024-12-30T16:24:57Z\"\n    },\n    {\n      \"cve\": \"CVE-2023-36761\",\n      \"details_link\": \"https://nvd.nist.gov/vuln/detail/CVE-2023-36761\",\n      \"cvss_score\": 6.5,\n      \"epss_probability\": 0.79089,\n      \"cisa_known_exploit\": true,\n      \"cve_published\": \"2023-09-12T17:15:00Z\",\n      \"cve_description\": \"Microsoft Word Information Disclosure Vulnerability\",\n      \"hosts_count\": 4,\n      \"hosts_count_updated_at\": \"2025-03-27T17:06:29Z\",\n      \"created_at\": \"2024-12-30T16:24:53Z\"\n    },\n    {\n      \"cve\": \"CVE-2024-38189\",\n      \"details_link\": \"https://nvd.nist.gov/vuln/detail/CVE-2024-38189\",\n      \"cvss_score\": 8.8,\n      \"epss_probability\": 0.87181,\n      \"cisa_known_exploit\": true,\n      \"cve_published\": \"2024-08-13T18:15:00Z\",\n      \"cve_description\": \"Microsoft Project Remote Code Execution Vulnerability\",\n      \"hosts_count\": 4,\n      \"hosts_count_updated_at\": \"2025-03-27T17:06:29Z\",\n      \"created_at\": \"2024-12-30T16:24:54Z\"\n    },\n    {\n      \"cve\": \"CVE-2024-21413\",\n      \"details_link\": \"https://nvd.nist.gov/vuln/detail/CVE-2024-21413\",\n      \"cvss_score\": 9.8,\n      \"epss_probability\": 0.92563,\n      \"cisa_known_exploit\": true,\n      \"cve_published\": \"2024-02-13T18:16:00Z\",\n      \"cve_description\": \"Microsoft Outlook Remote Code Execution Vulnerability\",\n      \"hosts_count\": 4,\n      \"hosts_count_updated_at\": \"2025-03-27T17:06:29Z\",\n      \"created_at\": \"2024-12-30T16:24:55Z\"\n    },\n    {\n      \"cve\": \"CVE-2021-42292\",\n      \"details_link\": \"https://nvd.nist.gov/vuln/detail/CVE-2021-42292\",\n      \"epss_probability\": 0.55708,\n      \"cisa_known_exploit\": true,\n      \"cve_published\": \"2021-11-10T01:19:00Z\",\n      \"cve_description\": \"Microsoft Excel Security Feature Bypass Vulnerability\",\n      \"hosts_count\": 4,\n      \"hosts_count_updated_at\": \"2025-03-27T17:06:29Z\",\n      \"created_at\": \"2024-12-30T16:24:55Z\"\n    },\n    {\n      \"cve\": \"CVE-2023-44487\",\n      \"details_link\": \"https://nvd.nist.gov/vuln/detail/CVE-2023-44487\",\n      \"cvss_score\": 7.5,\n      \"epss_probability\": 0.91023,\n      \"cisa_known_exploit\": true,\n      \"cve_published\": \"2023-10-10T14:15:00Z\",\n      \"cve_description\": \"The HTTP/2 protocol allows a denial of service (server resource consumption) because request cancellation can reset many streams quickly, as exploited in the wild in August through October 2023.\",\n      \"hosts_count\": 1,\n      \"hosts_count_updated_at\": \"2025-03-27T17:06:29Z\",\n      \"created_at\": \"2024-12-17T18:25:02Z\"\n    },\n    {\n      \"cve\": \"CVE-2024-44309\",\n      \"details_link\": \"https://nvd.nist.gov/vuln/detail/CVE-2024-44309\",\n      \"cvss_score\": 6.1,\n      \"epss_probability\": 0.00954,\n      \"cisa_known_exploit\": true,\n      \"cve_published\": \"2024-11-20T00:15:00Z\",\n      \"cve_description\": \"A cookie management issue was addressed with improved state management. This issue is fixed in Safari 18.1.1, iOS 17.7.2 and iPadOS 17.7.2, macOS Sequoia 15.1.1, iOS 18.1.1 and iPadOS 18.1.1, visionOS 2.1.1. Processing maliciously crafted web content may lead to a cross site scripting attack. Apple is aware of a report that this issue may have been actively exploited on Intel-based Mac systems.\",\n      \"hosts_count\": 1,\n      \"hosts_count_updated_at\": \"2025-03-27T17:06:29Z\",\n      \"created_at\": \"2024-12-17T18:25:02Z\"\n    },\n    {\n      \"cve\": \"CVE-2025-22226\",\n      \"details_link\": \"https://nvd.nist.gov/vuln/detail/CVE-2025-22226\",\n      \"cvss_score\": 6,\n      \"epss_probability\": 0.08037,\n      \"cisa_known_exploit\": true,\n      \"cve_published\": \"2025-03-04T12:15:00Z\",\n      \"cve_description\": \"VMware ESXi, Workstation, and Fusion contain an information disclosure vulnerability due to an out-of-bounds read in HGFS. A malicious actor with administrative privileges to a virtual machine may be able to exploit this issue to leak memory from the vmx process.\",\n      \"hosts_count\": 1,\n      \"hosts_count_updated_at\": \"2025-03-27T17:06:29Z\",\n      \"created_at\": \"2025-03-05T15:25:02Z\"\n    }\n  ],\n  \"count\": 22,\n  \"counts_updated_at\": \"2025-03-27T17:06:29Z\",\n  \"meta\": {\n    \"has_next_results\": false,\n    \"has_previous_results\": false\n  }\n}\n```\nNote the count says 22, but there's only 16 CVEs\n\n### 🧑‍💻  Steps to reproduce\n\u003c!-- Provide step-by-step actions of how to recreate this bug in a clean install of Fleet. (This helps others understand and fix it more quickly.) --\u003e\n1. Go to Software \u003e Vulnerabilities tab \u003e Add those same filters above, look at count mismatching the vulns\n2. Here's an example: it's showing a count of 100 but there's only 14. https://dogfood.fleetdm.com/software/vulnerabilities?exploit=true\u0026query=2025\u0026order_direction=desc\u0026order_key=hosts_count\u0026page=0\n\n### 🕯️ More info _(optional)_\n\u003c!-- Add any additional details you think could be relevant to solving or reproducing the bug (e.g., \"this does not reproduce when...\") --\u003e\nN/A\n\n\u003c!-- If this is a performance issue, follow these steps to generate and attach a debug archive: https://fleetdm.com/docs/using-fleet/monitoring-fleet#debugging-performance-issues --\u003e\n\n### 🛠️ To fix\nShow correct vulnerability count.",
          "number": 27580,
          "repository": "fleetdm/fleet",
          "title": "🪲Software vuln count off",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/27580"
        },
        "estimate": 2,
        "id": "PVTI_lADOBDAnic4A4BEUzgcX7do",
        "labels": [
          "bug",
          ":release",
          "~released bug",
          "~timebox",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-08T00:00:00Z",
          "title": "4.72.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "80d566cb",
          "startDate": "2025-07-07",
          "title": "Sprint 44"
        },
        "status": "✅ Ready for release",
        "title": "🪲Software vuln count off",
        "comments": [
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Hey team! Please [add your planning poker estimate](https://app.zenhub.com/workspaces/Drafting-6192dd66ea2562000faea25c/issues/gh/fleetdm/fleet/27580?planning-poker) with Zenhub @jahzielv @ksykulev"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "Reproduced in 4.65.0, updated Fleet version"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "Note: QA Wolf reported this as well with #28459\n\n"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "@mostlikelee @eugkuo @RachelElysia is this one relatively easy to fix? This is blocking a QA Wolf test and would be great to have it fixed if we can fit it in. Thanks!"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@jmwatts This is is backend FWIW, and probably not something super obvious on the backend. I _might_ be able to take this later in the sprint (can put it at the top of the Estimated column) but I figure the solution for this won't be trivial."
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "Thanks @iansltx "
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Confirmed the fix by grabbing a copy of the Dogfood DB and running the vulns list endpoint call against it. Pre-fix I was getting an artificially high count. After the fix I got a count that matched the number of rows (one per CVE) returned.\n\nIssue was one of deduplicating rows. Specifically, if a CVE got reported at different times or from different sources we'd get multiple entries. For example, a cross-platform CVE that was reported via OVAL for Linux and NVD for macOS, or a CVE that affected multiple pieces of software, where a host installed a new piece of affected software after the CVE was first found."
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "**QA Notes**\n\nTested a number of different combinations of filters and search terms and confirmed that all counts are now correct."
          }
        ]
      },
      {
        "assignees": [
          "mostlikelee"
        ],
        "content": {
          "body": "\n### Requestor\n\n- Application name: Yubikey Manager\n- Application platform: macOS\n\n---\n\n### Validation\n\n- [X] The following outputs are generated\n        - `/outputs/\u003capp-name\u003e/darwin.json` created\n        - `/outputs/apps.json` updated\n- [X] Manifest name matches osquery `app.name` (macOS) or `programs.name` (Windows)\n- [X] Manifest version scheme matches osquery `app.short_bundle_version` (macOS) or `programs.version` (Windows) version scheme\n- [X] Manifest `unique_identifier` matches osquery `app.bundle_identifier` (macOS only)\n\n### QA\n\n- [X] App adds successfully to team's library\n- [X] App installs successfully on host\n- [X] App opens successfully on host\n- [X] App uninstalls successfully on host\n\n### Icon\n\n- [ ] Icon added to Figma\n- [x] Icon added to Fleet\n- [x] Correct icon appears in the app catalog",
          "number": 30739,
          "repository": "fleetdm/fleet",
          "title": "New FMA: Yubikey manager",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/30739"
        },
        "estimate": 1,
        "id": "PVTI_lADOBDAnic4A4BEUzgcdkTI",
        "labels": [
          "story",
          ":release",
          "#g-software",
          "fma"
        ],
        "milestone": {
          "dueOn": "2025-08-08T00:00:00Z",
          "title": "4.72.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "80d566cb",
          "startDate": "2025-07-07",
          "title": "Sprint 44"
        },
        "status": "✅ Ready for release",
        "title": "New FMA: Yubikey manager",
        "comments": [
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "\u003cimg width=\"362\" height=\"126\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/1daf41fb-0ab0-4db6-b383-297e4afdf4c2\" /\u003e"
          }
        ]
      },
      {
        "assignees": [
          "mostlikelee"
        ],
        "content": {
          "body": "### Requestor\n\n- Application name: iTerm2\n- Application platform: macOS\n\n---\n\n### Validation\n\n- [X] The following outputs are generated\n        - `/outputs/\u003capp-name\u003e/darwin.json` created\n        - `/outputs/apps.json` updated\n- [X] Manifest name matches osquery `app.name` (macOS) or `programs.name` (Windows)\n- [X] Manifest version scheme matches osquery `app.short_bundle_version` (macOS) or `programs.version` (Windows) version scheme\n- [X] Manifest `unique_identifier` matches osquery `app.bundle_identifier` (macOS only)\n\n### QA\n\n- [X] App adds successfully to team's library\n- [X] App installs successfully on host\n- [X] App opens successfully on host\n- [X] App uninstalls successfully on host\n\n### Icon\n\n- [ ] Icon added to Figma\n- [x] Icon added to Fleet\n- [x] Correct icon appears in the app catalog",
          "number": 30724,
          "repository": "fleetdm/fleet",
          "title": "New FMA:  iTerm2",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/30724"
        },
        "estimate": 1,
        "id": "PVTI_lADOBDAnic4A4BEUzgcdAFs",
        "labels": [
          "story",
          ":release",
          "#g-software",
          "fma"
        ],
        "milestone": {
          "dueOn": "2025-08-08T00:00:00Z",
          "title": "4.72.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "80d566cb",
          "startDate": "2025-07-07",
          "title": "Sprint 44"
        },
        "status": "✅ Ready for release",
        "title": "New FMA:  iTerm2",
        "comments": [
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "\u003cimg width=\"355\" height=\"131\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/29f22707-2e02-46c6-981f-fb23ccf38d2b\" /\u003e"
          }
        ]
      },
      {
        "assignees": [
          "mostlikelee"
        ],
        "content": {
          "body": "\n### Requestor\n\n- Application name: Beyond Compare\n- Application platform: macOS\n\n---\n\n### Validation\n\n- [X] The following outputs are generated\n        - `/outputs/\u003capp-name\u003e/darwin.json` created\n        - `/outputs/apps.json` updated\n- [X] Manifest name matches osquery `app.name` (macOS) or `programs.name` (Windows)\n- [X] Manifest version scheme matches osquery `app.short_bundle_version` (macOS) or `programs.version` (Windows) version scheme\n- [X] Manifest `unique_identifier` matches osquery `app.bundle_identifier` (macOS only)\n\n### QA\n\n- [X] App adds successfully to team's library\n- [X] App installs successfully on host\n- [X] App opens successfully on host\n- [X] App uninstalls successfully on host\n\n### Icon\n\n- [ ] Icon added to Figma\n- [x] Icon added to Fleet\n- [x] Correct icon appears in the app catalog",
          "number": 30727,
          "repository": "fleetdm/fleet",
          "title": "New FMA: Beyond Compare",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/30727"
        },
        "estimate": 1,
        "id": "PVTI_lADOBDAnic4A4BEUzgcdLoc",
        "labels": [
          "story",
          ":release",
          "#g-software",
          "fma"
        ],
        "milestone": {
          "dueOn": "2025-08-08T00:00:00Z",
          "title": "4.72.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "80d566cb",
          "startDate": "2025-07-07",
          "title": "Sprint 44"
        },
        "status": "✅ Ready for release",
        "title": "New FMA: Beyond Compare",
        "comments": [
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "Hey @mostlikelee is this targeted for 4.72? Just noticed we're missing a milestone so I added 4.72. Please feel free to update it."
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "\u003cimg width=\"366\" height=\"123\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/1551207a-82f3-4eb6-88b2-7183429cfed3\" /\u003e"
          }
        ]
      },
      {
        "assignees": [
          "mostlikelee"
        ],
        "content": {
          "body": "### Requestor\n\n- Application name: VNC Viewer\n- Application platform: macOS\n\n---\n\n### Validation\n\n- [X] The following outputs are generated\n        - `/outputs/\u003capp-name\u003e/darwin.json` created\n        - `/outputs/apps.json` updated\n- [X] Manifest name matches osquery `app.name` (macOS) or `programs.name` (Windows)\n- [X] Manifest version scheme matches osquery `app.short_bundle_version` (macOS) or `programs.version` (Windows) version scheme\n- [X] Manifest `unique_identifier` matches osquery `app.bundle_identifier` (macOS only)\n\n### QA\n\n- [X] App adds successfully to team's library\n- [X] App installs successfully on host\n- [X] App opens successfully on host\n- [X] App uninstalls successfully on host\n\n### Icon\n\n- [ ] Icon added to Figma\n- [x] Icon added to Fleet\n- [x] Correct icon appears in the app catalog",
          "number": 30802,
          "repository": "fleetdm/fleet",
          "title": "New FMA: VNC Viewer (macOS)",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/30802"
        },
        "estimate": 1,
        "id": "PVTI_lADOBDAnic4A4BEUzgcgftg",
        "labels": [
          "story",
          ":release",
          "#g-software",
          "fma"
        ],
        "milestone": {
          "dueOn": "2025-08-08T00:00:00Z",
          "title": "4.72.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "80d566cb",
          "startDate": "2025-07-07",
          "title": "Sprint 44"
        },
        "status": "✅ Ready for release",
        "title": "New FMA: VNC Viewer (macOS)",
        "comments": [
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "\u003cimg width=\"353\" height=\"121\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/9ed7b411-c2af-4496-aa18-ce1b974a5de8\" /\u003e"
          }
        ]
      },
      {
        "assignees": [
          "iansltx"
        ],
        "content": {
          "body": "### 💥  Actual behavior\n\nGenerated MSI uninstall scripts use ProductCode rather than UpgradeCode, so attempts to uninstall an app with a different version than the one contained in the installer won't find the app. Even if an app hasn't changed in Fleet, auto-update (e.g. for Chrome or Box) will likely break this uninstall script as the product code will change.\n\n### 🧑‍💻  Steps to reproduce\n\n1. Add an older version of Cloudflare Warp (e.g. the one mentioned in the old version of [this diff](https://github.com/fleetdm/fleet/commit/b0d0b2217f08ca195e2f9603096435eaf17d4c19)) as a custom package, and install it on a Windows host.\n2. Switch the package to the current version of Cloudflare Warp.\n3. Attempt to uninstall Warp on the host that has it.\n\n### 🕯️ More info\n\nThis ticket is separate from the identical problem for FMAs as this fix needs to be rolled out in the context of a Fleet release, and touches more things (and has impacts on the ability to build automatic install policies).\n\n### Chosen Fix\n\nSee https://github.com/fleetdm/fleet/issues/27758#issuecomment-3079478169\n\n### To QA\n\n1. :white_check_mark: Start on v4.71.0. Add the Chrome enterprise MSI as a custom package. \n2. :white_check_mark: Upgrade to the fixed version. Check `software_installers` in the database. A job should run within a minute or so that populates the Chrome enterprise MSI's `upgrade_code`. The uninstall script won't change as part of this (it'll still have the product code based uninstall script).\n3. :white_check_mark: Delete the Chrome MSI and re-add via the UI with no overrides on the script. The uninstall script should now be the same as the Windows FMA uninstall script as of 2025-07-15, and this script (with an $UPGRADE_CODE placeholder) should be shown as the placeholder uninstall script when adding an MSI.\n4. :white_check_mark: Delete the Chrome MSI and re-add via GitOps. The uninstall script should be the same as when added via the UI.\n5. :white_check_mark:  Delete and re-add via the UI, but make slight edits to the script before saving, while keeping the $UPGRADE_CODE placeholder there. The placeholder should still be substituted for the upgrade code.\n6. :white_check_mark:  Edit the app, replacing the uninstall script with one using both package ID and upgrade code placeholders. Both should populate on the saved script.\n7. :white_check_mark: Add an MSI that doesn't have an upgrade code, without modifying the uninstall script. Confirm that the uninstall script is the one-liner using ProductCode.\n8. :white_check_mark: Attempt to include $UPGRADE_CODE in the uninstall script via a package edit. You should get an error message.\n9. :white_check_mark: Attempt to edit the uninstall script in a way that does _not_ include $UPGRADE_CODE. The operation should succeed.\n10. :white_check_mark: Confirm that MSIs no longer show an extra uninstall warning in self-service.\n11. :white_check_mark:  Confirm that uninstall script help text mentions $UPGRADE_CODE for (and only for) MSIs.\n\n### Potential Fixes\n\nExtract UpgradeCode from MSI packages instead of ProductCode, and use [finding related installers by upgrade code](https://stackoverflow.com/a/49077469/2476827) to generate the uninstall script, uninstalling all software with the associated UpgradeCode rather than just the exact version with the ProductCode.\n\nWe'll need to decide what to do with existing uninstall scripts. We can detect when an uninstall script is the default, ProductCode based one, but in order to upgrade the script we'll need to download and re-parse the MSI (similar to what we did when initially adding uninstall scripts). Otherwise we'll be generating a script that won't work, as currently MSI `package_ids` are the ProductCode, and the new uninstall script would assume UpgradeCode.\n\nAlternative would be to leave scripts as-is and document that admins should delete and re-add MSIs to get the better script (\"editing\" the MSI package with the same installer will be a no-op, and emptying the uninstall script and saving will populate the wrong script).\n\nAdditionally, without additional changes this will break automatic install policies (moreso than they're already broken), as we're currently using assuming that package IDs will contain product code. We can work around this right now by passing product code separately when creating the auto-install policy on app upload, but that breaks as soon as we switch auto-install policies to be add-able after a package has been uploaded (#25499), so we have three choices from what I can see:\n\n1. Drop automatic policy creation for MSIs until UpgradeCode is visible via osquery (or wait to fix this issue until UpgradeCode is visible via osquery and switch automatic policy creation to use UpgradeCode in the same release that we switch uninstalls to use UpgradeCode)\n2. Add a way to store ProductCode on the installer package so we can allow generating the current (overly precise) policy queries for MSIs\n3. Add a way to store package vendor on the installer package so we can temporarily switch the policy query to a more generic name + vendor check that we currently use for Windows FMAs.\n\n",
          "number": 27758,
          "repository": "fleetdm/fleet",
          "title": "🪲Custom package MSI uninstall scripts don't uninstall other versions of the software",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/27758"
        },
        "estimate": 5,
        "id": "PVTI_lADOBDAnic4A4BEUzgcX6Nk",
        "labels": [
          "bug",
          ":release",
          "~released bug",
          "~windows",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-08T00:00:00Z",
          "title": "4.72.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "80d566cb",
          "startDate": "2025-07-07",
          "title": "Sprint 44"
        },
        "status": "✅ Ready for release",
        "title": "🪲Custom package MSI uninstall scripts don't uninstall other versions of the software",
        "comments": [
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Hey team! Please [add your planning poker estimate](https://app.zenhub.com/workspaces/Drafting-6192dd66ea2562000faea25c/issues/gh/fleetdm/fleet/27758?planning-poker) with Zenhub @jahzielv @ksykulev"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "My estimate is based on the ability to either implement this simultaneously with UpgradeCode changes on the automatic install query, or being able to drop that query until UpgradeCode starts coming in in inventory. Estimated scope also _does not_ include migrating existing uninstall scripts."
          },
          {
            "author": {
              "login": "ksykulev"
            },
            "body": "For context, osquery upgrade code PR https://github.com/osquery/osquery/pull/8587"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Reassigning since this got pulled back during sprint kickoff today."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "IIRC this got estimated as a 5 previously, so moving this back to estimated. There's a little more scope in here for a fallback, but given that we need the fallback anyway that means we don't need to retroactively fix package IDs/uninstall scripts on existing installers so this should wash out back to a 5."
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "moving due to scope increases"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Plan here is to\n\n- [x] Add a ~nullable~ (changing to not null default blank because zero values) `upgrade_code` field to `software_installers`\n- [x] Refer to it via a new `$UPGRADE_CODE` var\n- [x] Retroactively populate UpgradeCode for existing MSIs (similar to uninstall population cron), but _don't_ retroactively change the uninstall script.\n- [x] Continue to map `$PACKAGE_ID` to ProductCode\n- [x] Update the UI to mention the new variable and show the upgrade code based script as a default, even though if we can't extract an UpgradeCode from an MSI we'll fall back to the product code based script if the uninstall script is either blank or the same as the golden script\n- [x] Have the same behavior for GitOps\n\nFYI @mostlikelee @marko-lisica "
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Bonus points: we can get rid of the MSI uninstall disclaimer on self-service now that this is in place, so I'm including that cleanup in the PR."
          },
          {
            "author": {
              "login": "AndreyKizimenko"
            },
            "body": "QA Notes: \n\nWas able to reproduce the initial issue on 4.71, but after moving to main, any custom software can be uninstalled with any new script, even if there's a version mismatch. \nWent through the test plan and checked off all the items. Additionally, nothing has stood out during additional exploratory testing. "
          }
        ]
      },
      {
        "assignees": [
          "jahzielv"
        ],
        "content": {
          "body": "**Fleet version**: \u003e= 4.62.0\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\nAutomatic install policies for MSIs use a query based on ProductCode, a GUID that changes when newer versions of the software are released. This means that the policy query will not only fail if no version of the software is installed, but also if any _other_ version of the software is installed.\n\n### 🧑‍💻  Steps to reproduce\n1. Install an older version of an app (preferably as an MSI) on a host\n2. Upload a newer-version MSI of the same app, with automatic install turned on\n3. See the policy generated in step 2 fail, queueing up an install even though the app already exists\n\n### 🕯️ More info\n\nNoticed this in manifest updates for #27443, which is a valid check in this case as at the time we were using the same method for building queries as we do for custom package MSIs.\n\n### 🛠️ To fix\n\nTwo options (in the case osquery work is required that work is tracked in its own ticket):\n\n#### Use program name and vendor (available now, less reliable, not recommended)\n\nWe could extract vendor and program name from the MSI and use that for existence queries, similar to what we do now for FMA. Catch is this is imprecise and may actually create more reliability issues than it solves (AKA the reason we don't create automatic policies for EXE installers). We probably _shouldn't_ bother doing this.\n\n#### Use UpgradeCode (requires osquery changes, more reliable)\n\nWe could extract UpgradeCode from MSIs and then, when osquery adds UpgradeCode support for `programs`, build our queries based on that. MSIs are highly recommended to have UpgradeCode, such that most if not all have them (and we can bail on automatic policy creation if an MSI doesn't). If we fix this concurrently with #27758 we can switch the `package_ids` DB column in `software_installers` to mean UpgradeCode for MSIs.",
          "number": 27447,
          "repository": "fleetdm/fleet",
          "title": "🪲Auto-install queries for custom MSI packages fail when a different version of the same software is installed",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/27447"
        },
        "estimate": 3,
        "id": "PVTI_lADOBDAnic4A4BEUzgcX6VI",
        "labels": [
          "bug",
          "~backend",
          ":release",
          "~released bug",
          "~windows",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-08T00:00:00Z",
          "title": "4.72.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "80d566cb",
          "startDate": "2025-07-07",
          "title": "Sprint 44"
        },
        "status": "✅ Ready for release",
        "title": "🪲Auto-install queries for custom MSI packages fail when a different version of the same software is installed",
        "comments": [
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@mostlikelee So if I am to understand this, in step 2 it's the same _version_ of the same app? The issue is that the MSI version is newer which is reinstalling the same _version_ of the same app?"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@eugkuo Same app, different version.\n\nThe auto-install policy query should pass (no install queued) for any version of the same app (once installed the app isn't updated when checking that box). Instead, for MSIs, if you install a different version of the app than the custom package you uploaded, the policy will fail and the install will be triggered."
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@iansltx Oh! so this isn't a patching thing. The way things currently work we shouldn't update things b/c patching isn't a thing yet. Let me update the 'to fix' section. Thanks!"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@mostlikelee Sounds like you're still doing research on this. Moving back to Ready to spec since if we're already using UpgradeCode and if that's the identifier being passed back by osquery this is a false alarm."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Moving this to Ready to Estimate now that we have a clearer idea of what we'd need to do here. osquery changes block this ticket, but aren't in scope for the ticket itself (going to add another ticket for the required osquery support so we can track that independently)."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Hey team! Please [add your planning poker estimate](https://app.zenhub.com/workspaces/Drafting-6192dd66ea2562000faea25c/issues/gh/fleetdm/fleet/27447?planning-poker) with Zenhub @jahzielv @ksykulev"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "1. Find an older version .msi file\n2. Upload it and have it set to auto-install\n3. Install a newer version on the host\n4. Run the policy\n\n- [x] Policy query should be using upgrade_code\n- [x] Policy should identify older and newer versions as being installed\n\nInstalled AWS Tools for Windows 2.9.371\nUploaded AWS Tools for Windows 3.7.660 - Policy was created from this version"
          }
        ]
      },
      {
        "assignees": [
          "jacobshandling",
          "RachelElysia"
        ],
        "content": {
          "body": "## Goal\n\n| User story  |\n|:---------------------------------------------------------------------------|\n| As an end user of Fleet desktop,\n| I want to be able to see when updates are available for apps I have installed\n| so that I can keep my computer's software up to date.\n\n## Key result\n\nCustomer request\n\n## Original requests\n\n- #25784\n\n## Context\n- Design: @eugkuo \n- Dev: @mostlikelee, @iansltx \n- Original request: #25784\n- Broken out of https://github.com/fleetdm/fleet/issues/27245\n \n \n\u003c!--\nWhat else should contributors [keep in mind](https://fleetdm.com/handbook/company/development-groups#developing-from-wireframes) when working on this change?  (Optional.)\n1. \n2. \n--\u003e\n\n## Changes\n\n### Product\n- [ ] UI changes: [Figma link](https://www.figma.com/design/K9BTJ3aZAvwWBXU9N8aqGa/-27983-Fleet-Desktop-%3E-Self-service--Add-%22Update%22-actions-when-updates-are-detected-for-installed-so?node-id=2-130\u0026p=f\u0026t=4BUeL3i6REY46HIb-11)\n- [ ] CLI (fleetctl) usage changes: _No changes_\n- [ ] YAML changes: _No changes_\n- [ ] REST API changes: _No changes_ (all frontend for this iteration)\n- [ ] Fleet's agent (fleetd) changes: _No changes_\n- [ ] GitOps mode changes: _No changes_\n- [ ] Activity changes: _No changes_\n- [ ] Permissions changes: _No changes_\n- [ ] Changes to paid features or tiers: _No changes_\n- [ ] My device and fleetdm.com/better changes: _No changes_\n- [ ] First draft of test plan added\n- [ ] Other reference documentation changes: _No changes_\n- [ ] Once shipped, requester has been notified\n- [ ] Once shipped, dogfooding issue has been filed\n  - @noahtalerman: Dogfood this story at the same time: https://github.com/fleetdm/fleet/issues/30035 \n\n### Engineering\n- [ ] Test plan is finalized\n- [ ] Contributor API changes: No changes\n- [ ] Feature guide changes: See #29914\n\n\u003e ℹ️  Please read this issue carefully and understand it.  Pay [special attention](https://fleetdm.com/handbook/company/development-groups#developing-from-wireframes) to UI wireframes, especially \"dev notes\".\n\n## QA\n\n### Risk assessment\n\n- Risk level: High\n- Risk description: Primary risk here is suggesting incompatible updates for software such that updates either fail or \"are successful\" but break the end user's install. This is partly because we're going to be assuming that all self-service software is opted into update notifications, including custom packages. Based on scope reductions, we're proceeding knowing that we'll post software for update that won't successfully update, so we're accepting this risk and seeing where it takes us.\n\n### Test plan\n\u003c!-- Add detailed manual testing steps for all affected user roles. --\u003e\n\n\u003e Make sure to go through [the list](https://github.com/fleetdm/fleet/blob/main/docs/Contributing/design-qa-considerations.md) and consider all events that might be related to this story, so we catch edge cases earlier.\n\nTest with Windows, macOS, Linux hosts\nTest with Chrome, Safari, Edge, Firefox\n\n#### UI\n\n1. Ensure that there there are more than 8 updates available for a host by installing older versions of the software (e.g. downloading old FMA copies based on previous manifest versions), then adding current versions as available in self-service on the same team.\n2. Navigate to Fleet Desktop.\n3. Verify that there the \"Updates\" section shows at the top of the page.\n4. Verify that the number next to the Self-service tab matches the number of available updates.\n5. Verify that selecting 'Next' swipes over to the next 4 update cards in the Updates section.\n6. Verify that the same software titles have 'Update' actions next to them in Self-service table.\n7. Select \"Update\" on a software title\n8. Verify that the status changes to 'Updating' with an animated circle progress spinner on both the app card and in the Self-service table..\n9. Navigate away from the page and navigate back and verify that the status remains.\n10. When the update is complete verify that the software is updated locally, the card shows \"Updated\", and a refetch has been queued.\n11. Once the refetch completes, verify that the card is removed from the top section and that the action in the Self-service table changes to \"Reinstall\" (when the one card is removed, the remaining 3 cards still show but the one that was removed is replaced with the next item in the list, so that it still shows 4 cards)\n12. Verify that the pagination always shows 4 items, so it goes from showing 1 2 3 4 to 5 6 7 8.\n13. Update four more apps.\n14. Verify that the Update section shows 3 cards and that the width of each card is the same as when there are 4 items in the Update section at widths above 1280\n15. Verify layout at 480, 768, and 1024 breakpoints. Note that 2 cards show at 768 and that 3 cards show at 1024.\n16. Verify that self-service is paginated and displays 20 items per page.\n\n- [x] Double check for the additional change in host details for the Self service hover text to add a learn more link\n\n- [ ] If there was only one update card and I update the app and it refetches, the Updates section disappears\n\n- [ ] Clicking the Update all option, refetches will occur until all updates are completed. The count will continue decreasing until no further updates are available and then the section will disappear \n\n- [x] Failed modal should show details when clicked\n\n#### Update eligibility criteria\n\n- [x] Software not available for self-service should not show in the available updates list\n- [x] Software not in inventory should not show in the available updates list\n- [x] VPP apps should not show in the available updates list if MDM is turned off\n- [x] Software in inventory that is \u003e= the version for the installer doesn't show\n- [ ] Software in inventory whose version can't be compared to the installer's version shouldn't show\n- [x] Software in inventory, installed multiple times, where one install is an older version and one install is a same-or-newer version, should show in the available updates list\n- [x] Software in inventory, installed once, that is older than the installer's version, should show in the available updates list\n- [ ] Software in the list that was previously successfully installed by Fleet should NOT show install status if a refetch has happened since the install\n- [x] Software in the list with a pending install SHOULD show install status, even if a refetch has happened since the install started\n- [x] Software in the list that has been successfully installed by Fleet since the last refetch SHOULD show install status\n- [x] Software that shows up in the list that has had an install failure by Fleet since the last refetch SHOULD show install status\n\nEdge cases:\n🔴  Software installed in multiple locations - what happens when I update? Does it only update one of the applications? Does that mean the card remains after the update if the other locations weren't updated?\n\"It depends on the install script and the package\"\nShort answer: Yes, the card can still remain if an outdate version exists anywhere on the host\n🔴 Will it install a new firefox in the expected location, and you may end up with more than one version?\nA: Yes\n🔴 What do we show in the carousel for the version -\u003e version subtext?\nA: Design removed version -\u003e version and it's now just version\n\n\n\u003c!-- Consider: Do the steps above apply to all global access roles, including admin, maintainer, observer, observer+, and GitOps?  Do the steps above apply to all team-level access roles?  If not, write the steps used to test each variation.\n--\u003e\n\n### Testing notes\n\u003c!-- Any additional testing notes relevant to this story or tools required for testing. --\u003e\n\n### Confirmation\n\u003c!-- The engineer responsible for implementing this user story completes the test plan before moving to the \"Ready for QA\" column. --\u003e\n\n1. [ ] Engineer: Added comment to user story confirming successful completion of test plan.\n2. [ ] QA: Added comment to user story confirming successful completion of test plan.\n",
          "number": 27983,
          "repository": "fleetdm/fleet",
          "title": "🖥️ Fleet Desktop \u003e Self-service: Add \"Update\" actions when updates are detected for installed software",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/27983"
        },
        "estimate": 8,
        "id": "PVTI_lADOBDAnic4A4BEUzgcX12Q",
        "labels": [
          "story",
          "~frontend",
          ":release",
          "customer-cisneros",
          "customer-numa",
          "#g-orchestration",
          "#g-software",
          "prospect-waterman",
          "prospect-antonella",
          "~assisting g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-08T00:00:00Z",
          "title": "4.72.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "80d566cb",
          "startDate": "2025-07-07",
          "title": "Sprint 44"
        },
        "status": "✅ Ready for release",
        "title": "🖥️ Fleet Desktop \u003e Self-service: Add \"Update\" actions when updates are detected for installed software",
        "comments": [
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@noahtalerman @mostlikelee Removed 'uninstall' from this ticket as the order of operations has determined that this ticket will go ahead of the uninstall ticket (#28038)"
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@jmwatts I took a first pass at the test plan.\n\nQuestions for @mostlikelee:\n\n1. What YAML/API things might need done?\n\nQuestions for @RachelElysia \n\n1. On the carousel, if there are 6 items in the carousel are we thinking it would show 4 and 2 when paginating? Or would we always show four and selecting \"Next\" would go from showing 1 2 3 4 to showing 3 4 5 6?"
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "Notes from 14 April 2025:\n\n1. @noahtalerman : Can we scope this down to Mac only and FMA? \n    1. There are extra complications around Windows due to known issues that we've been discussing. There are also current research tickets on upgrade codes for Windows that are outstanding (#27776) which would be a pre-req for Windows.\n2. Do we want to add activity changes at this time? @mostlikelee and I think no for simplicty's sake.\n"
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "\u003e @noahtalerman : Can we scope this down to Mac only and FMA?\n\n@eugkuo @mostlikelee I think let's draft for all support we support on macOS, Windows, and Linux (custom packages, App Store apps, and Fleet-maintained apps).\n\nAfter we have designs, I think let's discuss and decide how to cut the story up.\n\nWhy? So we know where we're heading and we tease out more complications/unknowns. Then we can come up with a plan for how to address Windows and Linux even if the first iteration we build is just macOS Fleet-maintained apps. Which is a valid first iteration.\n\n\u003e Do we want to add activity changes at this time?\n\n@eugkuo same for activities. I think let's draft activities and then cut."
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "\u003e @eugkuo @mostlikelee I think let's draft for all support we support on macOS, Windows, and Linux (custom packages, App Store apps, and Fleet-maintained apps).\n\n@noahtalerman Coolio. I don't think the design changes. The UI will be the same regardless of platform. (@mostlikelee correct me if I'm wrong).\n\nWRT activities, I added [an example](https://www.figma.com/design/K9BTJ3aZAvwWBXU9N8aqGa/-27983-Fleet-Desktop-%3E-Self-service--Add-%22Update%22-actions-when-updates-are-detected-for-installed-so?node-id=5318-3291\u0026t=LPfejWpLp8jclkAm-11) to the ticket above."
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@noahtalerman @jmwatts @mostlikelee \n I've updated the selected state in the category filters to match work done on [#27245](https://github.com/fleetdm/fleet/issues/27245)"
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "Question 1: what is expected behavior when multiple versions of a software are installed on a host:\n- On macOS, if an application is renamed (`Firefox.app` + `Firefox2.app`), Fleet will show both applications as pending updates in the carousel, but only 1 will patch successfully (Firefox.app because it matches the app name in the dmg)\n- This will also be the case on macOS with `/Applications/Firefox.app` + `~/Downloads/Firefox.app` (only the first will patch)\n- machine vs user installs will also see this symptom on Windows\n\nQuestion 2: Does the update disappear from the carousel if the software install executed successfully, but the app did not actually update?\nexamples:\n- macOS: Firefox.app is renamed to Firefox2.app, install completes successfully and the host now has Firefox.app + Firefox2.app\n- Windows: machine scope is installed, and installer is user scoped (or vice-versa)"
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@mostlikelee @noahtalerman Updates from 7 May 2025 DR:\n\n1. Added [tooltip](https://www.figma.com/design/K9BTJ3aZAvwWBXU9N8aqGa/-27983-Fleet-Desktop-%3E-Self-service--Add-%22Update%22-actions-when-updates-are-detected-for-installed-so?node-id=5366-4609\u0026t=3kh7v4Aj5lLSDppW-11) on `installed` status\n\n"
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@noahtalerman @mostlikelee \n\nUpdated the designs with the following:\n\n1. Removed \"Installed\" status from the update cards at the top of the page.\n2. Upgraded the 'update' action to a button.\n3. For installed apps, updated the action to 'reinstall'"
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "@eugkuo @noahtalerman we realized that we need design when multiple versions of an updatable app is installed"
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@mostlikelee I'm not exactly sure what you mean by this. Wouldn't we still have a single update button for the app? I mean we'd want to update it all to the most recent. I think I might be missing some nuance here.\n\ncc @noahtalerman "
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "Chatted with @mostlikelee and here are the use cases:\n\n1. N different versions in the Applications folder\n2. N copies of the same version in the Applications folder\n    1. Currently can only update the one with the name we expect.\n4. N copies of various versions in different locations.\n\nWe can only update if have following criteria:\n1. Existing path needs to be what's expected (name, location, etc.)\n    1. Works for FMAs\n    2. Does not work as well for custom packages.\n    4. Big question mark around VPP.\n\nLet's discuss in USR.\n\ncc @noahtalerman "
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Looks like there's an off-by-one in step 11 in the test plan.\n\nAlso, for \"Updating\", can we show that status string always when inventory says a piece of software is installed but there's also a pending install? That would allow us to use the existing API there rather than having to build a new one.\n\nI have an idea on making this frontend-only to expedite: use the existing self-service filter, no pagination, and client-side filter to results that have only installed versions where version differs from the installer package. This gets this work out from behind further ListHostSoftware tweaks/derisks it a bit, at the cost of additional frontend munging."
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@iansltx \n\u003e Looks like there's an off-by-one in step 11 in the test plan.\nThanks! Fixed.\n\n\u003eAlso, for \"Updating\", can we show that status string always when inventory says a piece of software is installed but there's also a pending install? That would allow us to use the existing API there rather than having to build a new one.\n\nSo there could be a pending install and we and updating over that? At any rate, if we're updating that software it seems reasonable to show the 'updating' status.\n\n@noahtalerman thoughts?\n\ncc @mostlikelee "
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@eugkuo To clarify, I'm saying that if we have a piece of software already in inventory and there's a pending install (from whatever Fleet-initiated source...Install button, update button, policy execution, whatever), we use the word \"Updating...\" rather than \"Installing...\" in the self-service UI. Then reserve \"Installing...\" for cases where a host _doesn't_ have the same software in inventory already.\n\nSo the pending statuses would be:\n\n* Installing - wasn't in inventory, install is pending\n* Updating - was in inventory, install is pending\n* Uninstalling - uninstall is pending\n\nIf the above are the rules, the frontend already has all of the information it needs (with existing API endpoints) to show the correct status (so, no backend/DB changes to differentiate between \"installing\" and \"updating\")."
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@iansltx Ohhhh! This works for me. Also,  in future we shouldn't have 'Install' as an action on installed software. It'll say 'uninstall' or 'update' so this would mesh nicely.\n\ncc @noahtalerman @mostlikelee "
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@noahtalerman Reverted to secondary update buttons in the update cards."
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "Bumping this as an unresolved question as we expedite this story: https://github.com/fleetdm/fleet/issues/27983#issuecomment-2877468972"
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "During a call on \"Updates in self-service\" call on 2025-05-26, here's what @mostlikelee and I decided for the first iteration: \n\n![Image](https://github.com/user-attachments/assets/1b98c30b-6dc8-444e-826b-a6fc81e8d715)\n\nFleet will document this behavior is the self-service software guide. The UI will link IT admins to this guide (redirect PR is [here](https://github.com/fleetdm/fleet/pull/29445)):\n\n![Image](https://github.com/user-attachments/assets/f6ca58b1-8ce0-473b-a9f3-a9e574e7aaa0)\n\n![Image](https://github.com/user-attachments/assets/30d73148-cd03-4ad8-9b84-5ee89467e68a)\n\nEventually, Fleet will iterate on this behavior. Plan is to ship iterative improvements such that more apps show up in “Updates.”\n\ncc @eugkuo "
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "FYI @eugkuo I moved this 480px width screen into scratchpad [here](https://www.figma.com/design/K9BTJ3aZAvwWBXU9N8aqGa/-27983-Fleet-Desktop-%3E-Self-service--Add-%22Update%22-actions-when-updates-are-detected-for-installed-so?node-id=5408-9141\u0026t=2qzAG36eyoKjsBAb-1). Looking the discussion in [this closed PR](https://github.com/fleetdm/fleet/pull/28465), it sounds like we haven't added support for screen widths down to 480px yet.\n\n![Image](https://github.com/user-attachments/assets/d3909d83-841e-41be-a74c-319dffe80946)"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Thinking through workflow for a moment, if an app shows up in the updates carousel, it's because we've seen it in inventory, and the version in inventory is less than the version of the corresponding installable software (FMA, custom package, or VPP) for that team (and we don't show a card if criteria around installed paths aren't met, see dev note mentioned above). Good so far? This has a side effect of VPP apps being most likely to be in that carousel, as we'll display a new version there within an hour of the version being published via Apple, with no ability for an admin to override this, but...that's probably okay?\n\nNext, an end user clicks \"Update\", at which point we either send the MDM command to install or queue up a package-based install. In both cases, currently there will be a point where the software is reported as installed but software invenotry has not yet been refreshed, even with #28738 implemented. This means that we can show the \"updating\" spinner right up until the install completes, at which point a purely inventory-based system would flip back to having the \"Update\" action displayed until inventory gets run again, which isn't what we want.\n\n## Update status alternative: install status\n\nOne alternative would be to take installation status into account in some form when installs are successful/failed, rather than just when they're pending. Catch here is that we're replicating issues around freshness that affect our existing host software inventory, where an out-of-band update (e.g. Chrome auto-updating) would cause the update card to show when it isn't necessary. This issue is relevant when the update installation fails but the software eventually gets updated out-of-band.\n\n### Install status freshness: version comparison\n\nOne mitigation for the freshness comparison issue would be to compare versions between inventory and the install receipts, and have the higher version win, but VPP installs currently break this as `host_vpp_software_installs` doesn't include the version that was installed, so we'd wind up in a case where VPP apps would never show up in the updates list once installed the first time because installed version would just reference back to the latest available version.\n\n### Install status freshness: refetch wins when more recent than install\n\nAnother mitigation would be to only take install statuses into account when they're more recent than the most recent host vitals refetch. We have install timestamp info and last refetch timestamp info, so this should be reliable, and we can use this nuance to show available updates with e.g. \"Update successful\" or \"Update failed\" if we wanted between getting an install result back and the next refetch.\n\nWe could actually extend this logic to host software listing in general, explicitly ignoring install receipts (success or failure) unless they've happened since the most recent vitals refetch as the vitals refetch should at that point be the source of truth.\n\n## Update status alternative: refetch on install success\n\nAnother alternative would be to retech host vitals (or at least rerun software inventory) after each successful install. Doing this right needs #28738 as a prerequisite so we don't refetch too early. If we did this, the window where software inventory alone was too stale for correctly showing the update carousel would be minimized.\n\n---\n\nWe could combine \"refetch wins when more recent than install\" and \"refetch on install success\", plus maybe polling of host details on the **My device** page while refetching, to get a nearly realtime view of what's actually installed. Clicking Update on a piece of software would pop up a spinner in place of the Update button, then the status would flip to Update Successful for \u003c 1 minute while a vitals refresh was triggered, then the update card would disappear entirely once the vitals refresh triggered by that install was completed. For failed updates, we'd show the \"Update failed\" status until the next vitals refetch, with a retry button, and that failure would go away (replaced with an \"Update\" action with no status) after the next refetch.\n\nThis combined approach will require API changes (but no fleetd changes) to work, but in return we get a clear path to cleaning up inventory-vs-install idiosyncrasies, and we avoid end-user frustration stemming from varying degrees of staleness on the updates list compared to what they have installed."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Unrelated to the above: hopefully installers get targeted properly with labels for e.g. Intel Macs in this customer's deployment, since otherwise we'll be presenting end users with prompts to update apps to versions that won't work on their architecture."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Looking over the wireframes, looks like we have a different activity description than the standard \"installed X app.\" Given the complexity of this ticket as it stands, can we remove the activity from scope, reverting to the standard \"an end user installed X\" activity that we have right now? Otherwise we need to decide how we'll differentiate an update from an install (new param on the install reqeuest? Automatically server-side based on what's in inventory on the machine?) and define a structure for the revised activity record (I assume a new field on `installed_software`), neither of which we've spec'd. Feels like those changes can be added in a follow-up ticket."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "One interesting side effect of \"refetch vitals after every install\" is it could resolve the software install \"half\" of #25969/#28523, albeit in a heavier-weight fashion since IIRC a vitals refetch runs policy queries as well as software inventory queries. If we just run software inventory (so, not a full refetch) those issues are unaffected. TBD whether we'd want to start with a full vitals refetch hre since that's more computationally expensive both client- and server-side and once we implement it it's more likely that admins would rely on the full-refetch behavior so it'd be hard to back out.\n\nBut if we _didn't_ collect the entire set of host vitals, we'd need another timestamp on hosts to indicate how fresh software inventory was relative to the rest of host vitals, so just doing a full refetch is a lot less risky from a development perspective. So \"do a full refetch after an install completes\" still makes sense here I think.\n\nNote that this is _in addition to_, and _after_, the MDM polling covered in #28738, as that polling would only affect software install status and not inventory (even on iOS/iPadOS the polling would be checking for managed apps, while software inventory grabs the entire installed app list)."
          },
          {
            "author": {
              "login": "gillespi314"
            },
            "body": "FYI, we have some existing framework for refetching [critical queries](https://github.com/fleetdm/fleet/blob/f018066beef248bdb67700a3f458809f9bad410a/server/fleet/hosts.go#L361-L362) that might be useful here."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@gillespi314 Thanks for pointing that out! I think that in this case once we implement #28738 we'll only need to refetch once, after the install is confirmed succeeded (on script exit 0 + post-install for package-based, on MDM managed apps success for VPP) so we won't need to take the perf hit of a full refetch on every host check-in (we're making the assumption that the MDM managed app inventory command is less expensive to poll than our standard vitals suite)."
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@iansltx @mostlikelee Removed the updated activity feed and wrote a [FR](https://github.com/fleetdm/fleet/issues/29492) to update this in the future.\n\ncc @noahtalerman "
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "@mostlikelee @eugkuo, just checking, is this story ready to move to \"Estimated\"? Looks like it has an estimate on it."
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "The estimate is from our expedited estimation session.  I'll remove the estimate as we're going to want to estimate this again after Spec.  This story is in the correct spot.  We'll move it over when https://github.com/fleetdm/fleet/issues/29494 is complete."
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "Hey @iansltx just a reminder that this story is ready for spec? Can you please work with the team to get it estimated ahead of next sprint?\n\ncc @mostlikelee "
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@noahtalerman on my list after my responsibilities for 4.69 are concluded."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@jmwatts This test plan is ready for a last look. Make any edits that you need to make, and once it looks good pull this to Ready to Estimate. I've already pulled subtasks to Ready to Estimate as I'm sufficiently confident that I have them spec'd correctly and wanted to give folks a little more runway to put down their own estimates."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Workflow diagrams:\n\n![Image](https://github.com/user-attachments/assets/c265a375-fc3e-437e-8350-b685c605d56d)"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "@iansltx test plan looks good. \n\n\u003e Windows apps don't show in the available updates list if they don't have an associated install path \n\nDo we know if we plan to address https://github.com/fleetdm/fleet/issues/29449 before this ticket?"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@jmwatts That would get addressed in the same sprint at the earliest, given that this will be going into the next sprint. There isn't a direct dependency here, and these shouldn't touch the same code, so if/once that bug is fixed this implementation will \"just work.\""
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "@noahtalerman adding this back into your queue based on our design review discussion re: copy/UI changes for unpatchable software"
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "@mostlikelee can you please update the test plan? We made a change to not worry about where the software is installed (paths). Tip: CMD+F for \"path\" in the issue description."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Revised the spec here (didn't touch Figmas), including test plan, to drop host paths interactions, and drop this down to FE-only. We'll likely need to reimplement with server-side changes in the next iteration, but workload-wise if we tried to implement this plus #30240 in a single sprint with backend changes we'd miss the release cut due to waiting for dependencies.\n\nThis story now consists of frontend changes plus docs changes, so tee shirt sizing is just above an XS. Likely scenario here is that dev gets done in the 4.72 sprint, and docs get updated during the 4.73 dev sprint but prior to 4.72 going GA.\n\nAPI change/path-related subtasks have been dissociated from this story and moved back to the \"New requests\" column; they'll need to be either associated with a new follow-up story or converted to stories themselves to be actionable.\n\nPulled the story back to USR to revalidate the test plan, while keeping subtasks in Estimated based on previous discussions."
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "after some discussion, keeping the original estimates and moving to Estimated."
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "@marko-lisica thanks for jumping right into our team and the mountain of dev/design sync needed. Here's some recap of stuff I need/needed clarified.\n\nPrevious conversations:\n\n000. This isn't in the spec to be able to sort status from host details \u003e software \u003e library. But if we did it would be consistent with self-service status sort. I tried to implement but it proved difficult because of the server side pagination/query/sort happening and sorting on a column that is built in the FE doesn't play nice with server side sort. (https://fleetdm.slack.com/archives/C086V2QK76X/p1752175433082329?thread_ts=1752168568.807959\u0026cid=C086V2QK76X) Confirm we are intentionally scratching sorting on host details \u003e software \u003e library \u003e status column or I need to jump through a lot of hoops to make everything client side sort an then implement\n\n00. I dev-ed in clientside paginating self-service page to 20. When there's updates to specs like this, are you DRI for updating the Figma and QA plan? (https://fleetdm.slack.com/archives/C086V2QK76X/p1752175280199089)\n\n0. We either needed to make 2 API calls, one for update software and the other for filtered software in the self-service section OR move the self-service software search query to be client side. We chose to make everything client side so we don't have to make so many API calls and deal with making 2x the API calls every time an install/uninstall/update action is clicked. It's sticky, partially because this is all frontend hoops jumped through because the API doesn't paginate, doesn't filter categories, and doesn't have a 1:1 map of status's in the API with status shown in the UI.  (https://fleetdm.slack.com/archives/C086V2QK76X/p1752180334175959)\n\nQuestions from [Self-service/Library updates thread](https://fleetdm.slack.com/archives/C086V2QK76X/p1752184798822479):\n\n1. I asked the channel, If there's more than one version installed on a host, what should go on the software updates card for the \"125.0.1 -\u003e 126.0.1\". If recalled correctly, we think the Figma is not correct, and should just show the library version.\n\n2. Do we show the update available modal if you click update in the carousel or does it just automatically make the API call to update\n\n3. When you click the Update all button, do we disable the \"update all\" button?\n\nMore questions not on the thread:\n\n5. Similarly, when you are updating all and there's no other software to update since they're all pending \"Updating...\", do we disable the \"update all\" button?\n\n6. This pagination but changing the number of update software tiles per page on page size might be a little too tricky. For example, you have 20 software that need updates, you're looking at the third page which shows software 9,10,11,12. You shrink your browser horizontally to only see 3 software, which 3 should be shown?? What page are you on now?\n\n7. Do we forsee an update section in host details \u003e software \u003e library? Is it in the works, any heads up might be good in making sure the code is reusable across fleet desktop \u003e self-service and host details \u003e software \u003e library\n\nI'm OOO tomorrow but I'll be back Monday and Thursday next week. If you can address any of these, that would be amazing, ty!\n "
          },
          {
            "author": {
              "login": "marko-lisica"
            },
            "body": "Hey @RachelElysia, thanks for collecting all the questions in one place, it's really helpful.\n\n\u003e This isn't in the spec to be able to sort status from host details \u003e software \u003e library. But if we did it would be consistent with self-service status sort. I tried to implement but it proved difficult because of the server side pagination/query/sort happening and sorting on a column that is built in the FE doesn't play nice with server side sort. (https://fleetdm.slack.com/archives/C086V2QK76X/p1752175433082329?thread_ts=1752168568.807959\u0026cid=C086V2QK76X) Confirm we are intentionally scratching sorting on host details \u003e software \u003e library \u003e status column or I need to jump through a lot of hoops to make everything client side sort an then implement\n\nLet’s skip this. I’ll add follow up story to do some additional UI improvements (details modals without 2 tabs on library page, sorting by status on library page and pagination for self-service in API).\n\n\u003e I dev-ed in clientside paginating self-service page to 20. When there's updates to specs like this, are you DRI for updating the Figma and QA plan? (https://fleetdm.slack.com/archives/C086V2QK76X/p1752175280199089)\n\nClient-side pagination sounds good to me. I added spec to Figma and test case.\n\n\u003e We either needed to make 2 API calls, one for update software and the other for filtered software in the self-service section OR move the self-service software search query to be client side. We chose to make everything client side so we don't have to make so many API calls and deal with making 2x the API calls every time an install/uninstall/update action is clicked. It's sticky, partially because this is all frontend hoops jumped through because the API doesn't paginate, doesn't filter categories, and doesn't have a 1:1 map of status's in the API with status shown in the UI. (https://fleetdm.slack.com/archives/C086V2QK76X/p1752180334175959)\n\nI'm not sure I understand this. Are we going to request all self-service software, and then the frontend will find and display those with available updates in the \"Updates\" section? If that's correct, then I think that's fine.\n\n\u003e I asked the channel, If there's more than one version installed on a host, what should go on the software updates card for the \"125.0.1 -\u003e 126.0.1\". If recalled correctly, we think the Figma is not correct, and should just show the library version.\n\nWe decided to don’t show current version, to simplify in this iteration. We can add that later. It makes things complicated when user has multiple versions of the same app installed in different paths.\n\n\u003e Do we show the update available modal if you click update in the carousel or does it just automatically make the API call to update\n\nWe show update available modal only when user clicks on “update available” in status column. If user click “Update” in self-service table or in the carousel we just directly start update (user sees “Updating” status.\n\n\u003e When you click the Update all button, do we disable the \"update all\" button?\n\nI think we should disable “Update all“ button and show “Updating” status on each item in carousel and self-service table.\n\n\u003e Similarly, when you are updating all and there's no other software to update since they're all pending \"Updating...\", do we disable the \"update all\" button?\n\nI think so. Let’s disable the button if an update is started for all apps that have an update available.\n\n\u003e This pagination but changing the number of update software tiles per page on page size might be a little too tricky. For example, you have 20 software that need updates, you're looking at the third page which shows software 9,10,11,12. You shrink your browser horizontally to only see 3 software, which 3 should be shown?? What page are you on now?\n\nSorry, I don’t understand this. Let’s chat during the design review on Monday. If it’s too early for you, please add something to my calendar.\n\n\u003e Do we forsee an update section in host details \u003e software \u003e library? Is it in the works, any heads up might be good in making sure the code is reusable across fleet desktop \u003e self-service and host details \u003e software \u003e library\n\nI don’t think so. I don’t thin IT admin want’s to see that. They will probably make updates automatic based on some criteria. We might want an additional filter in the existing dropdown for apps that have updates available, but not planned AFAIK."
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "@marko-lisica thanks for all the clarification!\n\n\u003e I'm not sure I understand this. Are we going to request all self-service software, and then the frontend will find and display those with available updates in the \"Updates\" section? If that's correct, then I think that's fine.\n\nExactly\n\n\u003e Sorry, I don’t understand this. Let’s chat during the design review on Monday. If it’s too early for you, please add something to my calendar.\n\nWill add to your calendar\n\nI think everything else is addressed and unblocked so I can dev -- hvala!"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "@marko-lisica Another question re: https://www.figma.com/design/K9BTJ3aZAvwWBXU9N8aqGa/-27983-Fleet-Desktop-%3E-Self-service--Add-%22Update%22-actions-when-updates-are-detected-for-installed-so?node-id=5302-9691\u0026t=xsGXc1YLuwgfuqy1-0\n\nWhen the update fails, it shows \"Update\" button and a \"Failed\" button in the update card, but in the Self-service table view in the card below, should that installer show \"Failed\" or \"Update available\" in the status?\n\nNuances needing clarification from @marko-lisica :\n\n\u003cimg width=\"671\" height=\"187\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/d94eb0bb-adeb-488e-a955-c7a2d365a791\" /\u003e\n\nScenario 1: Docker Desktop has an update available but it failed to update, what should be shown as the status in the table view?\n\nScenario 2: Docker Desktop has an update available but it failed to uninstall, what should be shown as the status in the table view?"
          },
          {
            "author": {
              "login": "marko-lisica"
            },
            "body": "Hey @RachelElysia, I think that we should show \"Failed\" in self service table as well.\n\n\u003e Scenario 1: Docker Desktop has an update available but it failed to update, what should be shown as the status in the table view?\nWe should alwaythe s show latest status in the status column. If it's failed let's show it. Action should be update if update is available.\n\n\u003e Scenario 2: Docker Desktop has an update available but it failed to uninstall, what should be shown as the status in the table view?\n\nWhat do we display today if the uninstallation fails? Do we have a specific status like \"Failed (uninstall),\" or do we show \"Failed\" and then inform the user in the details modal that the uninstallation was unsuccessful?\n\n"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "@marko-lisica \n\n\u003e What do we display today if the uninstallation fails? Do we have a specific status like \"Failed (uninstall),\" or do we show \"Failed\" and then inform the user in the details modal that the uninstallation was unsuccessful?\n\nWe show \"Failed (uninstall)\" which leads to the uninstall modal.\n\nI'll be sure to update these copies to not show update available and show \"Failed\" or \"Failed (uninstall)\" if it meets both criteria, I'll update the QA plan too since I'm in there RN, thank you!"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "@marko-lisica Update available has a tooltip and Failed/Failed (uninstall) has a separate tooltip. Because these options listed above fall into both, I made it so the tooltips show both the Update Available tooltip copy and Failed/Failed (uninstall) copy. WDYT?\n\n```\n  failed_install_update_available: {\n    iconName: \"error-outline\",\n    iconColor: \"ui-fleet-black-50\",\n    displayText: \"Failed\",\n    tooltip: ({ isSelfService, isHostOnline, lastInstalledAt }) =\u003e\n      isSelfService || isHostOnline ? (\n        \u003c\u003e\n          Fleet can update software.{\" \"}\n          \u003c\u003e\n            Software failed to install\n            {lastInstalledAt ? ` (${dateAgo(lastInstalledAt)})` : \"\"}.{\" \"}\n            {isSelfService ? (\n              \u003c\u003e\n                Select \u003cb\u003eRetry\u003c/b\u003e to install again, or contact your IT\n                department.\n              \u003c/\u003e\n            ) : (\n              \u003c\u003e\n                Select \u003cb\u003eDetails \u0026gt; Activity\u003c/b\u003e to view errors.\n              \u003c/\u003e\n            )}\n          \u003c/\u003e\n        \u003c/\u003e\n      ) : (\n        \u003c\u003e\n          Fleet can update software\n          \u003cbr /\u003e when the host comes online.\n          \u003cbr /\u003e\n          Software failed to install\n          {lastInstalledAt ? ` (${dateAgo(lastInstalledAt)})` : \"\"}.{\" \"}\n          {isSelfService ? (\n            \u003c\u003e\n              Select \u003cb\u003eRetry\u003c/b\u003e to install again, or contact your IT\n              department.\n            \u003c/\u003e\n          ) : (\n            \u003c\u003e\n              Select \u003cb\u003eDetails \u0026gt; Activity\u003c/b\u003e to view errors.\n            \u003c/\u003e\n          )}\n        \u003c/\u003e\n      ),\n  },\n  failed_uninstall_update_available: {\n    iconName: \"error-outline\",\n    iconColor: \"ui-fleet-black-50\",\n    displayText: \"Failed (uninstall)\",\n    tooltip: ({ isSelfService, isHostOnline, lastInstalledAt }) =\u003e\n      isSelfService || isHostOnline ? (\n        \u003c\u003e\n          Fleet can update software.\n          \u003cbr /\u003e\n          Software failed to uninstall\n          {lastInstalledAt ? ` (${dateAgo(lastInstalledAt)})` : \"\"}. Select{\" \"}\n          \u003cb\u003eRetry\u003c/b\u003e to uninstall again\n          {isSelfService \u0026\u0026 \", or contact your IT department\"}.\n        \u003c/\u003e\n      ) : (\n        \u003c\u003e\n          Fleet can update software\n          \u003cbr /\u003e when the host comes online.\n          \u003cbr /\u003e Software failed to uninstall\n          {lastInstalledAt ? ` (${dateAgo(lastInstalledAt)})` : \"\"}. Select{\" \"}\n          \u003cb\u003eRetry\u003c/b\u003e to uninstall again\n          {isSelfService \u0026\u0026 \", or contact your IT department\"}.\n        \u003c/\u003e\n      ),\n  },\n```"
          },
          {
            "author": {
              "login": "marko-lisica"
            },
            "body": "@RachelElysia I think we discussed this during standup. We decided not to don't show the update tooltip in the table if it fails. We'll show the update button in the \"Updates\" section + failed status."
          }
        ]
      },
      {
        "assignees": [
          "RachelElysia"
        ],
        "content": {
          "body": "## Related user story\n\n#27983\n\n## Task\n\nImplement the frontend as shown in the [Figma for the parent story](https://www.figma.com/design/K9BTJ3aZAvwWBXU9N8aqGa/-27983-Fleet-Desktop-%3E-Self-service--Add-%22Update%22-actions-when-updates-are-detected-for-installed-so?node-id=2-130\u0026p=f\u0026t=4BUeL3i6REY46HIb-11), with behavior corresponding to the [associated flowcharts](https://fleetdm.slack.com/files/U07GHNRUK17/F093LL7E30A/self-service_update_filtering___workflow_-_simplified.drawio). Note that all functionality is expected to happen client-side; if API bugs/misses prevent this, raise these issues as unreleased bugs during development.\n\n## Condition of satisfaction\n\nFrontend is implemented according to the above specs. Note that \"update all\" should be performed by a bunch of install calls rather than an action at a bulk endpoint.",
          "number": 29944,
          "repository": "fleetdm/fleet",
          "title": "Self-Service Update: Frontend",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/29944"
        },
        "estimate": 8,
        "id": "PVTI_lADOBDAnic4A4BEUzgcX124",
        "labels": [
          "~frontend",
          ":release",
          "~sub-task",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-08T00:00:00Z",
          "title": "4.72.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "80d566cb",
          "startDate": "2025-07-07",
          "title": "Sprint 44"
        },
        "status": "✅ Ready for release",
        "title": "Self-Service Update: Frontend"
      },
      {
        "assignees": [
          "jahzielv"
        ],
        "content": {
          "body": "**Fleet version**: main\n\n**Web browser and operating system**: n/a\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\nSoftware installs are queued but are never processed by osquery-perf hosts, they remain pending forever.\n\n### 🧑‍💻  Steps to reproduce\n\u003c!-- Provide step-by-step actions of how to recreate this bug in a clean install of Fleet. (This helps others understand and fix it more quickly.) --\u003e\n1. Set up a Fleet instance with several software items in the Library, all set to automatically install on policy failure\n2. Enroll some osquery-perf hosts (I used `go run ./cmd/osquery-perf/agent.go --enroll_secret \u003csecret_here\u003e --host_count 10 --os_templates macos_14.1.2 --start_period 5m --query_interval 60s --config_interval 5m -mdm_prob=0 -policy_pass_prob=\"0.5\"`\n3. See the policies fail and the software installs get queued up. Wait a while.\n\n### 🕯️ More info _(optional)_\nThis is currently blocking load testing efforts for [#30035](https://github.com/fleetdm/fleet/issues/30035)\n\n\u003c!-- If this is a performance issue, follow these steps to generate and attach a debug archive: https://fleetdm.com/docs/using-fleet/monitoring-fleet#debugging-performance-issues --\u003e\n\n\u003c!-- ### 🛠️ To fix --\u003e\n\u003c!-- If this bug requires additional product design work, uncomment the heading above and add instructions to fix, Figma link, etc. here once design changes are settled. --\u003e\n\u003c!-- Product designer: _________________________ --\u003e \u003c!-- Who is the product designer to contact if folks have questions about this fix? --\u003e\n",
          "number": 30913,
          "repository": "fleetdm/fleet",
          "title": "osquery-perf refuses to process software install requests for macOS",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/30913"
        },
        "estimate": 3,
        "id": "PVTI_lADOBDAnic4A4BEUzgcp4X0",
        "labels": [
          "bug",
          "~released bug",
          ":product",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-08T00:00:00Z",
          "title": "4.72.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "80d566cb",
          "startDate": "2025-07-07",
          "title": "Sprint 44"
        },
        "status": "✅ Ready for release",
        "title": "osquery-perf refuses to process software install requests for macOS",
        "comments": [
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "**QA Notes**\n\nTested in load test environment, software is now installing for all types of packages. "
          }
        ]
      },
      {
        "assignees": [
          "ksykulev"
        ],
        "content": {
          "body": "**Fleet version**: fleetctl - version rc-fleetctl-test-v4.63.0-1433-g2029cc98d9\n  branch: \tmain\n  revision: \t2029cc98d9e2f1f548d5567deafcea7485bc12f4\n  build date: \t2025-05-20\n  build user: \tjordan\n  go version: \tgo1.24.2\n\n**Web browser and operating system**: Chrome 136.0.7103.114 on macOS\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\nI have created a fairly simple Gitops setup with a single team and 7 different common .pkg software installers, Chrome, Edge, Firefox, Box, Slack, Zoom, Cloudflare WARP\n\nEvery time I run gitops the software_installers entry for Box gets updated including all the usual update side effects that are applied such as deleting currently pending installations. This seems like a bug, confirmed with SW team here: https://fleetdm.slack.com/archives/C086V2QK76X/p1747675290738609\n\n### 🧑‍💻  Steps to reproduce\n\u003c!-- Provide step-by-step actions of how to recreate this bug in a clean install of Fleet. (This helps others understand and fix it more quickly.) --\u003e\n1. Setup gitops\n2. Create a gitops team with some software\n3. Include the Box app. My latest-box-macos-pkg.yml is below. I've removed my ngrok URL from it but I've uploaded the exact package I am using [here](https://drive.google.com/file/d/1n3H1N3WuWgIHv2Qm5ghfP6bOkVF-g1qN/view?usp=sharing) on Google drive\n```\nurl: [url removed]/BoxDrive-2.43.205.pkg\nself_service: true\n```\n4. Run gitops, wait for it to complete\n5. Login to your mysql database and run `SELECT * FROM software_installers;` - note the updated_at time for the Box app\n6. Run gitops again, and rerun the query from 5 after it's done. Note the new updated_at time, and also that other apps didn't change\n\n \n### 🕯️ More info _(optional)_\nI discovered this while debugging this ticket: https://github.com/fleetdm/fleet/issues/28664\n\nI am working to make the setup experience more resilient here in general as part of the ticket above however it does seem like this behavior of the software getting updated and side effects applied is unintended and suboptimal here and could lead to other unexpected behavior if not fixed.\n\n### 🛠️ To fix\nWhen gitops is run with the same box installer pkg included multiple times it should not result in that installer being \"updated\"",
          "number": 29286,
          "repository": "fleetdm/fleet",
          "title": "🪲One particular software installer gets updated every time gitops run is conducted",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/29286"
        },
        "estimate": 3,
        "id": "PVTI_lADOBDAnic4A4BEUzgcX8R4",
        "labels": [
          "bug",
          ":release",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-08T00:00:00Z",
          "title": "4.72.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "80d566cb",
          "startDate": "2025-07-07",
          "title": "Sprint 44"
        },
        "status": "✅ Ready for release",
        "title": "🪲One particular software installer gets updated every time gitops run is conducted",
        "comments": [
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "Planning poker: https://fleetdm.slack.com/archives/C08RXDH5LHZ/p1747760158772119"
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "more context: https://fleetdm.slack.com/archives/C086V2QK76X/p1747675290738609"
          },
          {
            "author": {
              "login": "ksykulev"
            },
            "body": "This is seemingly pretty easily reproducible by adding a new team yml with box drive in gitops.\n```\n(fleet@[localhost]:3306) [fleet]\n\u003e select filename, id, team_id, updated_at from software_installers order by team_id desc;\n+-------------------------+----+---------+----------------------------+\n| filename                | id | team_id | updated_at                 |\n+-------------------------+----+---------+----------------------------+\n| BoxDrive-2.43.205.pkg   |  1 |       9 | 2025-07-15 21:51:27.200080 |\n| Slack-4.44.59-macOS.pkg |  2 |       9 | 2025-07-15 21:29:44.406000 |\n| googlechrome.dmg        |  3 |       9 | 2025-07-15 21:29:44.417411 |\n| BoxDrive-2.43.205.pkg   | 13 |       8 | 2025-07-15 21:49:11.554490 |\n| Slack-4.44.59-macOS.pkg | 14 |       8 | 2025-07-15 21:49:11.560796 |\n+-------------------------+----+---------+----------------------------+\n5 rows in set (0.00 sec)\n\n(fleet@[localhost]:3306) [fleet]\n\u003e select filename, id, team_id, updated_at from software_installers order by team_id desc;\n+-------------------------+----+---------+----------------------------+\n| filename                | id | team_id | updated_at                 |\n+-------------------------+----+---------+----------------------------+\n| Slack-4.44.59-macOS.pkg | 28 |      10 | 2025-07-15 22:44:36.454515 |\n| BoxDrive-2.43.205.pkg   | 29 |      10 | 2025-07-15 22:44:36.460138 |\n| googlechrome.dmg        | 30 |      10 | 2025-07-15 22:44:36.464730 |\n| BoxDrive-2.43.205.pkg   |  1 |       9 | 2025-07-15 22:45:00.940530 |\n| Slack-4.44.59-macOS.pkg |  2 |       9 | 2025-07-15 21:29:44.406000 |\n| googlechrome.dmg        |  3 |       9 | 2025-07-15 21:29:44.417411 |\n| BoxDrive-2.43.205.pkg   | 13 |       8 | 2025-07-15 22:44:45.480426 |\n| Slack-4.44.59-macOS.pkg | 14 |       8 | 2025-07-15 21:49:11.560796 |\n+-------------------------+----+---------+----------------------------+\n8 rows in set (0.00 sec)\n\n(fleet@[localhost]:3306) [fleet]\n\u003e select filename, id, team_id, updated_at from software_installers order by team_id desc;\n+-------------------------+----+---------+----------------------------+\n| filename                | id | team_id | updated_at                 |\n+-------------------------+----+---------+----------------------------+\n| Slack-4.44.59-macOS.pkg | 28 |      10 | 2025-07-15 22:44:36.454515 |\n| BoxDrive-2.43.205.pkg   | 29 |      10 | 2025-07-15 22:46:52.967720 |\n| googlechrome.dmg        | 30 |      10 | 2025-07-15 22:44:36.464730 |\n| BoxDrive-2.43.205.pkg   |  1 |       9 | 2025-07-15 22:47:20.744843 |\n| Slack-4.44.59-macOS.pkg |  2 |       9 | 2025-07-15 21:29:44.406000 |\n| googlechrome.dmg        |  3 |       9 | 2025-07-15 21:29:44.417411 |\n| BoxDrive-2.43.205.pkg   | 13 |       8 | 2025-07-15 22:47:03.419169 |\n| Slack-4.44.59-macOS.pkg | 14 |       8 | 2025-07-15 21:49:11.560796 |\n+-------------------------+----+---------+----------------------------+\n8 rows in set (0.00 sec)\n```\n\nIt returns different updated_at results after apply, and then after a while it seems to stop changing. Will investigate further."
          },
          {
            "author": {
              "login": "ksykulev"
            },
            "body": "Running it over and over again with a single team seems to keep the value consistent:\n```\n\u003e select filename, id, team_id, updated_at from software_installers;\n+-------------------------+----+---------+----------------------------+\n| filename                | id | team_id | updated_at                 |\n+-------------------------+----+---------+----------------------------+\n| BoxDrive-2.43.205.pkg   |  1 |       9 | 2025-07-15 21:29:44.399978 |\n| Slack-4.44.59-macOS.pkg |  2 |       9 | 2025-07-15 21:29:44.406000 |\n| googlechrome.dmg        |  3 |       9 | 2025-07-15 21:29:44.417411 |\n+-------------------------+----+---------+----------------------------+\n3 rows in set (0.01 sec)\n\n(fleet@[localhost]:3306) [fleet]\n\u003e select filename, id, team_id, updated_at from software_installers;\n+-------------------------+----+---------+----------------------------+\n| filename                | id | team_id | updated_at                 |\n+-------------------------+----+---------+----------------------------+\n| BoxDrive-2.43.205.pkg   |  1 |       9 | 2025-07-15 21:29:44.399978 |\n| Slack-4.44.59-macOS.pkg |  2 |       9 | 2025-07-15 21:29:44.406000 |\n| googlechrome.dmg        |  3 |       9 | 2025-07-15 21:29:44.417411 |\n+-------------------------+----+---------+----------------------------+\n3 rows in set (0.00 sec)\n```"
          },
          {
            "author": {
              "login": "ksykulev"
            },
            "body": "So it looks like the uninstall script for box is changing. In specific:\n```\n  pkg_ids=(\n    \"com.box.desktop.installer.local.appsupport\"\n    \"com.box.desktop.installer.autoupdater\"\n    \"com.box.desktop.installer.desktop\"\n  )\n\n  pkg_ids=(\n    \"com.box.desktop.installer.desktop\"\n    \"com.box.desktop.installer.local.appsupport\"\n    \"com.box.desktop.installer.autoupdater\"\n  )\n```\n\nThen we have this fancy query to tell us if anything has changed:\nhttps://github.com/fleetdm/fleet/blob/main/server/datastore/mysql/software_installers.go#L2094-L2122\n```\nSELECT id,\nstorage_id != ? is_package_modified,\ninstall_script_content_id != ? OR uninstall_script_content_id != ? OR pre_install_query != ? OR\nCOALESCE(post_install_script_content_id != ? OR\n\t(post_install_script_content_id IS NULL AND ? IS NOT NULL) OR\n\t(? IS NULL AND post_install_script_content_id IS NOT NULL)\n, FALSE) is_metadata_modified FROM software_installers\nWHERE global_or_team_id = ?\tAND title_id IN (\n\tSELECT id FROM software_titles WHERE unique_identifier = ? AND source = ? AND browser = ''\n)\n```\nSo `is_metadata_modified` is returning true, because the `uninstall_script_content_id` is changing."
          }
        ]
      },
      {
        "assignees": [
          "iansltx"
        ],
        "content": {
          "body": "### 💥  Actual behavior\n\nThe Homebrew based Chrome FMA refers to a non-versioned download URL, so the latest version of Chrome gets downloaded rather than the version specified in the manifest. Homebrew explicitly skips a hash check on Chrome, ensuring downloads are successful when new versions are released at the expense of download verification.\n\n### 🧑‍💻  Steps to reproduce\n\nSee the FMA manifest for `chrome/darwin`.\n\n### More info\n\nWe've had this issue with macOS Chrome since FMAv1 rolled out, and FMAv2 inherits the issue as we're pulling from the same source.\n\n### 🛠️ To fix\n\nSee https://github.com/fleetdm/fleet/issues/27919#issuecomment-2791036030.\n\nAlso add a FMA docs update to indicate we're using Chrome Enterprise.\n\n[Figma design](https://www.figma.com/design/rSYo3wpfkJo0EklCbF7MFp/-27919-macOS-Chrome-FMA-doesn-t-have-hash-specified-in-manifest?node-id=2-130\u0026p=f\u0026t=NObiCXiVgHjCPeb3-11)\n\n### To QA\n\nWhile pointing at the associated branch for FMA manifests, confirm that adding Chrome shows the \"Latest\" copy on the FMA add page and details modal, and when added shows the current version of Chrome. Confirm install/uninstall work as expected. Delete the app from Fleet and re-add via GitOps to confirm the version number and scripts are the same as when you added via the UI. Confirm that a normal DMG or ZIP FMA is unaffected by these changes (still shows/adds version number from the manifest).",
          "number": 27919,
          "repository": "fleetdm/fleet",
          "title": "🪲macOS Chrome FMA downloads latest version instead of specified version in UI",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/27919"
        },
        "estimate": 3,
        "id": "PVTI_lADOBDAnic4A4BEUzgcX7Ag",
        "labels": [
          "bug",
          "~backend",
          ":release",
          "~released bug",
          "#g-software",
          "~qa-on-branch"
        ],
        "milestone": {
          "dueOn": "2025-08-08T00:00:00Z",
          "title": "4.72.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "80d566cb",
          "startDate": "2025-07-07",
          "title": "Sprint 44"
        },
        "status": "✅ Ready for release",
        "title": "🪲macOS Chrome FMA downloads latest version instead of specified version in UI",
        "comments": [
          {
            "author": {
              "login": "atharva-navani16"
            },
            "body": "Hi @iansltx  , @mostlikelee you are right Google doesn’t expose a versioned URL for Chrome downloads (unlike tools like Winget on Windows).\n\nAs you mentioned finding another source can be an option but reliable alternative source is challenging. They might not offer long-term stability or guaranteed authenticity, which raises concerns for maintaining and future support.\n\nA few possible solutions could be:\n**1.Self-Host Chrome Binaries**\nHost .dmg files on FleetDM-controlled storage (e.g., S3) and reference them in manifests.\nPros: Full control, stable URLs/hashes.\nCons: Manual uploads, storage/maintenance overhead.\n\n**2.Chrome for Testing** \nUse Google’s testing URLs and fetch versions/hashes via metadata feeds.\nPros: Automatable, no hosting required.\nCons: Not intended for production, arch-specific URLs.\n\n**3.Enterprise Bundle**\nDownload official .pkg installers from Google’s enterprise portal and rehost them.\nPros: Supported and stable.\nCons: Manual effort, may require licensing.\n\nFeel free to review these options and see which one aligns best with your product requirements and workflows. If any of these approaches seem like a good fit, I’d be happy to help implement or contribute further.\n"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@atharva-navani16 Thanks for the research here; I wasn't aware of Chrome for Testing as an option.\n\nFor Chrome for Testing, you're talking about [this feed](https://googlechromelabs.github.io/chrome-for-testing/known-good-versions-with-downloads.json), right? Either way, arch-specific, and a quite different install format vs. the PKGs, is probably a dealbreaker there.\n\nOf self-host and enterprise bundle, seems like the latter winds up with more steps/more issues for the same result, since the self-hosting could be automated (when a new version is detected, grab the downloader and upload it via object storage to object storage)."
          },
          {
            "author": {
              "login": "atharva-navani16"
            },
            "body": "@iansltx  Makes sense! self-hosting with automation sounds like the way to go! \n\nGrab the latest .dmg from Google’s URL,\nAuto-upload it to S3 with versioned paths + SHA256,\nUpdate Fleet’s manifest.\n\nHappy to share reference scripts if useful"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@eugkuo Dropping this back to Ready since, while this is filed as a bug, it'll be useful to figure out prioritization here given that this will require a decent lift for a secondary feature of a single app that'll generally auto-update anyway. Which sounds like riding the line between a bug and a story but basically all of the story template is irrelevant because this work will be entirely done in either infrastructure or FMA ingestion."
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@iansltx Coolio. How does prioritization happen in cases like this?\n\ncc @noahtalerman "
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Async else design review, I think?"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Per design review today, we'll show the Chrome version as \"latest\" in the UI with a tooltip when adding the FMA, and extract version information from the package once we download it. We _will not_ do anything to actually version-pin the package at this time (/cc @mostlikelee).\n\nTo avoid breaking existing FMA processing, we can key this behavior off of the `no_check` hash; if we see that in a manifest, we:\n\n1. Show `latest` on the version field on `GET /fleet_maintained_apps/:id`\n2. Extract the version from the package when adding the FMA rather than using what's in the API\n3. Show \"latest\" with a tooltip in the UI\n\nThis means that we'll have changes to the experimental [Get FMA API endpoint](https://fleetdm.com/docs/rest-api/rest-api#get-fleet-maintained-app) as a result of this bugfix (documenting \"latest\" as a version number), but no changes to FMA ingestion.\n\nWhile QA'ing this, we need to test against both Windows and macOS Chrome FMAs, as both don't check hashes right now. If the current version shows as \"latest\" on the FMA add screen for both, and the correct version is extracted on app add (even on a manifest that's out of date), we're good to go here."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@eugkuo once you have the UI ready for this, ping me. Assuming the UI makes sense (it probably will) I'll move this back to Ready to Estimate and ping folks for Planning Poker on the backend side (and will ping Rachel to estimate the FE bit separately)."
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@iansltx I added a [Figma design](https://www.figma.com/design/rSYo3wpfkJo0EklCbF7MFp/-27919-macOS-Chrome-FMA-doesn-t-have-hash-specified-in-manifest?node-id=2-130\u0026p=f\u0026t=NObiCXiVgHjCPeb3-11) to the **To Fix** section.\n\ncc @noahtalerman "
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@eugkuo Works for me. Revised \"To fix\" to link to my comment above since 95% of the work will be the backend tweaks."
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "@eugkuo small UI nit. It looks like we're using a mix of the underline and tooltip styles in your Figma [here](https://github.com/user-attachments/assets/f3097eed-f5ef-46fe-a0bf-fbf4cd6cb2c5).\n\nTooltips in Fleet either have an underline (tooltip shows up under the line with no arrow) or an arrow (no underline). I think we want to pick either one here. Up to you on which.\n\nHere's some examples live in dogfood:\n![Image](https://github.com/user-attachments/assets/539c00aa-1351-482e-a856-6b7ea4c6a8a3)\n\n![Image](https://github.com/user-attachments/assets/2a955b10-6718-4231-89c8-cfa4c8e0b76a)\n"
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@noahtalerman Oh interesting. Perkins and I were trying to figure out what the convention was for where tooltips show. \n\nIs there an idea that the arrow one gives more information about the thing being rolled over and the one below provides more context about what the thing is?\n\nI updated this to show below using the above logic."
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "@eugkuo I think it's mostly a stylistic choice. Thought process: for a specific scenario, which makes the most sense?\n\ncc @marko-lisica @rachaelshaw "
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@noahtalerman I'm going to try using the framework I outlined above and see how it goes for the next few tooltip scenarios in order to try and formalize something.\n\ncc @marko-lisica @rachaelshaw "
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "updated the bug title based on the solution discussed in the comments"
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "@ksykulev @jahzielv @iansltx please add estimates to https://docs.google.com/forms/d/e/1FAIpQLSeGjTUV2G2NHQEAtLFodMgUSwpzGjdF-2SzUIa52J_j71hQbQ/viewform"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "So, we have a hangup here.\n\nThe version of Chrome that Homebrew links is a DMG. We don't parse those. Which means we can't extract the version on the Fleet server side as discussed in the recommended fix without making other changes.\n\nOne option would be to switch Chrome to use the PKG installer (https://dl.google.com/dl/chrome/mac/universal/stable/gcem/GoogleChrome.pkg), but question is whether we want to switch explicitly to Google CHrome Enterprise here (probably?) from the version Homebrew points to. There's also a PKG installer that @allenhouchins has listed https://github.com/fleetdm/fleet/blob/main/it-and-security/lib/macos/software/google-chrome.yml#L1.\n\nAt that point we _could_ extract version data on a \"latest\" tag (I already have that code written, though I think I still need to add support for FMA-via-GitOps), and our FMA manifest could be built without Homebrew entirely as everything in the manifest (version, URL, install/uninstall script) would be static (would just be a Chrome-specific version of our generic pkg install/uninstall scripts, which we know work because we're using them for dogfood).\n\nThe main alternative here would be to have an accelerated CI workflow _just for Mac Chrome_, where we run a copy of our FMA ingest pipeline dedicated to Chrome and immediately approve/merge changes there that only involve manifest version bumps. This is no worse from a QA perspective than our existing setup, since Fleet server admins are getting the new version anyway, and the level of effort required for this is quite low (and this would work with zero changes to Fleet server, and would let us keep the DMG package format).\n\nA final alternative would be to build at least version parsing from DMGs, but that would be a significantly larger undertaking, while the alternatives above could be completed within this ticket's estimate.\n\n@marko-lisica @mostlikelee which way do we want to go here?"
          },
          {
            "author": {
              "login": "marko-lisica"
            },
            "body": "From Google:\n\n\"Google Chrome Enterprise is essentially the same Chrome browser used by consumers, but with additional features and management tools tailored for businesses and organizations\"\n\nI think having Google Chrome Enterprise is good solution. It's same browser for end-user, except it allows admins to specify org settings.\n\n@iansltx When you say static manifest, does that mean we'll need to add additional input method [here](https://github.com/fleetdm/fleet/tree/main/ee/maintained-apps/inputs)?\n\nHow does that change the contribution process?"
          },
          {
            "author": {
              "login": "ksykulev"
            },
            "body": "Just as a small aside, google chrome enterprise on windows is one of the applications that was missing the install path in osquery because it didn't set the registry correctly.\nhttps://github.com/fleetdm/fleet/issues/29449#issuecomment-2989108748\n\nI know we are talking about mac here, but just wanted to drop that in here, in case there are some differences on the mac version as well."
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "+1 on google chrome enterprise.  It's already what is used for [Windows FMA](https://github.com/microsoft/winget-pkgs/blob/master/manifests/g/Google/Chrome/138.0.7204.101/Google.Chrome.installer.yaml) so we could possibly rename the FMA across platforms to something like `Chrome Enterprise` if we wish."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@marko-lisica I'm planning on nuking the input file for macOS Chrome entirely. Our FMA ingestion tool won't modify JSON files that aren't in-scope so it's safe to take this approach (which also means no code changes required to ingestion).\n\n@mostlikelee Given inventory constraints, I don't think we can change the name...it's still going to show up as Google Chrome IIRC. But given our audience I agree that Chrome Enterprise makes sense to serve by default; if someone is using Fleet Premium there's a decent chance they want Chroem Enterprise anyway.\n\n@ksykulev I think I've grabbed the Chrome Enterprise pkg before and haven't noticed anything amiss there, so we _should_ be good.\n\nI'll proceed with \"option 1\" above, so this is now unblocked."
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "\u003e Given inventory constraints, I don't think we can change the name.\n\ntrue, if anything maybe we can update docs"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "So, I thought we'd be good to go with a static output file, but our generated PKG uninstall script doesn't clean up Chrome properly from what I can see, but the Homebrew version dos (gonna test with Chrome Enterprise momentarily; it successfully uninstalled the Chrome I had on this machine prior).\n\nSo we'll want Homebrew  + overrides rather than a static file.\n\nI'll want to build overrides off of @ksykulev's MSRC feed work _and_ @jahzielv's FMA Homebrew custom install script work, so first order of business is catching Konstantin's PR up to `main`. Then layer in updates on top of that.\n\nShould be able to get this turned tonight still, though it'll be in line behind the MS Office PR for merge."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@marko-lisica Making one minor tweak to Figma: showing \"Google Chrome\" rather than \"Chrome\" so we can just use the FMA name there rather than a bespoke value."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Also, Figma doesn't show what to do in the \"Show details\" modal so I added a tooltip there (screenshots incoming on PR)."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@mostlikelee Added Chrome Enterprise to the description in apps.json. Probably makes more sense to mention there than in the docs."
          },
          {
            "author": {
              "login": "marko-lisica"
            },
            "body": "\u003e @marko-lisica Making one minor tweak to Figma: showing \"Google Chrome\" rather than \"Chrome\" so we can just use the FMA name there rather than a bespoke value.\n\n\u003e Also, Figma doesn't show what to do in the \"Show details\" modal so I added a tooltip there (screenshots incoming on PR).\n\nLooks good to me! Thanks!"
          },
          {
            "author": {
              "login": "ksykulev"
            },
            "body": "Do we plan on using \"latest\" for the windows FMA as well? I know it's not part of this issue, but looking at the download URL in `ee/maintained-apps/outputs/google-chrome/windows.json`, it is also not versioned `https://dl.google.com/dl/chrome/install/googlechromestandaloneenterprise64.msi`"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@ksykulev No; @jahzielv is swapping Windows to a version-pinned installer in #27756."
          }
        ]
      },
      {
        "assignees": [
          "iansltx"
        ],
        "content": {
          "body": "**Fleet version**: 4.68.1\n\n**Web browser and operating system**: Firefox 139 on Fedora 42\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\n\u003c!-- What did you see?  Paste a screenshot, include a 30s video, or write 1-2 sentences describing the issue you observed. --\u003e\nWhen uploading a .deb and a .rpm package to Fleet for self-service, on a host that is only compatible with one of the formats, both packages will be available in the self-service UI. When you attempt to install the mismatched package, the installation will fail.\n\n### 🧑‍💻  Steps to reproduce\n\u003c!-- Provide step-by-step actions of how to recreate this bug in a clean install of Fleet. (This helps others understand and fix it more quickly.) --\u003e\n1. Upload a .deb and .rpm, enabling self-service for both, to a team with a Linux host.\n2. Navigate to self-service on the host and observe that both packages are available for installation.\n3. Attempt to install the mismatched package for your host.\n\n### 🕯️ More info _(optional)_\n\u003c!-- Add any additional details you think could be relevant to solving or reproducing the bug (e.g., \"this does not reproduce when...\") --\u003e\nN/A\n\n\u003c!-- If this is a performance issue, follow these steps to generate and attach a debug archive: https://fleetdm.com/docs/using-fleet/monitoring-fleet#debugging-performance-issues --\u003e\n\n\u003c!-- ### 🛠️ To fix --\u003e\nShow only the package that's compatible with the host.\n",
          "number": 29849,
          "repository": "fleetdm/fleet",
          "title": "🪲 Self-service serves incompatible packages to Linux hosts",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/29849"
        },
        "estimate": 3,
        "id": "PVTI_lADOBDAnic4A4BEUzgcX2sI",
        "labels": [
          "bug",
          ":release",
          "customer-numa",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-08T00:00:00Z",
          "title": "4.72.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "80d566cb",
          "startDate": "2025-07-07",
          "title": "Sprint 44"
        },
        "status": "✅ Ready for release",
        "title": "🪲 Self-service serves incompatible packages to Linux hosts",
        "comments": [
          {
            "author": {
              "login": "Sampfluger88"
            },
            "body": "Linked to Unthread ticket:\n\u003e [Fleet self-service handling of custom packages for Linux distros #6554](https://fleetdm.unthread.io/dashboard/inbox/all/conversations/f586902d-3b77-46a4-8c6a-8f9f231cbb1f)"
          },
          {
            "author": {
              "login": "sharon-fdm"
            },
            "body": "@mason-buettner, was this reproduced by you or reported by customer (and need reproduction)?\nAnyway, assigning Orchestration team."
          },
          {
            "author": {
              "login": "mason-buettner"
            },
            "body": "@sharon-fdm I've reproduced this. Attaching screenshots of the application details in self-service, and the view from the host that's still allowing me to retry the failed install.\n\n![Image](https://github.com/user-attachments/assets/acbc3f81-122f-4d2a-a64d-fd55ebdf004c)\n\n![Image](https://github.com/user-attachments/assets/e3c31560-93a8-4f93-a885-3b9a688a0339)\n\n![Image](https://github.com/user-attachments/assets/f5a9b126-cb74-4b85-8d52-656e4f46f6a9)"
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@mostlikelee I took a stab at the to fix. It seems like it'd be the reasonable expectation but I don't know what would really have to go into that."
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "**QA Notes**\n\nTested on Ubuntu and Fedora.\n\nUploaded .deb, .rpm, and .tar.gz files\nConfirmed only .deb and .tar.gz files were available in self service for Ubuntu hosts.\nConfirmed only .rpm and .tar.gz files were available in self service for Fedora hosts. "
          }
        ]
      },
      {
        "assignees": [
          "iansltx"
        ],
        "content": {
          "body": "**Fleet version**: 4.65RC and older\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\nCVE-2025-43200 is shown twice for macOS 15.1.1 in Dogfood.\n\n### 🧑‍💻  Steps to reproduce\n\n1. Enroll a Mac with a vulnerable OS version and run vulnerabilities\n2. Enroll a Mac with a different architecture but the same (vulnerable) OS version and run vulnerabilities again\n3. Check the detail page for the shared OS version; you'll see duplicate CVEs\n\nThis is also visible in the OS list view when hovering the vulnerabilities column for an affected version (or, more easily, in the OS versions collection endpoint) that powers the list.\n\nSee [Dogfood](https://dogfood.fleetdm.com/software/os/144). The duplicate is from the API, so this is a backend issue.\n\n### 🛠️ To fix\nSince we don't split out different architectures in the UI for OS version, seems like we need to merge rows for the OS vulnerabilities query so there is one result row per CVE per name/version combo, even if there are multiple architectures and thus multiple rows.\n\nIf we want to split out OS versions by architecture later we can revise the query logic to look at vulns by OS version ID rather than by name/version, which will give us one row per vuln.",
          "number": 27061,
          "repository": "fleetdm/fleet",
          "title": "🪲OS list/detail shows the same CVE twice when an OS version has multiple architectures",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/27061"
        },
        "estimate": 3,
        "id": "PVTI_lADOBDAnic4A4BEUzgcX420",
        "labels": [
          "bug",
          "~backend",
          ":release",
          "~vulnerability-management",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-08T00:00:00Z",
          "title": "4.72.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "80d566cb",
          "startDate": "2025-07-07",
          "title": "Sprint 44"
        },
        "status": "✅ Ready for release",
        "title": "🪲OS list/detail shows the same CVE twice when an OS version has multiple architectures",
        "comments": [
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Marking this as a released bug as this is almost certainly an issue with the `ListVulnsByOsNameAndVersion` data store function query, probably for both Fleet Free and Fleet Premium versions of the query, due to multiple rows in the OS versions table for the same OS name and version due to differing architectures.\n\n@rfairburn can you pull the results of the following query from Dogfood?\n\n```sql\nSELECT id FROM operating_systems WHERE name = \"macOS\" AND version = \"15.3.1\"\n```\n\nPretty sure there will be two rows there, one per arch, in which case that'll confirm my suspicion of where the problem is.\n\nIf that's the issue, fix would probably be to add a group-by on CVE number, at which point we'll need to pick a reasonable value for `created_at` (probably `MIN()`) for cases where multiple rows are returned."
          },
          {
            "author": {
              "login": "rfairburn"
            },
            "body": "@iansltx \n\n```\n+-----+\n| id  |\n+-----+\n| 487 |\n| 504 |\n+-----+\n2 rows in set (4.12 sec)\n```\n\nFurther inspection confirms that they are differentiated by `arch` but the same name and version."
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "planning poker: https://fleetdm.slack.com/archives/C08RXDH5LHZ/p1750360526707539"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Updated repro steps based on further analysis (enrolling two different-arch same-version hosts at the same time won't trigger this), and swapped repro to reference OS versions/vulns where this is still an issue in Dogfood."
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "**QA Notes**\n\n1. Enroll a Mac with a vulnerable OS version and run vulnerabilities\n2. Enroll a Mac with a different architecture but the same (vulnerable) OS version and run vulnerabilities again\n\n- [x] Check the detail page for the shared OS version there should not be duplicate CVEs"
          }
        ]
      },
      {
        "assignees": [
          "iansltx"
        ],
        "content": {
          "body": "**Fleet version**: v4.69.0\n\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\n\u003c!-- What did you see?  Paste a screenshot, include a 30s video, or write 1-2 sentences describing the issue you observed. --\u003e\n\nAfter uploading a custom package to Fleet and using the returned hash_sha256 to create a software yaml in my GitOps repo, I am unable to create a policy automation.  \n\nExample:\n\n#### /lib/software/1password.yml\n\n```\nhash_sha256: 8e6a49d6d26d01586dfbbb89b2c2b48d51ef535a9dccea573945bb776b3901ab\n```\n\n#### /teams/my-team.yml\n\n```\nsoftware:\n  packages:\n    - path: ../lib/software/1password.yml\npolicies:\n  - name: macOS - 1Password installed\n    query: SELECT 1 FROM apps WHERE bundle_identifier = 'com.1password.1password';\n    install_software:\n      package_path: ../lib/software/1password.yml\n    critical: false\n    description: Our SOC 2 policies require a password manager to be installed on all workstations.\n    resolution: 1Password should be automatically installed. If it is missing, install it from self-service. \n    platform: darwin\n```\n\nThe policy and software are successfully applied to the team, but the 'install software' automation is not created.\n\nFrom customer:\n\n\"The policy and the software are in Fleet. However, the Policy does not seem to have the software item associated with it, to be executed when the policy fails. I can add it manually in the UI.\"\n\n\u003e We did not explicitly test this using a policy yaml rather than an inline definition while reproducing.\n\n### 🧑‍💻  Steps to reproduce\n\n1. Upload a custom package to the Fleet UI with GitOps mode enabled.\n2. Utilize the `hash_sha256` of the software to create a software yaml in GitOps repo.\n3. Add software YAML to a policy to install that software package\n\n\n### 🕯️ More info _(optional)_\n\u003c!-- Add any additional details you think could be relevant to solving or reproducing the bug (e.g., \"this does not reproduce when...\") --\u003e\nN/A\n\n\u003c!-- If this is a performance issue, follow these steps to generate and attach a debug archive: https://fleetdm.com/docs/using-fleet/monitoring-fleet#debugging-performance-issues --\u003e\n\n### 🛠️ To fix\n\nProduct designer: @marko-lisica\n\nMake sure that user can add policy automation to install software when using GitOps mode and software `hash_sha256`.\n",
          "number": 30435,
          "repository": "fleetdm/fleet",
          "title": "[ GitOps ] Cannot create automation for software uploaded as a custom package in Fleet",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/30435"
        },
        "estimate": 5,
        "id": "PVTI_lADOBDAnic4A4BEUzgcX2Wc",
        "labels": [
          "bug",
          ":release",
          "~released bug",
          "P2",
          "customer-numa",
          "customer-mozartia",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-08T00:00:00Z",
          "title": "4.72.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "80d566cb",
          "startDate": "2025-07-07",
          "title": "Sprint 44"
        },
        "status": "✅ Ready for release",
        "title": "[ GitOps ] Cannot create automation for software uploaded as a custom package in Fleet",
        "comments": [
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Swapping this over to the product board for triage, as this hasn't been assigned a P1 so it can't hop onto the release board unestiamted."
          },
          {
            "author": {
              "login": "ksatter"
            },
            "body": "Thanks @iansltx "
          },
          {
            "author": {
              "login": "Sampfluger88"
            },
            "body": "Linked to Unthread ticket:\n\u003e [Help with potential Fleet bug in custom packages #7000](https://fleetdm.unthread.io/dashboard/inbox/all/conversations/d55bc828-21c7-45e3-8626-613e52ada076)"
          },
          {
            "author": {
              "login": "marko-lisica"
            },
            "body": "Hey @mostlikelee, this issue appears to be preventing GitOps users from automatically installing software. We should prioritize this and assign it a `P2`. What do you think?"
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "\u003e Hey [@mostlikelee](https://github.com/mostlikelee), this issue appears to be preventing GitOps users from automatically installing software. We should prioritize this and assign it a `P2`. What do you think?\n\nAgree, adding the P2 label\n\ncc: @lukeheath \n"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "I get a more explicit error rather than a silent failure:\n\n```\nError: 2 errors occurred:\n\t* software URL is required\n\t* failed to parse policy install_software \"macOS - Firefox installed\": install_software.package_path URL  not found on team: ../lib/software/firefox.yml\n```\n\nEDIT: Never mind. Old fleetctl version locally. Was able to repro what I believe to be the same issue."
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "**QA Notes**\n\n1. Upload a custom package to the Fleet UI with GitOps mode enabled.\n2. Utilize the hash_sha256 of the software to create a software yaml in GitOps repo.\n3. Add software YAML to a policy to install that software package\n(I followed the format in the description of this ticket)\n- [x] Confirm after running GitOps that the software automation is applied to the policy\n\nNote: I also tried by using the hash_sha256 in both the packages section and the policy section like this:\nand confirmed after running GitOps that the software automation was applied to the policy\n\n\u003cimg width=\"734\" height=\"431\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/718f6915-775a-4577-aafa-13478c72e92b\" /\u003e\n\u003cimg width=\"724\" height=\"443\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/11114d03-53f7-4d12-ab5a-095910664f40\" /\u003e"
          }
        ]
      },
      {
        "assignees": [
          "ksykulev"
        ],
        "content": {
          "body": "**Fleet version**: v4.68.0\n**Web browser and operating system**: n/a\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\n\nhttps://github.com/user-attachments/assets/caf5f833-cc19-4621-9182-45fa36eeb8bb\n\nDatabase for repro can be found here:\nhttps://drive.google.com/file/d/1DJDOk0Dr5d1UdP12AbxxgnwBBUsLAADF/view?usp=drive_link\n\n### 🧑‍💻  Steps to reproduce\n\u003c!-- Provide step-by-step actions of how to recreate this bug in a clean install of Fleet. (This helps others understand and fix it more quickly.) --\u003e\n1. Add a label to fleet, make sure the label isn't applied to any hosts\n2. Add an FMA or custom package to a team, use \"Custom\" target, exclude any, for the label that no hosts have. Make it available in Self service.\n3. For an enrolled host on that team, check the software that is \"Available for install\"\n4. Open Self service for the host\n\n### 🕯️ Expected Behavior\n\"Software will only be available for install on hosts that don't have any of these labels\"\nOur host does not have the label, so the software should be available for install for this host. \n\n\u003c!-- If this is a performance issue, follow these steps to generate and attach a debug archive: https://fleetdm.com/docs/using-fleet/monitoring-fleet#debugging-performance-issues --\u003e\n\n### 🛠️ To fix\nManual labels should not consider timestamps for membership.\n",
          "number": 29315,
          "repository": "fleetdm/fleet",
          "title": "🪲FMA/Custom packages not respecting custom scoping \"exclude any\" for label that doesn't exist on host",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/29315"
        },
        "estimate": 3,
        "id": "PVTI_lADOBDAnic4A4BEUzgcX8dE",
        "labels": [
          "bug",
          ":release",
          "~released bug",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-08T00:00:00Z",
          "title": "4.72.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "80d566cb",
          "startDate": "2025-07-07",
          "title": "Sprint 44"
        },
        "status": "✅ Ready for release",
        "title": "🪲FMA/Custom packages not respecting custom scoping \"exclude any\" for label that doesn't exist on host",
        "comments": [
          {
            "author": {
              "login": "ksykulev"
            },
            "body": "I noticed in the database dump the label \"Nobody has this label\" was created at `2025-05-20 22:14:03`, however, the host's `label_updated_at` time was `2025-05-20 21:53:39`. In our previous available software query we are doing this check `:host_label_updated_at \u003e= lbl.created_at` with a comment above it stating\n```\nignore software that depends on labels created\n _after_ the label_updated_at timestamp of the host (because\nwe don't have results for that label yet, the host may or may\nnot be a member\n```\n\nWhich is why in this particular case firefox is getting excluded. When I run the following query `update hosts set label_updated_at = '2025-05-20 23:00:00' where id = 2;` and reload the page I get firefox in the result set.\n\n\u003cimg width=\"1639\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/f99f21a8-171e-475e-abc5-d7c4e3999657\" /\u003e\n\nIt looks like that `label_updated_at` gets updated when we refetch the host vitals?"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "Thanks @ksykulev I went back to 4.66.0 and confirm this works the same way. "
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "I'm leaving this as a bug because it's not intuitive for the end user to understand why it works the way it does. "
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@mostlikelee @ksykulev I proposed a solution in the `to fix` area and am moving this to **Ready to estimate**.\n\n@mostlikelee do you want to keep this as a bug or convert it to a feature request?"
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "In the above case:\n1. A dynamic label was created (@jmwatts  can you confirm this is only for dynamic?)\n2. The host hasn't refreshed, so we don't know yet if it's a member of the label.  Fleet assumes the host does not have this label.\n3. This software has a target that excludes that label.\n\nSo the current state is that the host is not in the label, so it _should_ show in the list.\n\nCould use a sanity check from @lucasmrod here as this is the same behavior for policy targets."
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "@mostlikelee I was not using dynamic labels so it does apply to manual labels. "
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "\u003e [@mostlikelee](https://github.com/mostlikelee) I was not using dynamic labels so it does apply to manual labels.\n\nok, let's scope this to remove timestamp consideration from manual labels.  updating the \"to Fix\" section."
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "planning poker: https://fleetdm.slack.com/archives/C08RXDH5LHZ/p1748525930809559"
          },
          {
            "author": {
              "login": "ksatter"
            },
            "body": "@ksykulev I'm seeing an issue where Manual labels are also not being respected for 'labels include any'. Do you think this is likely the same root problem, or should we break that out into a separate issue?"
          },
          {
            "author": {
              "login": "ksykulev"
            },
            "body": "@ksatter ~~Right now the logic stands that if a label (manual or dynamic) is created and we don't fetch host vitals, whatever the label is doing will not apply to the host. So in your case, `labels include any` also falls under this case.~~\n~~After this issue is fixed, any type of manual label will apply despite the `created_at` time or host `label_updated_at` time~~\n\nI was incorrect, looking at the query it doesn't look like it's checking timestamp for `include_any`.\nhttps://github.com/fleetdm/fleet/blob/main/server/datastore/mysql/software.go#L2645-L2662\n\n@jmwatts In the case of `exclude_any`, manual labels will apply \"immediately\" and dynamic labels will require a host refetch. How do we want `include_any` to work? Same logic? Or does timestamp not matter in their case?"
          }
        ]
      },
      {
        "assignees": [
          "jahzielv"
        ],
        "content": {
          "body": "**Fleet version**: \u003c!-- Copy this from the \"My account\" page in the Fleet UI, or run `fleetctl --version` --\u003e\n\n**Web browser and operating system**: \u003c!-- e.g. Chrome 88.0.4324 running on macOS --\u003e\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\n\u003c!-- What did you see?  Paste a screenshot, include a 30s video, or write 1-2 sentences describing the issue you observed. --\u003e\n\nhttps://github.com/user-attachments/assets/2927ea40-4477-4a09-a393-e1583a85cb75\n\n### 🧑‍💻  Steps to reproduce\n\u003c!-- Provide step-by-step actions of how to recreate this bug in a clean install of Fleet. (This helps others understand and fix it more quickly.) --\u003e\n1. Go to dogfood CVE details page https://dogfood.fleetdm.com/software/vulnerabilities/CVE-2025-24162 and note the detected date\n2. Go to dogfood vulnerabilities table page  https://dogfood.fleetdm.com/software/vulnerabilities?exploit=false\u0026query=CVE-2025-24162\u0026order_direction=desc\u0026order_key=hosts_count\u0026page=0 and note the detected date\n\n### 🕯️ More info _(optional)_\n\u003c!-- Add any additional details you think could be relevant to solving or reproducing the bug (e.g., \"this does not reproduce when...\") --\u003e\nN/A\n\n\u003c!-- If this is a performance issue, follow these steps to generate and attach a debug archive: https://fleetdm.com/docs/using-fleet/monitoring-fleet#debugging-performance-issues --\u003e\n\n\u003c!-- ### 🛠️ To fix --\u003e\n\u003c!-- If this bug requires additional product design work, uncomment the heading above and add instructions to fix, Figma link, etc. here once design changes are settled. --\u003e\n\u003c!-- Product designer: _________________________ --\u003e \u003c!-- Who is the product designer to contact if folks have questions about this fix? --\u003e\nDetected date on software vuln table should match detected date in details ",
          "number": 26618,
          "repository": "fleetdm/fleet",
          "title": "🪲Software vuln detected dates do not match between screens",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/26618"
        },
        "estimate": 2,
        "id": "PVTI_lADOBDAnic4A4BEUzgcX7LA",
        "labels": [
          "bug",
          "~backend",
          ":release",
          "~vulnerability-management",
          "~released bug",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-08T00:00:00Z",
          "title": "4.72.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "80d566cb",
          "startDate": "2025-07-07",
          "title": "Sprint 44"
        },
        "status": "✅ Ready for release",
        "title": "🪲Software vuln detected dates do not match between screens",
        "comments": [
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "Hey team! Please [add your planning poker estimate](https://app.zenhub.com/workspaces/Drafting-6192dd66ea2562000faea25c/issues/gh/fleetdm/fleet/26618?planning-poker) with Zenhub @iansltx @jahzielv @ksykulev"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "I'm not able to repro this (wanted to check what was going on prior to throwing an estimate on). Both places have the same timestamp returned from the API (Jan 28 ~6:40a UTC), and both show the expected \"one month ago\" in the UI.\n\nMaybe we close this and if anyone sees this again we reopen?"
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "\u003e Maybe we close this and if anyone sees this again we reopen?\n\ni'm onboard with this, unless @RachelElysia has any other info that may get us into this state\n"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Per [Slack](https://fleetdm.slack.com/archives/C086V2QK76X/p1741109822016689?thread_ts=1741109272.543039\u0026cid=C086V2QK76X), @jmwatts has a repro."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@jmwatts Can you grab your vulnerabilities table and confirm which `created_at` timestamp is the correct one? This feels like a join is propagating things across a bunch of columns where it shouldn't be, so I'm assuming that the individual CVE page is correct and the list is wrong, but want to make sure."
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "There's a lot in that table :D so here's one example but let me know if you need more than this\n\n![Image](https://github.com/user-attachments/assets/e2a4def4-7ace-4802-b833-55bb6ec2aa09)\n\n![Image](https://github.com/user-attachments/assets/b4b6c662-824b-4a93-a727-a19a0060d60a)\n\n![Image](https://github.com/user-attachments/assets/54b65a28-9216-4cdd-af88-7e3a7a24013a)"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "This is useful; thanks!\n\nLooks like we may have at least two bugs here. In the case you showed, the list view is correct but the individual vuln view shows detected as the current timestamp (though this seems to vary from vuln to vuln). In Rachel's example though both places have different values, both of which aren't the current timestamp. So we might need to scope this as \"fix the bugs that we can repro\", which won't necessarily be the original bug."
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "Here's one example that is showing detected as a minute ago, but the table view of vulns shows another time:\n\ndetails view\nhttps://dogfood.fleetdm.com/software/vulnerabilities/CVE-2025-0938\ntable view of vulns\nhttps://dogfood.fleetdm.com/software/vulnerabilities?exploit=false\u0026query=CVE-2025-0938\u0026order_direction=desc\u0026order_key=hosts_count\u0026page=0"
          },
          {
            "author": {
              "login": "rachaelshaw"
            },
            "body": "I haven't seen this issue exactly, but was about to report a similar issue: currently, every CVE detail page is saying detected \"less than a minute ago\"; In the API response, `created_at` always seems to be set to the current time. (List view is fine, only seeing this w/ `GET /vulnerabilities/:cve`). \n\n@RachelElysia do you think this is related, or should I report that bug seperately?"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@rachaelshaw The one you're seeing is the one I mentioned. Thinking we'll resolve that one with this ticket and see if we can repro the other one afterward."
          }
        ]
      },
      {
        "assignees": [
          "iansltx"
        ],
        "content": {
          "body": "**Fleet version**: \u003c= 4.63.0\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\n\nPackage shows as `MacFULL`\n\n### 🧑‍💻  Steps to reproduce\n\nUpload [SubEthaEdit](https://subethaedit.net/) as a custom package.\n\n### 🕯️ More info\n\nSplit from #24873, as the package structure for this installer is different from SentinelOne and Cold Turkey, so the fix for those packages doesn't work here.\n",
          "number": 25587,
          "repository": "fleetdm/fleet",
          "title": "🪲Incorrect software title name (MacFULL) when uploading SubEthaEdit",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/25587"
        },
        "estimate": 2,
        "id": "PVTI_lADOBDAnic4A4BEUzgcX5dM",
        "labels": [
          "bug",
          ":release",
          "~released bug",
          "#g-software",
          "~sw-upload"
        ],
        "milestone": {
          "dueOn": "2025-08-08T00:00:00Z",
          "title": "4.72.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "80d566cb",
          "startDate": "2025-07-07",
          "title": "Sprint 44"
        },
        "status": "✅ Ready for release",
        "title": "🪲Incorrect software title name (MacFULL) when uploading SubEthaEdit",
        "comments": [
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Hey team! Please [add your planning poker estimate](https://app.zenhub.com/workspaces/g-software-current-sprint-67685f6ff1830a000f347a73/issues/fleetdm/fleet/25587?planning-poker) with Zenhub @jahzielv @ksykulev"
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "timebox - we may not have data to use"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "Another unexpected naming scenario: this package uploads as \"trial\" https://drive.google.com/file/d/16UdYLIENNcFNBstrtBTl4ZHiLFe9-qDB/view?usp=drive_link\n\n\u003cimg width=\"1505\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/54fff766-d7bb-4010-9b63-aab84ead0400\" /\u003e"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Looks like there's a quick fix for this, as the app has an install path: if the install path ends with .app, grab that install path and use it as the name:\n\n```\n~/code/fleet main $ go run tools/custom-package-parser/main.go -path /Users/ian/Downloads/SubEthaEdit-5.2.4.pkg \n- Name: 'SubEthaEdit'\n- Bundle Identifier: 'de.codingmonkeys.SubEthaEdit.MacFULL'\n- Package IDs: 'SEEMode.ActionScript,SEEMode.Base,SEEMode.C,SEEMode.CPP,SEEMode.CSS,SEEMode.Conference,SEEMode.Diff,SEEMode.EEx,SEEMode.ERB,SEEMode.Elixir,SEEMode.Erlang,SEEMode.HTML,SEEMode.JSON,SEEMode.Java,SEEMode.Javascript,SEEMode.LaTeX,SEEMode.Lua,SEEMode.Markdown,SEEMode.Objective-C,SEEMode.PHP-HTML,SEEMode.Perl,SEEMode.Python,SEEMode.Ruby,SEEMode.Swift,SEEMode.TOML,SEEMode.XML,SEEMode.bash,SEEMode.go,SEEMode.wren,de.codingmonkeys.SubEthaEdit.SeeTextImporterFULL,de.monkeydom.TCMPortMapper,isao.sonobe.OgreKit,org.mozilla.universalchardet,org.sparkle-project.InstallerConnection,org.sparkle-project.InstallerLauncher,org.sparkle-project.InstallerStatus,org.sparkle-project.Sparkle,org.sparkle-project.Sparkle.Updater'\n- Version: 5.2.4\n```"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "The fix included here also handles the Pixelmator Pro Trial nicely:\n\n```\n~/code/fleet 25587-pkg-name-extraction $ go run tools/custom-package-parser/main.go -path /Users/ian/Downloads/PixelmatorProTrial_3.6.14.pkg \n- Name: 'Pixelmator Pro Trial'\n- Bundle Identifier: 'com.pixelmatorteam.pixelmator.x.trial'\n- Package IDs: 'com.pixelmator.PXMEngine,com.pixelmator.pixelmatorteam.LibRaw,com.pixelmator.pixelmatorteam.PDFEngine,com.pixelmator.pixelmatorteam.PSDEngine,com.pixelmator.pixelmatorteam.SVGEngine,com.pixelmatorteam.PTFoundation,com.pixelmatorteam.PTImageIO,com.pixelmatorteam.PTPaintTools,com.pixelmatorteam.PTPhotoKit,com.pixelmatorteam.extended-raw-support,com.pixelmatorteam.pixelmator.PXMKit,com.pixelmatorteam.pixelmator.object-removal,com.pixelmatorteam.pixelmator.paint-selection,com.pixelmatorteam.pixelmator.x.PXMPhotoKitUI,com.pixelmatorteam.pixelmator.x.PXMUIKit,com.pixelmatorteam.pixelmator.x.automator.apply-color-adjustments-to-images,com.pixelmatorteam.pixelmator.x.automator.apply-effects-to-images,com.pixelmatorteam.pixelmator.x.automator.auto-enhance-images,com.pixelmatorteam.pixelmator.x.automator.auto-white-balance-images,com.pixelmatorteam.pixelmator.x.automator.change-type-of-images,com.pixelmatorteam.pixelmator.x.automator.denoise-images,com.pixelmatorteam.pixelmator.x.automator.increase-resolution-of-images,com.pixelmatorteam.pixelmator.x.automator.scale-images,com.pixelmatorteam.pixelmator.x.automator.trim-images,com.pixelmatorteam.pixelmator.x.pxmspotlight,com.pixelmatorteam.pixelmator.x.trial.PXMPro,com.pixelmatorteam.pixelmator.x.trial.photos-extension,com.pixelmatorteam.pixelmator.x.trial.quicklookpreviewextension,com.pixelmatorteam.pixelmator.x.trial.remove-background,com.pixelmatorteam.pixelmator.x.trial.thumbnailextension,com.revenuecat.Purchases'\n- Version: 3.6.14\n```"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "**QA Notes**\n\nUploaded SubEthaEdit and Pixelmator ProTrial. Names are much more reflective of the software that was uploaded. \n\n\u003cimg width=\"1506\" height=\"589\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/8e72b528-b074-46c7-a28f-72acbe3abd29\" /\u003e\n\n\u003cimg width=\"1411\" height=\"537\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/db3728de-f429-49cf-bc88-4a979ae1166a\" /\u003e\n\nNOTE: If the software has been previously uploaded, the name will still be wrong until the installer has been deleted from all teams and the corresponding row in `software_titles` has been removed from the database. Once that's done and the package is re-uploaded, the name will be the corrected one. "
          }
        ]
      },
      {
        "assignees": [
          "RachelElysia"
        ],
        "content": {
          "body": "## Goal\n\n| User story  |\n|:---------------------------------------------------------------------------|\n| As a IT admin,\n| I want to show my end users only relevant actions\n| so that I provide my end users a clear self-service software experience.\n\n## Key result\n\nNone. Prioritized this because it's mission critical for `numa` to use Fleet as their software self-service tool.\n\n## Original requests\n\n- #30214\n\n## Context\n- Product Designer: @noahtalerman\n- Engineer: @mostlikelee, @RachelElysia, @iansltx , @jacobshandling \n\n## Changes\n\n### Product\n- [ ] UI changes: Figma [here](https://www.figma.com/design/LaPOy2xbXSNIYtFenO7FTt/Template--Copy-?node-id=0-1\u0026t=BVXxwI7m9syoqGiA-1)\n- [ ] CLI (fleetctl) usage changes: No changes\n- [ ] YAML changes: No changes\n- [ ] REST API changes: No changes\n- [ ] Fleet's agent (fleetd) changes: No changes\n- [ ] GitOps changes: No changes\n- [ ] Activity changes: No changes\n- [ ] Permissions changes: No changes\n- [ ] Changes to paid features or tiers: Fleet Premium\n- [ ] My device and fleetdm.com/better changes: No changes\n- [ ] First draft of test plan added\n- [ ] Other reference documentation changes: No changes\n- [ ] Once shipped, requester has been notified\n- [ ] Once shipped, dogfooding issue has been filed\n\n### Engineering\n- [ ] Test plan is finalized\n- [ ] Contributor API changes: No changes\n- [ ] Feature guide changes: Ensure guides referencing software (self-service, software packages) correctly reference the UI as it currently stands, including caveats around software updates\n\n\u003e ℹ️  Please read this issue carefully and understand it.  Pay [special attention](https://fleetdm.com/handbook/company/development-groups#developing-from-wireframes) to UI wireframes, especially \"dev notes\".\n\n## QA\n\n### Risk assessment\n\n- Risk level: Low\n\n### Test plan\n\n- [ ] [UI Status and UI actions spreadsheet ](https://docs.google.com/spreadsheets/d/1GKYTQ80RP_Zec32heeniav2rUS9Snegy4S3ob0lgXYc/edit?usp=sharing)\nTest on macOS, Windows, Linux hosts for Self-service\nTest with Chrome, Safari, Edge and Firefox\nTest with FMA, Custom packages, and VPP software\n\nOn host details page or Self service with several installers available:\n\n- [x] Default sorting order is by Name ascending\n- [x] Name sort order can be reversed\n- [x] Sorting by status sorts software by status in the order mentioned in Figma (and can be reversed)\n- [x] Font weight should be \"regular\"\n- [x] If software is not in software inventory, status is \"---\"\n- [x] If status is \"---\", available action is \"Install\" (Uninstall should not be available)\n- [x] When a user clicks \"Install\", status changes to \"Installing\"\n- [ ] If software installs successfully, status changes to \"Installed\"\n- [x] If software fails to install, status changes to \"Failed\"\n- [x] If software is in software inventory, Status is \"Installed\"\n- [x] If software status is \"Installed\", available actions are \"Reinstall\" and \"Uninstall\"\n- [x] When a user clicks \"Reinstall\", status changes to \"Installing\", and when the action completes, the status changes to \"Installed\"\n- [ ] When a user clicks \"Uninstall\", status changes to \"Uninstalling\" and when the action completes, the status changes to \"---\"\n- [x] If software fails to uninstall, status changes to \"Failed (uninstall)\"\n- [x] If software is in software inventory, and other criteria are met (see [#27983](https://github.com/fleetdm/fleet/issues/27983) ) status is \"Update available\"\n- [x] If status is \"Update available\", available actions are \"Update\" and \"Uninstall\"\n- [x] If Update available is clicked, details modal is shown with detail of installed software and possible actions to take\n- [ ] When a user clicks \"Update\", modal closes and status changes to \"Updating\", and when the action completes, the status changes to \"Installed\"\n- [x] If software fails to update, status changes to \"Failed\"\n- [ ] If software is installed by end user make sure that tooltip over \"Installed\" status is different from one when Fleet installs. See Figma specs.\n- [x] If software is a tarball (`tgz_packages`), Fleet won't do inventory, and status in Library tab will only reflect if install is triggered from Fleet.\n- [x] Make sure that when the tarball is installed by Fleet, show `Installed` status + `Reinstall` and `Uninstall` actions.\n- [x] Make sure that when tarball install failed, to show `Failed` status and `Install` action only.\n- [x] Make sure that when tarball is available in library that no status is displayed and only `Install` action is available.\n- [x] Make sure that the new copy as specified in Figma is added to \"Install details\" modal for each package that is missing version information (no inventory). \n\n\nNOTE: Host details modal and Self service modal have different copy, see Figma\n- [x] Clicking on any status for any operating system should open a details modal EXCEPT\n- [x] The only non-clickable status is for Host details \u003e software \u003e library \u003e status for VPP successful and failed installs before @ksykulev 4.72 fix merged 8/1/25, those will still have a tooltip to go to the activity feed to view success/fail information\n- [x] Details modal title should match the status and should conform to Figma\n- [x] Install and Uninstall details dropdown should be collapsed by default and only show for installs or uninstalls completed by fleet (If the software was installed by the user, the modal will still show but will not contain a details dropdown, see Figma)\n- [x] Clicking on an available action button within the modal closes the modal and updates the status in the list, according to the action that was taken, the action completes, and the status is updated again.\n- [x] Confirm multiple versions installed \n\n\u003c!-- Consider: Do the steps above apply to all global access roles, including admin, maintainer, observer, observer+, and GitOps?  Do the steps above apply to all team-level access roles?  If not, write the steps used to test each variation.\n--\u003e\n\n### Testing notes\n\u003c!-- Any additional testing notes relevant to this story or tools required for testing. --\u003e\n\n### Confirmation\n\u003c!-- The engineer responsible for implementing this user story completes the test plan before moving to the \"Ready for QA\" column. --\u003e\n\n1. [x] Engineer: Added comment to user story confirming successful completion of test plan.\n2. [ ] QA: Added comment to user story confirming successful completion of test plan.\n",
          "number": 30240,
          "repository": "fleetdm/fleet",
          "title": "Show appropriate self-service actions based on whether software is on the host",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/30240"
        },
        "estimate": 8,
        "id": "PVTI_lADOBDAnic4A4BEUzgcX1-s",
        "labels": [
          "story",
          "~frontend",
          ":release",
          "customer-numa",
          "#g-software",
          "~context"
        ],
        "milestone": {
          "dueOn": "2025-08-08T00:00:00Z",
          "title": "4.72.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "80d566cb",
          "startDate": "2025-07-07",
          "title": "Sprint 44"
        },
        "status": "✅ Ready for release",
        "title": "Show appropriate self-service actions based on whether software is on the host",
        "comments": [
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "@noahtalerman: Decided to cut this \"smarter\" logic to solve these problems:\n- Multiple instances of the software installed\n- User v. machine scope on Windows\n\nCurrently, for macOS, only software that's installed in Applications/ shows the \"Update required\" status. If the software isn't in Applications/ but it's in inventory, Fleet shows \"Installed\" regardless of version. Fleet will use the install_path to know if the software is in Applications/\n\nCode wise: if (macOS and install_path is applications/), check only that path if it’s outdated and then show “update available” else show “Installed”\n\nFor Windows Fleet-maintained apps, software only shows \"Update available\" if the installed software is the same scope (user or machine) as the Fleet-maintained app. Based on install_path. Otherwise, if the software is in inventory, Fleet shows \"Installed\".\n\nFor Windows custom packages, software only shows \"Update available\" if the software title has an install_path. Otherwise, if the software is in inventory, Fleet shows \"Installed\"."
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "FYI @RachelElysia, I added copy and a link to the contact URL based on `numa` feedback. We met with them today (2025-06-27) and showed them this story's wireframes.\n\n![Image](https://github.com/user-attachments/assets/6ca4ef45-09f2-4ac3-afee-bd5c995e151a)"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@jmwatts I realize this is offloading work to you that should've been done earlier by someone else, but can you work through a test plan here based on what's in Figma?\n\nIf it's more helpful to delegate the test plan for this to #27983, since these changes touch largely the same UI (though this hits both self-service and host software), that works too, and I can do a first pass there.\n\nWent ahead and updated the story template to remove non-test-plan TODOs to help a little."
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "@iansltx I've added the first pass test plan, just a couple questions left here:\n\n\u003cimg width=\"135\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/1a202f1e-a311-4ccd-9aff-76ec85ef8dac\" /\u003e\n\n~~This is kind of vague, what is the criteria for this \"Update Available\" status?~~\n~~- Software is installed on host~~\n~~- Software installer is available~~\n~~- Software is a different version?~~\n~~- Software installer is a higher version than the version that's installed?~~\n\nNevermind, found that criteria in the [#27983](https://github.com/fleetdm/fleet/issues/27983) ticket. Only question left is:\n\nWhat are the available statuses for tar.gz items? \n"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@jmwatts No update available status for tarballs as they don't have an associated version."
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "moving to estimated with an 8 based on prior discussions"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "@marko-lisica \n\nIn the test plans it says:\n\n\u003e  If software is installed by end user make sure that tooltip over \"Installed\" status is different from one when Fleet installs. See Figma specs.\n\nIs there a different tooltip? I currently have it with no tooltip if it was installed by the user not using Fleet. Can you add the tooltip to the Figma spec or remove this from the QA plan?"
          },
          {
            "author": {
              "login": "jacobshandling"
            },
            "body": "[Doc to track questions around the various modals](https://docs.google.com/document/d/1sAh752RZCCquWhI25emzNtnBVV3wA-GAhjbdlaB2Pls/edit?tab=t.0)"
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "Heads up that we're marking this one for expedited drafting"
          },
          {
            "author": {
              "login": "jacobshandling"
            },
            "body": "@mostlikelee thanks. To over communicate, most of the remaining questions are regarding [the modals subtask](https://github.com/fleetdm/fleet/issues/30860)"
          }
        ]
      },
      {
        "assignees": [
          "xpkoala",
          "AndreyKizimenko",
          "PezHub",
          "jmwatts"
        ],
        "content": {
          "body": "\n# Smoke Tests\nSmoke tests are limited to core functionality and serve as a pre-release final review. If smoke tests are failing, a release cannot proceed.\n\n## Fleet core:\n\n**Fleet version** (Head to the \"My account\" page in the Fleet UI or run `fleetctl version`):\n\n**Web browser** _(e.g. Chrome 88.0.4324)_: \n\n\n### Orchestration\n\u003ctable\u003e\n\u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eUpdate flow\u003c/td\u003e\u003ctd\u003e\n\n1. remove all fleet processes/agents/etc using `fleetctl preview reset` for a clean slate\n2. run `fleetctl preview` with no tag for latest stable\n3. create a host/query to later confirm upgrade with\n4. STOP fleet-preview-server instances in containers/apps on Docker\n5. run `fleetctl preview` with appropriate testing tag \u003c/td\u003e\u003ctd\u003eAll previously created hosts/queries are verified to still exist\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eLogin flow\u003c/td\u003e\u003ctd\u003e\n\n1. navigate to the login page and attempt to login with both valid and invalid credentials to verify some combination of expected results.\n2. navigate to the login page and attempt to login with both valid and invalid sso credentials to verify expected results.\n\u003c/td\u003e\u003ctd\u003e\n\n1. text fields prompt when blank\n2. correct error message is \"authentication failed\"\n3. forget password link prompts for email\n4. valid credentials result in a successful login.\n5. valid sso credentials result in a successful login\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003ePacks flow\u003c/td\u003e\u003ctd\u003eVerify management, operation, and logging of [\"2017 packs\"](https://fleetdm.com/handbook/company/why-this-way#why-does-fleet-support-query-packs).\u003c/td\u003e\u003ctd\u003e\n\n1. Packs successfully run on host machines after migrations \n2. New Packs can be created\n3. Packs can be edited and deleted\n4. Packs results information is logged\n \n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eLog destination flow\u003c/td\u003e\u003ctd\u003eVerify log destination for software, query, policy, and packs.\u003c/td\u003e\u003ctd\u003e\n\n1. Software, query, policy, and packs logs are successfully sent to external log destinations\n2. Software, query, policy, and packs logs are successfully sent to Filesystem log destinations\n \n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eOS settings\u003c/td\u003e\u003ctd\u003eVerify OS settings functionality\u003c/td\u003e\u003ctd\u003e\n\n1. Verify able to configure Disk encryption (macOS, Windows, \u0026 Linux).\n2. Verify host enrolled with Disk encryption enforced successfully encrypts.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003c/table\u003e\n\n### MDM\n\u003ctable\u003e\n\u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eMDM enrollment flow\u003c/td\u003e\u003ctd\u003eVerify MDM enrollments, run MDM commands\u003c/td\u003e\u003ctd\u003e\n  \n1. Erase an ADE-eligible macOS host and verify able to complete automated enrollment flow.\n2. With Windows MDM turned On, enroll a Windows host and verify MDM is turned On for the host.\n3. Verify able to run MDM commands on both macOS and Windows hosts from the CLI.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eMDM migration flow\u003c/td\u003e\u003ctd\u003eVerify MDM migration for ADE and non-ADE hosts\u003c/td\u003e\u003ctd\u003e\n  \n1. Turn off MDM on an ADE-eligible macOS host and verify that the native, \"Device Enrollment\" macOS notification appears.\n2. On the My device page, follow the \"Turn on MDM\" instructions and verify that MDM is turned on.\n3. Turn off MDM on a non ADE-eligible macOS host.\n4. On the My device page, follow the \"Turn on MDM\" instructions and verify that MDM is turned on.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eOS settings\u003c/td\u003e\u003ctd\u003eVerify OS settings functionality\u003c/td\u003e\u003ctd\u003e\n\n1. Verify Profiles upload/download/delete (macOS \u0026 Windows).\n2. Verify Profiles are delivered to host and applied. \n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eSetup experience\u003c/td\u003e\u003ctd\u003eVerify macOS Setup experience\u003c/td\u003e\u003ctd\u003e\n\n1. Configure End user authentication.\n3. Upload a Bootstrap package.\n4. Add software (FMA, VPP, \u0026 Custom pkg)\n5. Add a script\n6. Enroll an ADE-eligible macOS host and verify successful authentication.\n7. Verify Bootstrap package is delivered.\n8. Verify SwiftDialogue window displays.\n9. Verify software installs and script runs.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eOS updates\u003c/td\u003e\u003ctd\u003eVerify OS updates flow\u003c/td\u003e\u003ctd\u003e\n\n1. Configure OS updates (macOS \u0026 Windows).\n2. Verify on-device that Nudge prompt appears (macOS 13).\n3. Verify enforce minimumOS occurs during enrollment (macOS 14+).\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eiOS/iPadOS\u003c/td\u003e\u003ctd\u003eVerify enrollment, profiles, \u0026 software installs\u003c/td\u003e\u003ctd\u003e\n\n1. Verify ADE enrollment.\n2. Verify OTA enrollment.\n3. Verify Profiles are delivered to host and applied.\n4. Verify VPP apps install \u0026 display correctly in Activity feed.\n \n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eCertificates Upload\u003c/td\u003e\u003ctd\u003eAPNs cert and ABM token renewal workflow\u003c/td\u003e\u003ctd\u003e\n\n1. Renew APNs Certificate.\n2. Renew ABM Token.\n3. Ensure ADE hosts can enroll.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003c/table\u003e\n\n### Software\n\u003ctable\u003e\n\u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eQuery flow\u003c/td\u003e\u003ctd\u003eCreate, edit, run, and delete queries. \u003c/td\u003e\u003ctd\u003e\n\n1. permissions regarding creating/editing/deleting queries are up to date with documentation\n2. syntax errors result in error messaging\n3. queries can be run manually \n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eHost Flow\u003c/td\u003e\u003ctd\u003eVerify a new host can be added and removed following modal instructions using your own device.\u003c/td\u003e\u003ctd\u003e\n\n1. Host is added via command line\n2. Host serial number and date added are accurate\n3. Host is not visible after it is deleted\n4. Warning and informational modals show when expected and make sense\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eMy device page\u003c/td\u003e\u003ctd\u003eVerify the end user's my device page loads successfully.\u003c/td\u003e\u003ctd\u003e\n\n1. Clicking the Fleet desktop item, then \"My device\" successfully loads the my device page.\n2. The \"My device\" page is populated correctly and as expected. \n3. Styling and padding appears correct.\n \n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eScripts\u003c/td\u003e\u003ctd\u003eVerify script library and execution\u003c/td\u003e\u003ctd\u003e\n\n1. Verify able to run a script on all host types from CLI.\n2. Verify scripts library upload/download/delete.\n3. From Host details (macOS, Windows, \u0026 Linux) run a script that should PASS, verify.\n4. From Host details (macOS, Windows, \u0026 Linux) run a script that should FAIL, verify.\n5. Verify UI loading state and statuses for scripts.\n8. Disable scripts globally and verify unable to run.\n9. Verify scripts display correctly in Activity feed.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eSoftware\u003c/td\u003e\u003ctd\u003eVerify software library and install / download\u003c/td\u003e\u003ctd\u003e\n\n1. Verify software library upload/download/delete.\n2. From Host details (macOS, Windows, \u0026 Linux) run an install that should PASS, verify.\n3. From My Device (macOS, Windows, \u0026 Linux) software tab should have self-service items available, verify.\n4. Verify UI loading state and statuses for installing software.\n7. Verify software installs display correctly in Activity feed.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\n\u003ctr\u003e\u003ctd\u003eMigration Test\u003c/td\u003e\u003ctd\u003eVerify Fleet can migrate to the next version with no issues.\u003c/td\u003e\u003ctd\u003e\n\nUsing the github action https://github.com/fleetdm/fleet/actions/workflows/db-upgrade-test.yml\n1. Using the most recent stable version of Fleet and `main`, click `Run workflow`\n2. Enter the Docker tag of Fleet starting version, e.g. 'v4.64.2'\n3. Enter the Docker tag of Fleet version to upgrade to, e.g. 'rc-minor-fleet-v4.65.0'\n4. Click `Run workflow`.\n5. Action should complete successfully.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003c/table\u003e\n\n### All Product Groups\n\u003ctable\u003e\n \u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eRelease blockers\u003c/td\u003e\u003ctd\u003eVerify there are no outstanding release blocking tickets.\u003c/td\u003e\u003ctd\u003e\n  \n1. Check [this](https://github.com/fleetdm/fleet/labels/~release%20blocker) filter to view all open `~release blocker` tickets.\n2. If any are found raise an alarm in the `#help-engineering` and `#g-mdm` (or `#g-endpoint-ops`)  channels.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\n\u003ctr\u003e\u003ctd\u003eLoad tests - minor releases only unless otherwise specified\u003c/td\u003e\u003ctd\u003eVerify all load test metrics are within acceptable range on final build of RC.\u003c/td\u003e\u003ctd\u003e\n  \n1. Check [this Google doc](https://docs.google.com/document/d/1V6QtFzcGDsLnn2PIvGin74DAxdAN_3likjxSssOMMQI/edit?tab=t.0#heading=h.15acjob4ji20) to review load test key metrics and checks.\n2. After all expected changes have been merged to the RC branch, two load tests will need to be run - a new instance with no data, and a migrated instance.\n3. For the new instance with no data, set up a load test environment using the RC branch and allow it at least 24hrs of run time.\n4. For the migrated instance, set up a load test environment on the previous minor release branch. Once the environment has been set up and stabilized, follow the instructions in [Deploying code changes to fleet](https://github.com/fleetdm/fleet/blob/main/infrastructure/loadtesting/terraform/readme.md#deploying-code-changes-to-fleet) to migrate to the RC branch. Monitor the metrics post-migration to determine if any performance issues arise.\n5. Record metrics in [this spreadsheet](https://docs.google.com/spreadsheets/d/1FOF0ykFVoZ7DJSTfrveip0olfyRQsY9oT1uXCCZmuKc/edit?usp=drive_link) for the two load test runs. \n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e \n\u003c/table\u003e\n\n### Notes\n\nIssues found new to this version:\n\nIssues found that reproduce in last stable version: \n\nWhat has not been tested:\n\nInclude any notes on whether issues should block release or not as needed:\n\n\u003cbr\u003e\n\u003cbr\u003e\n\n# `fleetd` agent:\n\nIncludes updates to: \n- Orbit: True / False\n- Desktop: True / False\n- Chrome extension: True / False\n\nList versions changes for any component updates below: \n\u003c!-- Remove items without updates --\u003e\n- Orbit `v1.xx.x` \u003e `v1.xx.x`\n- Desktop `v1.xx.x` \u003e `v1.xx.x`\n- Chrome extension `v1.xx.x` \u003e `v1.xx.x`\n\n## Testing gates for new `fleetd` release\n\n### Goal: Ensure new `fleetd` is tested and promoted from local \u003e edge \u003e stable channels\n\n1. Build a new `fleetd` from the release candidate branch as needed for Orbit, Desktop, and Chrome Extension.\n\n\u003ctable\u003e\n\u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e`fleetd` local testing\u003c/td\u003e\n\u003ctd\u003e\n1. Following [Testing TUF]([url](https://github.com/fleetdm/fleet/blob/main/tools/tuf/test/README.md)) instructions create binaries for Mac, Windows, and Ubuntu using your local TUF repository and install on macOS, Linux, and Windows hosts.\u003cbr\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n1. Confirm the hosts install with the updated version and are working correctly.\u003cbr\u003e\n2. Confirm any new features and/or bug fixes associated with this release are working as intended.\u003cbr\u003e\n\u003c/td\u003e\n\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctd\u003e`fleetd` auto-update tests\u003c/td\u003e\n\u003ctd\u003e\n1. Conduct the [`fleetd` auto-update n+1 test]([url](https://github.com/fleetdm/fleet/blob/main/tools/tuf/test/Fleetd-auto-update-test-guide.md))\u003cbr\u003e\n2. QA certifies new release by commenting in issue.\u003cbr\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n1. Agent successfully auto-updates.\u003cbr\u003e\n2. Issue is certified by QA.\u003cbr\u003e\n\u003c/td\u003e\n\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctd\u003e`fleetd` tests\u003c/td\u003e\n\u003ctd\u003e\n1. Set up a host in your instance to receive updates from the `edge` channels.\u003cbr\u003e\n2. Work with engineer leading the release to push changes to the `edge` channel.\u003cbr\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n1. Confirm the hosts running on the edge channel receive the update and are working correctly.\u003cbr\u003e\n2. Confirm any new features and/or bug fixes associated with this release are working as intended.\u003cbr\u003e\n\u003c/td\u003e\n\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\u003c/tr\u003e\n\n\u003c/table\u003e\n\n## New `fleetd` pushed to edge\n\n### Goal: Ensure `fleetd` version pushed to edge is working with the current released version of fleet.\n\n1. Fleet server is running the latest released version available on [Fleet Releases](https://github.com/fleetdm/fleet/releases) page.\n2. Set Agent options to use edge in the Fleet server configuration. For example:\u003cbr\u003e\n `update_channels:` \u003cbr\u003e\n  `osqueryd: edge` \u003cbr\u003e\n  `orbit: edge` \u003cbr\u003e\n  `desktop: edge` \u003cbr\u003e\n\u003ctable\u003e\n\u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n \u003ctr\u003e\u003ctd\u003eQuery flow\u003c/td\u003e\u003ctd\u003eRun queries. \u003c/td\u003e\u003ctd\u003e\n1. Queries can be run manually \n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eHost Flow\u003c/td\u003e\u003ctd\u003eVerify a new host can be added using your own device.\u003c/td\u003e\u003ctd\u003e\n1. Hosts can enroll and report correct version of `fleetd` (orbit, osquery, desktop).\u003cbr\u003e\n2. Refetching host vitals completes and returns updated information.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eMy device page\u003c/td\u003e\u003ctd\u003eVerify the end user's my device page loads successfully.\u003c/td\u003e\u003ctd\u003e\n1. Clicking the Fleet desktop item, then \"My device\" successfully loads the my device page.\u003cbr\u003e\n2. The \"My device\" page is populated correctly and as expected. \u003cbr\u003e\n3. Styling and padding appears correct. \n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eScripts\u003c/td\u003e\u003ctd\u003eVerify script execution\u003c/td\u003e\u003ctd\u003e\n1. Verify able to run a script on all host types from CLI.\u003cbr\u003e\n2. From Host details (macOS, Windows, \u0026 Linux) run a script that should PASS, verify.\u003cbr\u003e\n3. From Host details (macOS, Windows, \u0026 Linux) run a script that should FAIL, verify.\u003cbr\u003e\n4. Verify script results display correctly in Activity feed.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eSoftware\u003c/td\u003e\u003ctd\u003eVerify software install / download\u003c/td\u003e\u003ctd\u003e\n1. From Host details (macOS, Windows, \u0026 Linux) run an install that should PASS, verify.\u003cbr\u003e\n2. From My Device (macOS, Windows, \u0026 Linux) software tab should have self-service items available, verify.\u003cbr\u003e\n3. Verify software installs display correctly in Activity feed.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eOS settings\u003c/td\u003e\u003ctd\u003eVerify OS settings functionality\u003c/td\u003e\u003ctd\u003e\n1. Verify able to configure Disk encryption (macOS, Windows, \u0026 Linux).\u003cbr\u003e\n2. Verify host enrolled with Disk encryption enforced successfully encrypts.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003ePacks flow\u003c/td\u003e\u003ctd\u003eVerify management, operation, and logging of [\"2017 packs\"](https://fleetdm.com/handbook/company/why-this-way#why-does-fleet-support-query-packs).\u003c/td\u003e\u003ctd\u003e\n1. Packs successfully run on host machines after migrations \u003cbr\u003e\n2. New Packs can be created. \u003cbr\u003e\n3. Packs can be edited and deleted \u003cbr\u003e\n4. Packs results information is logged\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003c/table\u003e\n  \n# Notes\n\nIssues found new to this version:\n\nIssues found that reproduce in last stable version: \n\nWhat has not been tested:\n\n\nInclude any notes on whether issues should block release or not as needed:\n",
          "number": 30136,
          "repository": "fleetdm/fleet",
          "title": "Release QA: macOS 26 Tahoe, iOS 26, iPadOS 26",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/30136"
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgbpzkM",
        "labels": [
          ":release",
          "#g-mdm",
          "~csa",
          "~mdm-maturity",
          "#g-orchestration",
          "#g-software",
          "macos26"
        ],
        "milestone": {
          "dueOn": "2025-08-29T00:00:00Z",
          "title": "4.73.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "198a6585",
          "startDate": "2025-06-16",
          "title": "Sprint 43"
        },
        "status": "✔️Awaiting QA",
        "title": "Release QA: macOS 26 Tahoe, iOS 26, iPadOS 26",
        "comments": [
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "The version reported in osquery is 16.0 but when I look in \"About this Mac\" and System Settings \u003e\u003e General it's 26.0\nIt does get the build right though... 25A5279m"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "When I try to enforce encryption I'm not seeing the banner instructing me to restart or log out, until I've restarted or logged out. Then it stays there no matter how many times I restart. I'm not seeing the banner clear and even after running the `cleanups_then_aggregation` cron the encryption status isn't updated and it says `unrecognized`:\n\n![Image](https://github.com/user-attachments/assets/f3c0b064-8aae-4c39-9993-bd01af2fbd84)\n\nOn the host, I can see the disk encryption profile in System Settings and Filevault is turned on and a recovery key has been set:\n\n\u003cimg width=\"741\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/013cc568-6b97-4bbb-be68-a458bbbdf56b\" /\u003e\n\n\u003cimg width=\"730\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/986b4c3e-42f2-4b9c-9756-f1acc8e1f302\" /\u003e"
          },
          {
            "author": {
              "login": "PezHub"
            },
            "body": "Apple introduced a new Device Migration feature (that only works with the latest OSes) which will move your host from a 3rd party MDM server over to Fleet,  all via ABM. It works! however during the enrollment to Fleet the Setup Experience SwiftDialogue window did not display the software Fleet was installing in the background"
          },
          {
            "author": {
              "login": "zayhanlon"
            },
            "body": "@PezHub from customer-numa\nmacOS 26 - MDM migration invokes Setup Experience (silently) - awaitconfigured\n\n- Upgraded endpoint to macOS 26 \n- ABM recognizes that\n- Able to set a deadline\n- Device starts to migrate\n- Unenrolled from previous MDM (didn’t have to initiate anything)\n- Recognizes that it needs to enroll into Fleet\n- Waiting for ‘device configured’ command\n- Starts going through setup experience again (calling through all apps, VPP apps, setup script)\n\nExpected behavior: Assume host has all apps already installed. It’s been previously managed. It’s not a net new device so it shouldn’t run setup experience. VPP apps would get removed from previous MDM so those would be the one thing that should run again\n\nNote from @mostlikelee : Technically, as soon as the device gets the Fleet MDM profile, the apps should come along with it. We should test"
          },
          {
            "author": {
              "login": "zayhanlon"
            },
            "body": "@PezHub from customer-eponym\nFleet menu bar item doesn't show up after enrollment in beta 2"
          },
          {
            "author": {
              "login": "Sampfluger88"
            },
            "body": "Linked to Unthread ticket:\n\u003e [Fleet menu not showing after enrollment in macOS 26 beta 2 #6834](https://fleetdm.unthread.io/dashboard/inbox/all/conversations/3ec39176-1e2a-49ec-aea4-3c44108d90d0)"
          },
          {
            "author": {
              "login": "AndreyKizimenko"
            },
            "body": "Changing MDMs without a deadline doesn't not show a notification on the host. Maybe it takes a lot more time (writing this after waiting for 2-3 hours)"
          },
          {
            "author": {
              "login": "PezHub"
            },
            "body": "Hi all 👋 , any issues directly related to the new MDM migration feature Apple introduced in ABM should be tracked separately here https://github.com/orgs/fleetdm/projects/58/views/9?pane=issue\u0026itemId=119675644\u0026issue=fleetdm%7Cfleet%7C30695\n"
          }
        ]
      },
      {
        "assignees": [
          "RachelElysia"
        ],
        "content": {
          "body": "**Fleet version**: Observed in Fleet's dogfood environment (commit `af417c1`)\n\n**Web browser and operating system**: N/A\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\n\nOn the Host details \u003e Software tab, when I select Show details for software that's installed on the host I see the new grey box styles:\n\n\u003cimg width=\"817\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/3aa14955-e790-4e7f-b26f-b911e94f12fb\" /\u003e\n\nWhen I select software that's available for install but not yet installed on the host I don't see the new grey box:\n\n\u003cimg width=\"817\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/a146d1b5-f3b6-4638-aa26-7666cae07792\" /\u003e\n\n### 🧑‍💻  Steps to reproduce\n\nSee actual behavior above.\n\n### 🛠️ To fix \n\n- @noahtalerman: We want to show to the new grey box in the details modal for all software.\n",
          "number": 30232,
          "repository": "fleetdm/fleet",
          "title": "Inconsistent style: Host details \u003e Software \u003e Show details",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/30232"
        },
        "estimate": 1,
        "id": "PVTI_lADOBDAnic4A4BEUzgcX9VU",
        "labels": [
          "bug",
          "~frontend",
          ":release",
          "~released bug",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-08T00:00:00Z",
          "title": "4.72.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "80d566cb",
          "startDate": "2025-07-07",
          "title": "Sprint 44"
        },
        "status": "Waiting",
        "title": "Inconsistent style: Host details \u003e Software \u003e Show details",
        "comments": [
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "Weird behavior for sure -- I thought it was put in boxes only if there were multiple versions installed but I guess not!"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "If we want to just add a grey box around this, it's a EST: 1 FE only and should take 10 minutes.\n\nFrom #20638:\n```\n  // special case when we dont have installed versions. We can only show the\n  // software type atm.\n  if (!installed_versions || installed_versions.length === 0) {\n    return (\n      \u003cdiv className={`${baseClass}__software-details`}\u003e\n        \u003cDataSet\n          title=\"Type\"\n          value={formatSoftwareType({ source: software.source })}\n        /\u003e\n      \u003c/div\u003e\n    );\n  }\n```"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Given the above movement, looks like this has been estimated, so moving forward."
          }
        ]
      },
      {
        "assignees": [
          "ksykulev"
        ],
        "content": {
          "body": "**Fleet version**: \u003c!-- Copy this from the \"My account\" page in the Fleet UI, or run `fleetctl --version` --\u003e\n\n**Web browser and operating system**: \u003c!-- e.g. Chrome 88.0.4324 running on macOS --\u003e\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\n- Inventory versions use the short format (ie.  16.98 or 16.97.2)\n- Vulnerability scanning [uses](https://learn.microsoft.com/en-us/officeupdates/release-notes-office-for-mac) the short format (same as above)\n- FMA/homebrew uses the build number format (ie. 16.98.25060824)\n\nThe mismatch between inventory and package versions will cause issues when attempting to update the version with a policy because 16.98.25060824 \u003e 16.98 (they are the same version)\n\nFMAs affected:\n- Microsoft Excel\n- Microsoft Word\n\nGoal: use the same version throughout fleet for version compare and vuln scanning\n\nOption 1:  Change the FMA version number\nHomebrew does not contain the short format.  The short format could be gathered via:\n- extracting short bundle version from the package\n- referencing an external source such as the [office release notes](https://learn.microsoft.com/en-us/officeupdates/release-notes-office-for-mac) used in vulnerability scanning\n- Not considered due to software ingestion load risk and version parity with the VPP app which uses the short format\n\n\n\n\n### 🧑‍💻  Steps to reproduce\n1. Install Microsoft Excel on host, refetch host vitals\n2. Note version number in inventory\n3. add Microsoft Excel FMA, note version number on package\n\n### 🕯️ More info _(optional)_\nalso considered:\nOption 2: Change the inventory version number / update vulnerability logic\n- add bundle_version to detail queries, which contains the build number format\n- update vuln scan logic to utilize the build number format.  Fleet uses the mac office release notes for this which contains the build number.\n\n\u003c!-- If this is a performance issue, follow these steps to generate and attach a debug archive: https://fleetdm.com/docs/using-fleet/monitoring-fleet#debugging-performance-issues --\u003e\n\n### 🛠️ To fix\nOption 1:  Change the FMA version number\nHomebrew does not contain the short format.  The short format could be gathered via:\n- extracting short bundle version from the package\n- referencing an external source such as the [office release notes](https://learn.microsoft.com/en-us/officeupdates/release-notes-office-for-mac)\n",
          "number": 30082,
          "repository": "fleetdm/fleet",
          "title": "🪲 Microsoft Office for Mac Fleet-maintained apps version mismatches",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/30082"
        },
        "estimate": 3,
        "id": "PVTI_lADOBDAnic4A4BEUzgcX4XA",
        "labels": [
          "bug",
          ":release",
          "#g-software",
          "~qa-on-branch"
        ],
        "milestone": {
          "dueOn": "2025-08-08T00:00:00Z",
          "title": "4.72.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "80d566cb",
          "startDate": "2025-07-07",
          "title": "Sprint 44"
        },
        "status": "✅ Ready for release",
        "title": "🪲 Microsoft Office for Mac Fleet-maintained apps version mismatches",
        "comments": [
          {
            "author": {
              "login": "AndreyKizimenko"
            },
            "body": "Testing notes left on the PR: #30686"
          }
        ]
      },
      {
        "assignees": [
          "RachelElysia"
        ],
        "content": {
          "body": "\u003c!-- **This issue's remaining effort can be completed in ≤1 sprint.  It will be valuable even if nothing else ships.**\nIt is [planned and ready](https://fleetdm.com/handbook/company/development-groups#making-changes) to implement.  It is on the proper kanban board. --\u003e\n\n\n## Goal\n\n| User story  |\n|:---------------------------------------------------------------------------|\n| As a Security Engineer on the Software page,\n| I want to filter by a custom severity (CVSS score) range\n| so that I can filter software by a vulnerability threshold my security team uses (ex. CVSS ≥ 7.5).\n\n## Key result\n\nNone. Prioritized because the current behavior makes it look like Fleet does not understand how people actually use CVSS. But now we do.\n\n## Original requests\n\n- #30237\n\n## Context\n- Product Designer: @RachelElysia + @iansltx \n- Engineer: @RachelElysia \n\n## Changes\n\n### Product\n- [ ] UI changes: [Figma](https://www.figma.com/design/J2mqgWcS9RG3jaQc43V67m/-30248--Software-page--filter-by-custom-severity--CVSS-score--ranges?node-id=0-1\u0026p=f\u0026t=YQB8wo6YOLyUzyFu-0)\n- [x] CLI (fleetctl) usage changes: No changes\n- [x] YAML changes: No changes\n- [x] REST API changes: No changes (API endpoint already supports min/max)\n- [x] Fleet's agent (fleetd) changes: No changes\n- [x] GitOps changes: No changes\n- [x] Activity changes: No changes\n- [x] Permissions changes: No changes\n- [ ] Changes to paid features or tiers: Follows existing CVSS score filtering, so Fleet Premium\n- [ ] My device and fleetdm.com/better changes: No changes\n- [ ] First draft of test plan added\n- [x] Other reference documentation changes: No changes\n- [ ] Once shipped, requester has been notified\n- [ ] Once shipped, dogfooding issue has been filed\n\n### Engineering\n- [ ] Test plan is finalized\n- [x] Contributor API changes: No changes\n- [ ] Feature guide changes: Make sure the [vulns filtering article](https://fleetdm.com/guides/filtering-software-by-vulnerability) is current with the UI\n\n\u003e ℹ️  Please read this issue carefully and understand it.  Pay [special attention](https://fleetdm.com/handbook/company/development-groups#developing-from-wireframes) to UI wireframes, especially \"dev notes\".\n\n## QA\n\n### Risk assessment\n\n- Risk level: Low\n\n### Test plan\n\u003c!-- Add detailed manual testing steps for all affected user roles. --\u003e\n\n\u003e Make sure to go through [the list](https://github.com/fleetdm/fleet/blob/main/docs/Contributing/guides/ui/design-qa-considerations.md) and consider all events that might be related to this story, so we catch edge cases earlier.\n\n\u003e Note: See Figma for single source of truth for exact text copies \n\nTest modals on Host \u003e Software \u003e Inventory page and Software page\n\n1. Min max is present and new help text is present\n2. Min max is enabled only if vuln software toggle is enabled\n3. Defaults to \"Any severity\"\n4. If a user clicks on a given severity like \"Critical severity\", the min and max will be auto populated\n5. If a user clicks on \"Any severity\", the min and max are cleared\n6. If a user clicks on \"Custom severity\", the min and max do not change\n7. If a user types in a custom min or custom max, the dropdown will change to \"Custom severity\"\n8. If a user clears both custom min/max, the dropdown will change to \"Any severity\" but returns to \"Custom severity\" if they start typing\n9. If the user hits apply with no severity entered, it will apply any severity\n10. If the user clicks apply with only a min entered, it will only apply the min (e.g. \u003e=4.0)\n11. If the user clicks apply with only a max entered, it will only apply the max (e.g. \u003c= 8.0)\n12. If the user types in an invalid number into either min/max (e.g. 4.11 or -3), the in label error states it must be a number between 0-10 with an increment of 0.1\n12b. The user cannot type in string as the input is limited to type number\n14. If the user types in a min larger than the max, the Apply button is disabled with a tooltip stating that the min can not be greater than the max.\n15. By clicking \"Apply\", the severity ranges will filter results to only vulnerable software with severity scores in the selected range\n16. Clearing the filter should show all software \n\u003c!-- Consider: Do the steps above apply to all global access roles, including admin, maintainer, observer, observer+, and GitOps?  Do the steps above apply to all team-level access roles?  If not, write the steps used to test each variation.\n--\u003e\n\n### Testing notes\n\u003c!-- Any additional testing notes relevant to this story or tools required for testing. --\u003e\n\n### Confirmation\n\u003c!-- The engineer responsible for implementing this user story completes the test plan before moving to the \"Ready for QA\" column. --\u003e\n\n1. [ ] Engineer: Added comment to user story confirming successful completion of test plan.\n2. [ ] QA: Added comment to user story confirming successful completion of test plan.\n",
          "number": 30248,
          "repository": "fleetdm/fleet",
          "title": "Software page: filter by custom severity (CVSS score) ranges",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/30248"
        },
        "estimate": 3,
        "id": "PVTI_lADOBDAnic4A4BEUzgcYi4Y",
        "labels": [
          "story",
          ":release",
          "~pushed",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-29T00:00:00Z",
          "title": "4.73.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "status": "✔️Awaiting QA",
        "title": "Software page: filter by custom severity (CVSS score) ranges",
        "comments": [
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "FYI @lukeheath marking this story as `P2`. The current behavior makes it look like Fleet does not understand how people actually use CVSS.  But now we do."
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "TODO RAchel: first draft of test plan"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@jmwatts Just filled in this story checklist so it's ready for User Story Review (credit to @RachelElysia for the test plan)."
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "assigning to @RachelElysia to estimate"
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "@lukeheath needs your estimate here and we can move it to the software board"
          },
          {
            "author": {
              "login": "jacobshandling"
            },
            "body": "For everyone's info, I was asked to estimate this this morning and estimated it at a 4. Looks like changing the project removed the estimate. @sharon-fdm @mostlikelee "
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "oh no that's my bad.  we discussed in sprint kickoff review that Luke is going to take this one @jacobshandling "
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "I'll assign a 4 here and move it to the software board for Luke"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@lukeheath Might be minimal extra work to solve #30524 alongside this since filter + sort seems like it would be sufficient there. Maybe dev this with that request in mind and check with the customer to see whether that solves their issue?"
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "removing milestone.  will not get to this story this sprint"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@lukeheath Can you create Sprint 45 and move this into it?"
          },
          {
            "author": {
              "login": "lukeheath"
            },
            "body": "@RachelElysia Thanks for taking this. I thought I'd be able to squeeze it in, but wasn't able to."
          }
        ]
      },
      {
        "assignees": [
          "fuhry"
        ],
        "content": {
          "body": "github.com/urfave/cli/v2 doesn't parse flags after it encounters the first argument. This left me very confused when trying to call `fleetctl api some/route -F arg=value` and the query string wasn't being updated.\r\n\r\nMake this an error case to prevent future confusion.\r\n\r\nNote that v3 of `urfave/cli` [supports arguments](https://pkg.go.dev/github.com/urfave/cli/v3#Argument), so the right thing to do in the long term is upgrade this library to v3.\r\n\r\n# Checklist for submitter\r\n\r\nIf some of the following don't apply, delete the relevant line.\r\n\r\n\u003c!-- Note that API documentation changes are now addressed by the product design team. --\u003e\r\n\r\n- [x] Input data is properly validated, `SELECT *` is avoided, SQL injection is prevented (using placeholders for values in statements)\r\n- [x] Added/updated automated tests\r\n- [x] Manual QA for all new/changed functionality\r\n",
          "number": 30797,
          "repository": "fleetdm/fleet",
          "title": "[fleetctl] fail api command when args present after uri",
          "type": "PullRequest",
          "url": "https://github.com/fleetdm/fleet/pull/30797"
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgcgXr8",
        "labels": [
          ":release",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-08T00:00:00Z",
          "title": "4.72.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "80d566cb",
          "startDate": "2025-07-07",
          "title": "Sprint 44"
        },
        "status": "✅ Ready for release",
        "title": "[fleetctl] fail api command when args present after uri"
      },
      {
        "assignees": [
          "RachelElysia"
        ],
        "content": {
          "body": "Tracking carry over work \n\n\n- Refactor work [request](https://github.com/fleetdm/fleet/pull/31018#discussion_r2225913183): Pull out Update card and Self Service card into components  on their own files \n- Unreleased bug: Multiple requests now timing out because 60 second FE timeout is not being reset",
          "number": 31309,
          "repository": "fleetdm/fleet",
          "title": "Self-service actions carryover",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/31309"
        },
        "estimate": 5,
        "id": "PVTI_lADOBDAnic4A4BEUzgdAjcc",
        "labels": [
          "~frontend",
          "~sub-task",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-08T00:00:00Z",
          "title": "4.72.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "status": "🐣 In progress",
        "title": "Self-service actions carryover"
      },
      {
        "assignees": [
          "ksykulev"
        ],
        "content": {
          "body": "Fleet version: 4.67.0\n\nWeb browser and operating system: n/a\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\nWhatsApp version is different when adding the Fleet-maintained app (screenshot 1), after adding (2), and after installing (3):\n\n![Image](https://github.com/user-attachments/assets/21e5d017-3589-47ba-aa1c-0874740c2a5f)\n\n![Image](https://github.com/user-attachments/assets/965ca8ff-07a9-42d8-a05b-27d51161c66e)\n\n![Image](https://github.com/user-attachments/assets/ad5fd5ce-e462-493e-a839-3c1c6a5f0853)\n\n\n### 🧑‍💻  Steps to reproduce\n1. Add whatsapp FMA app to a team\n2. Install the whatsapp on a host, then refetch host vitals\n3. Run the vulnerabilities cron\n\n### 🕯️ More info _(optional)_\n\u003c!-- Add any additional details you think could be relevant to solving or reproducing the bug (e.g., \"this does not reproduce when...\") --\u003e\nN/A\n\n\u003c!-- If this is a performance issue, follow these steps to generate and attach a debug archive: https://fleetdm.com/docs/using-fleet/monitoring-fleet#debugging-performance-issues --\u003e\n\n\u003c!-- ### 🛠️ To fix --\u003e\n- When adding the Fleet-maintained app and on the software title page, show the version that gets installed (in this case: `25.11.76`)\n",
          "number": 31185,
          "repository": "fleetdm/fleet",
          "title": "🪲WhatsApp version different in software inventory",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/31185"
        },
        "estimate": 1,
        "id": "PVTI_lADOBDAnic4A4BEUzgc5Hl8",
        "labels": [
          "bug",
          "~backend",
          ":release",
          "~released bug",
          "#g-software",
          "fma"
        ],
        "milestone": {
          "dueOn": "2025-08-08T00:00:00Z",
          "title": "4.72.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "80d566cb",
          "startDate": "2025-07-07",
          "title": "Sprint 44"
        },
        "status": "🦤 ‎In review",
        "title": "🪲WhatsApp version different in software inventory",
        "comments": [
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "@ksykulev can you pop an estimate on this one?"
          }
        ]
      },
      {
        "assignees": [
          "ksykulev"
        ],
        "content": {
          "body": "**Fleet version**: \u003c!-- Copy this from the \"My account\" page in the Fleet UI, or run `fleetctl --version` --\u003e\n\n**Web browser and operating system**: \u003c!-- e.g. Chrome 88.0.4324 running on macOS --\u003e\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\nBrave is not showing as updatable because the versions do not match\n\nVersion reported by homebrew: `1.79.123.0`\nVersion reported by osquery: `137.1.79.123`\n\n### 🧑‍💻  Steps to reproduce\n\u003c!-- Provide step-by-step actions of how to recreate this bug in a clean install of Fleet. (This helps others understand and fix it more quickly.) --\u003e\n1. Add macOS FMA\n2. Install FMA\n\n\n### 🕯️ More info _(optional)_\n\u003c!-- Add any additional details you think could be relevant to solving or reproducing the bug (e.g., \"this does not reproduce when...\") --\u003e\nN/A\n\n\u003c!-- If this is a performance issue, follow these steps to generate and attach a debug archive: https://fleetdm.com/docs/using-fleet/monitoring-fleet#debugging-performance-issues --\u003e\n\n\u003c!-- ### 🛠️ To fix --\u003e\nFix this in the FMA manifest:\n- drop the last part (0)\n- ~~add 58 to the 2nd part (79) to create a new first part (137)~~ needs research\n",
          "number": 31122,
          "repository": "fleetdm/fleet",
          "title": "macOS Brave Browser FMA version mismatch",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/31122"
        },
        "estimate": 1,
        "id": "PVTI_lADOBDAnic4A4BEUzgc5rCE",
        "labels": [
          "bug",
          ":release",
          "#g-software",
          "fma"
        ],
        "milestone": {
          "dueOn": "2025-08-08T00:00:00Z",
          "title": "4.72.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "80d566cb",
          "startDate": "2025-07-07",
          "title": "Sprint 44"
        },
        "status": "🦤 ‎In review",
        "title": "macOS Brave Browser FMA version mismatch",
        "comments": [
          {
            "author": {
              "login": "ksykulev"
            },
            "body": "Here is a bit of a mapping between legacy versions\nhttps://github.com/brave/brave-browser/wiki/Brave-Release-Schedule-Archive\nHere is the upcoming release schedule\nhttps://github.com/brave/brave-browser/wiki/Brave-Release-Schedule\n\nAnd we do have a mapping on github\nhttps://github.com/brave/brave-browser/releases/tag/v1.80.122\n"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Per further discussion, we'll do the simplest possible fix, with test automation as a prerequisite, hence the 1 estimate here."
          }
        ]
      },
      {
        "assignees": [
          "ksykulev"
        ],
        "content": {
          "body": "\u003c!-- **This issue's remaining effort can be completed in ≤1 sprint.  It will be valuable even if nothing else ships.**\nIt is [planned and ready](https://fleetdm.com/handbook/company/development-groups#making-changes) to implement.  It is on the proper kanban board. --\u003e\n\n\n## Goal\n\n| User story  |\n|:---------------------------------------------------------------------------|\n| As an IT Admin\n| I want FMA updates to be available quickly\n| so that I can patch host software with the latest version\n\n## Key result\n\n100 FMAs\n\n## Original requests\n\nFMA updates are currently tested manually, delaying customer value by holding back the ability for them to download the latest version of a software.\n\nCurrent [update frequency](https://docs.google.com/spreadsheets/d/1Z0I9y1cx_L_HJ57oWdyl23Ek0OpXbERRnXZ-kFulG6M/edit?usp=sharing) : 3 / day\nCurrent unique FMA apps updated: 19\n\nWith the conservative goal of testing apps within 1 day of release, our current manual testing strategy will not scale as we add FMAs:\nGoal: 100 FMAs\nEstimated updates per day to test: 15\n\nTest automation here is not meant to replace all manual testing, but it will greatly reduce the scope of regression testing.  Testing 100 FMAs per release will have a large impact on QA and likely result in further release delays.\n\nWe are starting with the macosx platform first. We have a total of 21 apps for the mac platform and 6 windows applications. While this code should be written generically enough to support mac, windows, and eventually linux. Primarily focus on macosx support. \n\n## Context\n- Product Designer: @mostlikelee  \n- Engineer: @ksykulev \n\nSome things discovered during the POC.\n1. Unfortunately `act` the local github actions testing tool https://github.com/nektos/act, does not support mac osx machines. Only linux. So developing/testing on github is required.\n2. osquery is used as a primary means of checking if an application was installed and uninstalled. However, because the `apps` table primarily uses `LaunchServices`. You must be careful to deal with caching. https://github.com/osquery/osquery/blob/master/osquery/tables/system/darwin/apps.mm#L259. Check the `forceLaunchServicesRefresh` function in the POC code for more details on how to reset.\n3. Macosx also has a piece of software called gatekeeper. Most applications installed from the internet require user authorization to run for the first time. Although I do not think this impacts osquery's ability to find the application. View the `removeAppQuarentine` function for details on how to potentially deal with that. \n4. There are a number of version mis-matches that occurred between the manifest file and what osquery returns.\n```\nApps with errors: [Brave Amazon DCV Google Chrome WhatsApp]\n\nFound app: 'Brave Browser.app' at /Applications/Brave Browser.app, Version: 137.1.79.123, Bundled Version: 179.123\nApp version '1.79.123.0' was not found by osquery\n\nFound app: 'DCV Viewer.app' at /Applications/DCV Viewer.app, Version: 2024.0 (r8004), Bundled Version: 2024.0 (r8004)\nApp version '2024.0.8004' was not found by osquery\n\nFound app: 'Google Chrome for Testing.app' at /Applications/Google Chrome for Testing.app, Version: 137.0.7151.119, Bundled Version: 7151.119\nFound app: 'Google Chrome.app' at /Applications/Google Chrome.app, Version: 138.0.7204.50, Bundled Version: 7204.50\nApp version '137.0.7151.104' was not found by osquery\n\nFound app: 'WhatsApp.app' at /Applications/WhatsApp.app, Version: 25.16.81, Bundled Version: 738641321\nApp version '2.25.16.81' was not found by osquery\n```\n5. Chrome is especially tricky. \n  - It appears that it comes pre-installed on the macosx images on github. \n  - We cannot check for a specific version when verifying. The chrome installer uses a generic url that does not include the version, so the versions may change at any time. It might be best to use a `\u003e` operator for this app. \n\n## Changes\nPhase 1: Improve tooling for manual testing\nPhase 2: Port existing tooling into CI\n\n### Engineering\n- [ ] Test plan is finalized\n- [X] Contributor API changes: No changes\n- [X] Feature guide changes: No changes\n- [X] Database schema migrations: No changes\n\n## QA\n\n### Risk assessment\n\n- Requires load testing: oN\n- Risk level: Low\n\n### Test plan\n\n1.   Open FMA Updates PR\n2.  Confirm only FMA CI tests are performed\n3.  Confirm CI tests report results and gate the merge \n\n### Confirmation\n\n1. [ ] Engineer: Added comment to user story confirming successful completion of test plan.\n2. [ ] QA: Added comment to user story confirming successful completion of test plan.",
          "number": 29183,
          "repository": "fleetdm/fleet",
          "title": "Create Fleet Maintained Apps test automation",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/29183"
        },
        "estimate": 8,
        "id": "PVTI_lADOBDAnic4A4BEUzgcX4P8",
        "labels": [
          "story",
          ":release",
          "~engineering-initiated",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-08T00:00:00Z",
          "title": "4.72.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "80d566cb",
          "startDate": "2025-07-07",
          "title": "Sprint 44"
        },
        "status": "✔️Awaiting QA",
        "title": "Create Fleet Maintained Apps test automation",
        "comments": [
          {
            "author": {
              "login": "lukeheath"
            },
            "body": "@mostlikelee Thanks for filing! This is a good investment and definitely something we need to do. Before I prioritize to drafting, would you please review the [create an engineering-initiated story](https://fleetdm.com/handbook/engineering#create-an-engineering-initiated-story) process? This should only have one user story, and the only section that should be removed is the \"Product\" section. \n\nOne user story allows us to focus on a single user and use case, and implement a simpler iteration. We can do a separate iteration if we want to focus on admin experience. "
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "@lukeheath thanks, updated!"
          },
          {
            "author": {
              "login": "lukeheath"
            },
            "body": "@mostlikelee Thanks, I've prioritized to the drafting board and assigned to you as the product designer. You'll be responsible for moving this through the drafting board per the drafting engineering-initiated stories process (or assign to someone else to take it over.)"
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "@mostlikelee are we aiming to ship this in 4.72?"
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "I think we need to rewrite the name and story here to better reflect the scope (i think we're starting with macos), but yes we want to make some progress on this front in the next sprint to get in front of FMA issues.\n\n@ksykulev can you take a pass at updating this so we can estimate any further work needed outside the POC?"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Applied estimate arrived at on Friday in chat."
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "- add ability to skip slugs for version mismatches\n- add ability to skip version check"
          }
        ]
      },
      {
        "assignees": [
          "RachelElysia"
        ],
        "content": {
          "body": "## Related user story\n\nPart of #30240 \n\n\u003c!-- A sub-task always belongs to exactly one story.  The parent user story for this technical sub-task is linked here.  Comment on the parent story, not on this sub-task. --\u003e\n\n## Task\n\n- [x] Create version comparison function and appropriate test to compare various types of versions\n\nStatus column\n- [x] Update the status column to not reflect the API `status` but whether a software is actually installed on a host\n- [x] Update the status column to have an update available for software installers that have a newer version available to install\n- [x] Add \"Updating...\", \"Update (pending)\", and \"Update available\" to the status column\n- [x] Add polling to \"Updating...\" status but specifically not to \"Update (pending)\" status\n- [x] Ensure there is no regression in statuses\n- [x] Allow for client-side sort by status for Self-service page\n- [x] Add client-side pagination to Self-service page\n\nAction column\n- [x] Update the actions to appropriately reflect action verbs for software that is currently installed/uninstalled\n- [x] Update the actions to hide uninstall on software that is detected as not installed\n- [x] Update the actions to say \"Update\" instead of install if an older version of the software is currently installed in relation to the installer version\n- [x] Ensure disabled state when updating/ update pending and action text does not change\n\n- [x] Update all this on both the h**ost details \u003e software \u003e inventory page ** and **self-service page**\n\n\n## Condition of satisfaction\n\nSee story's [Figma](https://www.figma.com/design/LaPOy2xbXSNIYtFenO7FTt/-30240-Show-appropriate-self-service-actions-based-on-whether-software-is-on-the-host?node-id=5301-1746\u0026t=wQkHuan83PAwlqaW-0) ",
          "number": 30861,
          "repository": "fleetdm/fleet",
          "title": "Show appropriate self-service status and actions in the self-service table at all times",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/30861"
        },
        "estimate": 5,
        "id": "PVTI_lADOBDAnic4A4BEUzgck8sI",
        "labels": [
          "~frontend",
          ":release",
          "~sub-task",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-08T00:00:00Z",
          "title": "4.72.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "80d566cb",
          "startDate": "2025-07-07",
          "title": "Sprint 44"
        },
        "status": "✅ Ready for release",
        "title": "Show appropriate self-service status and actions in the self-service table at all times",
        "comments": [
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "@RachelElysia can you add an estimate on this subtask?"
          }
        ]
      },
      {
        "assignees": [
          "iansltx"
        ],
        "content": {
          "body": "**Fleet version**: \u003c!-- Copy this from the \"My account\" page in the Fleet UI, or run `fleetctl --version` --\u003e\n\n**Web browser and operating system**: \u003c!-- e.g. Chrome 88.0.4324 running on macOS --\u003e\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\nAmazon DCV Viewer not showing correct update status because of version mismatch\n\nHomebrew: `2024.0.8004`\nInventory: `2024.0 (r8004)`\n\n### 🧑‍💻  Steps to reproduce\n\u003c!-- Provide step-by-step actions of how to recreate this bug in a clean install of Fleet. (This helps others understand and fix it more quickly.) --\u003e\n1. Add FMA to Fleet\n2. Install FMA\n\n### 🕯️ More info _(optional)_\n\u003c!-- Add any additional details you think could be relevant to solving or reproducing the bug (e.g., \"this does not reproduce when...\") --\u003e\nN/A\n\n\u003c!-- If this is a performance issue, follow these steps to generate and attach a debug archive: https://fleetdm.com/docs/using-fleet/monitoring-fleet#debugging-performance-issues --\u003e\n\n\u003c!-- ### 🛠️ To fix --\u003e\nThis should be fixed ingestion side.  While we need to bring back software ingestion modification patterns we also need to account for FMA test automation.  \n",
          "number": 31123,
          "repository": "fleetdm/fleet",
          "title": "Amazon DCV Viewer FMA version mismatch",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/31123"
        },
        "estimate": 1,
        "id": "PVTI_lADOBDAnic4A4BEUzgc8aTI",
        "labels": [
          "bug",
          ":release",
          "#g-software",
          "fma"
        ],
        "milestone": {
          "dueOn": "2025-08-08T00:00:00Z",
          "title": "4.72.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "80d566cb",
          "startDate": "2025-07-07",
          "title": "Sprint 44"
        },
        "status": "✅ Ready for release",
        "title": "Amazon DCV Viewer FMA version mismatch",
        "comments": [
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "moving to ready for spec to discuss the best path forward here"
          }
        ]
      },
      {
        "assignees": [
          "xpkoala",
          "PezHub",
          "jmwatts"
        ],
        "content": {
          "body": "\n# Goal: easy-to-follow test steps for checking a release manually\n\n# Important reference data\n\n1. [fleetctl preview setup](https://fleetdm.com/fleetctl-preview)\n2. [permissions documentation](https://fleetdm.com/docs/using-fleet/permissions) \n3. premium tests require license key (needs renewal) `fleetctl preview --license-key=eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJGbGVldCBEZXZpY2UgTWFuYWdlbWVudCBJbmMuIiwiZXhwIjoxNjQwOTk1MjAwLCJzdWIiOiJkZXZlbG9wbWVudCIsImRldmljZXMiOjEwMCwibm90ZSI6ImZvciBkZXZlbG9wbWVudCBvbmx5IiwidGllciI6ImJhc2ljIiwiaWF0IjoxNjIyNDI2NTg2fQ.WmZ0kG4seW3IrNvULCHUPBSfFdqj38A_eiXdV_DFunMHechjHbkwtfkf1J6JQJoDyqn8raXpgbdhafDwv3rmDw`\n4. premium tests require license key (active - Expires Sunday, January 1, 2023 12:00:00 AM) `fleetctl preview --license-key=eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJGbGVldCBEZXZpY2UgTWFuYWdlbWVudCBJbmMuIiwiZXhwIjoxNjcyNTMxMjAwLCJzdWIiOiJGbGVldCBEZXZpY2UgTWFuYWdlbWVudCIsImRldmljZXMiOjEwMCwibm90ZSI6ImZvciBkZXZlbG9wbWVudCBvbmx5IiwidGllciI6InByZW1pdW0iLCJpYXQiOjE2NDI1MjIxODF9.EGHQjIzM73YyMbnCruswzg360DEYCsDi9uz48YcDwQHq90BabGT5PIXRiculw79emGj5sk2aKgccTd2hU5J7Jw`\n\n# Smoke Tests\nSmoke tests are limited to core functionality and serve as a pre-release final review. If smoke tests are failing, a release cannot proceed.\n\n## Fleet core:\n\n**Fleet version** (Head to the \"My account\" page in the Fleet UI or run `fleetctl version`):\n\n**Web browser** _(e.g. Chrome 88.0.4324)_: \n\n### Prerequisites\n\n1. `fleetctl preview` is set up and running the desired test version using [`--tag` parameters.](https://fleetdm.com/handbook/engineering#run-fleet-locally-for-qa-purposes)\n2. Unless you are explicitly testing older browser versions, browser is up to date.\n3. Certificate \u0026 flagfile are in place to create new host.\n4. In your browser, clear local storage using devtools.\n\n### Orchestration\n\u003ctable\u003e\n\u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eUpdate flow\u003c/td\u003e\u003ctd\u003e\n\n1. remove all fleet processes/agents/etc using `fleetctl preview reset` for a clean slate\n2. run `fleetctl preview` with no tag for latest stable\n3. create a host/query to later confirm upgrade with\n4. STOP fleet-preview-server instances in containers/apps on Docker\n5. run `fleetctl preview` with appropriate testing tag \u003c/td\u003e\u003ctd\u003eAll previously created hosts/queries are verified to still exist\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eLogin flow\u003c/td\u003e\u003ctd\u003e\n\n1. navigate to the login page and attempt to login with both valid and invalid credentials to verify some combination of expected results.\n2. navigate to the login page and attempt to login with both valid and invalid sso credentials to verify expected results.\n\u003c/td\u003e\u003ctd\u003e\n\n1. text fields prompt when blank\n2. correct error message is \"authentication failed\"\n3. forget password link prompts for email\n4. valid credentials result in a successful login.\n5. valid sso credentials result in a successful login\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003ePacks flow\u003c/td\u003e\u003ctd\u003eVerify management, operation, and logging of [\"2017 packs\"](https://fleetdm.com/handbook/company/why-this-way#why-does-fleet-support-query-packs).\u003c/td\u003e\u003ctd\u003e\n\n1. Packs successfully run on host machines after migrations \n2. New Packs can be created\n3. Packs can be edited and deleted\n4. Packs results information is logged\n \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eLog destination flow\u003c/td\u003e\u003ctd\u003eVerify log destination for software, query, policy, and packs.\u003c/td\u003e\u003ctd\u003e\n\n1. Software, query, policy, and packs logs are successfully sent to external log destinations\n2. Software, query, policy, and packs logs are successfully sent to Filesystem log destinations\n \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eOS settings\u003c/td\u003e\u003ctd\u003eVerify OS settings functionality\u003c/td\u003e\u003ctd\u003e\n\n1. Verify able to configure Disk encryption (macOS, Windows, \u0026 Linux).\n2. Verify host enrolled with Disk encryption enforced successfully encrypts.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003c/table\u003e\n\n### MDM\n\u003ctable\u003e\n\u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eMDM enrollment flow\u003c/td\u003e\u003ctd\u003eVerify MDM enrollments, run MDM commands\u003c/td\u003e\u003ctd\u003e\n  \n1. Erase an ADE-eligible macOS host and verify able to complete automated enrollment flow.\n2. With Windows MDM turned On, enroll a Windows host and verify MDM is turned On for the host.\n3. Verify able to run MDM commands on both macOS and Windows hosts from the CLI.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eMDM migration flow\u003c/td\u003e\u003ctd\u003eVerify MDM migration for ADE and non-ADE hosts\u003c/td\u003e\u003ctd\u003e\n  \n1. Turn off MDM on an ADE-eligible macOS host and verify that the native, \"Device Enrollment\" macOS notification appears.\n2. On the My device page, follow the \"Turn on MDM\" instructions and verify that MDM is turned on.\n3. Turn off MDM on a non ADE-eligible macOS host.\n4. On the My device page, follow the \"Turn on MDM\" instructions and verify that MDM is turned on.\n5. Verify Windows host migrates from 3rd party MDM to Fleet when automatic migration is turned on.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eOS settings\u003c/td\u003e\u003ctd\u003eVerify OS settings functionality\u003c/td\u003e\u003ctd\u003e\n\n1. Verify Profiles upload/download/delete (macOS \u0026 Windows).\n2. Verify Profiles are delivered to host and applied. \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eSetup experience\u003c/td\u003e\u003ctd\u003eVerify macOS Setup experience\u003c/td\u003e\u003ctd\u003e\n\n1. Configure End user authentication.\n3. Upload a Bootstrap package.\n4. Add software (FMA, VPP, \u0026 Custom pkg)\n5. Add a script\n6. Enroll an ADE-eligible macOS host and verify successful authentication.\n7. Verify Bootstrap package is delivered.\n8. Verify SwiftDialogue window displays.\n9. Verify software installs and script runs.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eOS updates\u003c/td\u003e\u003ctd\u003eVerify OS updates flow\u003c/td\u003e\u003ctd\u003e\n\n1. Configure OS updates (macOS \u0026 Windows).\n2. Verify on-device that Nudge prompt appears (macOS 13).\n3. Verify enforce minimumOS occurs during enrollment (macOS 14+).\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eiOS/iPadOS\u003c/td\u003e\u003ctd\u003eVerify enrollment, profiles, \u0026 software installs\u003c/td\u003e\u003ctd\u003e\n\n1. Verify ADE enrollment.\n2. Verify OTA enrollment.\n3. Verify Profiles are delivered to host and applied.\n4. Verify VPP apps install \u0026 display correctly in Activity feed.\n5. Verify `Turn Off MDM` for BYOD \u0026 ADE hosts.\n \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\n\u003ctr\u003e\u003ctd\u003eLock \u0026 Wipe\u003c/td\u003e\u003ctd\u003eVerify hosts can be locked \u0026 wiped\u003c/td\u003e\u003ctd\u003e\n\n1. Verify locking a host from the Fleet UI (macOS, Windows, \u0026 Linux)\n2. Verify unlocking a host from the Fleet UI (macOS, Windows, \u0026 Linux)\n3. Verify wiping a host from the Fleet UI (macOS, Windows, \u0026 Linux)\n4. Verify wiping and locking hosts using `fleetctl` (macOS, Windows, \u0026 Linux)\n \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\n\u003ctr\u003e\u003ctd\u003eCertificates Upload\u003c/td\u003e\u003ctd\u003eAPNs cert and ABM token renewal workflow\u003c/td\u003e\u003ctd\u003e\n\n1. Renew APNs Certificate.\n2. Renew ABM Token.\n3. Ensure ADE hosts can enroll.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003c/table\u003e\n\n### Software\n\u003ctable\u003e\n\u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eQuery flow\u003c/td\u003e\u003ctd\u003eCreate, edit, run, and delete queries. \u003c/td\u003e\u003ctd\u003e\n\n1. permissions regarding creating/editing/deleting queries are up to date with documentation\n2. syntax errors result in error messaging\n3. queries can be run manually \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eHost Flow\u003c/td\u003e\u003ctd\u003eVerify a new host can be added and removed following modal instructions using your own device.\u003c/td\u003e\u003ctd\u003e\n\n1. Host is added via command line\n2. Host serial number and date added are accurate\n3. Host is not visible after it is deleted\n4. Warning and informational modals show when expected and make sense\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eMy device page\u003c/td\u003e\u003ctd\u003eVerify the end user's my device page loads successfully.\u003c/td\u003e\u003ctd\u003e\n\n1. Clicking the Fleet desktop item, then \"My device\" successfully loads the my device page.\n2. The \"My device\" page is populated correctly and as expected. \n3. Styling and padding appears correct.\n \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eScripts\u003c/td\u003e\u003ctd\u003eVerify script library and execution\u003c/td\u003e\u003ctd\u003e\n\n1. Verify able to run a script on all host types from CLI.\n2. Verify scripts library upload/download/delete.\n3. From Host details (macOS, Windows, \u0026 Linux) run a script that should PASS, verify.\n4. From Host details (macOS, Windows, \u0026 Linux) run a script that should FAIL, verify.\n5. Verify UI loading state and statuses for scripts.\n8. Disable scripts globally and verify unable to run.\n9. Verify scripts display correctly in Activity feed.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eSoftware\u003c/td\u003e\u003ctd\u003eVerify software library and install / download\u003c/td\u003e\u003ctd\u003e\n\n1. Verify software library upload/download/delete.\n2. From Host details (macOS, Windows, \u0026 Linux) run an install that should PASS, verify.\n3. From My Device (macOS, Windows, \u0026 Linux) software tab should have self-service items available, verify.\n4. Verify UI loading state and statuses for installing software.\n7. Verify software installs display correctly in Activity feed.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\n\u003ctr\u003e\u003ctd\u003eMigration Test\u003c/td\u003e\u003ctd\u003eVerify Fleet can migrate to the next version with no issues.\u003c/td\u003e\u003ctd\u003e\n\nUsing the github action https://github.com/fleetdm/fleet/actions/workflows/db-upgrade-test.yml\n1. Using the most recent stable version of Fleet and `main`, click `Run workflow`\n2. Enter the Docker tag of Fleet starting version, e.g. 'v4.64.2'\n3. Enter the Docker tag of Fleet version to upgrade to, e.g. 'rc-minor-fleet-v4.65.0'\n4. Click `Run workflow`.\n5. Action should complete successfully.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003c/table\u003e\n\n### All Product Groups\n\u003ctable\u003e\n \u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eRelease blockers\u003c/td\u003e\u003ctd\u003eVerify there are no outstanding release blocking tickets.\u003c/td\u003e\u003ctd\u003e\n  \n1. Check [this](https://github.com/fleetdm/fleet/labels/~release%20blocker) filter to view all open `~release blocker` tickets.\n2. If any are found raise an alarm in the `#help-engineering` and `#g-mdm` (or `#g-endpoint-ops`)  channels.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\n\u003ctr\u003e\u003ctd\u003eLoad tests - minor releases only unless otherwise specified\u003c/td\u003e\u003ctd\u003eVerify all load test metrics are within acceptable range on final build of RC.\u003c/td\u003e\u003ctd\u003e\n  \n1. Check [this Google doc](https://docs.google.com/document/d/1V6QtFzcGDsLnn2PIvGin74DAxdAN_3likjxSssOMMQI/edit?tab=t.0#heading=h.15acjob4ji20) to review load test key metrics and checks.\n2. After all expected changes have been merged to the RC branch, two load tests will need to be run - a new instance with no data, and a migrated instance.\n3. For the new instance with no data, set up a load test environment using the RC branch and allow it at least 24hrs of run time.\n4. For the migrated instance, set up a load test environment on the previous minor release branch. Once the environment has been set up and stabilized, follow the instructions in [Deploying code changes to fleet](https://github.com/fleetdm/fleet/blob/main/infrastructure/loadtesting/terraform/readme.md#deploying-code-changes-to-fleet) to migrate to the RC branch. Monitor the metrics post-migration to determine if any performance issues arise.\n5. Record metrics in [this spreadsheet](https://docs.google.com/spreadsheets/d/1FOF0ykFVoZ7DJSTfrveip0olfyRQsY9oT1uXCCZmuKc/edit?usp=drive_link) for the two load test runs. \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e \n\u003c/table\u003e\n\n### Notes\n\nIssues found new to this version:\n\nIssues found that reproduce in last stable version: \n\nWhat has not been tested:\n\nInclude any notes on whether issues should block release or not as needed:\n\n\u003cbr\u003e\n\u003cbr\u003e\n\n",
          "number": 31274,
          "repository": "fleetdm/fleet",
          "title": "Release QA: 4.72.0",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/31274"
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgc-TB0",
        "labels": [
          ":release",
          "#g-mdm",
          "#g-orchestration",
          "#g-software"
        ],
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "status": "Done",
        "title": "Release QA: 4.72.0"
      },
      {
        "assignees": [
          "RachelElysia"
        ],
        "content": {
          "body": "**Fleet version**: 4.70.1\n\n**Web browser and operating system**: \u003c!-- e.g. Chrome 88.0.4324 running on macOS --\u003e\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\n\u003c!-- What did you see?  Paste a screenshot, include a 30s video, or write 1-2 sentences describing the issue you observed. --\u003e\nType column sort is actually sorting by name even though the UI buttons light up correctly and the URL sort column is correct\n\nhttps://github.com/user-attachments/assets/3cbe7c75-2cee-412d-b109-299f006f1716\n\n\n### 🧑‍💻  Steps to reproduce\n\u003c!-- Provide step-by-step actions of how to recreate this bug in a clean install of Fleet. (This helps others understand and fix it more quickly.) --\u003e\n1. Go to Fleet Desktop\n2. Go to software tab\n3. Try to sort software by type\n\n### 🕯️ More info _(optional)_\n\u003c!-- Add any additional details you think could be relevant to solving or reproducing the bug (e.g., \"this does not reproduce when...\") --\u003e\nEnsure the backend supports sorting by type column\nIf so, it's a FE fix, if not, need to confirm design if it should or not (maybe it was unintentional to have sort on type and we accidentally added it to the UI?)\n\n\u003c!-- If this is a performance issue, follow these steps to generate and attach a debug archive: https://fleetdm.com/docs/using-fleet/monitoring-fleet#debugging-performance-issues --\u003e\n\n### 🛠️ To fix \nProduct designer: @marko-lisica \n\nAs backend doesn't support this I believe we didn't design it. Remove sort indicator from Type column on the frontend and if needed we can always add later.",
          "number": 30746,
          "repository": "fleetdm/fleet",
          "title": "Fleet UI: Fleet Desktop \u003e Software \u003e Type sort broken",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/30746"
        },
        "estimate": 1,
        "id": "PVTI_lADOBDAnic4A4BEUzgc-Xts",
        "labels": [
          "bug",
          "~frontend",
          ":release",
          "~released bug",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-08T00:00:00Z",
          "title": "4.72.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "80d566cb",
          "startDate": "2025-07-07",
          "title": "Sprint 44"
        },
        "status": "✅ Ready for release",
        "title": "Fleet UI: Fleet Desktop \u003e Software \u003e Type sort broken",
        "comments": [
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "Reproduced on 4.70.1"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "Est: 1"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "Done and merged this morning to not drag to next sprint"
          }
        ]
      },
      {
        "assignees": [
          "RachelElysia"
        ],
        "content": {
          "body": "## Related user story\n\n#30738\n\n## Task\n\nUpdate OS list and entity pages to conform to the parent ticket's wireframes. No API changes should be required on the OS list page. The OS entity details page will need to use the new `kernel` array, and should toggle the vulnerabilities/kernels cards based on platform matching.\n\n## Condition of satisfaction\n\nFrontend changes match Figma wireframes, and pull data from the new API response field.\n\n- [ ] For the kernels list, host counts should navigate to a host set filtered by both OS ID and software ID",
          "number": 31212,
          "repository": "fleetdm/fleet",
          "title": "Linux Vulns: Frontend",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/31212"
        },
        "estimate": 5,
        "id": "PVTI_lADOBDAnic4A4BEUzgdB-kE",
        "labels": [
          "~frontend",
          ":release",
          "~sub-task",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-29T00:00:00Z",
          "title": "4.73.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "status": "✔️Awaiting QA",
        "title": "Linux Vulns: Frontend",
        "comments": [
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "**Final est: 5**\n1 update OS page, 3 add new table, 1 ensure software details page works\n\n**Bold estimate: 3** since those two 1s are tiny and the table is basic so might not be quite a 3"
          }
        ]
      },
      {
        "assignees": [
          "RachelElysia"
        ],
        "content": {
          "body": "**Fleet version**: n/a (Testing new FMA apps)\n\n**Web browser and operating system**: n/a\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\nSquished icon on /software/add/fleet-maintained list \n\n![Image](https://github.com/user-attachments/assets/305793c3-502c-482f-ad38-28741ac8691d)\n\n\n### 🧑‍💻  Steps to reproduce\n\u003c!-- Provide step-by-step actions of how to recreate this bug in a clean install of Fleet. (This helps others understand and fix it more quickly.) --\u003e\n1. Add Fleet-maintained app Company Portal to software library using allenhouchins-add-company-portal-as-fma branch\n\n\n### 🕯️ More info _(optional)_\n\u003c!-- Add any additional details you think could be relevant to solving or reproducing the bug (e.g., \"this does not reproduce when...\") --\u003e\nN/A\n\n\u003c!-- If this is a performance issue, follow these steps to generate and attach a debug archive: https://fleetdm.com/docs/using-fleet/monitoring-fleet#debugging-performance-issues --\u003e\n\n\u003c!-- ### 🛠️ To fix --\u003e\n\u003c!-- If this bug requires additional product design work, uncomment the heading above and add instructions to fix, Figma link, etc. here once design changes are settled. --\u003e\n\u003c!-- Product designer: _________________________ --\u003e \u003c!-- Who is the product designer to contact if folks have questions about this fix? --\u003e\n",
          "number": 30367,
          "repository": "fleetdm/fleet",
          "title": "Intune Company Portal - FMA Icon issue",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/30367"
        },
        "estimate": 1,
        "id": "PVTI_lADOBDAnic4A4BEUzgdCIqk",
        "labels": [
          "bug",
          "~frontend",
          ":release",
          "~released bug",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-29T00:00:00Z",
          "title": "4.73.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "status": "Done",
        "title": "Intune Company Portal - FMA Icon issue",
        "comments": [
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "@jmwatts updated this and the other 2 bugs you filed to be filed according to the clarified process \u003c3 out of your court now, grazie"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Looks like a combo icon + install script issue."
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "the error also occurs after manual install, so i don't think we should block this on vendor pkg errors."
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "Est: 1 (\u003c 2 hours)\n\nNote: the scope of this ticket will only be the FE icon portion"
          }
        ]
      },
      {
        "assignees": [
          "RachelElysia"
        ],
        "content": {
          "body": "**Fleet version**: n/a (Testing new FMA apps)\n\n**Web browser and operating system**: \u003c!-- e.g. Chrome 88.0.4324 running on macOS --\u003e\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\nSquished icon on /software/add/fleet-maintained list \n\n![Image](https://github.com/user-attachments/assets/14461093-3198-4a29-aa7a-d3d1da7e9c58)\n\n\n### 🧑‍💻  Steps to reproduce\n\u003c!-- Provide step-by-step actions of how to recreate this bug in a clean install of Fleet. (This helps others understand and fix it more quickly.) --\u003e\n1. Add Fleet-maintained app Santa to software library using allenhouchins-add-santa-to-fma branch\n\n\n### 🕯️ More info _(optional)_\n\u003c!-- Add any additional details you think could be relevant to solving or reproducing the bug (e.g., \"this does not reproduce when...\") --\u003e\nN/A\n\n\u003c!-- If this is a performance issue, follow these steps to generate and attach a debug archive: https://fleetdm.com/docs/using-fleet/monitoring-fleet#debugging-performance-issues --\u003e\n\n### 🛠️ To fix\nMake sure the icon is formatted correctly, and make sure when we merge in the new app that the latest currently available version is in the manifest.\n",
          "number": 30364,
          "repository": "fleetdm/fleet",
          "title": "Incorrect icon on Santa FMA",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/30364"
        },
        "estimate": 1,
        "id": "PVTI_lADOBDAnic4A4BEUzgdCIzs",
        "labels": [
          "bug",
          "~frontend",
          ":release",
          "~released bug",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-29T00:00:00Z",
          "title": "4.73.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "status": "Done",
        "title": "Incorrect icon on Santa FMA",
        "comments": [
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "@jmwatts updated this and the other 2 bugs you filed to be filed according to the clarified process \u003c3 out of your court now, grazie"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@jmwatts This is just the icon issue right?"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "@iansltx Yes. The only other strange thing I noticed while testing was that if you double click on the Santa app it doesn't seem to do anything which, to me, is strange for a macOS app. But it does the same thing if you download it from github, and I can access santactl from terminal, so probably a non-issue. \n\nAlso looks like there's a new version of Santa as of yesterday https://github.com/northpolesec/santa/releases/tag/2025.6"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "Est: 1"
          }
        ]
      },
      {
        "assignees": [
          "iansltx"
        ],
        "content": {
          "body": "\u003c!-- **This issue's remaining effort can be completed in ≤1 sprint.  It will be valuable even if nothing else ships.**\nIt is [planned and ready](https://fleetdm.com/handbook/company/development-groups#making-changes) to implement.  It is on the proper kanban board. --\u003e\n\n\n## Goal\n\n| User story  |\n|:---------------------------------------------------------------------------|\n| As an IT admin,\n| I want to specify setup experience, custom targets (labels), self-service, \u0026 categories for all my software in the team YAML\n| so that I can define scoping at the team level and not at the software level.\n\n## Key result\n\nNone. Prioritized because it's mission critical for `customer-numa` to replace their current self-service software solution.\n\n## Original requests\n\n- #30067\n- #29567\n\n## Context\n- Product Designer: @noahtalerman\n- Engineer: @iansltx  \n\n## Changes\n\n### Product\n- [x] UI changes: No changes.\n- [x] CLI (fleetctl) usage changes: No changes\n- [x] YAML changes: #30837 (includes VPP/FMA)\n- [x] REST API changes: No changes\n- [x] Fleet's agent (fleetd) changes: No changes\n- [x] Activity changes: No changes\n- [x] Permissions changes: No changes\n- [x] GitOps mode UI changes: No changes\n- [x] GitOps generation changes: `fleetctl generate-gitops` includes the `setup_experience` flag in the inline software package/VPP app YAML when a software package or VPP app is included in Setup Experience, omits it otherwise (same as how self-service behaves).\n- [x] Changes to paid features or tiers: Fleet Premium only\n- [x] My device and fleetdm.com/better changes: No changes\n- [x] First draft of test plan added\n- [x] Other reference documentation changes: No changes\n- [ ] Once shipped, requester has been notified\n- [ ] Once shipped, dogfooding issue has been filed\n\n### Engineering\n- [x] Test plan is finalized\n- [ ] Script or command to migrate removed keys from package YAML files to the team level\n- [ ] Contributor API changes: No changes; use the existing `install_during_setup` parameter in software batch endpoints (already wired up in `fleetctl`)\n- [ ] Feature guide changes: No changes\n\n\u003e ℹ️  Please read this issue carefully and understand it.  Pay [special attention](https://fleetdm.com/handbook/company/development-groups#developing-from-wireframes) to UI wireframes, especially \"dev notes\".\n\n## QA\n\n### Risk assessment\n\n- Requires load testing: No\n- Risk level: Low\n\n### Test plan\n\n\u003e Make sure to go through [the list](https://github.com/fleetdm/fleet/blob/main/docs/Contributing/guides/ui/design-qa-considerations.md) and consider all events that might be related to this story, so we catch edge cases earlier.\n\n#### Setup experience w/GitOps\n\nFor the purposes of this test plan, this format is what is meant by in-line on the team YAML:\n\n\u003cimg width=\"532\" height=\"167\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/859273cd-a1bf-4eb4-a3af-5d170772ec9f\" /\u003e\n\nAnd this is what is meant by referenced by path:\n\n\u003cimg width=\"238\" height=\"58\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/476be359-104f-431a-9e97-43b887ed754f\" /\u003e\n\nWhere the referenced file is of this format:\n\n\u003cimg width=\"478\" height=\"108\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/4b7c570e-0eef-401b-8acb-22cc3ac5ee95\" /\u003e\n\n- [ ] Add App Store app in-line on the team YAML file and don't specify the new `setup_experience` key. Verify that the software isn't added to macOS Setup Experience when GitOps is run.\n- [ ] Add App Store app in-line on the team YAML file and specify the new `setup_experience` key, setting the value to `true`. Verify that the software is added to macOS Setup Experience when GitOps is run.\n- [ ] Add App Store app in-line on the team YAML file and specify the new `setup_experience` key, setting the value to `false`. Verify that the software is not added to macOS Setup Experience when GitOps is run.\n\n- [ ] Add Fleet-maintained app in-line on the team YAML file and don't specify the new `setup_experience` key. Verify that the software isn't added to macOS Setup Experience when GitOps is run.\n- [ ] Add Fleet-maintained app in-line on the team YAML file and specify the new `setup_experience` key, setting the value to `true`. Verify that the software is added to macOS Setup Experience when GitOps is run.\n- [ ] Add Fleet-maintained app in-line on the team YAML file and specify the new `setup_experience` key, setting the value to `false`. Verify that the software is not added to macOS Setup Experience when GitOps is run.\n\n- [ ] Add a custom package in-line, on the team YAML file and don't specify the new `setup_experience` key. Verify that the software isn't added to macOS Setup Experience when GitOps is run.\n- [ ] Add a custom package in-line, on the team YAML file and specify the new `setup_experience` key, setting the value to `true`. Verify that the software is added to macOS Setup Experience when GitOps is run.\n- [ ] Add a custom package in-line, on the team YAML file and specify the new `setup_experience` key, setting the value to `false`. Verify that the software is not added to macOS Setup Experience when GitOps is run.\n- [ ] Add a custom package YAML file and reference the package YAML on the team YAML. Don't specify the new `setup_experience` key.  Verify that the software isn't added to macOS Setup Experience when GitOps is run. \n- [ ] Add a custom package YAML file and reference the package YAML on the team YAML. Specify the new `setup_experience` key on the team YAML, setting the value to `true`.  Verify that the software is added to macOS Setup Experience when GitOps is run. \n- [ ] Add a custom package YAML file and reference the package YAML on the team YAML. Specify the new `setup_experience` key on the team YAML, setting the value to `false`.  Verify that the software is not added to macOS Setup Experience when GitOps is run. \n- [ ] ERROR PATH: Add a custom package YAML file and reference the package YAML on the team YAML. Specify the new `setup_experience` key within the package YAML, setting the value to `true`. Run GitOps and confirm there is an easy to understand error message.\n\n#### Custom target (labels)\n\n- [ ] In the team YAML, set `labels_include_any` for a custom package that is defined in-line. Verify that the label inclusions are applied when GitOps is run. \n- [ ] In the team YAML, set `labels_include_any` for a custom package that is referenced by path. Verify that the label inclusions are applied when GitOps is run. \n- [ ] In the team YAML, set `labels_exclude_any` for a custom package that is defined in-line. Verify that the label exclusions are applied when GitOps is run. \n- [ ] In the team YAML, set `labels_exclude_any` for a custom package that is referenced by path. Verify that the label exclusions are applied when GitOps is run. \n- [ ] In the package YAML, set `labels_include_any` to include a label that exists in Fleet. Verify that the key no longer works and you see an easy to understand error message when GitOps is run.\n- [ ] In the package YAML, set `labels_exclude_any` to exclude a label that exists in Fleet. Verify that the key no longer works and you see an easy to understand error message when GitOps is run.\n\n#### Categories\n\n- [ ] In the team YAML, set `categories` to include one or more categories that exist in Fleet for a custom package that is defined in-line. Verify that the categories are applied when GitOps is run.\n- [ ] In the package YAML, set `categories` to include one or more categories that exist in Fleet. Verify that the key no longer works and you see an easy to understand error message when GitOps is run.\n\n#### No team\n\n- [ ] Verify that setup experience, custom targets (labels), and categories work as defined above for \"No team\" (`no-team.yml`)\n\n\n#### Backwards compatibility\n\n- [ ] In the team YAML, specify the old `macos_setup.software` key, add software in-line, and do not specify the new `setup_experience` for any software. Confirm the software is added to setup experience. \n- [ ] In the team YAML, specify the old `macos_setup.software` key, leave it empty, and specify the new `setup_experience` for any software. Verify that you see [this error messaged](https://github.com/fleetdm/fleet/pull/30254/files#r2164318796).\n- [ ] Repeat the step above with some software in the `macos_setup.software` key. You should see the same error message.\n\n#### GitOps speed\n\n- [ ] Run GitOps with 99 packages and 500 teams before and after this change. Verify that the speed of GitOps isn't negatively impacted.\n\n#### Migration script\n\n- [ ] Run the script to migrate the the old package YAML format to the new format and verify that the script works. [#31165](https://github.com/fleetdm/fleet/issues/31165)\n\n#### Generate-GitOps\n- [ ] fleetctl generate-gitops includes the setup experience flag on software for which it is set.\n\n### Testing notes\n\u003c!-- Any additional testing notes relevant to this story or tools required for testing. --\u003e\n\n### Confirmation\n\u003c!-- The engineer responsible for implementing this user story completes the test plan before moving to the \"Ready for QA\" column. --\u003e\n\n1. [ ] Engineer: Added comment to user story confirming successful completion of test plan.\n2. [ ] QA: Added comment to user story confirming successful completion of test plan.\n",
          "number": 30095,
          "repository": "fleetdm/fleet",
          "title": "GitOps: Setup experience, custom targets (labels), self-service, \u0026 categories for all software in team YAML",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/30095"
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgdCk8Q",
        "labels": [
          "story",
          ":release",
          "customer-faltona",
          "customer-numa",
          "#g-software",
          "~context"
        ],
        "milestone": {
          "dueOn": "2025-08-29T00:00:00Z",
          "title": "4.73.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "status": "🐣 In progress",
        "title": "GitOps: Setup experience, custom targets (labels), self-service, \u0026 categories for all software in team YAML",
        "comments": [
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@ksykulev Per comments on the original request from @noahtalerman and @mostlikelee, we want to:\n\n1. Add a `setup_experience` bool on the same level as `self_service` on custom packages, VPP apps, and FMAs, default `false`. Use that to determine whether software is included in setup experience.\n2. Stub the `macos_setup.software` key in GitOps; if it exists in a config, hard-fail with a link to docs for the new way of specifying setup experience.\n\nPlan will be that we _don't_ have a deprecation period on this to keep the code clean and avoid drawing out instances where we have to support both cases. Throwing a prompt at an LLM or two to see if we can make a bot do the work of moving YAML around (we might want a step 3 above of providing a tool to move YAML around)."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Actually, scratch the LLM option for now, as the migration path is more nuanced. One nuance here is that if Team A and Team B both import a set of software, but Team A has a piece of software marked for setup experience and Team B does not, we now need two software files (one with the setup experience flag set, one without) where we previously had one.\n\n@allenhouchins Does this tweak (and its downstream requirements) make sense? In our case the Workstations team has setup experience software defined, but the corresponding canary team doesn't, so for our own setup we'd need to split package YAMLs.\n\nFor reference, here's the prompt I threw into JetBrains Junie, as well as Zed + Claude Sonnet 4:\n\n```\nIn `it-and-security`, for each app store app under `macos_setup.software`, remove it from there and add `setup_experience: true` under the corresponding entry in `app_store_apps` in the same team file. For each software package under `macos_setup.software`, remove it from there and add `setup_experience: true` inside the corresponding YAML file. Finally, remove the `macos_setup.software` key in the YAML file.\n```\n\nNote that the above does _not_ cover the package YAML splitting nuance, and my attempts at making this work with an open-weights model small enough to run in 64GB unified memory failed."
          },
          {
            "author": {
              "login": "allenhouchins"
            },
            "body": "I much prefer the current set up of adding it to the `software` block to basically say \"make this software available to this team\" then creating a secondary reference in `macos_setup.software` to say \"make this software available through this method\". For any software we expect all employees to use (\"critical\"), I want it to be installed via `macos_setup`, `auto-install` if its removed, and available in `self-service` for patching and easy re-installation/troubleshooting. I don't want to have to create multiple `software_title.yml` to achieve this. \n\nI'm already running into challenges with some of the recent changes we've made to software where I will have to [create multiple software entries if I want software scoped differently in teams](https://github.com/fleetdm/fleet/issues/29567) so anything we can do to handle additional logic behind the scenes and avoid having to create multiple software entries of the same software just to use it differently, will always get my vote.\n\n\u003e run in 64GB unified memory failed.\n\n64GB?! Yikes! "
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "\u003e I much prefer the current set up of adding it to the software block to basically say \"make this software available to this team\" then creating a secondary reference in macos_setup.software to say \"make this software available through this method\".\n\n@allenhouchins interesting! I added you to Tuesday's #g-software design review to take a look at the current designs and discuss."
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "Decided to push this story (T-shirt size: S) out of the current design sprint because we won't have space to ship it in 4.72. Here's what we're shipping instead:\n\n- Fleet-maintained apps bugs\n- https://github.com/fleetdm/fleet/issues/30240\n- https://github.com/fleetdm/fleet/issues/27983"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@marko-lisica based on the late, significant scope reduction on #27983, there's now enough backend capacity in the 4.72 sprint to bring this in if it's ready in time, though based on the source of this original request the software GitOps update activity should be split into its own story, as the customer isn't asking for that, \"core to Fleet\" notwithstanding, as the activity work is likely the majority of the effort on this ticket if it's brought in. Splitting stories allows for easier parallelization, and allows for derisking both stories."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@noahtalerman Based on linked issues, looks like we missed calling out some scope here. I'm assuming that allowing specifying macOS setup experience in `fleet_maintained_apps`, as well as in `app_store_apps`, is in scope here. Revising YAML docs so that's clearer now (as well as contributor API docs).\n\nEDIT: Never mind. YAML docs don't include this explicitly, but it's dev note'd in a comment on the PR. And it's in the test plan."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Turns out, the contributor API for this already has the correct (per-package) format, so these changes won't have a server-side component (all `fleetctl`)."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@noahtalerman I thought we had missed frontend scope here because there might have been changes to the modals/exports we added in #28110. But it looks like we don't show custom targets, self-service, and categories in the sample YAML there already so moving them around wouldn't make a difference to what we would display?"
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "\u003e it looks like we don't show custom targets, self-service, and categories in the sample YAML there already so moving them around wouldn't make a difference to what we would display?\n\n@iansltx that's right!"
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "\u003e - [x] REST API changes: No changes\n\n@iansltx also, for future stories can you please leave in the explicit \"No changes\" items in the \"Product\" section? (example above). I added them back this time.\n\nThis helps us remember during [confirm and celebrate](https://fleetdm.com/handbook/product-design#confirm-and-celebrate) and 3 months from now whether or not we intended.\n\nWe've learned that removing the checkboxes introduces questions later like \"did we mean to make UI changes for this story?\""
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "\u003e \u003e * [x]  REST API changes: No changes\n\u003e \n\u003e [@iansltx](https://github.com/iansltx) also, for future stories can you please leave in the explicit \"No changes\" items in the \"Product\" section? (example above). I added them back this time.\n\u003e \n\u003e This helps us remember during [confirm and celebrate](https://fleetdm.com/handbook/product-design#confirm-and-celebrate) and 3 months from now whether or not we intended.\n\u003e \n\u003e We've learned that removing the checkboxes introduces questions later like \"did we mean to make UI changes for this story?\"\n\n@noahtalerman All of the \"no changes\" items are still in the issue description, under the \"No-ops\" heading (\"Product no-ops\" probably makes more sense here, and I've used that heading title on other tickets where I've done this). Sounds like you missed them because they were \"below the fold\" but they're there, and splitting them out should actually make the \"we intentionally didn't do these things\" rundown easier. Thoughts on maintaining that \"split out into a subheading\" pattern, but moving that subheading up above the Engineering section?\n\nMy reason for doing this tweak (was going to mention this in chat channels but ran out of time, but discussed this with @mostlikelee ahead of time) is that stories are generally 80-95% \"No changes\", and when spec'ing/dev'ing it's easy to miss actual work in a sea of \"No changes\" items, and missing a spec item while in spec or development has more serious consequences than having to scroll down in the Confirm and celebrate ritual.\n\nAdditionally, the act of explicitly moving items to a \"these are the things that won't change\" heading during spec provides another \"are we _sure_ this isn't changing\" checkpoint prior to estimation. That actually wound up helpful on #30849, as some GitOps Mode UI changes had been miscategorized as generic UI changes. Moving the Figma link to the more appropriate checkbox decreased likelihood of confusion during both development (imminently) and Confirm and celebrate (later), while maintaining an explicit list of parts of the product that are out of scope for the story.\n\nI hadn't PR'd a handbook/story template change for this because I wanted to dial in how it looked with real-world examples first, hence why you're seeing this for the first time here."
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "\u003e stories are generally 80-95% \"No changes\", and when spec'ing/dev'ing it's easy to miss actual work in a sea of \"No changes\" items, and missing a spec item while in spec or development\n\n@iansltx ah, I hear you but the current way has been working for the other product groups. We just have to look at all the checkboxes to see which have \"No changes\".\n\nTo keep things consistent across product groups and reduce change for now let's please keep the story issue template the same. I removed \n\nThanks for testing it out!\n\n\u003eThat actually wound up helpful on https://github.com/fleetdm/fleet/issues/30849, as some GitOps Mode UI changes had been miscategorized as generic UI changes.\n\nIt sounds like we (it was me) messed up in this case. That's a whoops from me. I forgot about the new GitOps mode checkbox."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Pulled this back to Ready for spec as there are outstanding test plan questions that we're working through."
          }
        ]
      },
      {
        "assignees": [
          "iansltx"
        ],
        "content": {
          "body": "## Related user story\n\n#30095\n\n## Task\n\nUpdate `fleetctl gitops` to accept YAML in the format specified in #30837 for software packages, Fleet-maintained apps, and VPP apps. This includes adding support to GitOps for the first time for Fleet-maintained apps in macOS setup experience.\n\nThese changes are fleetctl-only as sufficient APIs are already in place.\n\n## Condition of satisfaction\n\nSoftware YAML conforms to #30837, including backward compatibility maintenance or breaks as documented.",
          "number": 31163,
          "repository": "fleetdm/fleet",
          "title": "GitOps software/setup experience restructure: `fleetctl gitops` changes",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/31163"
        },
        "estimate": 5,
        "id": "PVTI_lADOBDAnic4A4BEUzgdCk8s",
        "labels": [
          "~gitops",
          ":release",
          "~sub-task",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-29T00:00:00Z",
          "title": "4.73.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "status": "🐣 In progress",
        "title": "GitOps software/setup experience restructure: `fleetctl gitops` changes",
        "comments": [
          {
            "author": {
              "login": "iansltx"
            },
            "body": "[Planning poker](https://fleetdm.slack.com/archives/C08RXDH5LHZ/p1753243530523269)"
          }
        ]
      },
      {
        "assignees": [
          "iansltx"
        ],
        "content": {
          "body": "## Related user story\n\n#30095\n\n## Task\n\nUpdate `fleetctl generate-gitops` to reflect the inline format documented in #30837, including the new `setup_experience` flag on VPP apps and custom packages.\n\nSwitching `fleetctl generate-gitops` to export Fleet-maintained apps with slugs is out of scope.\n\n## Condition of satisfaction\n\n`fleetctl generate-gitops` includes the setup experience flag on software for which it is set.",
          "number": 31164,
          "repository": "fleetdm/fleet",
          "title": "GitOps software/setup experience restructure: `fleetctl generate-gitops` changes",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/31164"
        },
        "estimate": 3,
        "id": "PVTI_lADOBDAnic4A4BEUzgdCk80",
        "labels": [
          "~gitops",
          ":release",
          "~sub-task",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-29T00:00:00Z",
          "title": "4.73.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "status": "🦤 ‎In review",
        "title": "GitOps software/setup experience restructure: `fleetctl generate-gitops` changes",
        "comments": [
          {
            "author": {
              "login": "iansltx"
            },
            "body": "[Planning poker](https://fleetdm.slack.com/archives/C08RXDH5LHZ/p1753243569811379)"
          }
        ]
      },
      {
        "assignees": [
          "iansltx"
        ],
        "content": {
          "body": "## Related user story\n\n#30095\n\n## Task\n\nBuild a tool that, given YAML compatible with the previous GitOps format, pulls fields removed from software package YAML up to the corresponding team YAML file(s), resulting in YAML that is semantically identical with as small of a diff as possible but is compatible with the new documentation.\n\nMoving deprecated-but-not-removed fields (`macos_setup.software`) is out of scope.\n\n## Condition of satisfaction\n\nA tool exists, either built into `fleetctl` or otherwise, and is referenced in the \"this field is no longer valid\" error message added in #31163.\n\nThis tool should automatically scan all team files that would normally be picked up by the `gitops.sh` script, find all software paths in those files, and transform all found software package YAML files, without needing to specify each manually. Specifying a single team file should also be allowed.\n\nBonus: adding compatibility checks for software package files directly (just checks if any no-longer-supported fields are included).\n\nNot in scope: doing this for multi-package software YAML files, as those shouldn't exist until this work is released.",
          "number": 31165,
          "repository": "fleetdm/fleet",
          "title": "GitOps software/setup experience restructure: YAML migration tool",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/31165"
        },
        "estimate": 5,
        "id": "PVTI_lADOBDAnic4A4BEUzgdCk88",
        "labels": [
          "~gitops",
          ":release",
          "~sub-task",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-29T00:00:00Z",
          "title": "4.73.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "status": "🥚 Ready",
        "title": "GitOps software/setup experience restructure: YAML migration tool",
        "comments": [
          {
            "author": {
              "login": "iansltx"
            },
            "body": "[Planning poker](https://fleetdm.slack.com/archives/C08RXDH5LHZ/p1753243609663689)"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "Please include instructions on how to use said tool, esp for environments with many teams and packages please!"
          }
        ]
      },
      {
        "assignees": [
          "RachelElysia"
        ],
        "content": {
          "number": 31316,
          "repository": "fleetdm/fleet",
          "title": "Eng DRI: Self-service open instructions",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/31316"
        },
        "estimate": 3,
        "id": "PVTI_lADOBDAnic4A4BEUzgdCluM",
        "labels": [
          "~sub-task",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-29T00:00:00Z",
          "title": "4.73.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "status": "Done",
        "title": "Eng DRI: Self-service open instructions"
      },
      {
        "assignees": [
          "RachelElysia"
        ],
        "content": {
          "body": "Bug observed during sprint [demos](https://fleetdm.slack.com/archives/C03C41L5YEL/p1753461589429129).\n\n[This](https://github.com/fleetdm/fleet/blob/02c5026436072355a70f97e756ecb04a569ee6b8/frontend/pages/hosts/details/cards/Software/HostSoftwareTable/HostSoftwareTable.tsx#L153-L154) seems to be the problem area. Looks like the check is purely based on the platform but it should be also checking for the presence of vulnerability query params.\n\n\n```tsx\n  const memoizedEmptyComponent = useCallback(() =\u003e {\n    const vulnFilterAndNotSupported = isIPadOrIPhone(platform);\n    return vulnFilterAndNotSupported ? (\n      \u003cVulnsNotSupported\n        platformText={APPLE_PLATFORM_DISPLAY_NAMES[platform as ApplePlatform]}\n      /\u003e\n    ) : (\n      \u003cEmptySoftwareTable noSearchQuery={searchQuery === \"\"} /\u003e\n    );\n  }, [platform, searchQuery]);\n```\n\n### 🛠️ To fix\n\nProduct designer: @marko-lisica \n\nUI changes: [Figma](https://www.figma.com/design/bLdsOyLfY0IlyhxKSCBcHR/-31329-%F0%9F%AA%B2-HostSoftwareTable-shows-wrong-empty-state?node-id=2-130\u0026t=O3ljmyNs4PlpzS3j-1)\n",
          "number": 31329,
          "repository": "fleetdm/fleet",
          "title": "HostSoftwareTable shows wrong empty state",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/31329"
        },
        "estimate": 1,
        "id": "PVTI_lADOBDAnic4A4BEUzgdCntE",
        "labels": [
          "bug",
          ":release",
          "~unreleased bug",
          "~assisting g-mdm",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-08T00:00:00Z",
          "title": "4.72.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "status": "Done",
        "title": "HostSoftwareTable shows wrong empty state",
        "comments": [
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "This was surfaced with BYOD Apple devices. I tagged it with g-software but it could be `#g-mdm`\n@georgekarrv @mostlikelee preference on who tackles this one?\n\nWhen a BYOD (personal) iPhone is enrolled, we only collect inventory for apps that Fleet installs (Managed apps). \nWe are currently showing \"Vulnerabilities are not supported for this type of host\" as the empty state for Inventory, but we should be showing a message telling the user that there are no apps displayed and that only managed apps are reported in inventory, unless they have added the vulnerabilities filter (then it makes sense to show the no vulnerabilities empty state).\n\n\u003cimg width=\"1186\" height=\"374\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/8c7dc1a7-ac0e-497a-91df-08dc8fb31702\" /\u003e"
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "@georgekarrv we're going to take this.  removing it off your board"
          }
        ]
      },
      {
        "assignees": [
          "iansltx"
        ],
        "content": {
          "body": "## Related user story\n\n#30849\n\n## Task\n\nReview/assistance as needed for #30790.\n\n## Condition of satisfaction\n\n#30790 is merged, along with any other work necessary to implement the YAML changes in #31086, and test plan is verified passing by the assigned engineer.",
          "number": 31206,
          "repository": "fleetdm/fleet",
          "title": "GitOps software multi-package files: Contributor review + tweaks",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/31206"
        },
        "estimate": 5,
        "id": "PVTI_lADOBDAnic4A4BEUzgdCnxU",
        "labels": [
          "~fleetctl",
          "~gitops",
          ":release",
          "~sub-task",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-29T00:00:00Z",
          "title": "4.73.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "status": "🥚 Ready",
        "title": "GitOps software multi-package files: Contributor review + tweaks",
        "comments": [
          {
            "author": {
              "login": "iansltx"
            },
            "body": "[Planning poker](https://fleetdm.slack.com/archives/C08RXDH5LHZ/p1753680845308789)"
          }
        ]
      },
      {
        "assignees": [
          "iansltx"
        ],
        "content": {
          "body": "## Related user story\n\n#30849\n\n## Task\n\nUpdate sample YAML in the \"Show YAML\" view for software packages.\n\n## Condition of satisfaction\n\n\"Show YAML\" dialog conforms to the attached [Figma designs](https://www.figma.com/design/VEN5nFcJKd4JOloCgcOOr2/-30849-GitOps--Support-multiple-software-packages-in-one-YAML-file?node-id=0-1\u0026t=84pueN40iALwPkhk-1).",
          "number": 31207,
          "repository": "fleetdm/fleet",
          "title": "GitOps software multi-package files: View YAML changes in software UI",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/31207"
        },
        "estimate": 1,
        "id": "PVTI_lADOBDAnic4A4BEUzgdCn44",
        "labels": [
          "~fleetctl",
          "~gitops",
          ":release",
          "~sub-task",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-29T00:00:00Z",
          "title": "4.73.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "status": "🥚 Ready",
        "title": "GitOps software multi-package files: View YAML changes in software UI",
        "comments": [
          {
            "author": {
              "login": "iansltx"
            },
            "body": "[Planning poker](https://fleetdm.slack.com/archives/C08RXDH5LHZ/p1753681073584279)"
          }
        ]
      },
      {
        "assignees": [
          "iansltx"
        ],
        "content": {
          "body": "\u003c!-- **This issue's remaining effort can be completed in ≤1 sprint.  It will be valuable even if nothing else ships.**\nIt is [planned and ready](https://fleetdm.com/handbook/company/development-groups#making-changes) to implement.  It is on the proper kanban board. --\u003e\n\n\n## Goal\n\n| User story  |\n|:---------------------------------------------------------------------------|\n| As an IT admin,\n| I want to specify multiple software (custom) packages in one YAML file\n| so that I can reuse those across teams and edit in one place.\n\n## Key result\n\nNone.\n\n## Original requests\n\nNone. This user story was prioritized after @fuhry (community member) opened this PR with a proposed solution:\n- #30790\n\n## Context\n- Product Designer: @noahtalerman\n- Engineering DRI: @iansltx \n\n## Changes\n\n### Product\n- [x] GitOps Mode UI changes: [Figma wireframes](https://www.figma.com/design/VEN5nFcJKd4JOloCgcOOr2/-30849-GitOps--Support-multiple-software-packages-in-one-YAML-file?node-id=0-1\u0026t=84pueN40iALwPkhk-1)\n- [x] YAML changes: [YAML design PR](https://github.com/fleetdm/fleet/pull/31086)\n- [x] Changes to paid features or tiers: Fleet Premium only\n- [x] First draft of test plan added\n- [ ] Once shipped, requester has been notified\n- [ ] Once shipped, dogfooding issue has been filed\n\n### Engineering\n- [x] Test plan is finalized\n- [ ] Contributor API changes: No changes\n- [ ] Feature guide changes: No changes (only docs changes required are covered in the YAML design PR)\n\n\u003e ℹ️  Please read this issue carefully and understand it.  Pay [special attention](https://fleetdm.com/handbook/company/development-groups#developing-from-wireframes) to UI wireframes, especially \"dev notes\".\n\n## Product No-ops\n\n- CLI (fleetctl) usage\n- UI changes (other than in GitOps Mode)\n- REST API\n- Fleet's agent (fleetd)\n- GitOps generation\n- Activities\n- Permissions\n- My device and fleetdm.com/better\n- Other reference documentation\n\n## QA\n\n### Risk assessment\n\n- Requires load testing: No\n- Risk level: Low\n\nWhile performance regressions etc. aren't at issue, we'll now have three formats for specifying software packages in YAML (inline, list in separate file, individual in separate file) so future development runs the risk of forgetting to implement functionality in all three. So, not a risk for this particular story, but a maintainability risk going forward.\n\n\n### Documentation \nReview [Updated Documentation](https://github.com/fleetdm/fleet/pull/31086/files?short_path=b711042#diff-b71104232d8fbaaf4bd537065533cbf39ec5f9bf028ec1d8083346953ed5178d) \n\n### Test plan\n\u003c!-- Add detailed manual testing steps for all affected user roles. --\u003e\n\n\u003e Make sure to go through [the list](https://github.com/fleetdm/fleet/blob/main/docs/Contributing/guides/ui/design-qa-considerations.md) and consider all events that might be related to this story, so we catch edge cases earlier.\n\nNOTE: #30095 must be merged prior to this ticket or this test plan is invalid.\n[#31165](https://github.com/fleetdm/fleet/issues/31165) will need to be used to migrate yaml files or some parts of this test plan may fail.\n\n**New functionality**\n- [ ] Create a package YAML file with two custom packages specified by `url`. Reference the package YAML in a team YAML file and run GitOps. Verify that the two packages are added to the correct team in Fleet.\n- [ ] Next, In the team YAML, for your two custom packages, specify `self_service`, `categories`, and labels. Run GitOps, and verify that the options are applied to both packages. \n- [ ] Edit your package YAML file to have the two custom packages specified by `hash`. Ensure these packages have already been uploaded to Fleet. Run GitOps and verify that the two packages remain in the correct team in Fleet and that all additional settings in the team YAML are applied (Self service, categories, labels).\n- [ ] Edit your package YAML file to have one custom package specified by `hash` and the other specified by `url`. Ensure the software specified by hash has already been uploaded to Fleet. Run GitOps and verify that the two packages remain in the correct team in Fleet and that all additional settings in the team YAML list are applied (Self service, categories, labels).\n- [ ] Edit your package YAML file by removing one of the packages. Run GitOps and verify that the removed package is removed from Fleet.\n- [ ] ERROR PATH: Create a package YAML file in the \"list format\" to have two versions of the same software, one custom package specified by `hash` and the other specified by `url`. Run GitOps and verify that there is an easy to understand error message returned indicating what the problem is, and directing you to the team and package that caused the error.\n- [ ] ERROR PATH: Create a package YAML file in the \"list format\" to have one version of a software, and another package YAML to have a different version of the same software. Try both specified with just hash, both with just url, and one specified by `hash` and the other specified by `url`. Run GitOps and verify that there is an easy to understand error message returned indicating what the problem is, and directing you to the team and package that caused the error.\n- [ ] ERROR PATH: Add multiple FMA and/or VPP apps to a package YAML file in the \"list format\". Run GitOps and verify that there is an easy to understand error message returned indicating what the problem is, and directing you to the team and package that caused the error.\n\n**Backwards compatibility**\n- [ ] Backwards compatibility: Add packages in-line to the team YAML file. Run GitOps and verify that the package(s) is added to the correct team in Fleet.\n- [ ] Backwards compatibility: Create a package YAML file with one custom package in the [old package YAML format](https://github.com/fleetdm/fleet/pull/31086/files#r2219494344) (no array). Run GitOps and verify that the package is added to the correct team in Fleet. NOTE: self service, categories, labels will no longer be allowed in the package YAML due to #30095\n\n**Multiple YAML formats**\n- [ ] Without duplicating any packages, specify some packages in-line on the team YAML, specify some packages in a multi-package YAML, specify a single package in an individual YAML in the \"Old format\", and specify a single package in an individual YAML in the new \"List format\". Reference the multipackage, single \"old format\", and single new \"list format\" yaml files in-line on the Team YAML, alongside the in-line specified package. Run GitOps and verify that all packages are added to the correct team in Fleet.\n- [ ] ERROR PATH: Using the same package info for all methods: Specify some packages in-line on the team YAML, specify some packages in a multi-package YAML, specify a single package in an individual YAML in the \"Old format\", and specify a single package in an individual YAML in the new \"List format\". Reference the multipackage, single \"old format\", and single new \"list format\" yaml files in-line on the Team YAML, alongside the in-line specified package. Run GitOps and make sure there is an easy to understand error message returned indicating what the problem is, and directing you to the team and package that caused the error. Try specifying the same package with all methods at once, and then de-duplicating them as you go, working through the gitops errors, to ensure you can resolve the issue. \n\n**Setup experience**\n- [ ] Create a single package YAML file in the new list format. Reference the package YAML on the team YAML and add the `setup_experience` key set to `true`. Run GitOps and make sure the package is added to Setup experience. \n- [ ] Create a single package YAML file in the new list format. Reference the file in-line on the team YAML in the macos_setup.software key. Run GitOps and make sure the package is added to Setup experience. \n- [ ] Create a single package YAML file in the old format. Reference the file in-line on the team YAML and add the `setup_experience` key set to `true`. Run GitOps and make sure the package is added to Setup experience. \n- [ ] Create a single package YAML file in the old format. Reference the file in-line on the team YAML in the macos_setup.software key. Run GitOps and make sure the package is added to Setup experience. \n- [ ] Create a package YAML file in the new list format with multiple software items in it. Reference the package YAML on the team YAML and add the `setup_experience` key set to `true`. Run GitOps and make sure all packages are added to Setup experience. \n\n\n**Policy automations**\n- [ ] Create a package YAML with one package, in the old non-list format using `hash_sha256`. Create a policy YAML and reference the package using `hash_sha256`. Run GitOps and verify that the package is tied to the policy.\n\n\u003cimg width=\"645\" height=\"145\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/1e945b7a-a845-4e40-a518-7d6b0d17cb9c\" /\u003e\n\n- [ ] Create a package YAML with one package, in the old non-list format using either `url` or `hash_sha256`. Create a policy YAML and reference the `package_path`. Run GitOps and verify that the package is tied to the policy.\n\n\u003cimg width=\"693\" height=\"143\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/b3229af0-1fe5-47eb-940b-5f8f5038dbb6\" /\u003e\n\n- [ ] Create a package YAML with one package, in the new format. Create a policy YAML and reference the `package_path`. Run GitOps and verify that the package is tied to the policy. (Same as above, but the package.yml is in the list format)\n- [ ] Create a package YAML with multiple installers listed in it. Create a policy YAML and reference the `hash_sha256` of ONE of the software installers in the list from the file with multiple packages. Run GitOps and verify that the package is tied to the policy.\n- [ ] Create a package YAML with multiple installers listed in it. Create a policy YAML and reference the `package_path`. Verify that you see an easy to understand error message.\n\n**Large Environments**\n- [ ] A large environment with no changes to YAML that successfully applied in the previous version of Fleet without error should continue to apply without error. (Provided they have gone through the migration from #31165\n\n**UI Changes**\n- [ ] Turn on GitOps mode in Fleet and add a custom package. Verify that the UI changes [specified in Figma](https://www.figma.com/design/VEN5nFcJKd4JOloCgcOOr2/-30849-GitOps--Support-multiple-software-packages-in-one-YAML-file?node-id=0-1\u0026t=84pueN40iALwPkhk-1) show up.\n\n**`fleetctl generate-gitops`**\n- [ ] Add several packages in Fleet, and then run `fleetctl generate-gitops`. Use the YAML output in a GitOps run and verify that all the packages are still present in Fleet.\n\n\u003c!-- Consider: Do the steps above apply to all global access roles, including admin, maintainer, observer, observer+, and GitOps?  Do the steps above apply to all team-level access roles?  If not, write the steps used to test each variation.\n--\u003e\n\n### Testing notes\n\u003c!-- Any additional testing notes relevant to this story or tools required for testing. --\u003e\n\n### Confirmation\n\u003c!-- The engineer responsible for implementing this user story completes the test plan before moving to the \"Ready for QA\" column. --\u003e\n\n1. [ ] Engineer: Added comment to user story confirming successful completion of test plan.\n2. [ ] QA: Added comment to user story confirming successful completion of test plan.\n\n\n---\n## Problem\n\nThe list of software configured via GitOps might be dynamic, for example if the GitOps pipeline builds and pushes packages just before fleet gitops is called, or if partial package lists are shared between teams.\n\nIn these cases, it's useful to be able to include one file containing multiple packages. [This PR](https://github.com/fleetdm/fleet/pull/30790) refactors parseSoftware to support that use case.\n",
          "number": 30849,
          "repository": "fleetdm/fleet",
          "title": "GitOps: Support multiple software packages in one YAML file",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/30849"
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgdCoAQ",
        "labels": [
          "story",
          ":release",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-29T00:00:00Z",
          "title": "4.73.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "status": "🥚 Ready",
        "title": "GitOps: Support multiple software packages in one YAML file",
        "comments": [
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "DONE @noahtalerman: What do we do about policy automations? Right now policies in GitOps assume one package per package YAML file.\n  - @iansltx: Today, `fleetctl generate-gitops` works around this by using a `hash_256` to specify the hash. Maybe we can use the same to solve this.\n \n@noahtalerman: Decided like this: either use hash or path to a file. If the file has more than one package, Fleet will error. Specified in [this dev note](https://github.com/fleetdm/fleet/pull/31086/files#r2222732518)."
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "\u003e - [ ] In your team YAML, for your two custom packages, specify `self_service`, `setup_experience`, and labels. Run GitOps, and verify that the options are applied to both packages. \n\u003e   - @noahtalerman: I think testing this requires the changes in this separate user story: https://github.com/fleetdm/fleet/issues/30095\n\nDONE: @noahtalerman: Pull this into #30095\n\n- @noahtalerman: Added the below to the test plan for #30095.\n\n#### Multiple custom packages in one package YAML\n\n- [ ] Create a package YAML file with two custom packages specified by url. Reference the package YAML in a team YAML file and run GitOps. Verify that the two packages are added to the correct team in Fleet. \n- Next, In a team YAML, for your two custom packages, specify `self_service`, `setup_experience`, and labels. Run GitOps, and verify that the options are applied to both packages."
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "FYI @iansltx @jmwatts ^"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "TODOs (will write these up better later):\n\n* Deprecating non-list behavior (vs. not deprecating vs. removing/erroring + adding an automatic migration)\n* Documenting \"error if multiple packages in setup experience YAML file\"\n* Documenting that \"list length of 1\" is valid for places where a single YAML path is expected now?"
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "\u003e Deprecating non-list behavior (vs. not deprecating vs. removing/erroring + adding an automatic migration)\n\nWe decided to deprecate support for the non-list behavior but maintain backwards compatibility. See this dev note: https://github.com/fleetdm/fleet/pull/31086/files#r2219494344\n\n\u003e Documenting \"error if multiple packages in setup experience YAML file\"\n\nIn this [separate GitOps story](https://github.com/fleetdm/fleet/issues/30095), we decided to support applying `setup_experience`. From that separate stories QA plan:\n\n#### Multiple custom packages in one package YAML\n\n- [ ] Create a package YAML file with two custom packages specified by url. Reference the package YAML in a team YAML file and run GitOps. Verify that the two packages are added to the correct team in Fleet. \n- Next, In a team YAML, for your two custom packages, specify `self_service`, `setup_experience`, and labels. Run GitOps, and verify that the options are applied to both packages. \n\n\u003e Documenting that \"list length of 1\" is valid for places where a single YAML path is expected now?\n\nI think this is covered by the [YAML reference doc updates](https://github.com/fleetdm/fleet/pull/31086). We're showing that a list length of 1 is the best practice."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@noahtalerman FYI we'll need to make some slight tweaks to the modal implemented in #28110 if we're removing the top-level style of software package YAML from documentation, otherwise we'll be recommending that people use an undocumented/deprecated format.\n\nAlso, thoughts on removing the old functionality and adding a script to fix existing software YAML files (linked from the \"this was removed\" error) instead of moving the schema to undocumented but still incurring the maintenance burden of supporting it? If we think this is the proper way to format software packages, \"indent the existing file by two spaces and prepend a `- ` to the first line might be simple enough to perform with a single sed/awk command."
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "- UPDATE: @noahtalerman: Added [Figma wireframes](https://www.figma.com/design/VEN5nFcJKd4JOloCgcOOr2/-30849-GitOps--Support-multiple-software-packages-in-one-YAML-file?node-id=0-1\u0026t=84pueN40iALwPkhk-1) to the issue description (including test plan).\n\n\u003e FYI we'll need to make some slight tweaks to the modal implemented in https://github.com/fleetdm/fleet/issues/28110 if we're removing the top-level style of software package YAML from documentation, otherwise we'll be recommending that people use an undocumented/deprecated format.\n\nYep! We want to tweak the UI here with an indent and a hyphen.\n\nDONE: @noahtalerman \n\nAlso, update the package name to include `.package`:\n\n\u003cimg width=\"597\" height=\"83\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/6b09f13a-630f-48bf-81b7-4555fc4c81a5\" /\u003e"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@jmwatts Sorry for the delay on this one. Subtasks are created. Ask away with questions you have."
          }
        ]
      },
      {
        "assignees": [
          "jahzielv"
        ],
        "content": {
          "body": "\u003c!-- **This issue's remaining effort can be completed in ≤1 sprint.  It will be valuable even if nothing else ships.**\nIt is [planned and ready](https://fleetdm.com/handbook/company/development-groups#making-changes) to implement.  It is on the proper kanban board. --\u003e\n\n\n## Goal\n\n| User story  |\n|:---------------------------------------------------------------------------|\n| As a security analyst,\n| I want to see vulnerabilities of Linux operating systems\n| so that I can prioritize remediation effectively.\n\n## Key result\n\nCustomer request\n\n## Original requests\n\n#26804\n\n## Context\n- Product Designer: @marko-lisica  \u003c!-- Who is the Product Designer to contact if folks have questions about the UI, CLI, or API changes? --\u003e\n- Engineering DRI: @iansltx \u003c!-- Who is the Engineer to contact if folks have technical questions? --\u003e\n\n## Changes\n\n### Product\n- [x] UI changes: [Figma link](https://www.figma.com/design/857ERt8x6l5fnLC1Yuy0bA/-30738-Surface-Linux-OS-vulnerabilities?node-id=0-1\u0026t=WEmHWkALSDBpIMwE-1)\n- [x] REST API changes: #31130\n- [x] Changes to paid features or tiers: Fleet Free\n- [x] First draft of test plan added\n- [ ] Once shipped, requester has been notified\n- [ ] Once shipped, dogfooding issue has been filed\n\n#### Product no-ops\n\n- CLI (fleetctl) usage\n- YAML\n- Fleet's agent (fleetd)\n- GitOps Mode UI\n- GitOps generation\n- Activities\n- Permissionss\n- My device and fleetdm.com/better\n- Other reference documentation\n\n**NOTE: ** Since Linux vulnerabilities are with the kernel package rather than at the OS level, any vulnerability web hooks will correspond to the affected software item, _not_ at the OS level. This maintains existing behavior for Linux kernel vulnerabilities.\n\n### Engineering\n- [x] Test plan is finalized\n- [ ] Populate vulnerabilities lists (on OS list/version endpoints, _not_ in the OS CVEs list in the database, _not_ in the operating systems section of the vulnerabilities endpoints) for Linux OS versions with a deduplicated list of CVEs affecting kernels installed on all hosts with that OS specified\n- [ ] For the kernels list, host counts should navigate to a host set filtered by both OS ID and software ID\n- [ ] Contributor API changes: No changes\n- [ ] Feature guide changes: Mention OS vulnerabilities in the [vulnerability processing feature guide](https://fleetdm.com/guides/vulnerability-processing)\n- [ ] Database schema migrations: Add an `is_kernel` column to `software_titles` and populate as appropriate for all supported Linux distributions (test with a VM for each). Going forward, `is_kernel` should be set when a software title is created. May also need one or more tables to ensure vulnerability counts are retrieved quickly (e.g. `host_kernel_software_counts` containing both OS ID and kernel software ID).\n\n#### Database joins\n\n```\nSELECT DISTINCT software_cve.cve\nFROM software_cve\nJOIN software ON software.id = software_cve.software_id\nJOIN software_titles ON software_titles.id = software.title_id AND software.is_kernel = TRUE\nJOIN host_software ON host_software.software_id = software.id\nJOIN host_operating_system ON host_operating_system.host_id = host_software.host_id\nJOIN operating_systems ON operating_systems.id = host_operating_system\nWHERE [operating system query]\n```\n\nThe above is heavy enough that we likely need a table for `host_kernel_software_counts`, calculated at the same time as `host_software_counts`, that flattens the above, at which point we're trading freshness for ability to quickly pull information.\n\n\u003e ℹ️  Please read this issue carefully and understand it.  Pay [special attention](https://fleetdm.com/handbook/company/development-groups#developing-from-wireframes) to UI wireframes, especially \"dev notes\".\n\n## QA\n\n### Risk assessment\n\n- Risk level: Low\n- Requires load test: Probably; need to load a bunch (~50k, don't care about MDM) of Linux hosts with kernel software (need to ensure osquery-perf will return these items) and confirm performance impact of calculating kernel software stats. This may be doable locally.\n\n### Test plan\n\n1. Enroll a Linux host in a VM with two installed kernels, at least one of which has vulnerabilities, and a Linux host in a container (with zero installed kernels) for a bunch of our supported Linux distros, including Ubuntu, Debian, RHEL, Fedora, SUSE, and Arch. Also enroll a Windows host and a macOS host. Hosts must have software inventoried, but don't need to be online at the same time. Also enroll a Linux host in a container with a different OS version unique to that container.\n2. Run vulnerabilities + cleanups/aggregations jobs.\n3. Navigate to the Software \u003e OS tab. The \"Name\" column should only show OS name (plus major version for Windows). All hosts erolled in step 1 should be represented, host counts should match, and navigating to host counts to filter the host list by OS.\n4. On the Software \u003e OS tab, all Linux OSes should have one or more CVEs listed, matching expected kernel vulns for the constituent hosts, except for the containerized-only OS version, which should show `---`. \n5. Confirm that the API response populates the `vulnerabilities` key for Linux OS versions.\n6. Navigate to an OS version. You should see a Kernels card instead of a Vulnerabilities card. Host counts should match the number of hosts with that kernel installed on that OS version, and clicking a host count in this card should navigate to a host list filtered by both software ID and OS version ID. Container hosts should not be shown in this list. Hosts with multiple kernels should be counted once per kernel in the kernel card, but host count for the overall OS version should only count the host once.\n7. Confirm that the API response for the individual OS version includes `vulnerabilities` and `kernels` entries, with `kernels` format matching what you'd see in `software_title.versions[]` when viewing an individual software title.\n8. Navigate to a kernel in the kernel card. You should arrive at a normal software version details page, including vulnerability information. Host counts might not match the previous page, as the kernel may be used across multiple OS versions.\n\nAdditionally, verify that the above works in Free and Premium, with extra vulnerability details (scores etc.) omitted in Fleet Free.\n\n### Testing notes\n\u003c!-- Any additional testing notes relevant to this story or tools required for testing. --\u003e\n\n### Confirmation\n\u003c!-- The engineer responsible for implementing this user story completes the test plan before moving to the \"Ready for QA\" column. --\u003e\n\n1. [ ] Engineer: Added comment to user story confirming successful completion of test plan.\n2. [ ] QA: Added comment to user story confirming successful completion of test plan.\n",
          "number": 30738,
          "repository": "fleetdm/fleet",
          "title": "Software \u003e OS: Surface Linux kernel vulnerabilities",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/30738"
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgdCpoQ",
        "labels": [
          "story",
          ":release",
          "~vulnerability-management",
          "customer-rialto",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-29T00:00:00Z",
          "title": "4.73.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "status": "✔️Awaiting QA",
        "title": "Software \u003e OS: Surface Linux kernel vulnerabilities",
        "comments": [
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@marko-lisica (/cc @mostlikelee) We have three issues that'll need product direction here.\\, based on some initial research.\n\nIn descending order of magnitude:\n\n## Multiple kernels\n\nLinux hosts generally have multiple kernels installed, though only one is active at a time. How do we want to handle this, given that a host can be actively using an older/vulnerable kernel, or that kernel may be available but not loaded, and we won't be able to tell one way or the other based on software inventory (we _can_ based on the `kernel_info` table but we don't currently inventory that)?\n\nFor example, I cross-referenced `kernel_info` version with inventoried packages on Dogfood to see how Linux hosts there lined up:\n\n* [fedora 41](https://dogfood.fleetdm.com/hosts/1348) - `kernel-core` RPM package (`kernel` would work too but doesn't on the other host; was running the later of multiple versions)\n* [ubuntu 24.04.2](https://dogfood.fleetdm.com/hosts/1319) - `linux-image-*-generic` (`linux-image-generic-hwe-*` returned one of the two kernels, and not the one the host was actually running)\n* [another fedora 41](https://dogfood.fleetdm.com/hosts/1318) - `kernel-core` RPM package (was running the older kernel)\n* [another ubuntu 24.04.2](https://dogfood.fleetdm.com/hosts/1267) - `linux-image-*-genreric` (was running the older kernel IIRC)\n\nAll of the above hosts have more than one kernel version installed, and it's a toss-up on whether a given host is using the latest installed kernel or some other one (using `kernel_info` as the source of truth). The two Ubuntu hosts have quite different kernel versions installed as well between each other.\n\n## No kernel\n\nHow do we want to handle Linuxes that don't have a kernel? Linux running in a container shares the host kernel, so won't have kernel vulnerabilities of its own. I'm assuming we need to show these hosts in the OS list UI, but we'll need to communicate that no, those hosts didn't have a kernel of their own, so there won't be kernel-level vulns inside the container, though the host might have some. For example, `SELECT * FROM kernel_info` on an Ubuntu container running in Docker for Mac gets me a kernel version of `6.10.14-linuxkit`, which won't match anything in OVALs for the OS inside the container.\n\n## Where to display kernel version\n\nThinking we want to just show the kernel version, and only the version number part of it (so, software `version` field), as part of the Version column in the OS list, leaving the OS name as-is. This will mean that there will be multiple rows for the same OS name, but that's probably still cleaner than having two versions in the name line."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Temporarily assigning this to @marko-lisica we I'm blocked on decisions about no-kernel/multi-kernel. I'll self-assign to continue spec'ing once unblocked."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "FYI @marko-lisica I'm baking in the assumption that individual CVE UIs do _not_ change as part of this story, so we won't be showing Linux OSes in the Operating Systems section of individual vulns. The vulnerability affected hosts will be fully covered in the software section anyway (for each kernel) so we aren't hiding information here."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "For reference: per discussions yesterday, we're keeping the OS list to one item per OS version, rolling up all kernel vulns into that single entry, and splitting out kernels when viewing a single OS version's details. This ensures that hosts aren't double-counted in list views when they have multiple kernels installed, and aren't skipped when they have no kernel of their own."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@marko-lisica Two pieces of feedback from @jmwatts as we were walking through UI/test plans today (corresponding to Figma comments):\n\n1. Add a dev note or example UI row indicating \"view all hosts\" when kernel rows are rolled over\n2. Add help text above the kernels list (inside the kernels card) explaining why host counts are expected to not sum up from kernels to the overall number. Something like:\n\n\u003e Each Linux host may have multiple kernels instealled. Containerized and paravirtualized hosts do not have a kernel of their own.\n\n@jmwatts Let me know if we need to explicitly say \"host counts won't sum up\" or whether the above is enough."
          },
          {
            "author": {
              "login": "marko-lisica"
            },
            "body": "Hey @iansltx @jmwatts, thanks for the feedback.\n\nI added few more dev notes in Figma:\n\u003cimg width=\"921\" height=\"887\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/524bb7a9-33fc-47f3-88be-8e41ad922db6\" /\u003e\n\n "
          }
        ]
      },
      {
        "assignees": [
          "jahzielv"
        ],
        "content": {
          "body": "## Related user story\n\n#30738\n\n## Task\n\nOptimize data storage retrieval for Linux vulnerabilities such that at large host counts retrieval is quick and doesn't create undue database load.\n\nThis likely requires creating another indexed database table or two and populating host counts when other vulnerability counts are populated, e.g. host_kernel_software_counts containing both OS ID and kernel software ID.\n\n- [ ] Load a bunch (~50k, don't care about MDM) of Linux hosts with kernel software and confirm performance impact of calculating kernel software stats. If osquery-perf needs modifications as part of this work to show a distribution of realistic kernel versions, that work is in-scope. Local testing can be used to measure read performance. This probably requires a loadtest instance, but may be doable locally.\n- [ ] Document how to configure osquery-perf to simulate the set of hosts mentioned above.\n\n## Condition of satisfaction\n\nLoading the operating systems list on 50k Linux hosts with a large number of kernels/kernel vulns is performant, as is loading each individual operating system version, and any write optimizations to make reads performant are confirmed to incur an acceptable amount of database load.",
          "number": 31214,
          "repository": "fleetdm/fleet",
          "title": "Linux Vulns: Optimization",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/31214"
        },
        "estimate": 8,
        "id": "PVTI_lADOBDAnic4A4BEUzgdCpok",
        "labels": [
          "~backend",
          ":release",
          "~sub-task",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-29T00:00:00Z",
          "title": "4.73.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "status": "✔️Awaiting QA",
        "title": "Linux Vulns: Optimization",
        "comments": [
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "[planning poker](https://fleetdm.slack.com/archives/C08RXDH5LHZ/p1753366962273099)"
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "@jakestenger this is a subtask.  you'll want to add customer labels to the parent story"
          }
        ]
      },
      {
        "assignees": [
          "jahzielv"
        ],
        "content": {
          "body": "## Related user story\n\n#30738\n\n## Task\n\nUpdate the [vulnerability processing feature guide](https://fleetdm.com/guides/vulnerability-processing) with details on how Linux OS level vulnerabilities are inventoried.\n\n## Condition of satisfaction\n\nGuide is updated.\n",
          "number": 31215,
          "repository": "fleetdm/fleet",
          "title": "Linux Vulns: Guide Updates",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/31215"
        },
        "estimate": 1,
        "id": "PVTI_lADOBDAnic4A4BEUzgdCpos",
        "labels": [
          ":improve documentation",
          ":release",
          "~sub-task",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-29T00:00:00Z",
          "title": "4.73.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "status": "🥚 Ready",
        "title": "Linux Vulns: Guide Updates"
      },
      {
        "assignees": [
          "ksykulev"
        ],
        "content": {
          "body": "**Fleet version**: All since software titles were added\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\n\u003c!-- What did you see?  Paste a screenshot, include a 30s video, or write 1-2 sentences describing the issue you observed. --\u003e\nI can see automatic install policies attached to installers from the /software/titles page but not from the /hosts/:id/software page\n\n### 🧑‍💻  Steps to reproduce\n\u003c!-- Provide step-by-step actions of how to recreate this bug in a clean install of Fleet. (This helps others understand and fix it more quickly.) --\u003e\n1. Try to look for the automatic_install_policies key while looking at host software (hosts/:id/software API) of a software that has automatic_install_policies set when looking at software (software/ API)\n2. Notice it's always set to null even if it's set on the software title\n\n### 🕯️ More info _(optional)_\n\u003c!-- Add any additional details you think could be relevant to solving or reproducing the bug (e.g., \"this does not reproduce when...\") --\u003e\nHere's screenrecordings of the mismatch\n\nFirst 30 or so seconds only shows there's automatic policies attached to that software title\nhttps://github.com/user-attachments/assets/ddb5e4b7-1a75-4bdf-8539-2a5a765a7c81\n\nShows there's no automatic policies attached to that software title for the particular host\nhttps://github.com/user-attachments/assets/31fd1395-c440-46f0-b964-fcb4d8b8a1d1\n\n\u003c!-- If this is a performance issue, follow these steps to generate and attach a debug archive: https://fleetdm.com/docs/using-fleet/monitoring-fleet#debugging-performance-issues --\u003e\n\n### 🛠️ To fix\n- [Figma design](https://www.figma.com/design/neuhhOaQ0Qvh74xdqwmu6C/-30197-Host-Software-API--Surface-automatic-install-policies?node-id=5301-26\u0026t=RHjnRKdNhkv48TVg-11). When there is no self-service the icon changes to the recycle icon.",
          "number": 30197,
          "repository": "fleetdm/fleet",
          "title": "Host Software API: Surface automatic install policies",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/30197"
        },
        "estimate": 3,
        "id": "PVTI_lADOBDAnic4A4BEUzgdCw2A",
        "labels": [
          "bug",
          "~backend",
          ":release",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-29T00:00:00Z",
          "title": "4.73.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "status": "✔️Awaiting QA",
        "title": "Host Software API: Surface automatic install policies",
        "comments": [
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "cc: @iansltx \n\nSecond backend bug that will be highly noticeable with hackathon work\n"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Pulling back to drafting as, while this means we can't show the automatic policies icon in software library/inventory in the host details view yet, we're no worse off than we are right now. @RachelElysia it still makes sense for the FE to consume the data when it's available, but unlike #30188 this isn't going to be an immediate source of user confusion, so there are items currently in the sprint we don't want to evict in favor of this, and potentially stuff we want to bring in instead of this."
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@RachelElysia I've added the following to this ticket which I think resolves the issue in question?\n\n- [Figma design](https://www.figma.com/design/neuhhOaQ0Qvh74xdqwmu6C/-30197-Host-Software-API--Surface-automatic-install-policies?node-id=5301-26\u0026t=RHjnRKdNhkv48TVg-11). When there is no self-service the icon changes to the recycle icon.\n\nI'll move this to ready to estimate and add planning poker. If there's other things to do please pull it back so that any remaining items can be addressed. Thanks!\n\ncc @mostlikelee "
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "Planning poker: https://fleetdm.slack.com/archives/C08RXDH5LHZ/p1750684407360969\n\nHoping this is FE only."
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@iansltx Coolio. I added a design to this and moved it to ready to estimate, but it can sit there I guess until such time as we want to pull it forward."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@eugkuo This is actually _backend_-only. FE work for this is already done. This is another ListHostSoftware related case, and we'll want to take care to _not_ have an N+1 here I think."
          },
          {
            "author": {
              "login": "jahzielv"
            },
            "body": "Are there plans to create separate web API endpoints for the library and inventory? That could help simplify `ListHostSoftware`."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@jahzielv In this case, that wouldn't help, as current designs call for showing the \"this has auto-install policies\" icon on both library and inventory pages within host software details. If we stopped showing installer-related icons on inventory that would clean things up a bit (though this would still need to implement this for the library side) but that'd require a change to the desired fix here.\n\nRe: splitting endpoints, that would be out of scope for this bug, and would need a new issue filed."
          },
          {
            "author": {
              "login": "jahzielv"
            },
            "body": "\u003e Re: splitting endpoints, that would be out of scope for this bug, and would need a new issue filed.\n\nOh yeah for sure! I don't think it should be done here, but seeing this ticket made me think about it :D"
          }
        ]
      },
      {
        "assignees": [
          "ksykulev"
        ],
        "content": {
          "body": "**Fleet version**: \u003e= 4.67.3\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\n\nSee #28626. We've avoided the nil pointer panic (via #28674) but there's still probably an underlying issue for getting us to the warning point in the first place.\n\n### 🧑‍💻  Steps to reproduce\n\nTODO; primary effort for this ticket will be finding a valid repro scenario, and confirmaing expected behavior on software ingest for that repro behavior.\n\nTo see \n```\nlevel=warn msg=\"updateModifiedHostSoftwareDB: last opened at is nil for new software, but not for current software\" \n```\nSteps to reproduce are:\n\n1. Install software via fleet that does not automatically open after install (do not use CloudFlare Warp or TeamViewer), and open the software after install, then close it.\n2. Refetch host vitals\n3. Confirm \"Last used\" time is shown on Host \u003e Software \u003e Inventory tab\n4. Reinstall or Update the software via Fleet and make sure it doesn't open on its own. Do not open it. \n5. Refetch completes automatically after installation (or refetch manually)\n6. \"Last used\" time is cleared out on Host \u003e Software \u003eInventory tab\n7. Warning is shown in the log\n\n\n### 🕯️ More info\n\nThusfar we have only been able to reproduce this issue in customer environments, so what we probably need is enough logging to determine which host(s) have this issue, and then both snapshots of current host software and incoming detail queries to reproduce the broad issue.\n\n### 🛠️ To fix\n\nProduct designer: @marko-lisica \n\nUI changes [in Figma](https://www.figma.com/design/zST6dTwgH0B58BvtWEIzcQ/-29061%F0%9F%AA%B2Warning-state-on-last-opened-time-calculation-when-changing-the-name-of-an-existing-software?node-id=0-1\u0026t=0OUFyz3ugeIP80eA-1) plus changes below:\n\n- Drop the level of the last opened time exists -\u003e null swap warning (either remove entirely, keep as debug, or only log for when the source is something other than apps?)\n- API docs changes: #31958",
          "number": 29061,
          "repository": "fleetdm/fleet",
          "title": "🪲Warning state on last-opened time calculation when changing the name of an existing software",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/29061"
        },
        "estimate": 3,
        "id": "PVTI_lADOBDAnic4A4BEUzgdCxBg",
        "labels": [
          "bug",
          ":release",
          "~timebox",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-29T00:00:00Z",
          "title": "4.73.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "status": "🐣 In progress",
        "title": "🪲Warning state on last-opened time calculation when changing the name of an existing software entry",
        "comments": [
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@iansltx I see that the steps to reproduce is still a **to do**.\n\nHowever, the way you've written it sounds like part of the ticket will be to find a way to reproduce this. I'm a little uncertain how to proceed. Should I move this forward and indicate that todo as part of the fix area?\n\ncc @mostlikelee "
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "Whoops, my bad on removing `:reproduce`"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@eugkuo Yeah, this will need to be moved through to engineering with the reproduce tag intact as we'll likely need to coordinate with customers to get a repro."
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "let's timebox this, whether it is reproduction, or adding logging"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Pulling the :reproduce label off of this since that makes it less clear whose work queue this is in. Timebox is for investigation/repro by an engineer."
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "@ksykulev heads up that this is a related ticket: https://github.com/fleetdm/fleet/issues/29050"
          }
        ]
      },
      {
        "assignees": [
          "jahzielv"
        ],
        "content": {
          "body": "**Fleet version**: 4.67.2\n\n### 💥  Actual behavior\nSome macOS apps have been found to have duplicate bundleIdentifiers, in particular electron helper apps like:\n`Postman Helper (GPU)  | com.postmanlabs.mac.helper`\n`Postman Helper (Renderer) com.postmanlabs.mac.helper`\n\nBecause they have duplicate bundleIDs, they are identified as the same app.  This behavior seems to be limited to helper apps, electron being the most common occurence.\n\n### 🧑‍💻  Steps to reproduce\n1.  Install Postman on macOS\n2. Refresh host\n3. view software on host\n4. Only one software entry is present with bundleID com.postmanlabs.mac.helper\n\n### 🕯️ More info _(optional)_\nThe scope of this fix is to reduce the amount of expected macOS apps not appearing in fleet, not to eliminate the issue.  The below fix accomplishes this by reducing the scope of expected macOS apps.\n\n\u003c!-- If this is a performance issue, follow these steps to generate and attach a debug archive: https://fleetdm.com/docs/using-fleet/monitoring-fleet#debugging-performance-issues --\u003e\n\n### 🛠️ To fix\n\n1. Document current behavior (duplicate app won't show up; will only show first instance).\n2. Get rid of embedded apps and see what's left.\n  -  update macos software detail query to filter out embedded apps: `WHERE path NOT LIKE '%.app/Contents%'`\n\nOmitting embedded apps (app bundles inside of app bundles) from software inventory provides additional customer value by reducing the noise associated with reporting helper apps in software inventory.  Vulnerabilities are reported on the \"parent\" app, so there is less value in reporting on these helper apps in inventory.\n\nFeedback from @allenhouchins:\n```\nTo me its more noise than benefit. It would be good to see child/parent relationship in the UI with child apps hidden by default but ultimately you can't do anything with those embedded apps, like patch/update them, that you wouldn't do by targeting the parent app.\n```\n\nFeedback from @nonpunctual:\n```\nAdmins can use these tools to dig into apps we don't need to do it for them:\nSuspicious Package\nApparency\nArchaeology\n```\n\n\u003c!-- Product designer: _________________________ --\u003e \u003c!-- Who is the product designer to contact if folks have questions about this fix? --\u003e\n",
          "number": 28788,
          "repository": "fleetdm/fleet",
          "title": "🪲macOS apps with duplicate bundleIDs do not appear in Fleet",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/28788"
        },
        "estimate": 5,
        "id": "PVTI_lADOBDAnic4A4BEUzgdCxDU",
        "labels": [
          "bug",
          ":release",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-29T00:00:00Z",
          "title": "4.73.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "status": "🥚 Ready",
        "title": "🪲macOS apps with duplicate bundleIDs do not appear in Fleet",
        "comments": [
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "@eugkuo look under the `To Fix`, the proposed solution here needs product input"
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "\u003eOmitting embedded apps (app bundles inside of app bundles) from software inventory may resolve this issue AND provide additional customer value by reducing the noise associated with reporting helper apps in software inventory. Vulnerabilities are reported on the \"parent\" app, so there is less value in reporting on these helper apps in inventory.\n\n@noahtalerman works for me. You?"
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "\u003e Omitting embedded apps (app bundles inside of app bundles) from software inventory may resolve this issue AND provide additional customer value by reducing the noise associated with reporting helper apps in software inventory.  Vulnerabilities are reported on the \"parent\" app, so there is less value in reporting on these helper apps in inventory.\n\u003e \n\u003e Feedback from @allenhouchins:\n\u003e ```\n\u003e To me its more noise than benefit. It would be good to see child/parent relationship in the UI with child apps hidden by default but ultimately you can't do anything with those embedded apps, like patch/update them, that you wouldn't do by targeting the parent app.\n\u003e ```\n\u003e \n\u003e Feedback from @nonpunctual:\n\u003e ```\n\u003e Admins can use these tools to dig into apps we don't need to do it for them:\n\u003e Suspicious Package\n\u003e Apparency\n\u003e Archaeology\n\u003e ```\n\n@mostlikelee @eugkuo sounds good to me! \n\nFYI @zayhanlon please in case you forsee any customer concerns with omitting these helper apps from software inventory.\n\nFor example, these Chrome \"Helper\" items wouldn't show up in the UI/API:\n\n\u003cimg width=\"1376\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/d978561e-1618-41be-9b3b-5513b355fdf2\" /\u003e"
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "Thanks @noahtalerman . I've put this bug in 'ready to estimate' and assigned @mostlikelee "
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Per discussions in standup-and-then-some, we want to see whether we get where we want to be by excluding some path patterns from our apps detail query:\n\n```\n%.app/Contents/%\n/System/%\n```\n\nThe former to remove embedded apps, the latter to remove SIP'd apps built into the OS that can't get patched individually anyway.\n\nThen we'll see where that gets us in terms of a less noisy app list (and potentially clean up a bunch of cases where there are duplicate bundle IDs where we don't care about inventorying the duplicates)."
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "planning poker: https://fleetdm.slack.com/archives/C08RXDH5LHZ/p1748526293420649"
          }
        ]
      },
      {
        "assignees": [
          "RachelElysia"
        ],
        "content": {
          "body": "**Fleet version**: \n\n```\n{\n  \"version\": \"0.0.0-SNAPSHOT-9e5a9a0\",\n  \"branch\": \"rc-minor-fleet-v4.71.0\",\n  \"revision\": \"9e5a9a045e9ba739985175fb85aeb07abde96ed3\",\n  \"go_version\": \"go1.24.4\",\n  \"build_date\": \"2025-07-10\",\n  \"build_user\": \"runner\"\n}\n```\n\n**Web browser and operating system**: latest Chrome\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\n\n\u003cimg width=\"308\" height=\"78\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/a30c63e4-fd27-4712-b5fc-4aecd8415dcf\" /\u003e\n\nArchive Utility.app has been natively installed on macOS for years. In the Fleet software inventory it's showing a Linux icon.\n\n### 🧑‍💻  Steps to reproduce\n\n1. Look at Software inventory on any Mac enrolled in Fleet.\n\n### 🕯️ More info _(optional)_\n\nThe app is not shipped in /Applications - It is located in `/System/Library/CoreServices/Applications/Archive Utility.app` so perhaps there is some sort of hard coded assumptions about native macOS apps based on filepath.\n\n### 🛠️ To fix\n\nProduct designer: @marko-lisica \n\nApple icon should be displayed instead of Linux.\n\nOS icons (penguin, Windows, Apple, etc.) should have their own bucket, limited to use on the OS list/detail pages, at which point the penguin would no longer leak into software titles/versions. See issue comments for more context\n",
          "number": 30803,
          "repository": "fleetdm/fleet",
          "title": "Linux icon showing in software inventory for macOS native app",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/30803"
        },
        "estimate": 2,
        "id": "PVTI_lADOBDAnic4A4BEUzgdCxFk",
        "labels": [
          "bug",
          "~frontend",
          ":release",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-29T00:00:00Z",
          "title": "4.73.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "status": "✔️Awaiting QA",
        "title": "Linux icon showing in software inventory for macOS native app",
        "comments": [
          {
            "author": {
              "login": "iansltx"
            },
            "body": "The reason for this is we starts-with match on Linux platform names for app icons, and `arch` is a Linux platform name.\n\nWe wind up using the same code paths for software icons as for OS icons, so this code winds up being rather brittle; just dropping \"Arch\" out of the list would mean we'd get a generic package icon for Arch Linux hosts rather than the penguin. So getting this right without breaking something else is going to require a bit of a refactor as the current algorithm is too naive.\n\n@marko-lisica do we even want to show the penguin for software packages? Our default for Linux packages of various types is a generic package icon, so right now we have a mix of penguins (for items that have a linux platform inside the name) and generic package icons (for everything else), for no reason that's obvious to an admin. Maybe OS icons (penguin, Windows, Apple OSes, Android, ChromeOS) should have their own bucket, limited to use on the OS list/detail pages, at which point the penguin would no longer leak into software?\n\nPushing this back to In Progress to get an answer on the above."
          },
          {
            "author": {
              "login": "marko-lisica"
            },
            "body": "\u003e Maybe OS icons (penguin, Windows, Apple OSes, Android, ChromeOS) should have their own bucket, limited to use on the OS list/detail pages, at which point the penguin would no longer leak into software?\n\n@iansltx I think this is a good solution. We have a default icon for Linux packages, so we won't need the \"penguin\" icon for that purpose. Also, other platforms have a default icon for packages."
          },
          {
            "author": {
              "login": "marko-lisica"
            },
            "body": "Planning poker: https://fleetdm.slack.com/archives/C08RXDH5LHZ/p1752671903129569"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "Thanks for filing @nonpunctual and looking into the root cause @iansltx and product designing/updating the to-fix @marko-lisica .\n\nBold Est: 1 rounding up to 2 to add tests and internal documentation\n\n"
          }
        ]
      },
      {
        "assignees": [
          "jahzielv"
        ],
        "content": {
          "body": "**Fleet version**: Fleet 4.70.0\n**Web browser and operating system**: 138.0.7204.100\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\nFleet is incorrectly reporting that macOS and Linux hosts running the latest patched versions of Google Chrome are vulnerable to CVE-2025-6554. This appears to be a false positive caused by incomplete CPE data from NVD for this vulnerability.\n\n### 🧑‍💻  Steps to reproduce\n1. Enroll a macOS host running Google Chrome version `138.0.7204.92` or `138.0.7204.93` (or a Linux host running `138.0.7204.92`) or later into Fleet.\n2. Navigate to the **Vulnerabilities** page in the Fleet UI.\n3. Search for `CVE-2025-6554`.\n4. Observe that the host is listed as vulnerable, despite running a version of Chrome where the vulnerability has been patched.\n\n### 🕯️ More info _(optional)_\nThis issue stems from the vulnerability data for CVE-2025-6554, which was addressed in Google Chrome's stable channel update on June 30, 2025.\n\nAccording to the [[Google Chrome release notes](https://chromereleases.googleblog.com/2025/06/stable-channel-update-for-desktop_30.html)](https://chromereleases.googleblog.com/2025/06/stable-channel-update-for-desktop_30.html), the patched versions are:\n*   **Windows**: `138.0.7204.96` / `.97`\n*   **Mac**: `138.0.7204.92` / `.93`\n*   **Linux**: `138.0.7204.92`\n\nHowever, the CVE data (e.g., on [[VulnCheck](https://vulncheck.com/cve/cve-2025-6554)](https://vulncheck.com/cve/cve-2025-6554)) seems to only list the Windows version (`138.0.7204.96`) as the fix. This causes Fleet to incorrectly flag patched Mac and Linux systems as vulnerable.\n\nThe suggestion from the internal discussion was to implement a data override in the Fleet vulnerability feed to correct this false positive until the CNA/NVD updates the official record.",
          "number": 30682,
          "repository": "fleetdm/fleet",
          "title": "Bug: False-positive for CVE-2025-6554 on Linux/macOS hosts",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/30682"
        },
        "estimate": 2,
        "id": "PVTI_lADOBDAnic4A4BEUzgdCxHA",
        "labels": [
          "bug",
          "~backend",
          ":release",
          "~vulnerability-management",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-29T00:00:00Z",
          "title": "4.73.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "status": "✔️Awaiting QA",
        "title": "Bug: False-positive for CVE-2025-6554 on Linux/macOS hosts",
        "comments": [
          {
            "author": {
              "login": "iansltx"
            },
            "body": "[Repro'd](https://dogfood.fleetdm.com/software/versions/568346)"
          }
        ]
      },
      {
        "assignees": [
          "ksykulev"
        ],
        "content": {
          "body": "\u003c!-- **This issue's remaining effort can be completed in ≤1 sprint.  It will be valuable even if nothing else ships.**\nIt is [planned and ready](https://fleetdm.com/handbook/company/development-groups#making-changes) to implement.  It is on the proper kanban board. --\u003e\n\n\n## Goal\n\n| User story  |\n|:---------------------------------------------------------------------------|\n| As a Fleet contributor,\n| I want to research the different ways Fleet can deploy custom iOS apps (`.ipa`'s)\n| so that I can draft and build this feature in Fleet.\n\n## Key result\n\nNone.\n\n## Original requests\n\n- https://github.com/fleetdm/fleet/issues/23736\n\n## Context\n- Product Designer: @noahtalerman \n- Engineering DRI: @mostlikelee \n  \n\n## Changes\n\n### Product\n- [x] Research: Create a public Google doc that answers the following questions:\n  - Current understanding: `customer-pingali` will compile an `.ipa` file and add it to Fleet. Fleet will install the `.ipa` on iOS/iPadOS hosts with an MDM command (more discussion in [this Google doc](https://docs.google.com/document/d/1zXsIxdpOVgZWJP74V9-2qaIuzZDPbg6MC_ZSlI8Jy74/edit?tab=t.0))\n    - What MDM command can Fleet use to deploy the app?\n    - What MDM command can Fleet use to check if the app is installed and add it to software inventory?\n    - https://docs.google.com/document/d/1j-26a7UU2_j0v81D9pl47jPvp-BLreAJXVy9DtVZjTE/edit?tab=t.0\n- [x] UI changes: No changes\n- [x] CLI (fleetctl) usage changes: No changes\n- [x] YAML changes: No changes\n- [x] REST API changes: No changes\n- [x] Fleet's agent (fleetd) changes: No changes\n- [x] GitOps Mode UI changes: No changes\n- [x] GitOps generation changes: TODO \u003c!-- Specify changes to results from the fleetctl generate-gitops command. Put \"No changes\" if there are no changes necessary. --\u003e\n- [x] Activity changes: No changes\n- [x] Permissions changes: No changes\n- [x] Changes to paid features or tiers: No changes\n- [x] My device and fleetdm.com/better changes: No changes\n- [x] Other reference documentation changes: No changes\n- [x] First draft of test plan added\n- [x] Once shipped, requester has been notified: WONT for this research story.\n- [x] Once shipped, dogfooding issue has been filed: WONT for this research story.\n\n### Engineering\n\nNo changes for this research story.\n\n## QA\n\nNo changes for this research story.\n",
          "number": 31174,
          "repository": "fleetdm/fleet",
          "title": "Research: Deploy enterprise (in-house) iOS app",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/31174"
        },
        "estimate": 5,
        "id": "PVTI_lADOBDAnic4A4BEUzgdCxJc",
        "labels": [
          "story",
          ":release",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-29T00:00:00Z",
          "title": "4.73.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "status": "Done",
        "title": "Research: Deploy custom (in-house) iOS app",
        "comments": [
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "\u003e - [ ] Research: Create a public Google doc that answers the following questions:\n\u003e   - Current understanding: `customer-pingali` will compile an `.ipa` file and add it to Fleet. Fleet will install the `.ipa` on iOS/iPadOS hosts with an MDM command (more discussion in [this Google doc](https://docs.google.com/document/d/1zXsIxdpOVgZWJP74V9-2qaIuzZDPbg6MC_ZSlI8Jy74/edit?tab=t.0))\n\u003e     - What MDM command can Fleet use to deploy the app?\n\u003e     - What MDM command can Fleet use to check if the app is installed and add it to software inventory?\n\n@mostlikelee moved this research story to reach to spec. Please feel free to update the research task (see issue description) if I'm missing anything.\n\ncc @marko-lisica "
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "bringing this to standup today"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "https://support.apple.com/guide/deployment/distribute-proprietary-in-house-apps-depce7cefc4d/web#:~:text=Apps%20need%20to%20be%20in,access%20a%20server%20at%20Apple.\n\nApps need to be in .ipa format and be built with an in-house provisioning profile.\n\nThey need to have an XML manifest file.\n\nThey need to be downloaded from a website whose address begins with HTTPS.\n\nThey need to be signed by a certificate that’s trusted on the device.\n\nTheir network configuration needs to allow devices to access a server at Apple. For more information, see the Apple Support article [Use Apple products on enterprise networks](https://support.apple.com/101555)."
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "this missed parking lot yesterday, bringing back today"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "Jamf has this feature and has documentation that may be worth looking over:\n\nhttps://learn.jamf.com/en-US/bundle/jamf-pro-documentation-current/page/In-House_Apps.html\nhttps://learn.jamf.com/en-US/bundle/jamf-pro-documentation-current/page/Provisioning_Profiles_for_In-House_Apps.html"
          }
        ]
      },
      {
        "assignees": [
          "mostlikelee"
        ],
        "content": {
          "body": "### Requestor\n\n- Application name: 7-zip\n- Application platform: Windows\n\n---\n\n### Validation\n\n- [ ] The following outputs are generated\n        - `/outputs/\u003capp-name\u003e/windows.json` created\n        - `/outputs/apps.json` updated\n- [ ] Manifest name matches osquery `app.name` (macOS) or `programs.name` (Windows)\n- [ ] Manifest version scheme matches osquery `app.short_bundle_version` (macOS) or `programs.version` (Windows) version scheme\n- [ ] Manifest `unique_identifier` matches osquery `app.bundle_identifier` (macOS only)\n\n### QA\n\n- [ ] App adds successfully to team's library\n- [ ] App installs successfully on host\n- [ ] App opens successfully on host\n- [ ] App uninstalls successfully on host\n\n### Icon\n\n- [ ] Icon added to Figma\n- [ ] Icon added to Fleet\n- [ ] Correct icon appears in the app catalog",
          "number": 31345,
          "repository": "fleetdm/fleet",
          "title": "New FMA: 7-zip for Windows",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/31345"
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgdC-p0",
        "labels": [
          ":release",
          "#g-software",
          "fma"
        ],
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "status": "🥚 Ready",
        "title": "New FMA: 7-zip for Windows"
      },
      {
        "assignees": [
          "jahzielv"
        ],
        "content": {
          "body": "create a json schema doc for Windows FMA PRs and associated CI",
          "number": 31349,
          "repository": "fleetdm/fleet",
          "title": "Windows FMA schema validator",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/31349"
        },
        "estimate": 1,
        "id": "PVTI_lADOBDAnic4A4BEUzgdDFlI",
        "labels": [
          ":release",
          "~engineering-initiated",
          "#g-software"
        ],
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "status": "🥚 Ready",
        "title": "Windows FMA schema validator",
        "comments": [
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "adding to sprint as low hanging fruit"
          }
        ]
      },
      {
        "assignees": [
          "RachelElysia"
        ],
        "content": {
          "body": "**Fleet version**: v4.69.0\n**Web browser and operating system**: ChromeOS: 137.0.7151.132 (Official Build) (64-bit), Chrome Browser:\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\n\u003c!-- What did you see?  Paste a screenshot, include a 30s video, or write 1-2 sentences describing the issue you observed. --\u003e\n\nhttps://github.com/user-attachments/assets/f3ebb70c-6ea7-4770-99dd-9b1bed540470\n\n### 🧑‍💻  Steps to reproduce\n\u003c!-- Provide step-by-step actions of how to recreate this bug in a clean install of Fleet. (This helps others understand and fix it more quickly.) --\u003e\n1. Navigate to Queries \u003e Add query.\n2. Start typing in the query composer.\n3. Use arrow keys to move cursor.\n\n### 🕯️ More info _(optional)_\n\u003c!-- Add any additional details you think could be relevant to solving or reproducing the bug (e.g., \"this does not reproduce when...\") --\u003e\nSame as #27233, but still present in v4.69.0 on ChromeOS.\n\n\u003c!-- If this is a performance issue, follow these steps to generate and attach a debug archive: https://fleetdm.com/docs/using-fleet/monitoring-fleet#debugging-performance-issues --\u003e\n\n\u003c!-- ### 🛠️ To fix --\u003e\n\u003c!-- If this bug requires additional product design work, uncomment the heading above and add instructions to fix, Figma link, etc. here once design changes are settled. --\u003e\n\u003c!-- Product designer: _________________________ --\u003e \u003c!-- Who is the product designer to contact if folks have questions about this fix? --\u003e\n",
          "number": 30691,
          "repository": "fleetdm/fleet",
          "title": "Query cursor out of alignment on ChromeOS",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/30691"
        },
        "estimate": 3,
        "id": "PVTI_lADOBDAnic4A4BEUzgdDOLw",
        "labels": [
          "bug",
          "~frontend",
          ":release",
          "~released bug",
          "customer-knopfia",
          "~assisting g-orchestration",
          "#g-software"
        ],
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "status": "🥚 Ready",
        "title": "Query cursor out of alignment on ChromeOS",
        "comments": [
          {
            "author": {
              "login": "AndreyKizimenko"
            },
            "body": "Was able to reproduce on the chrome book. No repro on either macos, windows or ubuntu. \n\nhttps://github.com/user-attachments/assets/64c4ad2a-094e-4c5b-b594-f6cfc7a5e18f"
          },
          {
            "author": {
              "login": "sharon-fdm"
            },
            "body": "Estimations:\n\n\u003cimg width=\"528\" height=\"221\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/064ef5bc-4a66-4ec4-aec8-e80ef397cc0a\" /\u003e\n\nDecided: Timebox to 3"
          }
        ]
      },
      {
        "assignees": [
          "RachelElysia"
        ],
        "content": {
          "body": "**Fleet version**: v4.68.1\n\n**Web browser and operating system**: \u003c!-- e.g. Chrome 88.0.4324 running on macOS --\u003e\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\n\u003c!-- What did you see?  Paste a screenshot, include a 30s video, or write 1-2 sentences describing the issue you observed. --\u003e\n\nWhen setting up a policy automation, the background page scrolls unexpectedly. \n\nThis only occurs when the browser window is not full height, and the selection dropdown overflows the bottom of the page. \n\nLoom recording:\n\nhttps://www.loom.com/share/c796032677724e649c6af960ed3b0fc2?sid=216d9868-60eb-4d4e-b347-393800f46e2f\n\n\n\n### 🧑‍💻  Steps to reproduce\n\u003c!-- Provide step-by-step actions of how to recreate this bug in a clean install of Fleet. (This helps others understand and fix it more quickly.) --\u003e\n1. Create a team \n2. Add policies (creating a large number of policies makes this easier to reproduce without making the screen 100px tall)\n3. Add scripts (see above)\n4. Navigate to the team's Policy view\n5. Adjust height of the browser window until the policy table overflows the bottom of the page. \n6. Make sure you are scrolled up to the top of the page. \n7. Click on **Manage automations**\n8. Select the last listed policy\n9. Open the dropdown menu \n10. Observe scrolling\n\n### 🕯️ More info _(optional)_\n\u003c!-- Add any additional details you think could be relevant to solving or reproducing the bug (e.g., \"this does not reproduce when...\") --\u003e\nN/A\n\n\u003c!-- If this is a performance issue, follow these steps to generate and attach a debug archive: https://fleetdm.com/docs/using-fleet/monitoring-fleet#debugging-performance-issues --\u003e\n\n### 🛠️ To fix\n\nProduct designer: @marko-lisica\n\nSet dropdown menu `max-height` to 200px, so that the dropdown menu fits the modal. This should be changed for Scripts and Software automations modal. \n\n### est.\n\n\u003cimg width=\"467\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/80331afe-b6e9-41ca-a219-9e4c52336bcd\" /\u003e",
          "number": 30004,
          "repository": "fleetdm/fleet",
          "title": "UI - Background page scrolls while editing Policy automations.",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/30004"
        },
        "estimate": 1,
        "id": "PVTI_lADOBDAnic4A4BEUzgdDOYo",
        "labels": [
          "bug",
          "~frontend",
          ":release",
          "~released bug",
          "~assisting g-orchestration",
          ":incoming",
          "customer-cisneros",
          "#g-software"
        ],
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "status": "🥚 Ready",
        "title": "UI - Background page scrolls while editing Policy automations.",
        "comments": [
          {
            "author": {
              "login": "Sampfluger88"
            },
            "body": "Linked to Unthread ticket:\n\u003e [Fleet UI scrolling issue on policy automations page #6515](https://fleetdm.unthread.io/dashboard/inbox/all/conversations/e0769c7b-805a-4272-897a-de7c5f7af36b)"
          },
          {
            "author": {
              "login": "sharon-fdm"
            },
            "body": "Timebox to 1 point."
          }
        ]
      },
      {
        "assignees": [
          "RachelElysia"
        ],
        "content": {
          "body": "**Fleet version**: 4.69 \u003c!-- Copy this from the \"My account\" page in the Fleet UI, or run `fleetctl --version` --\u003e\n\n**Web browser and operating system**: N/A \u003c!-- e.g. Chrome 88.0.4324 running on macOS --\u003e\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\n\u003c!-- What did you see?  Paste a screenshot, include a 30s video, or write 1-2 sentences describing the issue you observed. --\u003e\nIf you had a VPP token tied to a specific team you won't see \"All teams\" option in the dropdown until you save it empty and reopen\n![Image](https://github.com/user-attachments/assets/781018b8-8275-42c8-9ac6-e619e2204a9c)\n### 🧑‍💻  Steps to reproduce\n\u003c!-- Provide step-by-step actions of how to recreate this bug in a clean install of Fleet. (This helps others understand and fix it more quickly.) --\u003e\n1. Obtain a VPP token\n2. Go to: https://andrey.ngrok.app/settings/integrations/mdm/vpp\n3. Add the token\n4. Select Actions \u003e Edit teams \u003e Select any team \u003e Save5. \n6. Reopen \n7. Remove the previously selected individual team\n8. Try to select All Teams\n\n### 🕯️ More info _(optional)_\n\u003c!-- Add any additional details you think could be relevant to solving or reproducing the bug (e.g., \"this does not reproduce when...\") --\u003e\nTo reproduce this, you first need to save the token with any other team and then reopen. \n\n\u003c!-- If this is a performance issue, follow these steps to generate and attach a debug archive: https://fleetdm.com/docs/using-fleet/monitoring-fleet#debugging-performance-issues --\u003e\n\n### 🛠️ To fix\n\nProduct designer: @marko-lisica \n\nOn `/settings/integrations/mdm/vpp` page in \"Edit teams\" modal:\n- When the user selects \"All teams\" in the dropdown and afterward selected team or \"No team\", \"All team\" should disappear from the dropdown\n- When the user selects team or \"No team\" in the dropdown and opens the dropdown, \"All teams\" should be available (if no team (or \"No team\") is selected for another VPP token).\n  - When \"All teams\" is selected it will remove all selected teams from dropdown and those will be available in dropdown list.",
          "number": 30357,
          "repository": "fleetdm/fleet",
          "title": "\"All Teams\" option is missing on the VPP token actions dropdown if another team was selected prior to it",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/30357"
        },
        "estimate": 2,
        "id": "PVTI_lADOBDAnic4A4BEUzgdDOeo",
        "labels": [
          "bug",
          "~frontend",
          ":release",
          "~released bug",
          "#g-mdm",
          "customer-nortia"
        ],
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "status": "✔️Awaiting QA",
        "title": "\"All Teams\" option is missing on the VPP token actions dropdown if another team was selected prior to it",
        "comments": [
          {
            "author": {
              "login": "marko-lisica"
            },
            "body": "Hey @AndreyKizimenko, this works as intended. Please look at [this dev note](https://www.figma.com/design/j2M1heOh8eZD6LcUJks6HE/-9956-Add-multiple-Apple-Business-Manager-and-Volume-Purchasing-Program-connections?node-id=5530-8689\u0026t=D4pAdmkTE5HFzdo8-11) and the others related to team selection.\n\nI'm closing this one. Let me know if that makes sense to you."
          },
          {
            "author": {
              "login": "fleet-release"
            },
            "body": "\"All Teams\" lost sight,\nIn dropdown's clouded height,\nRestored, it takes flight."
          },
          {
            "author": {
              "login": "AndreyKizimenko"
            },
            "body": "Hi @marko-lisica, this is on me, could've definitely described it better. I understand the reason why we want to hide All Teams, the issue that I'm seeing is that it isn't brought back when the user removes individual teams. You can see on the screenshot bellow that no team is selected by All Teams is still missing. \n\n\u003cimg width=\"823\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/7a59eda1-8bab-4e63-b5ad-4448bdd8bb8b\" /\u003e"
          },
          {
            "author": {
              "login": "AndreyKizimenko"
            },
            "body": "I'm also re-reading through the dev notes and I'm not sure whether we are referring about removing an option from the dropdown or just clearing it out from the selection. Selecting All Teams clears out individual teams from the selection and the other way around, selecting any team while you have All Teams clears out All Teams, which I think matches what design is describing. "
          },
          {
            "author": {
              "login": "marko-lisica"
            },
            "body": "@AndreyKizimenko Do you have one or more VPP tokens? Not sure, but the reason why you don't see \"All teams\" might be that you already selected some team for another VPP token.It would be easier for me to understand if you could record the behavior you observe and believe is a bug."
          },
          {
            "author": {
              "login": "AndreyKizimenko"
            },
            "body": "@marko-lisica No, another VPP token doesn't have any teams assigned. Attaching a video with the whole flow \n\nhttps://github.com/user-attachments/assets/b453a5f2-38dd-4473-bb16-d89981748ae5"
          },
          {
            "author": {
              "login": "marko-lisica"
            },
            "body": "Thanks @AndreyKizimenko! I just specified a fix in the `🛠️ To fix` section in the issue description. Let me know if that solves the problem. "
          },
          {
            "author": {
              "login": "AndreyKizimenko"
            },
            "body": "Yeah, I think this will solve it. Thank you, Marko! "
          }
        ]
      }
    ]
  },
  {
    "timestamp": "2025-07-29T19:06:41.731205762Z",
    "items": [
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdCo1s",
        "status": "✔️Awaiting QA",
        "issueNumber": 26404,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdCxH8",
        "status": "🐣 In progress",
        "issueNumber": 30853,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcX120",
        "status": "🦤 ‎In review",
        "issueNumber": 29914,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcX12Q",
        "status": "🦤 ‎In review",
        "issueNumber": 27983,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcX124",
        "status": "✔️Awaiting QA",
        "issueNumber": 29944,
        "changeType": "modified"
      },
      {
        "content": {
          "body": "**Fleet version**: v4.68.1\n\n**Web browser and operating system**: \u003c!-- e.g. Chrome 88.0.4324 running on macOS --\u003e\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\n\u003c!-- What did you see?  Paste a screenshot, include a 30s video, or write 1-2 sentences describing the issue you observed. --\u003e\n\nWhen setting up a policy automation, the background page scrolls unexpectedly. \n\nThis only occurs when the browser window is not full height, and the selection dropdown overflows the bottom of the page. \n\nLoom recording:\n\nhttps://www.loom.com/share/c796032677724e649c6af960ed3b0fc2?sid=216d9868-60eb-4d4e-b347-393800f46e2f\n\n\n\n### 🧑‍💻  Steps to reproduce\n\u003c!-- Provide step-by-step actions of how to recreate this bug in a clean install of Fleet. (This helps others understand and fix it more quickly.) --\u003e\n1. Create a team \n2. Add policies (creating a large number of policies makes this easier to reproduce without making the screen 100px tall)\n3. Add scripts (see above)\n4. Navigate to the team's Policy view\n5. Adjust height of the browser window until the policy table overflows the bottom of the page. \n6. Make sure you are scrolled up to the top of the page. \n7. Click on **Manage automations**\n8. Select the last listed policy\n9. Open the dropdown menu \n10. Observe scrolling\n\n### 🕯️ More info _(optional)_\n\u003c!-- Add any additional details you think could be relevant to solving or reproducing the bug (e.g., \"this does not reproduce when...\") --\u003e\nN/A\n\n\u003c!-- If this is a performance issue, follow these steps to generate and attach a debug archive: https://fleetdm.com/docs/using-fleet/monitoring-fleet#debugging-performance-issues --\u003e\n\n### 🛠️ To fix\n\nProduct designer: @marko-lisica\n\nSet dropdown menu `max-height` to 200px, so that the dropdown menu fits the modal. This should be changed for Scripts and Software automations modal. \n\n### est.\n\n\u003cimg width=\"467\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/80331afe-b6e9-41ca-a219-9e4c52336bcd\" /\u003e"
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgdDOYo",
        "comments": [
          {
            "author": {
              "login": "Sampfluger88"
            },
            "body": "Linked to Unthread ticket:\n\u003e [Fleet UI scrolling issue on policy automations page #6515](https://fleetdm.unthread.io/dashboard/inbox/all/conversations/e0769c7b-805a-4272-897a-de7c5f7af36b)"
          },
          {
            "author": {
              "login": "sharon-fdm"
            },
            "body": "Timebox to 1 point."
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "Thanks @marko-lisica ! What a great, simple solution \u003c3\n\nEst: 1"
          }
        ],
        "issueNumber": 30004,
        "changeType": "modified"
      },
      {
        "content": {
          "body": "Related to https://github.com/fleetdm/fleet/issues/27756\r\nand https://github.com/fleetdm/fleet/pull/31118\r\n\r\nNoNewWindow prevents powershell from opening a new window when starting the process.\r\nforce-uninstall bypasses Chrome's confirmation dialog\r\n\r\nFixes were discovered when working on https://github.com/fleetdm/fleet/pull/31210\r\n\r\n# Checklist for submitter\r\n\r\n## Testing\r\n\r\n- [x] QA'd all new/changed functionality manually\r\n\r\n## Manual Testing\r\nregression test Chrome Windows FMA (#27756)\r\n",
          "number": 31367,
          "repository": "fleetdm/fleet",
          "title": "Forcing chrome to uninstall and no new powershell window",
          "type": "PullRequest",
          "url": "https://github.com/fleetdm/fleet/pull/31367"
        },
        "estimate": 2,
        "id": "PVTI_lADOBDAnic4A4BEUzgdFX6o",
        "labels": [
          "bug",
          ":release",
          "#g-software",
          "~qa-on-branch"
        ],
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "status": "Done",
        "title": "Forcing chrome to uninstall and no new powershell window",
        "issueNumber": 31367,
        "changeType": "added"
      },
      {
        "content": {
          "body": "**Fleet version**: \u003c!-- Copy this from the \"My account\" page in the Fleet UI, or run `fleetctl --version` --\u003e\n\n**Web browser and operating system**: \u003c!-- e.g. Chrome 88.0.4324 running on macOS --\u003e\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\nSome deb packages ask user questions during installation causing the install script to timeout.\n\n### 🧑‍💻  Steps to reproduce\n\u003c!-- Provide step-by-step actions of how to recreate this bug in a clean install of Fleet. (This helps others understand and fix it more quickly.) --\u003e\n1. TODO\n2. TODO\n3. \n\n### 🕯️ More info _(optional)_\n\u003c!-- Add any additional details you think could be relevant to solving or reproducing the bug (e.g., \"this does not reproduce when...\") --\u003e\nN/A\n\n\u003c!-- If this is a performance issue, follow these steps to generate and attach a debug archive: https://fleetdm.com/docs/using-fleet/monitoring-fleet#debugging-performance-issues --\u003e\n\n\u003c!-- ### 🛠️ To fix --\u003e\nFrom community contributor:\n\nSetting this variable within orbit itself, instead of in the default installation script template, accomplishes two things:\n\nAccomplishes what is usually considered the desired behavior retroactively, without requiring administrators to go back and update all of their install scripts\nAllows administrators to override the default behavior in their scripts, in case there is a need for package installation to actually prompt the currently logged-in user for information.\nNote that this does NOT prevent dpkg from blocking when a conffile has been changed since the previous installation. In these cases, the administrator should include\n-o Dpkg::Options=\"--force-(confdef|confold|confnew)\" in the dpkg or apt command in the install script.\n",
          "number": 31396,
          "repository": "fleetdm/fleet",
          "title": "deb package hangs during install",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/31396"
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgdF67w",
        "labels": [
          "bug",
          ":release",
          "#g-software"
        ],
        "milestone": {
          "title": "Fleetd-1.46.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "status": "Waiting",
        "title": "deb package hangs during install",
        "comments": [
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "blocking waiting on replication steps for QA steps from contributor"
          }
        ],
        "issueNumber": 31396,
        "changeType": "added"
      },
      {
        "assignees": [
          "marko-lisica"
        ],
        "content": {
          "body": "### Requestor\n\n- Application name: TODO\n- Application platform: TODO (macOS/Windows)\n\n---\n\n### Validation\n\n- [ ] The following outputs are generated\n        - `/outputs/\u003capp-name\u003e/darwin.json` created\n        - `/outputs/apps.json` updated\n- [ ] Manifest name matches osquery `app.name` (macOS) or `programs.name` (Windows)\n- [ ] Manifest version scheme matches osquery `app.short_bundle_version` (macOS) or `programs.version` (Windows) version scheme\n- [ ] Manifest `unique_identifier` matches osquery `app.bundle_identifier` (macOS only)\n\n### QA\n\n- [ ] App adds successfully to team's library\n- [ ] App installs successfully on host\n- [ ] App opens successfully on host\n- [ ] App uninstalls successfully on host\n\n### Icon\n\n- [ ] Icon added to Figma\n- [ ] Icon added to Fleet\n- [ ] Correct icon appears in the app catalog",
          "number": 31398,
          "repository": "fleetdm/fleet",
          "title": "New FMA: \u003cApp Name\u003ei cant add my windows device to the server it says default ssl error even though i added the pem file to the correct folder",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/31398"
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgdF8xw",
        "labels": [
          ":release",
          "#g-software",
          "fma"
        ],
        "repository": "https://github.com/fleetdm/fleet",
        "status": "Done",
        "title": "New FMA: \u003cApp Name\u003ei cant add my windows device to the server it says default ssl error even though i added the pem file to the correct folder",
        "comments": [
          {
            "author": {
              "login": "LuckZo0o"
            },
            "body": "\u003cimg width=\"2414\" height=\"1121\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/9bf67a33-27b7-49d0-9ac8-de54a128c740\" /\u003e"
          }
        ],
        "issueNumber": 31398,
        "changeType": "added"
      }
    ]
  },
  {
    "timestamp": "2025-07-30T07:08:45.979422614Z",
    "items": [
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdCntE",
        "status": "Waiting",
        "comments": [
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "This was surfaced with BYOD Apple devices. I tagged it with g-software but it could be `#g-mdm`\n@georgekarrv @mostlikelee preference on who tackles this one?\n\nWhen a BYOD (personal) iPhone is enrolled, we only collect inventory for apps that Fleet installs (Managed apps). \nWe are currently showing \"Vulnerabilities are not supported for this type of host\" as the empty state for Inventory, but we should be showing a message telling the user that there are no apps displayed and that only managed apps are reported in inventory, unless they have added the vulnerabilities filter (then it makes sense to show the no vulnerabilities empty state).\n\n\u003cimg width=\"1186\" height=\"374\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/8c7dc1a7-ac0e-497a-91df-08dc8fb31702\" /\u003e"
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "@georgekarrv we're going to take this.  removing it off your board"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "\u003e When a BYOD (personal) iPhone is enrolled, we only collect inventory for apps that Fleet installs (Managed apps).\nWe are currently showing \"Vulnerabilities are not supported for this type of host\" as the empty state for Inventory, but we should be showing a message telling the user that there are no apps displayed and that only managed apps are reported in inventory, unless they have added the vulnerabilities filter (then it makes sense to show the no vulnerabilities empty state).\n\nAbout to put in a PR to show the generic No software detected empty state (plus tests). @marko-lisica if @jmwatts is correct for a different empty state, can you update this ticket if it's imperative for 4.72, or open a new ticket for 4.73 to track the new empty state?\n\nThank you!"
          }
        ],
        "issueNumber": 31329,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcX8R4",
        "status": "✅ Ready for release",
        "comments": [
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "Planning poker: https://fleetdm.slack.com/archives/C08RXDH5LHZ/p1747760158772119"
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "more context: https://fleetdm.slack.com/archives/C086V2QK76X/p1747675290738609"
          },
          {
            "author": {
              "login": "ksykulev"
            },
            "body": "This is seemingly pretty easily reproducible by adding a new team yml with box drive in gitops.\n```\n(fleet@[localhost]:3306) [fleet]\n\u003e select filename, id, team_id, updated_at from software_installers order by team_id desc;\n+-------------------------+----+---------+----------------------------+\n| filename                | id | team_id | updated_at                 |\n+-------------------------+----+---------+----------------------------+\n| BoxDrive-2.43.205.pkg   |  1 |       9 | 2025-07-15 21:51:27.200080 |\n| Slack-4.44.59-macOS.pkg |  2 |       9 | 2025-07-15 21:29:44.406000 |\n| googlechrome.dmg        |  3 |       9 | 2025-07-15 21:29:44.417411 |\n| BoxDrive-2.43.205.pkg   | 13 |       8 | 2025-07-15 21:49:11.554490 |\n| Slack-4.44.59-macOS.pkg | 14 |       8 | 2025-07-15 21:49:11.560796 |\n+-------------------------+----+---------+----------------------------+\n5 rows in set (0.00 sec)\n\n(fleet@[localhost]:3306) [fleet]\n\u003e select filename, id, team_id, updated_at from software_installers order by team_id desc;\n+-------------------------+----+---------+----------------------------+\n| filename                | id | team_id | updated_at                 |\n+-------------------------+----+---------+----------------------------+\n| Slack-4.44.59-macOS.pkg | 28 |      10 | 2025-07-15 22:44:36.454515 |\n| BoxDrive-2.43.205.pkg   | 29 |      10 | 2025-07-15 22:44:36.460138 |\n| googlechrome.dmg        | 30 |      10 | 2025-07-15 22:44:36.464730 |\n| BoxDrive-2.43.205.pkg   |  1 |       9 | 2025-07-15 22:45:00.940530 |\n| Slack-4.44.59-macOS.pkg |  2 |       9 | 2025-07-15 21:29:44.406000 |\n| googlechrome.dmg        |  3 |       9 | 2025-07-15 21:29:44.417411 |\n| BoxDrive-2.43.205.pkg   | 13 |       8 | 2025-07-15 22:44:45.480426 |\n| Slack-4.44.59-macOS.pkg | 14 |       8 | 2025-07-15 21:49:11.560796 |\n+-------------------------+----+---------+----------------------------+\n8 rows in set (0.00 sec)\n\n(fleet@[localhost]:3306) [fleet]\n\u003e select filename, id, team_id, updated_at from software_installers order by team_id desc;\n+-------------------------+----+---------+----------------------------+\n| filename                | id | team_id | updated_at                 |\n+-------------------------+----+---------+----------------------------+\n| Slack-4.44.59-macOS.pkg | 28 |      10 | 2025-07-15 22:44:36.454515 |\n| BoxDrive-2.43.205.pkg   | 29 |      10 | 2025-07-15 22:46:52.967720 |\n| googlechrome.dmg        | 30 |      10 | 2025-07-15 22:44:36.464730 |\n| BoxDrive-2.43.205.pkg   |  1 |       9 | 2025-07-15 22:47:20.744843 |\n| Slack-4.44.59-macOS.pkg |  2 |       9 | 2025-07-15 21:29:44.406000 |\n| googlechrome.dmg        |  3 |       9 | 2025-07-15 21:29:44.417411 |\n| BoxDrive-2.43.205.pkg   | 13 |       8 | 2025-07-15 22:47:03.419169 |\n| Slack-4.44.59-macOS.pkg | 14 |       8 | 2025-07-15 21:49:11.560796 |\n+-------------------------+----+---------+----------------------------+\n8 rows in set (0.00 sec)\n```\n\nIt returns different updated_at results after apply, and then after a while it seems to stop changing. Will investigate further."
          },
          {
            "author": {
              "login": "ksykulev"
            },
            "body": "Running it over and over again with a single team seems to keep the value consistent:\n```\n\u003e select filename, id, team_id, updated_at from software_installers;\n+-------------------------+----+---------+----------------------------+\n| filename                | id | team_id | updated_at                 |\n+-------------------------+----+---------+----------------------------+\n| BoxDrive-2.43.205.pkg   |  1 |       9 | 2025-07-15 21:29:44.399978 |\n| Slack-4.44.59-macOS.pkg |  2 |       9 | 2025-07-15 21:29:44.406000 |\n| googlechrome.dmg        |  3 |       9 | 2025-07-15 21:29:44.417411 |\n+-------------------------+----+---------+----------------------------+\n3 rows in set (0.01 sec)\n\n(fleet@[localhost]:3306) [fleet]\n\u003e select filename, id, team_id, updated_at from software_installers;\n+-------------------------+----+---------+----------------------------+\n| filename                | id | team_id | updated_at                 |\n+-------------------------+----+---------+----------------------------+\n| BoxDrive-2.43.205.pkg   |  1 |       9 | 2025-07-15 21:29:44.399978 |\n| Slack-4.44.59-macOS.pkg |  2 |       9 | 2025-07-15 21:29:44.406000 |\n| googlechrome.dmg        |  3 |       9 | 2025-07-15 21:29:44.417411 |\n+-------------------------+----+---------+----------------------------+\n3 rows in set (0.00 sec)\n```"
          },
          {
            "author": {
              "login": "ksykulev"
            },
            "body": "So it looks like the uninstall script for box is changing. In specific:\n```\n  pkg_ids=(\n    \"com.box.desktop.installer.local.appsupport\"\n    \"com.box.desktop.installer.autoupdater\"\n    \"com.box.desktop.installer.desktop\"\n  )\n\n  pkg_ids=(\n    \"com.box.desktop.installer.desktop\"\n    \"com.box.desktop.installer.local.appsupport\"\n    \"com.box.desktop.installer.autoupdater\"\n  )\n```\n\nThen we have this fancy query to tell us if anything has changed:\nhttps://github.com/fleetdm/fleet/blob/main/server/datastore/mysql/software_installers.go#L2094-L2122\n```\nSELECT id,\nstorage_id != ? is_package_modified,\ninstall_script_content_id != ? OR uninstall_script_content_id != ? OR pre_install_query != ? OR\nCOALESCE(post_install_script_content_id != ? OR\n\t(post_install_script_content_id IS NULL AND ? IS NOT NULL) OR\n\t(? IS NULL AND post_install_script_content_id IS NOT NULL)\n, FALSE) is_metadata_modified FROM software_installers\nWHERE global_or_team_id = ?\tAND title_id IN (\n\tSELECT id FROM software_titles WHERE unique_identifier = ? AND source = ? AND browser = ''\n)\n```\nSo `is_metadata_modified` is returning true, because the `uninstall_script_content_id` is changing."
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "**QA Notes**\nWas able to reproduce original issue (randomly, not consistently) on 4.71.0 with local GitOps script. Upgraded to 4.72.0 and attempted to reproduce the same behavior repeatedly. Was not able to reproduce with the fix in place. "
          }
        ],
        "issueNumber": 29286,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcX7LA",
        "status": "✅ Ready for release",
        "comments": [
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "Hey team! Please [add your planning poker estimate](https://app.zenhub.com/workspaces/Drafting-6192dd66ea2562000faea25c/issues/gh/fleetdm/fleet/26618?planning-poker) with Zenhub @iansltx @jahzielv @ksykulev"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "I'm not able to repro this (wanted to check what was going on prior to throwing an estimate on). Both places have the same timestamp returned from the API (Jan 28 ~6:40a UTC), and both show the expected \"one month ago\" in the UI.\n\nMaybe we close this and if anyone sees this again we reopen?"
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "\u003e Maybe we close this and if anyone sees this again we reopen?\n\ni'm onboard with this, unless @RachelElysia has any other info that may get us into this state\n"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Per [Slack](https://fleetdm.slack.com/archives/C086V2QK76X/p1741109822016689?thread_ts=1741109272.543039\u0026cid=C086V2QK76X), @jmwatts has a repro."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@jmwatts Can you grab your vulnerabilities table and confirm which `created_at` timestamp is the correct one? This feels like a join is propagating things across a bunch of columns where it shouldn't be, so I'm assuming that the individual CVE page is correct and the list is wrong, but want to make sure."
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "There's a lot in that table :D so here's one example but let me know if you need more than this\n\n![Image](https://github.com/user-attachments/assets/e2a4def4-7ace-4802-b833-55bb6ec2aa09)\n\n![Image](https://github.com/user-attachments/assets/b4b6c662-824b-4a93-a727-a19a0060d60a)\n\n![Image](https://github.com/user-attachments/assets/54b65a28-9216-4cdd-af88-7e3a7a24013a)"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "This is useful; thanks!\n\nLooks like we may have at least two bugs here. In the case you showed, the list view is correct but the individual vuln view shows detected as the current timestamp (though this seems to vary from vuln to vuln). In Rachel's example though both places have different values, both of which aren't the current timestamp. So we might need to scope this as \"fix the bugs that we can repro\", which won't necessarily be the original bug."
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "Here's one example that is showing detected as a minute ago, but the table view of vulns shows another time:\n\ndetails view\nhttps://dogfood.fleetdm.com/software/vulnerabilities/CVE-2025-0938\ntable view of vulns\nhttps://dogfood.fleetdm.com/software/vulnerabilities?exploit=false\u0026query=CVE-2025-0938\u0026order_direction=desc\u0026order_key=hosts_count\u0026page=0"
          },
          {
            "author": {
              "login": "rachaelshaw"
            },
            "body": "I haven't seen this issue exactly, but was about to report a similar issue: currently, every CVE detail page is saying detected \"less than a minute ago\"; In the API response, `created_at` always seems to be set to the current time. (List view is fine, only seeing this w/ `GET /vulnerabilities/:cve`). \n\n@RachelElysia do you think this is related, or should I report that bug seperately?"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@rachaelshaw The one you're seeing is the one I mentioned. Thinking we'll resolve that one with this ticket and see if we can repro the other one afterward."
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "**QA Notes**\n\nGo to CVE details page (ex: /software/vulnerabilities/CVE-2025-24162) and note the detected date\nGo to vulnerabilities table page (ex: /software/vulnerabilities?exploit=false\u0026query=CVE-2025-24162\u0026order_direction=desc\u0026order_key=hosts_count\u0026page=0) and note the detected date\n\n- [x] Detected date on software vuln table should match detected date in details\n- [x] Check multiple CVEs"
          }
        ],
        "issueNumber": 26618,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdCxH8",
        "status": "🦤 ‎In review",
        "issueNumber": 30853,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdAjcc",
        "status": "🦤 ‎In review",
        "issueNumber": 31309,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgc-Xts",
        "status": "✅ Ready for release",
        "comments": [
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "Reproduced on 4.70.1"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "Est: 1"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "Done and merged this morning to not drag to next sprint"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "**QA Notes**\n\n- [x] Sort function has been removed from Type column on software and host software pages"
          }
        ],
        "issueNumber": 30746,
        "changeType": "modified"
      }
    ]
  },
  {
    "timestamp": "2025-07-30T19:06:16.140612968Z",
    "items": [
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdCw2A",
        "status": "🐣 In progress",
        "issueNumber": 30197,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdC06A",
        "status": "Waiting",
        "issueNumber": 31334,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdCpoQ",
        "labels": [
          "story",
          ":release",
          "~vulnerability-management",
          "customer-rialto",
          "#g-software",
          "~qa-on-branch"
        ],
        "status": "🐣 In progress",
        "issueNumber": 30738,
        "changeType": "modified"
      },
      {
        "assignees": [
          "marko-lisica"
        ],
        "id": "PVTI_lADOBDAnic4A4BEUzgdCntE",
        "issueNumber": 31329,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdCIqk",
        "status": "Waiting",
        "comments": [
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "@jmwatts updated this and the other 2 bugs you filed to be filed according to the clarified process \u003c3 out of your court now, grazie"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Looks like a combo icon + install script issue."
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "the error also occurs after manual install, so i don't think we should block this on vendor pkg errors."
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "Est: 1 (\u003c 2 hours)\n\nNote: the scope of this ticket will only be the FE icon portion"
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "this may be a non issue, @RachelElysia will confirm"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "I don't see the issue anymore\n\n\u003cimg width=\"347\" height=\"138\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/0616ced5-f3d4-4b5a-8c05-68aeb578e5cf\" /\u003e\n\u003cimg width=\"244\" height=\"94\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/d10d3821-9fd4-401a-baee-0c1c48a0d6be\" /\u003e\n\u003cimg width=\"170\" height=\"46\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/f8b647b1-867c-40a8-ac23-0d03f0a4ad0c\" /\u003e"
          }
        ],
        "issueNumber": 30367,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdCIzs",
        "status": "Done",
        "comments": [
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "@jmwatts updated this and the other 2 bugs you filed to be filed according to the clarified process \u003c3 out of your court now, grazie"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@jmwatts This is just the icon issue right?"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "@iansltx Yes. The only other strange thing I noticed while testing was that if you double click on the Santa app it doesn't seem to do anything which, to me, is strange for a macOS app. But it does the same thing if you download it from github, and I can access santactl from terminal, so probably a non-issue. \n\nAlso looks like there's a new version of Santa as of yesterday https://github.com/northpolesec/santa/releases/tag/2025.6"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "Est: 1"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "I thought I saw this issue too, but now I'm not seeing it. Checked on Chrome and FF on https://localhost:8080/software/add/fleet-maintained?team_id=9 and various other pages just in case. Also checked the code and looks like no one's updated it so I don't understand why its no longer an issue.\n\n@jmwatts are you still seeing this?\n\nPutting this in the waiting column."
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "Nope, looks fine now. I'll close this one out. \n\n\u003cimg width=\"396\" height=\"141\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/e7d51b51-a89f-42a3-9d10-027596af42dd\" /\u003e\n\u003cimg width=\"91\" height=\"42\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/d9423393-8f5c-4f0d-9320-2eb4d853c91a\" /\u003e\n\u003cimg width=\"196\" height=\"97\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/36a1fec9-30a9-4e66-9a05-3d739a3d712e\" /\u003e"
          },
          {
            "author": {
              "login": "fleet-release"
            },
            "body": "Icons squished, unclear,\nIn Fleet's cloud, they reappear,\nCalm, correct, and clear."
          }
        ],
        "issueNumber": 30364,
        "changeType": "modified"
      },
      {
        "assignees": [
          "jahzielv"
        ],
        "content": {
          "number": 31417,
          "repository": "fleetdm/fleet",
          "title": "Research: Linux detection bug",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/31417"
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgdIa8U",
        "labels": [
          ":release",
          "~sub-task",
          "#g-software"
        ],
        "repository": "https://github.com/fleetdm/fleet",
        "status": "Done",
        "title": "Research: Linux detection bug",
        "issueNumber": 31417,
        "changeType": "added"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcp4X0",
        "labels": [
          "bug",
          ":release",
          "~released bug",
          "#g-software"
        ],
        "issueNumber": 30913,
        "changeType": "modified"
      },
      {
        "estimate": 3,
        "id": "PVTI_lADOBDAnic4A4BEUzgdCxH8",
        "status": "✔️Awaiting QA",
        "comments": [
          {
            "author": {
              "login": "getvictor"
            },
            "body": "@mostlikelee I believe this is a P1 since this feature is broken right now. However, I've marked it a P2 since customer was OK waiting until 4.73 for the fix.\n\n@harrisonravazzolo Please add the customer label since I couldn't find it."
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "planning poker: https://fleetdm.slack.com/archives/C08RXDH5LHZ/p1752521340977199"
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "lowered estimate, we already had validation logic"
          }
        ],
        "issueNumber": 30853,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcYi4Y",
        "status": "🐣 In progress",
        "issueNumber": 30248,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcX120",
        "comments": [
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "Found this: \n\n```\n#### Articles\n\n[Create an \"📝 Article\" issue](https://github.com/fleetdm/fleet/issues/new?template=fleet-article.md) and follow the instructions in the template to propose a new article for Fleet to publish.\n```"
          }
        ],
        "issueNumber": 29914,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgc-TB0",
        "milestone": {
          "dueOn": "2025-08-08T00:00:00Z",
          "title": "4.72.0"
        },
        "issueNumber": 31274,
        "changeType": "modified"
      },
      {
        "content": {
          "body": "Related to https://github.com/fleetdm/fleet/issues/27756\r\nand https://github.com/fleetdm/fleet/pull/31118\r\n\r\nNoNewWindow prevents powershell from opening a new window when starting the process.\r\nforce-uninstall bypasses Chrome's confirmation dialog\r\n\r\nFixes were discovered when working on https://github.com/fleetdm/fleet/pull/31210\r\n\r\n# Checklist for submitter\r\n\r\n## Testing\r\n\r\n- [x] QA'd all new/changed functionality manually\r\n\r\n## Manual Testing\r\nregression test Chrome Windows FMA (#27756)\r\n"
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgdFX6o",
        "issueNumber": 31367,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdF67w",
        "comments": [
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "blocking waiting on replication steps for QA steps from contributor"
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "contributor is OOO, and fleetd cut happened this morning.  I'll figure out next steps here"
          }
        ],
        "issueNumber": 31396,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdF8xw",
        "status": "Done",
        "comments": [
          {
            "author": {
              "login": "LuckZo0o"
            },
            "body": "\u003cimg width=\"2414\" height=\"1121\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/9bf67a33-27b7-49d0-9ac8-de54a128c740\" /\u003e"
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "this is not a Fleet maintained app request.  closing"
          },
          {
            "author": {
              "login": "fleet-release"
            },
            "body": "Windows device link,\nSSL error no more, peace.\nFleet's embrace expands."
          }
        ],
        "issueNumber": 31398,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdDFlI",
        "title": "Windows FMA schema validator",
        "issueNumber": 31349,
        "changeType": "removed"
      }
    ]
  },
  {
    "timestamp": "2025-07-31T07:07:36.210812112Z",
    "items": [
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcX9VU",
        "status": "Waiting",
        "comments": [
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "Weird behavior for sure -- I thought it was put in boxes only if there were multiple versions installed but I guess not!"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "If we want to just add a grey box around this, it's a EST: 1 FE only and should take 10 minutes.\n\nFrom #20638:\n```\n  // special case when we dont have installed versions. We can only show the\n  // software type atm.\n  if (!installed_versions || installed_versions.length === 0) {\n    return (\n      \u003cdiv className={`${baseClass}__software-details`}\u003e\n        \u003cDataSet\n          title=\"Type\"\n          value={formatSoftwareType({ source: software.source })}\n        /\u003e\n      \u003c/div\u003e\n    );\n  }\n```"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Given the above movement, looks like this has been estimated, so moving forward."
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "@RachelElysia I'm confused. I don't get these modals when I go to Host details \u003e Software\n\nI only a modal if I look in Fleet desktop at the Software tab. I don't see anywhere in Self-service that I would get this modal, and \"Available for install\" isn't a thing anymore in Host details \u003e Software. Is that the only place this is applied? Or am I missing something?"
          }
        ],
        "issueNumber": 30232,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcX8dE",
        "status": "✅ Ready for release",
        "comments": [
          {
            "author": {
              "login": "ksykulev"
            },
            "body": "I noticed in the database dump the label \"Nobody has this label\" was created at `2025-05-20 22:14:03`, however, the host's `label_updated_at` time was `2025-05-20 21:53:39`. In our previous available software query we are doing this check `:host_label_updated_at \u003e= lbl.created_at` with a comment above it stating\n```\nignore software that depends on labels created\n _after_ the label_updated_at timestamp of the host (because\nwe don't have results for that label yet, the host may or may\nnot be a member\n```\n\nWhich is why in this particular case firefox is getting excluded. When I run the following query `update hosts set label_updated_at = '2025-05-20 23:00:00' where id = 2;` and reload the page I get firefox in the result set.\n\n\u003cimg width=\"1639\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/f99f21a8-171e-475e-abc5-d7c4e3999657\" /\u003e\n\nIt looks like that `label_updated_at` gets updated when we refetch the host vitals?"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "Thanks @ksykulev I went back to 4.66.0 and confirm this works the same way. "
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "I'm leaving this as a bug because it's not intuitive for the end user to understand why it works the way it does. "
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@mostlikelee @ksykulev I proposed a solution in the `to fix` area and am moving this to **Ready to estimate**.\n\n@mostlikelee do you want to keep this as a bug or convert it to a feature request?"
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "In the above case:\n1. A dynamic label was created (@jmwatts  can you confirm this is only for dynamic?)\n2. The host hasn't refreshed, so we don't know yet if it's a member of the label.  Fleet assumes the host does not have this label.\n3. This software has a target that excludes that label.\n\nSo the current state is that the host is not in the label, so it _should_ show in the list.\n\nCould use a sanity check from @lucasmrod here as this is the same behavior for policy targets."
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "@mostlikelee I was not using dynamic labels so it does apply to manual labels. "
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "\u003e [@mostlikelee](https://github.com/mostlikelee) I was not using dynamic labels so it does apply to manual labels.\n\nok, let's scope this to remove timestamp consideration from manual labels.  updating the \"to Fix\" section."
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "planning poker: https://fleetdm.slack.com/archives/C08RXDH5LHZ/p1748525930809559"
          },
          {
            "author": {
              "login": "ksatter"
            },
            "body": "@ksykulev I'm seeing an issue where Manual labels are also not being respected for 'labels include any'. Do you think this is likely the same root problem, or should we break that out into a separate issue?"
          },
          {
            "author": {
              "login": "ksykulev"
            },
            "body": "@ksatter ~~Right now the logic stands that if a label (manual or dynamic) is created and we don't fetch host vitals, whatever the label is doing will not apply to the host. So in your case, `labels include any` also falls under this case.~~\n~~After this issue is fixed, any type of manual label will apply despite the `created_at` time or host `label_updated_at` time~~\n\nI was incorrect, looking at the query it doesn't look like it's checking timestamp for `include_any`.\nhttps://github.com/fleetdm/fleet/blob/main/server/datastore/mysql/software.go#L2645-L2662\n\n@jmwatts In the case of `exclude_any`, manual labels will apply \"immediately\" and dynamic labels will require a host refetch. How do we want `include_any` to work? Same logic? Or does timestamp not matter in their case?"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "**QA Notes**\n\n1. Add a label to fleet, make sure the label isn't applied to any hosts\n2. Add an FMA or custom package to a team, use \"Custom\" target, exclude any, for the label that no hosts have. Make it available in Self service.\n3. For an enrolled host on that team, check the software that is \"Available for install\"\n4. Open Self service for the host\n- [x] Confirm the software is showing as available in Self Service\n\nAlso confirmed for manual and dynamic labels:\n- [x] Software is not available when using \"Include any\" for only labels the host does not have\n- [x] Software is available when using \"Include any\" for labels the host does have\n- [x] Software is not available when using exclude any for one or more labels the host does have"
          }
        ],
        "issueNumber": 29315,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgbpzkM",
        "milestone": {
          "dueOn": "2025-09-19T00:00:00Z",
          "title": "4.74.0"
        },
        "issueNumber": 30136,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcgXr8",
        "status": "✅ Ready for release",
        "issueNumber": 30797,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgc8aTI",
        "status": "✅ Ready for release",
        "comments": [
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "moving to ready for spec to discuss the best path forward here"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "1. Add Amazon DCV Viewer as FMA\n2. Install app on host\n3. View installed version\n\n- [x] Confirm version is shown as 2024.0.8004"
          }
        ],
        "issueNumber": 31123,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdF67w",
        "milestone": {
          "title": "Fleetd-1.47.0"
        },
        "comments": [
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "blocking waiting on replication steps for QA steps from contributor"
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "contributor is OOO, and fleetd cut happened this morning.  I'll figure out next steps here"
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "the PR is reverted from the 1.46 release branch so we don't block the fleetd release"
          }
        ],
        "issueNumber": 31396,
        "changeType": "modified"
      },
      {
        "content": {
          "body": "create a json schema doc for Windows FMA PRs and associated CI",
          "number": 31349,
          "repository": "fleetdm/fleet",
          "title": "Windows FMA schema validator",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/31349"
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgdI8OQ",
        "labels": [
          ":release",
          "~engineering-initiated",
          "#g-software",
          "fma"
        ],
        "repository": "https://github.com/fleetdm/fleet",
        "status": "🥚 Ready",
        "title": "Windows FMA schema validator",
        "comments": [
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "adding to sprint as low hanging fruit"
          }
        ],
        "issueNumber": 31349,
        "changeType": "added"
      },
      {
        "assignees": [
          "xpkoala",
          "AndreyKizimenko",
          "PezHub",
          "jmwatts"
        ],
        "content": {
          "body": "\u003c!-- **This issue's remaining effort can be completed in ≤1 sprint.  It will be valuable even if nothing else ships.**\nIt is [planned and ready](https://fleetdm.com/handbook/company/development-groups#making-changes) to implement.  It is on the proper kanban board. --\u003e\n\n\n## Goal\n\n| User story  |\n|:---------------------------------------------------------------------------|\n| As a Fleet user with Apple devices enrolled,\n| I want to know that Fleet supports MacOS Tahoe on the same day as general release\n| so that I can upgrade my devices without delay.\n\n## Key result\n\n\u003c!-- What quarterly key result (KR) does this story contribute to, if any? If it doesn't contribute to a KR, explain why it's being prioritized. --\u003e\n\n## Original requests\n\n\u003c!-- Insert the link to the feature request(s) that this story contributes to. Put \"None\" if it doesn't contribute to a request. For customer requests, add the `customer-xyz` label(s). --\u003e\n\n## Context\n- Product Designer: @AndreyKizimenko  \u003c!-- Who is the Product Designer to contact if folks have questions about the UI, CLI, or API changes? --\u003e\n- Engineering DRI: @AndreyKizimenko  \u003c!-- Who is the Engineer to contact if folks have technical questions? --\u003e\n  \n\u003c!--\nWhat else should contributors [keep in mind](https://fleetdm.com/handbook/company/development-groups#developing-from-wireframes) when working on this change?  (Optional.)\n1. \n2. \n--\u003e\n\n## Changes\n\n### Engineering\n- [ ] Test plan is finalized\n- [ ] Write a guide announcing same day support for MacOS Tahoe as soon as we reach it.\n\n\u003e ℹ️  Please read this issue carefully and understand it.  Pay [special attention](https://fleetdm.com/handbook/company/development-groups#developing-from-wireframes) to UI wireframes, especially \"dev notes\".\n\n## QA\n\n### Risk assessment\n\n- Requires load testing: No \u003c!-- User story has performance implications that require load testing. Otherwise, remove this item. --\u003e\n- Risk level: Low  \u003c!-- Choose one. Consider: Does this change come with performance risks?  Any risk of accidental log spew? Any particular regressions to watch out for?  Any potential compatibility issues, even if it's not technically a breaking change? --\u003e\n- Risk description: Many of us have been running ad-hoc sessions ever since macOS 26 beta started, and we haven't run into any major issues specifically related to the update. It still requires e2e testing, but there aren't any factors that would point towards it being High risk \u003c!-- If the risk level is high, explain why. If low, remove. --\u003e\n\n### Test plan\n\u003c!-- Add detailed manual testing steps for all affected user roles. --\u003e\n\n\u003e Make sure to go through [the list](https://github.com/fleetdm/fleet/blob/main/docs/Contributing/guides/ui/design-qa-considerations.md) and consider all events that might be related to this story, so we catch edge cases earlier.\n- [ ] Pull out comments from https://github.com/fleetdm/fleet/issues/30136 for individual issues if they are still present \n- [ ] Confirm that fleet remains installed on the host after upgrading to:\n    - macOS 26\n    - iOS 26\n    - iPadOS 26\n- [ ] Confirm that the update for the host is reflected on the fleet side (Device page, hosts list, host info via API):\n    - macOS 26\n    - iOS 26\n    - iPadOS 26\n- [ ] Confirm that previously applied settings remain active and are properly displayed on the host: \n    - Disk encryption\n    - Policies (have some failing, passing and some that should start passing after the upgrade)\n    - Software status \n    - IdP information\n    - Still applicable labels\n- [ ] If the host is no longer applicable for the label, it should be removed from the host and from label filter results\n- [ ] TODO\n- [ ] Complete MDM Smoke test\n- [ ] Complete Orchestration Smoke test\n- [ ] Complete Software Smoke test\n\n\u003c!-- Consider: Do the steps above apply to all global access roles, including admin, maintainer, observer, observer+, and GitOps?  Do the steps above apply to all team-level access roles?  If not, write the steps used to test each variation.\n--\u003e\n\n### Testing notes\n\u003c!-- Any additional testing notes relevant to this story or tools required for testing. --\u003e\n\n### Confirmation\n\u003c!-- The engineer responsible for implementing this user story completes the test plan before moving to the \"Ready for QA\" column. --\u003e\n\n1. [ ] Engineer: Added comment to user story confirming successful completion of test plan.\n2. [ ] QA: Added comment to user story confirming successful completion of test plan.\n",
          "number": 30696,
          "repository": "fleetdm/fleet",
          "title": "Validate MacOS Tahoe on Fleet so that we can provide same day support when it goes to general release",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/30696"
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgdI9dE",
        "labels": [
          "story",
          "#g-mdm",
          "#g-orchestration",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-29T00:00:00Z",
          "title": "4.73.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "status": "✔️Awaiting QA",
        "title": "Validate MacOS Tahoe on Fleet so that we can provide same day support when it goes to general release",
        "comments": [
          {
            "author": {
              "login": "lukeheath"
            },
            "body": "@AndreyKizimenko While you will be leading this effort, it impacts all product groups, so feel free to request support from the rest of the QA team as needed. "
          },
          {
            "author": {
              "login": "marko-lisica"
            },
            "body": "Hey @lukeheath @AndreyKizimenko, this got lost in drafting last two weeks. I don't think this needs to go through the drafting process, as it doesn't require product design or estimation. I moved this to \"Testing - QA board\" project."
          },
          {
            "author": {
              "login": "lukeheath"
            },
            "body": "@xpkoala @PezHub @jmwatts - @AndreyKizimenko will be taking lead on this, but we'll be bringing into each product group's release board on Monday after sprint kickoff. We expect each QA engineer will be involved at some point as we validate MacOS Tahoe. \n\ncc @sharon-fdm @georgekarrv @mostlikelee "
          }
        ],
        "issueNumber": 30696,
        "changeType": "added"
      }
    ]
  },
  {
    "timestamp": "2025-07-31T19:06:37.246422562Z",
    "items": [
      {
        "assignees": [
          "RachelElysia"
        ],
        "content": {
          "body": "Bug observed during sprint [demos](https://fleetdm.slack.com/archives/C03C41L5YEL/p1753461589429129).\n\n[This](https://github.com/fleetdm/fleet/blob/02c5026436072355a70f97e756ecb04a569ee6b8/frontend/pages/hosts/details/cards/Software/HostSoftwareTable/HostSoftwareTable.tsx#L153-L154) seems to be the problem area. Looks like the check is purely based on the platform but it should be also checking for the presence of vulnerability query params.\n\n\n```tsx\n  const memoizedEmptyComponent = useCallback(() =\u003e {\n    const vulnFilterAndNotSupported = isIPadOrIPhone(platform);\n    return vulnFilterAndNotSupported ? (\n      \u003cVulnsNotSupported\n        platformText={APPLE_PLATFORM_DISPLAY_NAMES[platform as ApplePlatform]}\n      /\u003e\n    ) : (\n      \u003cEmptySoftwareTable noSearchQuery={searchQuery === \"\"} /\u003e\n    );\n  }, [platform, searchQuery]);\n```\n\n### 🛠️ To fix\n\nProduct designer: @marko-lisica \n\nUI changes: [Figma](https://www.figma.com/design/bLdsOyLfY0IlyhxKSCBcHR/-31329-%F0%9F%AA%B2-HostSoftwareTable-shows-wrong-empty-state?node-id=2-130\u0026t=O3ljmyNs4PlpzS3j-1)\n"
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgdCntE",
        "status": "🐣 In progress",
        "comments": [
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "This was surfaced with BYOD Apple devices. I tagged it with g-software but it could be `#g-mdm`\n@georgekarrv @mostlikelee preference on who tackles this one?\n\nWhen a BYOD (personal) iPhone is enrolled, we only collect inventory for apps that Fleet installs (Managed apps). \nWe are currently showing \"Vulnerabilities are not supported for this type of host\" as the empty state for Inventory, but we should be showing a message telling the user that there are no apps displayed and that only managed apps are reported in inventory, unless they have added the vulnerabilities filter (then it makes sense to show the no vulnerabilities empty state).\n\n\u003cimg width=\"1186\" height=\"374\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/8c7dc1a7-ac0e-497a-91df-08dc8fb31702\" /\u003e"
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "@georgekarrv we're going to take this.  removing it off your board"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "\u003e When a BYOD (personal) iPhone is enrolled, we only collect inventory for apps that Fleet installs (Managed apps).\nWe are currently showing \"Vulnerabilities are not supported for this type of host\" as the empty state for Inventory, but we should be showing a message telling the user that there are no apps displayed and that only managed apps are reported in inventory, unless they have added the vulnerabilities filter (then it makes sense to show the no vulnerabilities empty state).\n\nAbout to put in a PR to show the generic No software detected empty state (plus tests). @marko-lisica if @jmwatts is correct for a different empty state, can you update this ticket if it's imperative for 4.72, or open a new ticket for 4.73 to track the new empty state?\n\nThank you!"
          },
          {
            "author": {
              "login": "marko-lisica"
            },
            "body": "@RachelElysia I just realized this is already on g-software board. I added a few more copy changes that depend on the platform and enrollment type (MDM status). Not sure if you want to estimate this? I can add to planning poker.\n\nFigma link is in issue description."
          }
        ],
        "issueNumber": 31329,
        "changeType": "modified"
      },
      {
        "assignees": [
          "ksykulev"
        ],
        "content": {
          "body": "Chrome on windows stalled trying to uninstall for FMA test automation:\nhttps://github.com/fleetdm/fleet/pull/31210\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\nhttps://github.com/fleetdm/fleet/actions/runs/16580117238/job/46894005707?pr=31210\n```\nlevel=info ts=2025-07-28T21:00:13.5176998Z caller=app_commander.go:95 app=\"Google Chrome\" msg=\"Executing uninstall script for app...\"\nlevel=error ts=2025-07-28T21:05:13.5339387Z caller=app_commander.go:98 app=\"Google Chrome\" msg=\"Error uninstalling app: exit status 1\"\nlevel=error ts=2025-07-28T21:05:13.5339387Z caller=app_commander.go:99 app=\"Google Chrome\" msg=\"Output: \\n--------------------\\nUninstall command: C:\\\\Program Files\\\\Google\\\\Chrome\\\\Application\\\\138.0.7204.158\\\\Installer\\\\setup.exe\\nUninstall args: --uninstall --system-level --uninstall\\n\\n--------------------\"\n```\n\n\n### 🧑‍💻  Steps to reproduce\nUninstall chrome FMA on github runner\n\n\n### 🕯️ More info _(optional)_\n\u003c!-- Add any additional details you think could be relevant to solving or reproducing the bug (e.g., \"this does not reproduce when...\") --\u003e\nN/A\n\n\u003c!-- If this is a performance issue, follow these steps to generate and attach a debug archive: https://fleetdm.com/docs/using-fleet/monitoring-fleet#debugging-performance-issues --\u003e\n\n### 🛠️ To fix\nhttps://github.com/fleetdm/fleet/pull/31367",
          "number": 31455,
          "repository": "fleetdm/fleet",
          "title": "Chrome FMA not uninstalling on CI",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/31455"
        },
        "estimate": 2,
        "id": "PVTI_lADOBDAnic4A4BEUzgdLIg0",
        "labels": [
          "bug",
          ":release",
          "#g-software"
        ],
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "status": "✅ Ready for release",
        "title": "Chrome FMA not uninstalling on CI",
        "issueNumber": 31455,
        "changeType": "added"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdCw2A",
        "status": "🦤 ‎In review",
        "issueNumber": 30197,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcX9VU",
        "comments": [
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "Weird behavior for sure -- I thought it was put in boxes only if there were multiple versions installed but I guess not!"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "If we want to just add a grey box around this, it's a EST: 1 FE only and should take 10 minutes.\n\nFrom #20638:\n```\n  // special case when we dont have installed versions. We can only show the\n  // software type atm.\n  if (!installed_versions || installed_versions.length === 0) {\n    return (\n      \u003cdiv className={`${baseClass}__software-details`}\u003e\n        \u003cDataSet\n          title=\"Type\"\n          value={formatSoftwareType({ source: software.source })}\n        /\u003e\n      \u003c/div\u003e\n    );\n  }\n```"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Given the above movement, looks like this has been estimated, so moving forward."
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "@RachelElysia I'm confused. I don't get these modals when I go to Host details \u003e Software\n\nI only a modal if I look in Fleet desktop at the Software tab. I don't see anywhere in Self-service that I would get this modal, and \"Available for install\" isn't a thing anymore in Host details \u003e Software. Is that the only place this is applied? Or am I missing something?"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@RachelElysia TODO confirm that we can no longer access this UI. If that's confirmed, close this."
          }
        ],
        "issueNumber": 30232,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcX124",
        "status": "Waiting",
        "issueNumber": 29944,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdCIqk",
        "status": "Done",
        "comments": [
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "@jmwatts updated this and the other 2 bugs you filed to be filed according to the clarified process \u003c3 out of your court now, grazie"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Looks like a combo icon + install script issue."
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "the error also occurs after manual install, so i don't think we should block this on vendor pkg errors."
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "Est: 1 (\u003c 2 hours)\n\nNote: the scope of this ticket will only be the FE icon portion"
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "this may be a non issue, @RachelElysia will confirm"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "I don't see the issue anymore\n\n\u003cimg width=\"347\" height=\"138\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/0616ced5-f3d4-4b5a-8c05-68aeb578e5cf\" /\u003e\n\u003cimg width=\"244\" height=\"94\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/d10d3821-9fd4-401a-baee-0c1c48a0d6be\" /\u003e\n\u003cimg width=\"170\" height=\"46\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/f8b647b1-867c-40a8-ac23-0d03f0a4ad0c\" /\u003e"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Unable to repro. Closing."
          },
          {
            "author": {
              "login": "fleet-release"
            },
            "body": "Icon, squished, obscure,\nFleet's clarity restored,\nSoftware's sky, now pure."
          }
        ],
        "issueNumber": 30367,
        "changeType": "modified"
      },
      {
        "estimate": 2,
        "id": "PVTI_lADOBDAnic4A4BEUzgdIa8U",
        "milestone": {
          "dueOn": "2025-08-29T00:00:00Z",
          "title": "4.73.0"
        },
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "issueNumber": 31417,
        "changeType": "modified"
      },
      {
        "content": {
          "body": "\u003c!-- **This issue's remaining effort can be completed in ≤1 sprint.  It will be valuable even if nothing else ships.**\nIt is [planned and ready](https://fleetdm.com/handbook/company/development-groups#making-changes) to implement.  It is on the proper kanban board. --\u003e\n\n\n## Goal\n\n| User story  |\n|:---------------------------------------------------------------------------|\n| As a Security Engineer on the Software page,\n| I want to filter by a custom severity (CVSS score) range\n| so that I can filter software by a vulnerability threshold my security team uses (ex. CVSS ≥ 7.5).\n\n## Key result\n\nNone. Prioritized because the current behavior makes it look like Fleet does not understand how people actually use CVSS. But now we do.\n\n## Original requests\n\n- #30237\n\n## Context\n- Product Designer: @RachelElysia + @iansltx \n- Engineer: @RachelElysia \n\n## Changes\n\n### Product\n- [ ] UI changes: [Figma](https://www.figma.com/design/J2mqgWcS9RG3jaQc43V67m/-30248--Software-page--filter-by-custom-severity--CVSS-score--ranges?node-id=0-1\u0026p=f\u0026t=YQB8wo6YOLyUzyFu-0)\n- [x] CLI (fleetctl) usage changes: No changes\n- [x] YAML changes: No changes\n- [x] REST API changes: No changes (API endpoint already supports min/max)\n- [x] Fleet's agent (fleetd) changes: No changes\n- [x] GitOps changes: No changes\n- [x] Activity changes: No changes\n- [x] Permissions changes: No changes\n- [ ] Changes to paid features or tiers: Follows existing CVSS score filtering, so Fleet Premium\n- [ ] My device and fleetdm.com/better changes: No changes\n- [ ] First draft of test plan added\n- [x] Other reference documentation changes: No changes\n- [ ] Once shipped, requester has been notified\n- [ ] Once shipped, dogfooding issue has been filed\n\n### Engineering\n- [ ] Test plan is finalized\n- [x] Contributor API changes: No changes\n- [ ] Feature guide changes: Make sure the [vulns filtering article](https://fleetdm.com/guides/filtering-software-by-vulnerability) is current with the UI\n\n\u003e ℹ️  Please read this issue carefully and understand it.  Pay [special attention](https://fleetdm.com/handbook/company/development-groups#developing-from-wireframes) to UI wireframes, especially \"dev notes\".\n\n## QA\n\n### Risk assessment\n\n- Risk level: Low\n\n### Test plan\n\u003c!-- Add detailed manual testing steps for all affected user roles. --\u003e\n\n\u003e Make sure to go through [the list](https://github.com/fleetdm/fleet/blob/main/docs/Contributing/guides/ui/design-qa-considerations.md) and consider all events that might be related to this story, so we catch edge cases earlier.\n\n\u003e Note: See Figma for single source of truth for exact text copies \n\nTest modals on Host \u003e Software \u003e Inventory page and Software page\n\n1. Min max is present and new help text is present\n2. Min max is enabled only if vuln software toggle is enabled\n3. Defaults to \"Any severity\"\n4. If a user clicks on a given severity like \"Critical severity\", the min and max will be auto populated\n5. If a user clicks on \"Any severity\", the min and max are cleared\n6. If a user clicks on \"Custom severity\", the min and max do not change\n7. If a user types in a custom min or custom max, the dropdown will change to \"Custom severity\"\n8. If a user clears both custom min/max, the dropdown will change to \"Any severity\" but returns to \"Custom severity\" if they start typing\n9. If the user hits apply with no severity entered, it will apply any severity\n10. If the user clicks apply with only a min entered, it will only apply the min (e.g. \u003e=4.0)\n11. If the user clicks apply with only a max entered, it will only apply the max (e.g. \u003c= 8.0)\n12. If the user types in an invalid number into either min/max (e.g. 4.11 or -3), the in label error states it must be a number between 0-10 with an increment of 0.1\n12b. The user cannot type in string as the input is limited to type number\n14. If the user types in a min larger than the max, the Apply button is disabled with a tooltip stating that the min can not be greater than the max.\n15. By clicking \"Apply\", the severity ranges will filter results to only vulnerable software with severity scores in the selected range\n16. Clearing the filter should show all software \n\u003c!-- Consider: Do the steps above apply to all global access roles, including admin, maintainer, observer, observer+, and GitOps?  Do the steps above apply to all team-level access roles?  If not, write the steps used to test each variation.\n--\u003e\n\n### Testing notes\n\u003c!-- Any additional testing notes relevant to this story or tools required for testing. --\u003e\n\n### Confirmation\n\u003c!-- The engineer responsible for implementing this user story completes the test plan before moving to the \"Ready for QA\" column. --\u003e\n\n1. [ ] Engineer: Added comment to user story confirming successful completion of test plan.\n2. [ ] QA: Added comment to user story confirming successful completion of test plan.\n"
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgcYi4Y",
        "issueNumber": 30248,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdFX6o",
        "status": "Done",
        "issueNumber": 31367,
        "changeType": "modified"
      },
      {
        "assignees": [
          "noahtalerman"
        ],
        "content": {
          "body": "**Fleet version**: Latest snapshot on dogfood\n\n**Web browser and operating system**: Any\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\nThe text in the Updates section of Self-service says the following even when multiple apps are needing updates: \n\n\u003e The following app require updating. If you need help, reach out to IT\n\nThere should be logic to detect when to use `app` vs `apps` or update the text to a more generic `app(s)` approach. \n\n`require` vs `requires` also need to be context aware. \n\n### 🧑‍💻  Steps to reproduce\n\u003c!-- Provide step-by-step actions of how to recreate this bug in a clean install of Fleet. (This helps others understand and fix it more quickly.) --\u003e\n1. Have a device with multiple updates available\n2. Go to Self-service and observe the Updates text\n3. PATCH YOUR APPS! \n\n### 🕯️ More info _(optional)_\n\n\u003cimg width=\"1073\" height=\"268\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/1527ae4d-85b6-4a07-b6a3-b195ff24977d\" /\u003e\n\n ### 🛠️ To fix \n\n- @noahtalerman: Let's update the copy to tell the end user \"why\" to update ([Figma wireframes](https://www.figma.com/design/K9BTJ3aZAvwWBXU9N8aqGa/-27983-Fleet-Desktop-%3E-Self-service--Add-%22Update%22-actions-when-updates-are-detected-for-installed-so?node-id=5301-2182\u0026t=hxc2lNnNPhVI7pRT-1)):\n\n\"Your device has outdated software. Update to address potential security vulnerabilities or compatibility issues.\"\n\n- @noahtalerman: Also remove the \"If you need help...\"\n  - Why? Already exists in the \"Self-service\" section.\n\n\u003cimg width=\"727\" height=\"73\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/0076f8b5-25cc-4857-998b-23b475659e93\" /\u003e\n\n- @noahtalerman: Copy style borrowed by the following:\n\n\u003cimg width=\"1243\" height=\"90\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/128ee478-a7a3-4ae8-a510-8fb83fe0376a\" /\u003e\n\n\u003cimg width=\"629\" height=\"290\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/ceae2da2-0c1e-4dd4-99ce-0547257369cd\" /\u003e",
          "number": 31414,
          "repository": "fleetdm/fleet",
          "title": "Self-service: typo in Updates section",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/31414"
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgdK3Mg",
        "labels": [
          "bug",
          ":release",
          "~unreleased bug",
          "#g-software"
        ],
        "repository": "https://github.com/fleetdm/fleet",
        "status": "Done",
        "title": "Self-service: typo in Updates section",
        "comments": [
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "FYI @jmwatts @mostlikelee I assigned myself and took a stab at this is an unreleased bug: \n- #31449\n\nWill move it to \"Ready for QA\" once the PR merges."
          }
        ],
        "issueNumber": 31414,
        "changeType": "added"
      },
      {
        "assignees": [
          "ksykulev"
        ],
        "content": {
          "body": "**Fleet version**: 4.71\n\nhttps://fleetdm.slack.com/archives/C086V2QK76X/p1753829605060219\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\nIf we have a VPP app, that was installed by fleet, then indexed by osquery. We will lose the LastInstallInstalledAt. This makes the `app_store_app.last_install` value `null`. This is a problem on the host library page:\n\u003cimg width=\"5102\" height=\"2742\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/b42eef59-cb6d-457d-8cf9-566e45904c20\" /\u003e\n\n### 🧑‍💻  Steps to reproduce\n1. Trigger a vpp app to be installed by fleet\n2. Wait for the successful install\n3. Refetch host vitals\n4. Open up the library page\n\n### 🕯️ More info _(optional)_\nWhen passing `OnlyAvailableForInstall` to `ListHostSoftware` , if we have a VPP app, that was installed by fleet, then indexed by osquery. We will lose the `LastInstallInstalledAt` , `LastInstallInstallUUID`.\n\nHere is the reason.\nWe pull in fleet initiated vpp installs here:\nhttps://github.com/fleetdm/fleet/blob/main/server/datastore/mysql/software.go#L3261\nThey include `last_install_install_uuid`, `last_install_installed_at`.\nThen later if we are asking for applications that are available for install, we run this query https://github.com/fleetdm/fleet/blob/main/server/datastore/mysql/software.go#L3614-L3632\nThe purpose of this query is to find osquery inventoried software that is not fleet installed but match vpp apps. The problem lays here:\nhttps://github.com/fleetdm/fleet/blob/main/server/datastore/mysql/software.go#L3647-L3649\n```\n\t\t\t\tif s.VPPAppAdamID != nil {\n\t\t\t\t\ttmpByVPPAdamID[*s.VPPAppAdamID] = s\n\t\t\t\t}\n```\nIf we find a vpp app installer we overwrite the record we pulled up from `hostInstalledVpps` (and lose the `last_install_*` data).\n\n### 🛠️ To fix\n\nWe should either:\nModify this query to exclude apps that are not installed by fleet\nModify that bit of code to say, if we already have that record in `tmpByVPPAdamID` we can copy over the `last_install_*` data vs just overwriting the record.\nSo why is this working properly on the self service page? Great question, it's because we are not filtering by \"only available for install\".\n\nself service opts:\n```\n\t\tSelfServiceOnly:            true,\n\t\tIncludeAvailableForInstall: true,\n\t\tOnlyAvailableForInstall:    false,\n\t\tIsMDMEnrolled:              true, \u003cmaybe true || false\u003e\n```\nhost library page opts:\n```\n\tSelfServiceOnly: false,\n\tIncludeAvailableForInstall: true,\n\tOnlyAvailableForInstall: true,\n```",
          "number": 31459,
          "repository": "fleetdm/fleet",
          "title": "null on app_store_app.last_install for VPP apps installed by fleet",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/31459"
        },
        "estimate": 2,
        "id": "PVTI_lADOBDAnic4A4BEUzgdLKz4",
        "labels": [
          "bug",
          ":release",
          "~released bug",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-29T00:00:00Z",
          "title": "4.73.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "status": "Done",
        "title": "null on app_store_app.last_install for VPP apps installed by fleet",
        "issueNumber": 31459,
        "changeType": "added"
      },
      {
        "assignees": [
          "marko-lisica"
        ],
        "content": {
          "body": "### Requestor\n\n- Application name: Windows App\n- Application platform: macOS\n\n---\n\n### Validation\n\n- [x] The following outputs are generated\n        - `/outputs/\u003capp-name\u003e/darwin.json` created\n        - `/outputs/apps.json` updated\n- [x] Manifest name matches osquery `app.name`\n- [x] Manifest version scheme matches osquery `app.short_bundle_version`\n- [x] Manifest `unique_identifier` matches osquery `app.bundle_identifier`\n\n### QA\n\n- [ ] App adds successfully to team's library\n- [ ] App installs successfully on host\n- [ ] App opens successfully on host\n- [ ] App uninstalls successfully on host\n\n### Icon\n\n- [x] Icon added to Figma. @marko-lisica: macOS icon has a white background, and Windows app icon has blue background. Windows icon seems more recognizable, and I created SVG for it. [Link to Figma](https://www.figma.com/design/8oXlYXpgCV1Sn4ek7OworP/%F0%9F%A7%A9-Design-system?node-id=1365-4002\u0026t=Pqfnute9dj1VINxk-11)\n- [ ] Icon added to Fleet\n- [ ] Correct icon appears in the app catalog",
          "number": 31468,
          "repository": "fleetdm/fleet",
          "title": "New FMA: Windows App",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/31468"
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgdLZck",
        "labels": [
          ":release",
          "#g-software",
          "fma"
        ],
        "repository": "https://github.com/fleetdm/fleet",
        "status": "🥚 Ready",
        "title": "New FMA: Windows App",
        "issueNumber": 31468,
        "changeType": "added"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgc5Hl8",
        "title": "🪲WhatsApp version different in software inventory",
        "issueNumber": 31185,
        "changeType": "removed"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgc5rCE",
        "title": "macOS Brave Browser FMA version mismatch",
        "issueNumber": 31122,
        "changeType": "removed"
      }
    ]
  },
  {
    "timestamp": "2025-08-01T07:08:48.392085601Z",
    "items": [
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdC06A",
        "status": "Done",
        "comments": [
          {
            "author": {
              "login": "fleet-release"
            },
            "body": "Carryover tracked well,\nLike leaves in a gentle stream,\nFleet flows with more grace."
          }
        ],
        "issueNumber": 31334,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdIa8U",
        "status": "Done",
        "comments": [
          {
            "author": {
              "login": "jahzielv"
            },
            "body": "After looking at the XML feed data here: https://github.com/fleetdm/nvd/blob/master/oval_sources.json\nI found that we _are_ getting RHEL kernel-related vulns, but not processing them when we do vulns processing in Fleet. \n\nFiled a bug here: https://github.com/fleetdm/fleet/issues/31495"
          },
          {
            "author": {
              "login": "fleet-release"
            },
            "body": "Bug in Linux code,\nDetection now seamless, like\nWind through cloud city."
          }
        ],
        "issueNumber": 31417,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcX4P8",
        "status": "✔️Awaiting QA",
        "comments": [
          {
            "author": {
              "login": "lukeheath"
            },
            "body": "@mostlikelee Thanks for filing! This is a good investment and definitely something we need to do. Before I prioritize to drafting, would you please review the [create an engineering-initiated story](https://fleetdm.com/handbook/engineering#create-an-engineering-initiated-story) process? This should only have one user story, and the only section that should be removed is the \"Product\" section. \n\nOne user story allows us to focus on a single user and use case, and implement a simpler iteration. We can do a separate iteration if we want to focus on admin experience. "
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "@lukeheath thanks, updated!"
          },
          {
            "author": {
              "login": "lukeheath"
            },
            "body": "@mostlikelee Thanks, I've prioritized to the drafting board and assigned to you as the product designer. You'll be responsible for moving this through the drafting board per the drafting engineering-initiated stories process (or assign to someone else to take it over.)"
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "@mostlikelee are we aiming to ship this in 4.72?"
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "I think we need to rewrite the name and story here to better reflect the scope (i think we're starting with macos), but yes we want to make some progress on this front in the next sprint to get in front of FMA issues.\n\n@ksykulev can you take a pass at updating this so we can estimate any further work needed outside the POC?"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Applied estimate arrived at on Friday in chat."
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "- add ability to skip slugs for version mismatches\n- add ability to skip version check"
          },
          {
            "author": {
              "login": "fleet-release"
            },
            "body": "Automated tests flow,\nLike rivers through code canals,\nPatch hosts swiftly grow.\n\nApps refreshed each day,\nIn the cloud city they play,\nFleet's light shows the way.\n\nNo delay in sight,\nMac platform takes flight, \nIn the glass city's light."
          }
        ],
        "issueNumber": 29183,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdDOeo",
        "labels": [
          "bug",
          "~frontend",
          ":release",
          "~released bug",
          "~assisting g-mdm",
          "customer-nortia",
          "#g-software"
        ],
        "issueNumber": 30357,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdK3Mg",
        "comments": [
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "FYI @jmwatts @mostlikelee I assigned myself and took a stab at this is an unreleased bug: \n- #31449\n\nWill move it to \"Ready for QA\" once the PR merges."
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "@noahtalerman Is this an unreleased bug for 4.72? If so, please add the milestone per https://fleetdm.com/handbook/engineering#run-fleet-locally-for-qa-purposes \n\nAdditionally we'll need a cherry pick into the RC branch. Thanks!"
          }
        ],
        "issueNumber": 31414,
        "changeType": "modified"
      },
      {
        "assignees": [
          "RachelElysia"
        ],
        "content": {
          "body": "**Fleet version**: v4.68.1\n\n**Web browser and operating system**: \u003c!-- e.g. Chrome 88.0.4324 running on macOS --\u003e\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\n\u003c!-- What did you see?  Paste a screenshot, include a 30s video, or write 1-2 sentences describing the issue you observed. --\u003e\n\nWhen setting up a policy automation, the background page scrolls unexpectedly. \n\nThis only occurs when the browser window is not full height, and the selection dropdown overflows the bottom of the page. \n\nLoom recording:\n\nhttps://www.loom.com/share/c796032677724e649c6af960ed3b0fc2?sid=216d9868-60eb-4d4e-b347-393800f46e2f\n\n\n\n### 🧑‍💻  Steps to reproduce\n\u003c!-- Provide step-by-step actions of how to recreate this bug in a clean install of Fleet. (This helps others understand and fix it more quickly.) --\u003e\n1. Create a team \n2. Add policies (creating a large number of policies makes this easier to reproduce without making the screen 100px tall)\n3. Add scripts (see above)\n4. Navigate to the team's Policy view\n5. Adjust height of the browser window until the policy table overflows the bottom of the page. \n6. Make sure you are scrolled up to the top of the page. \n7. Click on **Manage automations**\n8. Select the last listed policy\n9. Open the dropdown menu \n10. Observe scrolling\n\n### 🕯️ More info _(optional)_\n\u003c!-- Add any additional details you think could be relevant to solving or reproducing the bug (e.g., \"this does not reproduce when...\") --\u003e\nN/A\n\n\u003c!-- If this is a performance issue, follow these steps to generate and attach a debug archive: https://fleetdm.com/docs/using-fleet/monitoring-fleet#debugging-performance-issues --\u003e\n\n### 🛠️ To fix\n\nProduct designer: @marko-lisica\n\nSet dropdown menu `max-height` to 200px, so that the dropdown menu fits the modal. This should be changed for Scripts and Software automations modal. \n\n### est.\n\n\u003cimg width=\"467\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/80331afe-b6e9-41ca-a219-9e4c52336bcd\" /\u003e",
          "number": 30004,
          "repository": "fleetdm/fleet",
          "title": "UI - Background page scrolls while editing Policy automations.",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/30004"
        },
        "estimate": 1,
        "id": "PVTI_lADOBDAnic4A4BEUzgdL8SA",
        "labels": [
          "bug",
          "~frontend",
          ":release",
          "~released bug",
          "~assisting g-orchestration",
          "customer-cisneros",
          "#g-software"
        ],
        "repository": "https://github.com/fleetdm/fleet",
        "status": "✔️Awaiting QA",
        "title": "UI - Background page scrolls while editing Policy automations.",
        "comments": [
          {
            "author": {
              "login": "Sampfluger88"
            },
            "body": "Linked to Unthread ticket:\n\u003e [Fleet UI scrolling issue on policy automations page #6515](https://fleetdm.unthread.io/dashboard/inbox/all/conversations/e0769c7b-805a-4272-897a-de7c5f7af36b)"
          },
          {
            "author": {
              "login": "sharon-fdm"
            },
            "body": "Timebox to 1 point."
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "Thanks @marko-lisica ! What a great, simple solution \u003c3\n\nEst: 1"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Was going to evict this bit the fix looks trivial so going to keep in for now."
          }
        ],
        "issueNumber": 30004,
        "changeType": "added"
      },
      {
        "content": {
          "body": "## Goal\n\n| User story  |\n|:---------------------------------------------------------------------------|\n| As an IT admin,\n| I want to see the CVE number displayed in the empty state on `/software/vulnerabilities/:cve` if no hosts are affected.\n| so that I can take a screenshot of that page and send it to my security team.\n\n## Roadmap item\n\nNone\n\n## Original requests\n\n#24807\n\n## Context\n- Product Designer: @marko-lisica  \n- Engineer: @iansltx \n\nThis story is the result of community PR: #31370\n  \n\u003c!--\nWhat else should contributors [keep in mind](https://fleetdm.com/handbook/company/development-groups#developing-from-wireframes) when working on this change?  (Optional.)\n1. \n2. \n--\u003e\n\n## Changes\n\n### Product\n- [x] UI changes:\n  - Include CVE number in empty state on  `/software/vulnerabilities/:cve` page, when no hosts are affected with that CVE:\n  - \u003cimg width=\"1615\" height=\"466\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/5a3f2a1d-8142-4860-9ae0-971bc2aed28f\" /\u003e\n- [x] CLI (fleetctl) usage changes: No changes.\n- [x] YAML changes: No changes.\n- [x] REST API changes: No changes.\n- [x] Fleet's agent (fleetd) changes: No changes.\n- [x] GitOps mode UI changes: No changes.\n- [x] GitOps generation changes: No changes. \n- [x] Activity changes: No changes.\n- [x] Permissions changes: No changes.\n- [x] Changes to paid features or tiers: Fleet Free and Premium\n- [x] My device and fleetdm.com/better changes: No changes.\n- [x] Other reference documentation changes: No changes.\n- [x] First draft of test plan added\n- [ ] Once shipped, requester has been notified\n- [ ] Once shipped, dogfooding issue has been filed\n\n### Engineering\n- [x] Test plan is finalized\n- [ ] Contributor API changes: No changes\n- [ ] Feature guide changes: No changes\n\n\u003e ℹ️  Please read this issue carefully and understand it.  Pay [special attention](https://fleetdm.com/handbook/company/development-groups#developing-from-wireframes) to UI wireframes, especially \"dev notes\".\n\n## QA\n\n### Risk assessment\n\n- Risk level: Low\n\n### Test plan\n\u003c!-- Add detailed manual testing steps for all affected user roles. --\u003e\n\n\u003e Make sure to go through [the list](https://github.com/fleetdm/fleet/blob/main/docs/Contributing/guides/ui/design-qa-considerations.md) and consider all events that might be related to this story, so we catch edge cases earlier.\n\n#### Fleet Premium\n\n1. Navigate to `/software/vulnerabilities/\u003ccve_that_isn't_detected\u003e`\n2. Verify that CVE number is included in the copy in empty state in both Fleet Free and Premium.\n\n\u003c!-- Consider: Do the steps above apply to all global access roles, including admin, maintainer, observer, observer+, and GitOps?  Do the steps above apply to all team-level access roles?  If not, write the steps used to test each variation.\n--\u003e\n\n### Testing notes\n\u003c!-- Any additional testing notes relevant to this story or tools required for testing. --\u003e\n\n### Confirmation\n\u003c!-- The engineer responsible for implementing this user story completes the test plan before moving to the \"Ready for QA\" column. --\u003e\n\n1. [ ] Engineer: Added comment to user story confirming successful completion of test plan.\n2. [ ] QA: Added comment to user story confirming successful completion of test plan.\n",
          "number": 31377,
          "repository": "fleetdm/fleet",
          "title": "Include CVE number in empty state on vulnerability details",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/31377"
        },
        "estimate": 1,
        "id": "PVTI_lADOBDAnic4A4BEUzgdMZs8",
        "labels": [
          "story",
          "~frontend",
          ":product",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-29T00:00:00Z",
          "title": "4.73.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "status": "✔️Awaiting QA",
        "title": "Include CVE number in empty state on vulnerability details",
        "comments": [
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "FYI @marko-lisica @mostlikelee I assigned Tim. Up to Tim to bring this through estimation.\n\n\u003cimg width=\"697\" height=\"262\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/66df103f-b840-4d35-ac61-62b442934c0f\" /\u003e"
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "\u003e FYI @marko-lisica @mostlikelee I assigned Tim. Up to Tim to bring this through estimation.\n\nCorrect, i'm DRI for anything Ready for Spec onward.   In many cases I'll delegate in those cases i'll re-assign the story."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@drvcodenta This is now spec'd; estimate is capacity allocation for my review. Feel free to self-assign (for some reason GitHub is fighting my ability to assign this to you), move from Waiting to In progress, and assign me for PR review when it's up. Thanks again!"
          }
        ],
        "issueNumber": 31377,
        "changeType": "added"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdDOLw",
        "title": "Query cursor out of alignment on ChromeOS",
        "issueNumber": 30691,
        "changeType": "removed"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdDOYo",
        "title": "UI - Background page scrolls while editing Policy automations.",
        "issueNumber": 30004,
        "changeType": "removed"
      }
    ]
  },
  {
    "timestamp": "2025-08-01T19:05:55.788047706Z",
    "items": [
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcYi4Y",
        "status": "🦤 ‎In review",
        "issueNumber": 30248,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcX124",
        "status": "🐣 In progress",
        "issueNumber": 29944,
        "changeType": "modified"
      },
      {
        "content": {
          "body": "**Fleet version**: 4.71\n\nhttps://fleetdm.slack.com/archives/C086V2QK76X/p1753829605060219\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\nIf we have a VPP app, that was installed by fleet, then indexed by osquery. We will lose the LastInstallInstalledAt. This makes the `app_store_app.last_install` value `null`. This is a problem on the host library page:\n\u003cimg width=\"5102\" height=\"2742\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/b42eef59-cb6d-457d-8cf9-566e45904c20\" /\u003e\n\n### 🧑‍💻  Steps to reproduce\n1. Trigger a vpp app to be installed by fleet\n2. Wait for the successful install\n3. Refetch host vitals\n4. Open up the library page\n\n### 🕯️ More info _(optional)_\nWhen passing `OnlyAvailableForInstall` to `ListHostSoftware` , if we have a VPP app, that was installed by fleet, then indexed by osquery. We will lose the `LastInstallInstalledAt` , `LastInstallInstallUUID`.\n\nHere is the reason.\nWe pull in fleet initiated vpp installs here:\nhttps://github.com/fleetdm/fleet/blob/main/server/datastore/mysql/software.go#L3261\nThey include `last_install_install_uuid`, `last_install_installed_at`.\nThen later if we are asking for applications that are available for install, we run this query https://github.com/fleetdm/fleet/blob/main/server/datastore/mysql/software.go#L3614-L3632\nThe purpose of this query is to find osquery inventoried software that is not fleet installed but match vpp apps. The problem lays here:\nhttps://github.com/fleetdm/fleet/blob/main/server/datastore/mysql/software.go#L3647-L3649\n```\n\t\t\t\tif s.VPPAppAdamID != nil {\n\t\t\t\t\ttmpByVPPAdamID[*s.VPPAppAdamID] = s\n\t\t\t\t}\n```\nIf we find a vpp app installer we overwrite the record we pulled up from `hostInstalledVpps` (and lose the `last_install_*` data).\n\n### 🛠️ To fix\n\nWe should either:\nModify this query to exclude apps that are not installed by fleet\nModify that bit of code to say, if we already have that record in `tmpByVPPAdamID` we can copy over the `last_install_*` data vs just overwriting the record.\nSo why is this working properly on the self service page? Great question, it's because we are not filtering by \"only available for install\".\n\nself service opts:\n```\n\t\tSelfServiceOnly:            true,\n\t\tIncludeAvailableForInstall: true,\n\t\tOnlyAvailableForInstall:    false,\n\t\tIsMDMEnrolled:              true, \u003cmaybe true || false\u003e\n```\nhost library page opts:\n```\n\tSelfServiceOnly: false,\n\tIncludeAvailableForInstall: true,\n\tOnlyAvailableForInstall: true,\n```"
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgdLKz4",
        "status": "🦤 ‎In review",
        "issueNumber": 31459,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdCw2A",
        "status": "✔️Awaiting QA",
        "issueNumber": 30197,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgbpzkM",
        "comments": [
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "The version reported in osquery is 16.0 but when I look in \"About this Mac\" and System Settings \u003e\u003e General it's 26.0\nIt does get the build right though... 25A5279m"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "When I try to enforce encryption I'm not seeing the banner instructing me to restart or log out, until I've restarted or logged out. Then it stays there no matter how many times I restart. I'm not seeing the banner clear and even after running the `cleanups_then_aggregation` cron the encryption status isn't updated and it says `unrecognized`:\n\n![Image](https://github.com/user-attachments/assets/f3c0b064-8aae-4c39-9993-bd01af2fbd84)\n\nOn the host, I can see the disk encryption profile in System Settings and Filevault is turned on and a recovery key has been set:\n\n\u003cimg width=\"741\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/013cc568-6b97-4bbb-be68-a458bbbdf56b\" /\u003e\n\n\u003cimg width=\"730\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/986b4c3e-42f2-4b9c-9756-f1acc8e1f302\" /\u003e"
          },
          {
            "author": {
              "login": "PezHub"
            },
            "body": "Apple introduced a new Device Migration feature (that only works with the latest OSes) which will move your host from a 3rd party MDM server over to Fleet,  all via ABM. It works! however during the enrollment to Fleet the Setup Experience SwiftDialogue window did not display the software Fleet was installing in the background"
          },
          {
            "author": {
              "login": "zayhanlon"
            },
            "body": "@PezHub from customer-numa\nmacOS 26 - MDM migration invokes Setup Experience (silently) - awaitconfigured\n\n- Upgraded endpoint to macOS 26 \n- ABM recognizes that\n- Able to set a deadline\n- Device starts to migrate\n- Unenrolled from previous MDM (didn’t have to initiate anything)\n- Recognizes that it needs to enroll into Fleet\n- Waiting for ‘device configured’ command\n- Starts going through setup experience again (calling through all apps, VPP apps, setup script)\n\nExpected behavior: Assume host has all apps already installed. It’s been previously managed. It’s not a net new device so it shouldn’t run setup experience. VPP apps would get removed from previous MDM so those would be the one thing that should run again\n\nNote from @mostlikelee : Technically, as soon as the device gets the Fleet MDM profile, the apps should come along with it. We should test"
          },
          {
            "author": {
              "login": "zayhanlon"
            },
            "body": "@PezHub from customer-eponym\nFleet menu bar item doesn't show up after enrollment in beta 2"
          },
          {
            "author": {
              "login": "Sampfluger88"
            },
            "body": "Linked to Unthread ticket:\n\u003e [Fleet menu not showing after enrollment in macOS 26 beta 2 #6834](https://fleetdm.unthread.io/dashboard/inbox/all/conversations/3ec39176-1e2a-49ec-aea4-3c44108d90d0)"
          },
          {
            "author": {
              "login": "AndreyKizimenko"
            },
            "body": "Changing MDMs without a deadline doesn't not show a notification on the host. Maybe it takes a lot more time (writing this after waiting for 2-3 hours)"
          },
          {
            "author": {
              "login": "PezHub"
            },
            "body": "Hi all 👋 , any issues directly related to the new MDM migration feature Apple introduced in ABM should be tracked separately here https://github.com/orgs/fleetdm/projects/58/views/9?pane=issue\u0026itemId=119675644\u0026issue=fleetdm%7Cfleet%7C30695\n"
          },
          {
            "author": {
              "login": "AndreyKizimenko"
            },
            "body": "Noticed that MacOS26 isn't getting orbit updates from a local tuf server. WIll retest it later next week and file an issue "
          }
        ],
        "issueNumber": 30136,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdK3Mg",
        "milestone": {
          "dueOn": "2025-08-08T00:00:00Z",
          "title": "4.72.0"
        },
        "status": "✅ Ready for release",
        "comments": [
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "FYI @jmwatts @mostlikelee I assigned myself and took a stab at this is an unreleased bug: \n- #31449\n\nWill move it to \"Ready for QA\" once the PR merges."
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "@noahtalerman Is this an unreleased bug for 4.72? If so, please add the milestone per https://fleetdm.com/handbook/engineering#run-fleet-locally-for-qa-purposes \n\nAdditionally we'll need a cherry pick into the RC branch. Thanks!"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "**QA Notes**\n\n\u003cimg width=\"981\" height=\"476\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/4d2b9050-fb6d-42eb-aa71-6aca42cb56c8\" /\u003e"
          }
        ],
        "issueNumber": 31414,
        "changeType": "modified"
      },
      {
        "content": {
          "body": "### Requestor\n\n- Application name: Windows App\n- Application platform: macOS\n\n---\n\n### Validation\n\n- [x] The following outputs are generated\n        - `/outputs/\u003capp-name\u003e/darwin.json` created\n        - `/outputs/apps.json` updated\n- [x] Manifest name matches osquery `app.name`\n- [x] Manifest version scheme matches osquery `app.short_bundle_version`\n- [x] Manifest `unique_identifier` matches osquery `app.bundle_identifier`\n\n### QA\n\n- [ ] App adds successfully to team's library\n- [ ] App installs successfully on host\n- [ ] App opens successfully on host\n- [ ] App uninstalls successfully on host\n\n### Icon\n\n- [x] Icon added to Figma. @marko-lisica: macOS icon has a white background, and Windows app icon has blue background. Windows icon seems more recognizable, and I created SVG for it. [Link to Figma](https://www.figma.com/design/8oXlYXpgCV1Sn4ek7OworP/%F0%9F%A7%A9-Design-system?node-id=1365-4002\u0026t=Pqfnute9dj1VINxk-11)\n- [ ] Icon added to Fleet\n- [ ] Correct icon appears in the app catalog"
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgdLZck",
        "issueNumber": 31468,
        "changeType": "modified"
      },
      {
        "assignees": [
          "drvcodenta"
        ],
        "id": "PVTI_lADOBDAnic4A4BEUzgdMZs8",
        "status": "🥚 Ready",
        "comments": [
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "FYI @marko-lisica @mostlikelee I assigned Tim. Up to Tim to bring this through estimation.\n\n\u003cimg width=\"697\" height=\"262\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/66df103f-b840-4d35-ac61-62b442934c0f\" /\u003e"
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "\u003e FYI @marko-lisica @mostlikelee I assigned Tim. Up to Tim to bring this through estimation.\n\nCorrect, i'm DRI for anything Ready for Spec onward.   In many cases I'll delegate in those cases i'll re-assign the story."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@drvcodenta This is now spec'd; estimate is capacity allocation for my review. Feel free to self-assign (for some reason GitHub is fighting my ability to assign this to you), move from Waiting to In progress, and assign me for PR review when it's up. Thanks again!"
          },
          {
            "author": {
              "login": "drvcodenta"
            },
            "body": "I'm not a collaborator on the repository or part of the organization/team with write access, so GitHub isn’t letting me self-assign this issue"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@drvcodenta Got it, that makes sense that I wasn't able to either. Either way, this is yours to move forward with as/when you see fit."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@drvcodenta Apparently there's a weird GitHub idiosyncrasy (bug? anti-abuse measure?) where external folks have to comment on the issue before they show up as a potential assignee, so your comment actually allowed me to assign you, which I've done. Thanks @lukeheath for assisting with troubleshooting that one :)\n\nMoving this to Ready now, and you can move to In progress when you're actively working on it."
          }
        ],
        "issueNumber": 31377,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdC-p0",
        "title": "New FMA: 7-zip for Windows",
        "issueNumber": 31345,
        "changeType": "removed"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcX4P8",
        "title": "Create Fleet Maintained Apps test automation",
        "issueNumber": 29183,
        "changeType": "removed"
      }
    ]
  },
  {
    "timestamp": "2025-08-02T07:05:18.244254322Z",
    "items": [
      {
        "content": {
          "body": "## Goal\n\n| User story  |\n|:---------------------------------------------------------------------------|\n| As a IT admin,\n| I want to show my end users only relevant actions\n| so that I provide my end users a clear self-service software experience.\n\n## Key result\n\nNone. Prioritized this because it's mission critical for `numa` to use Fleet as their software self-service tool.\n\n## Original requests\n\n- #30214\n\n## Context\n- Product Designer: @noahtalerman\n- Engineer: @mostlikelee, @RachelElysia, @iansltx , @jacobshandling \n\n## Changes\n\n### Product\n- [ ] UI changes: Figma [here](https://www.figma.com/design/LaPOy2xbXSNIYtFenO7FTt/Template--Copy-?node-id=0-1\u0026t=BVXxwI7m9syoqGiA-1)\n- [ ] CLI (fleetctl) usage changes: No changes\n- [ ] YAML changes: No changes\n- [ ] REST API changes: No changes\n- [ ] Fleet's agent (fleetd) changes: No changes\n- [ ] GitOps changes: No changes\n- [ ] Activity changes: No changes\n- [ ] Permissions changes: No changes\n- [ ] Changes to paid features or tiers: Fleet Premium\n- [ ] My device and fleetdm.com/better changes: No changes\n- [ ] First draft of test plan added\n- [ ] Other reference documentation changes: No changes\n- [ ] Once shipped, requester has been notified\n- [ ] Once shipped, dogfooding issue has been filed\n\n### Engineering\n- [ ] Test plan is finalized\n- [ ] Contributor API changes: No changes\n- [ ] Feature guide changes: Ensure guides referencing software (self-service, software packages) correctly reference the UI as it currently stands, including caveats around software updates\n\n\u003e ℹ️  Please read this issue carefully and understand it.  Pay [special attention](https://fleetdm.com/handbook/company/development-groups#developing-from-wireframes) to UI wireframes, especially \"dev notes\".\n\n## QA\n\n### Risk assessment\n\n- Risk level: Low\n\n### Test plan\n\n- [ ] [UI Status and UI actions spreadsheet ](https://docs.google.com/spreadsheets/d/1GKYTQ80RP_Zec32heeniav2rUS9Snegy4S3ob0lgXYc/edit?usp=sharing)\nTest on macOS, Windows, Linux hosts for Self-service\nTest with Chrome, Safari, Edge and Firefox\nTest with FMA, Custom packages, and VPP software\n\nOn host details page or Self service with several installers available:\n\n- [x] Default sorting order is by Name ascending\n- [x] Name sort order can be reversed\n- [x] Sorting by status sorts software by status in the order mentioned in Figma (and can be reversed)\n- [x] Font weight should be \"regular\"\n- [x] If software is not in software inventory, status is \"---\"\n- [x] If status is \"---\", available action is \"Install\" (Uninstall should not be available)\n- [x] When a user clicks \"Install\", status changes to \"Installing\"\n- [ ] If software installs successfully, status changes to \"Installed\"\n- [x] If software fails to install, status changes to \"Failed\"\n- [x] If software is in software inventory, Status is \"Installed\"\n- [x] If software status is \"Installed\", available actions are \"Reinstall\" and \"Uninstall\"\n- [x] When a user clicks \"Reinstall\", status changes to \"Installing\", and when the action completes, the status changes to \"Installed\"\n- [ ] When a user clicks \"Uninstall\", status changes to \"Uninstalling\" and when the action completes, the status changes to \"---\"\n- [x] If software fails to uninstall, status changes to \"Failed (uninstall)\"\n- [x] If software is in software inventory, and other criteria are met (see [#27983](https://github.com/fleetdm/fleet/issues/27983) ) status is \"Update available\"\n- [x] If status is \"Update available\", available actions are \"Update\" and \"Uninstall\"\n- [x] If Update available is clicked, details modal is shown with detail of installed software and possible actions to take\n- [ ] When a user clicks \"Update\", modal closes and status changes to \"Updating\", and when the action completes, the status changes to \"Installed\"\n- [x] If software fails to update, status changes to \"Failed\"\n- [ ] If software is installed by end user make sure that tooltip over \"Installed\" status is different from one when Fleet installs. See Figma specs.\n- [x] If software is a tarball (`tgz_packages`), Fleet won't do inventory, and status in Library tab will only reflect if install is triggered from Fleet.\n- [x] Make sure that when the tarball is installed by Fleet, show `Installed` status + `Reinstall` and `Uninstall` actions.\n- [x] Make sure that when tarball install failed, to show `Failed` status and `Install` action only.\n- [x] Make sure that when tarball is available in library that no status is displayed and only `Install` action is available.\n- [x] Make sure that the new copy as specified in Figma is added to \"Install details\" modal for each package that is missing version information (no inventory). \n\n\nNOTE: Host details modal and Self service modal have different copy, see Figma\n- [x] Clicking on any status for any operating system should open a details modal EXCEPT\n- [x] The only non-clickable status is for Host details \u003e software \u003e library \u003e status for VPP successful and failed installs before @ksykulev 4.72 fix merged 8/1/25, those will still have a tooltip to go to the activity feed to view success/fail information\n- [x] Details modal title should match the status and should conform to Figma\n- [x] Install and Uninstall details dropdown should be collapsed by default and only show for installs or uninstalls completed by fleet (If the software was installed by the user, the modal will still show but will not contain a details dropdown, see Figma)\n- [x] Clicking on an available action button within the modal closes the modal and updates the status in the list, according to the action that was taken, the action completes, and the status is updated again.\n- [x] Confirm multiple versions installed \n\n\u003c!-- Consider: Do the steps above apply to all global access roles, including admin, maintainer, observer, observer+, and GitOps?  Do the steps above apply to all team-level access roles?  If not, write the steps used to test each variation.\n--\u003e\n\n### Testing notes\n\u003c!-- Any additional testing notes relevant to this story or tools required for testing. --\u003e\n\n### Confirmation\n\u003c!-- The engineer responsible for implementing this user story completes the test plan before moving to the \"Ready for QA\" column. --\u003e\n\n1. [x] Engineer: Added comment to user story confirming successful completion of test plan.\n2. [ ] QA: Added comment to user story confirming successful completion of test plan.\n"
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgcX1-s",
        "status": "✔️Awaiting QA",
        "comments": [
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "@noahtalerman: Decided to cut this \"smarter\" logic to solve these problems:\n- Multiple instances of the software installed\n- User v. machine scope on Windows\n\nCurrently, for macOS, only software that's installed in Applications/ shows the \"Update required\" status. If the software isn't in Applications/ but it's in inventory, Fleet shows \"Installed\" regardless of version. Fleet will use the install_path to know if the software is in Applications/\n\nCode wise: if (macOS and install_path is applications/), check only that path if it’s outdated and then show “update available” else show “Installed”\n\nFor Windows Fleet-maintained apps, software only shows \"Update available\" if the installed software is the same scope (user or machine) as the Fleet-maintained app. Based on install_path. Otherwise, if the software is in inventory, Fleet shows \"Installed\".\n\nFor Windows custom packages, software only shows \"Update available\" if the software title has an install_path. Otherwise, if the software is in inventory, Fleet shows \"Installed\"."
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "FYI @RachelElysia, I added copy and a link to the contact URL based on `numa` feedback. We met with them today (2025-06-27) and showed them this story's wireframes.\n\n![Image](https://github.com/user-attachments/assets/6ca4ef45-09f2-4ac3-afee-bd5c995e151a)"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@jmwatts I realize this is offloading work to you that should've been done earlier by someone else, but can you work through a test plan here based on what's in Figma?\n\nIf it's more helpful to delegate the test plan for this to #27983, since these changes touch largely the same UI (though this hits both self-service and host software), that works too, and I can do a first pass there.\n\nWent ahead and updated the story template to remove non-test-plan TODOs to help a little."
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "@iansltx I've added the first pass test plan, just a couple questions left here:\n\n\u003cimg width=\"135\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/1a202f1e-a311-4ccd-9aff-76ec85ef8dac\" /\u003e\n\n~~This is kind of vague, what is the criteria for this \"Update Available\" status?~~\n~~- Software is installed on host~~\n~~- Software installer is available~~\n~~- Software is a different version?~~\n~~- Software installer is a higher version than the version that's installed?~~\n\nNevermind, found that criteria in the [#27983](https://github.com/fleetdm/fleet/issues/27983) ticket. Only question left is:\n\nWhat are the available statuses for tar.gz items? \n"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@jmwatts No update available status for tarballs as they don't have an associated version."
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "moving to estimated with an 8 based on prior discussions"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "@marko-lisica \n\nIn the test plans it says:\n\n\u003e  If software is installed by end user make sure that tooltip over \"Installed\" status is different from one when Fleet installs. See Figma specs.\n\nIs there a different tooltip? I currently have it with no tooltip if it was installed by the user not using Fleet. Can you add the tooltip to the Figma spec or remove this from the QA plan?"
          },
          {
            "author": {
              "login": "jacobshandling"
            },
            "body": "[Doc to track questions around the various modals](https://docs.google.com/document/d/1sAh752RZCCquWhI25emzNtnBVV3wA-GAhjbdlaB2Pls/edit?tab=t.0)"
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "Heads up that we're marking this one for expedited drafting"
          },
          {
            "author": {
              "login": "jacobshandling"
            },
            "body": "@mostlikelee thanks. To over communicate, most of the remaining questions are regarding [the modals subtask](https://github.com/fleetdm/fleet/issues/30860)"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "Throwing this over the fence to you @jmwatts ! I QAed as much as I could--happy Friday\n\nMy blind spots:\n- The intel computer race condition with host refetch/osquery\n- I don't have a macOS that is enrolled into MDM, only a iPad, so self-service VPP was not really QAed on my end, though I know Jacob did while he was deving"
          }
        ],
        "issueNumber": 30240,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcX12Q",
        "status": "✔️Awaiting QA",
        "issueNumber": 27983,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcX124",
        "status": "✔️Awaiting QA",
        "issueNumber": 29944,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgck8sI",
        "status": "✔️Awaiting QA",
        "issueNumber": 30861,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdLKz4",
        "milestone": {
          "dueOn": "2025-08-08T00:00:00Z",
          "title": "4.72.0"
        },
        "status": "✅ Ready for release",
        "comments": [
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "**QA Notes**\n\n1. Trigger a vpp app to be installed by fleet\n2. Wait for the successful install\n3. Refetch host vitals\n4. Open up the library page, show Dev tools and inspect the API response, click \"Installed\" link\n- [x] last_install field should not be null\n- [x] Install details modal should have dropdown with install details\n\nNoticed edge case for when app was previously installed with no install information (installed outside of fleet) and a VPP app exists for the same application - last_install will be null (expected) but the \"installed\" status will be clickable, and the modal will show \"Fleet is installing or will install...\" even though the software is not being installed. Will file separately. "
          }
        ],
        "issueNumber": 31459,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdCntE",
        "comments": [
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "This was surfaced with BYOD Apple devices. I tagged it with g-software but it could be `#g-mdm`\n@georgekarrv @mostlikelee preference on who tackles this one?\n\nWhen a BYOD (personal) iPhone is enrolled, we only collect inventory for apps that Fleet installs (Managed apps). \nWe are currently showing \"Vulnerabilities are not supported for this type of host\" as the empty state for Inventory, but we should be showing a message telling the user that there are no apps displayed and that only managed apps are reported in inventory, unless they have added the vulnerabilities filter (then it makes sense to show the no vulnerabilities empty state).\n\n\u003cimg width=\"1186\" height=\"374\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/8c7dc1a7-ac0e-497a-91df-08dc8fb31702\" /\u003e"
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "@georgekarrv we're going to take this.  removing it off your board"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "\u003e When a BYOD (personal) iPhone is enrolled, we only collect inventory for apps that Fleet installs (Managed apps).\nWe are currently showing \"Vulnerabilities are not supported for this type of host\" as the empty state for Inventory, but we should be showing a message telling the user that there are no apps displayed and that only managed apps are reported in inventory, unless they have added the vulnerabilities filter (then it makes sense to show the no vulnerabilities empty state).\n\nAbout to put in a PR to show the generic No software detected empty state (plus tests). @marko-lisica if @jmwatts is correct for a different empty state, can you update this ticket if it's imperative for 4.72, or open a new ticket for 4.73 to track the new empty state?\n\nThank you!"
          },
          {
            "author": {
              "login": "marko-lisica"
            },
            "body": "@RachelElysia I just realized this is already on g-software board. I added a few more copy changes that depend on the platform and enrollment type (MDM status). Not sure if you want to estimate this? I can add to planning poker.\n\nFigma link is in issue description."
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "In between in progress \u003c\u003e in review \u003c\u003e in design. PR open, just need some confirmation on specs "
          }
        ],
        "issueNumber": 31329,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcX9VU",
        "comments": [
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "Weird behavior for sure -- I thought it was put in boxes only if there were multiple versions installed but I guess not!"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "If we want to just add a grey box around this, it's a EST: 1 FE only and should take 10 minutes.\n\nFrom #20638:\n```\n  // special case when we dont have installed versions. We can only show the\n  // software type atm.\n  if (!installed_versions || installed_versions.length === 0) {\n    return (\n      \u003cdiv className={`${baseClass}__software-details`}\u003e\n        \u003cDataSet\n          title=\"Type\"\n          value={formatSoftwareType({ source: software.source })}\n        /\u003e\n      \u003c/div\u003e\n    );\n  }\n```"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Given the above movement, looks like this has been estimated, so moving forward."
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "@RachelElysia I'm confused. I don't get these modals when I go to Host details \u003e Software\n\nI only a modal if I look in Fleet desktop at the Software tab. I don't see anywhere in Self-service that I would get this modal, and \"Available for install\" isn't a thing anymore in Host details \u003e Software. Is that the only place this is applied? Or am I missing something?"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@RachelElysia TODO confirm that we can no longer access this UI. If that's confirmed, close this."
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "Still a TODO on my list, no time today, will do second thing on Monday."
          }
        ],
        "issueNumber": 30232,
        "changeType": "modified"
      },
      {
        "assignees": [
          "xpkoala",
          "PezHub",
          "jmwatts"
        ],
        "content": {
          "body": "\n# Goal: easy-to-follow test steps for checking a release manually\n\n# Important reference data\n\n1. [fleetctl preview setup](https://fleetdm.com/fleetctl-preview)\n2. [permissions documentation](https://fleetdm.com/docs/using-fleet/permissions) \n3. premium tests require license key (needs renewal) `fleetctl preview --license-key=eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJGbGVldCBEZXZpY2UgTWFuYWdlbWVudCBJbmMuIiwiZXhwIjoxNjQwOTk1MjAwLCJzdWIiOiJkZXZlbG9wbWVudCIsImRldmljZXMiOjEwMCwibm90ZSI6ImZvciBkZXZlbG9wbWVudCBvbmx5IiwidGllciI6ImJhc2ljIiwiaWF0IjoxNjIyNDI2NTg2fQ.WmZ0kG4seW3IrNvULCHUPBSfFdqj38A_eiXdV_DFunMHechjHbkwtfkf1J6JQJoDyqn8raXpgbdhafDwv3rmDw`\n4. premium tests require license key (active - Expires Sunday, January 1, 2023 12:00:00 AM) `fleetctl preview --license-key=eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJGbGVldCBEZXZpY2UgTWFuYWdlbWVudCBJbmMuIiwiZXhwIjoxNjcyNTMxMjAwLCJzdWIiOiJGbGVldCBEZXZpY2UgTWFuYWdlbWVudCIsImRldmljZXMiOjEwMCwibm90ZSI6ImZvciBkZXZlbG9wbWVudCBvbmx5IiwidGllciI6InByZW1pdW0iLCJpYXQiOjE2NDI1MjIxODF9.EGHQjIzM73YyMbnCruswzg360DEYCsDi9uz48YcDwQHq90BabGT5PIXRiculw79emGj5sk2aKgccTd2hU5J7Jw`\n\n# Smoke Tests\nSmoke tests are limited to core functionality and serve as a pre-release final review. If smoke tests are failing, a release cannot proceed.\n\n## Fleet core:\n\n**Fleet version** (Head to the \"My account\" page in the Fleet UI or run `fleetctl version`):\n\n**Web browser** _(e.g. Chrome 88.0.4324)_: \n\n### Prerequisites\n\n1. `fleetctl preview` is set up and running the desired test version using [`--tag` parameters.](https://fleetdm.com/handbook/engineering#run-fleet-locally-for-qa-purposes)\n2. Unless you are explicitly testing older browser versions, browser is up to date.\n3. Certificate \u0026 flagfile are in place to create new host.\n4. In your browser, clear local storage using devtools.\n\n### Orchestration\n\u003ctable\u003e\n\u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eUpdate flow\u003c/td\u003e\u003ctd\u003e\n\n1. remove all fleet processes/agents/etc using `fleetctl preview reset` for a clean slate\n2. run `fleetctl preview` with no tag for latest stable\n3. create a host/query to later confirm upgrade with\n4. STOP fleet-preview-server instances in containers/apps on Docker\n5. run `fleetctl preview` with appropriate testing tag \u003c/td\u003e\u003ctd\u003eAll previously created hosts/queries are verified to still exist\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eLogin flow\u003c/td\u003e\u003ctd\u003e\n\n1. navigate to the login page and attempt to login with both valid and invalid credentials to verify some combination of expected results.\n2. navigate to the login page and attempt to login with both valid and invalid sso credentials to verify expected results.\n\u003c/td\u003e\u003ctd\u003e\n\n1. text fields prompt when blank\n2. correct error message is \"authentication failed\"\n3. forget password link prompts for email\n4. valid credentials result in a successful login.\n5. valid sso credentials result in a successful login\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003ePacks flow\u003c/td\u003e\u003ctd\u003eVerify management, operation, and logging of [\"2017 packs\"](https://fleetdm.com/handbook/company/why-this-way#why-does-fleet-support-query-packs).\u003c/td\u003e\u003ctd\u003e\n\n1. Packs successfully run on host machines after migrations \n2. New Packs can be created\n3. Packs can be edited and deleted\n4. Packs results information is logged\n \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eLog destination flow\u003c/td\u003e\u003ctd\u003eVerify log destination for software, query, policy, and packs.\u003c/td\u003e\u003ctd\u003e\n\n1. Software, query, policy, and packs logs are successfully sent to external log destinations\n2. Software, query, policy, and packs logs are successfully sent to Filesystem log destinations\n \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eOS settings\u003c/td\u003e\u003ctd\u003eVerify OS settings functionality\u003c/td\u003e\u003ctd\u003e\n\n1. Verify able to configure Disk encryption (macOS, Windows, \u0026 Linux).\n2. Verify host enrolled with Disk encryption enforced successfully encrypts.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003c/table\u003e\n\n### MDM\n\u003ctable\u003e\n\u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eMDM enrollment flow\u003c/td\u003e\u003ctd\u003eVerify MDM enrollments, run MDM commands\u003c/td\u003e\u003ctd\u003e\n  \n1. Erase an ADE-eligible macOS host and verify able to complete automated enrollment flow.\n2. With Windows MDM turned On, enroll a Windows host and verify MDM is turned On for the host.\n3. Verify able to run MDM commands on both macOS and Windows hosts from the CLI.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eMDM migration flow\u003c/td\u003e\u003ctd\u003eVerify MDM migration for ADE and non-ADE hosts\u003c/td\u003e\u003ctd\u003e\n  \n1. Turn off MDM on an ADE-eligible macOS host and verify that the native, \"Device Enrollment\" macOS notification appears.\n2. On the My device page, follow the \"Turn on MDM\" instructions and verify that MDM is turned on.\n3. Turn off MDM on a non ADE-eligible macOS host.\n4. On the My device page, follow the \"Turn on MDM\" instructions and verify that MDM is turned on.\n5. Verify Windows host migrates from 3rd party MDM to Fleet when automatic migration is turned on.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eOS settings\u003c/td\u003e\u003ctd\u003eVerify OS settings functionality\u003c/td\u003e\u003ctd\u003e\n\n1. Verify Profiles upload/download/delete (macOS \u0026 Windows).\n2. Verify Profiles are delivered to host and applied. \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eSetup experience\u003c/td\u003e\u003ctd\u003eVerify macOS Setup experience\u003c/td\u003e\u003ctd\u003e\n\n1. Configure End user authentication.\n3. Upload a Bootstrap package.\n4. Add software (FMA, VPP, \u0026 Custom pkg)\n5. Add a script\n6. Enroll an ADE-eligible macOS host and verify successful authentication.\n7. Verify Bootstrap package is delivered.\n8. Verify SwiftDialogue window displays.\n9. Verify software installs and script runs.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eOS updates\u003c/td\u003e\u003ctd\u003eVerify OS updates flow\u003c/td\u003e\u003ctd\u003e\n\n1. Configure OS updates (macOS \u0026 Windows).\n2. Verify on-device that Nudge prompt appears (macOS 13).\n3. Verify enforce minimumOS occurs during enrollment (macOS 14+).\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eiOS/iPadOS\u003c/td\u003e\u003ctd\u003eVerify enrollment, profiles, \u0026 software installs\u003c/td\u003e\u003ctd\u003e\n\n1. Verify ADE enrollment.\n2. Verify OTA enrollment.\n3. Verify Profiles are delivered to host and applied.\n4. Verify VPP apps install \u0026 display correctly in Activity feed.\n5. Verify `Turn Off MDM` for BYOD \u0026 ADE hosts.\n \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\n\u003ctr\u003e\u003ctd\u003eLock \u0026 Wipe\u003c/td\u003e\u003ctd\u003eVerify hosts can be locked \u0026 wiped\u003c/td\u003e\u003ctd\u003e\n\n1. Verify locking a host from the Fleet UI (macOS, Windows, \u0026 Linux)\n2. Verify unlocking a host from the Fleet UI (macOS, Windows, \u0026 Linux)\n3. Verify wiping a host from the Fleet UI (macOS, Windows, \u0026 Linux)\n4. Verify wiping and locking hosts using `fleetctl` (macOS, Windows, \u0026 Linux)\n \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\n\u003ctr\u003e\u003ctd\u003eCertificates Upload\u003c/td\u003e\u003ctd\u003eAPNs cert and ABM token renewal workflow\u003c/td\u003e\u003ctd\u003e\n\n1. Renew APNs Certificate.\n2. Renew ABM Token.\n3. Ensure ADE hosts can enroll.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003c/table\u003e\n\n### Software\n\u003ctable\u003e\n\u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eQuery flow\u003c/td\u003e\u003ctd\u003eCreate, edit, run, and delete queries. \u003c/td\u003e\u003ctd\u003e\n\n1. permissions regarding creating/editing/deleting queries are up to date with documentation\n2. syntax errors result in error messaging\n3. queries can be run manually \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eHost Flow\u003c/td\u003e\u003ctd\u003eVerify a new host can be added and removed following modal instructions using your own device.\u003c/td\u003e\u003ctd\u003e\n\n1. Host is added via command line\n2. Host serial number and date added are accurate\n3. Host is not visible after it is deleted\n4. Warning and informational modals show when expected and make sense\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eMy device page\u003c/td\u003e\u003ctd\u003eVerify the end user's my device page loads successfully.\u003c/td\u003e\u003ctd\u003e\n\n1. Clicking the Fleet desktop item, then \"My device\" successfully loads the my device page.\n2. The \"My device\" page is populated correctly and as expected. \n3. Styling and padding appears correct.\n \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eScripts\u003c/td\u003e\u003ctd\u003eVerify script library and execution\u003c/td\u003e\u003ctd\u003e\n\n1. Verify able to run a script on all host types from CLI.\n2. Verify scripts library upload/download/delete.\n3. From Host details (macOS, Windows, \u0026 Linux) run a script that should PASS, verify.\n4. From Host details (macOS, Windows, \u0026 Linux) run a script that should FAIL, verify.\n5. Verify UI loading state and statuses for scripts.\n8. Disable scripts globally and verify unable to run.\n9. Verify scripts display correctly in Activity feed.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eSoftware\u003c/td\u003e\u003ctd\u003eVerify software library and install / download\u003c/td\u003e\u003ctd\u003e\n\n1. Verify software library upload/download/delete.\n2. From Host details (macOS, Windows, \u0026 Linux) run an install that should PASS, verify.\n3. From My Device (macOS, Windows, \u0026 Linux) software tab should have self-service items available, verify.\n4. Verify UI loading state and statuses for installing software.\n7. Verify software installs display correctly in Activity feed.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\n\u003ctr\u003e\u003ctd\u003eMigration Test\u003c/td\u003e\u003ctd\u003eVerify Fleet can migrate to the next version with no issues.\u003c/td\u003e\u003ctd\u003e\n\nUsing the github action https://github.com/fleetdm/fleet/actions/workflows/db-upgrade-test.yml\n1. Using the most recent stable version of Fleet and `main`, click `Run workflow`\n2. Enter the Docker tag of Fleet starting version, e.g. 'v4.64.2'\n3. Enter the Docker tag of Fleet version to upgrade to, e.g. 'rc-minor-fleet-v4.65.0'\n4. Click `Run workflow`.\n5. Action should complete successfully.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003c/table\u003e\n\n### All Product Groups\n\u003ctable\u003e\n \u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eRelease blockers\u003c/td\u003e\u003ctd\u003eVerify there are no outstanding release blocking tickets.\u003c/td\u003e\u003ctd\u003e\n  \n1. Check [this](https://github.com/fleetdm/fleet/labels/~release%20blocker) filter to view all open `~release blocker` tickets.\n2. If any are found raise an alarm in the `#help-engineering` and `#g-mdm` (or `#g-endpoint-ops`)  channels.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\n\u003ctr\u003e\u003ctd\u003eLoad tests - minor releases only unless otherwise specified\u003c/td\u003e\u003ctd\u003eVerify all load test metrics are within acceptable range on final build of RC.\u003c/td\u003e\u003ctd\u003e\n  \n1. Check [this Google doc](https://docs.google.com/document/d/1V6QtFzcGDsLnn2PIvGin74DAxdAN_3likjxSssOMMQI/edit?tab=t.0#heading=h.15acjob4ji20) to review load test key metrics and checks.\n2. After all expected changes have been merged to the RC branch, two load tests will need to be run - a new instance with no data, and a migrated instance.\n3. For the new instance with no data, set up a load test environment using the RC branch and allow it at least 24hrs of run time.\n4. For the migrated instance, set up a load test environment on the previous minor release branch. Once the environment has been set up and stabilized, follow the instructions in [Deploying code changes to fleet](https://github.com/fleetdm/fleet/blob/main/infrastructure/loadtesting/terraform/readme.md#deploying-code-changes-to-fleet) to migrate to the RC branch. Monitor the metrics post-migration to determine if any performance issues arise.\n5. Record metrics in [this spreadsheet](https://docs.google.com/spreadsheets/d/1FOF0ykFVoZ7DJSTfrveip0olfyRQsY9oT1uXCCZmuKc/edit?usp=drive_link) for the two load test runs. \n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e \n\u003c/table\u003e\n\n### Notes\n\nIssues found new to this version:\n\nIssues found that reproduce in last stable version: \n\nWhat has not been tested:\n\nInclude any notes on whether issues should block release or not as needed:\n\n\u003cbr\u003e\n\u003cbr\u003e\n\n# `fleetd` agent:\n\nIncludes updates to: \n- Orbit: True / False\n- Desktop: True / False\n- Chrome extension: True / False\n\nList versions changes for any component updates below: \n\u003c!-- Remove items without updates --\u003e\n- Orbit `v1.xx.x` \u003e `v1.xx.x`\n- Desktop `v1.xx.x` \u003e `v1.xx.x`\n- Chrome extension `v1.xx.x` \u003e `v1.xx.x`\n\n## Testing gates for new `fleetd` release\n\n### Goal: Ensure new `fleetd` is tested and promoted from local \u003e edge \u003e stable channels\n\n1. Build a new `fleetd` from the release candidate branch as needed for Orbit, Desktop, and Chrome Extension.\n\n\u003ctable\u003e\n\u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e`fleetd` local testing\u003c/td\u003e\n\u003ctd\u003e\n1. Following [Testing TUF]([url](https://github.com/fleetdm/fleet/blob/main/tools/tuf/test/README.md)) instructions create binaries for Mac, Windows, and Ubuntu using your local TUF repository and install on macOS, Linux, and Windows hosts.\u003cbr\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n1. Confirm the hosts install with the updated version and are working correctly.\u003cbr\u003e\n2. Confirm any new features and/or bug fixes associated with this release are working as intended.\u003cbr\u003e\n\u003c/td\u003e\n\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctd\u003e`fleetd` auto-update tests\u003c/td\u003e\n\u003ctd\u003e\n1. Conduct the [`fleetd` auto-update n+1 test]([url](https://github.com/fleetdm/fleet/blob/main/tools/tuf/test/Fleetd-auto-update-test-guide.md))\u003cbr\u003e\n2. QA certifies new release by commenting in issue.\u003cbr\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n1. Agent successfully auto-updates.\u003cbr\u003e\n2. Issue is certified by QA.\u003cbr\u003e\n\u003c/td\u003e\n\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctd\u003e`fleetd` tests\u003c/td\u003e\n\u003ctd\u003e\n1. Set up a host in your instance to receive updates from the `edge` channels.\u003cbr\u003e\n2. Work with engineer leading the release to push changes to the `edge` channel.\u003cbr\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n1. Confirm the hosts running on the edge channel receive the update and are working correctly.\u003cbr\u003e\n2. Confirm any new features and/or bug fixes associated with this release are working as intended.\u003cbr\u003e\n\u003c/td\u003e\n\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\u003c/tr\u003e\n\n\u003c/table\u003e\n\n## New `fleetd` pushed to edge\n\n### Goal: Ensure `fleetd` version pushed to edge is working with the current released version of fleet.\n\n1. Fleet server is running the latest released version available on [Fleet Releases](https://github.com/fleetdm/fleet/releases) page.\n2. Set Agent options to use edge in the Fleet server configuration. For example:\u003cbr\u003e\n `update_channels:` \u003cbr\u003e\n  `osqueryd: edge` \u003cbr\u003e\n  `orbit: edge` \u003cbr\u003e\n  `desktop: edge` \u003cbr\u003e\n\u003ctable\u003e\n\u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n \u003ctr\u003e\u003ctd\u003eQuery flow\u003c/td\u003e\u003ctd\u003eRun queries. \u003c/td\u003e\u003ctd\u003e\n1. Queries can be run manually \n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eHost Flow\u003c/td\u003e\u003ctd\u003eVerify a new host can be added using your own device.\u003c/td\u003e\u003ctd\u003e\n1. Hosts can enroll and report correct version of `fleetd` (orbit, osquery, desktop).\u003cbr\u003e\n2. Refetching host vitals completes and returns updated information.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eMy device page\u003c/td\u003e\u003ctd\u003eVerify the end user's my device page loads successfully.\u003c/td\u003e\u003ctd\u003e\n1. Clicking the Fleet desktop item, then \"My device\" successfully loads the my device page.\u003cbr\u003e\n2. The \"My device\" page is populated correctly and as expected. \u003cbr\u003e\n3. Styling and padding appears correct. \n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eScripts\u003c/td\u003e\u003ctd\u003eVerify script execution\u003c/td\u003e\u003ctd\u003e\n1. Verify able to run a script on all host types from CLI.\u003cbr\u003e\n2. From Host details (macOS, Windows, \u0026 Linux) run a script that should PASS, verify.\u003cbr\u003e\n3. From Host details (macOS, Windows, \u0026 Linux) run a script that should FAIL, verify.\u003cbr\u003e\n4. Verify script results display correctly in Activity feed.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eSoftware\u003c/td\u003e\u003ctd\u003eVerify software install / download\u003c/td\u003e\u003ctd\u003e\n1. From Host details (macOS, Windows, \u0026 Linux) run an install that should PASS, verify.\u003cbr\u003e\n2. From My Device (macOS, Windows, \u0026 Linux) software tab should have self-service items available, verify.\u003cbr\u003e\n3. Verify software installs display correctly in Activity feed.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eOS settings\u003c/td\u003e\u003ctd\u003eVerify OS settings functionality\u003c/td\u003e\u003ctd\u003e\n1. Verify able to configure Disk encryption (macOS, Windows, \u0026 Linux).\u003cbr\u003e\n2. Verify host enrolled with Disk encryption enforced successfully encrypts.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003ePacks flow\u003c/td\u003e\u003ctd\u003eVerify management, operation, and logging of [\"2017 packs\"](https://fleetdm.com/handbook/company/why-this-way#why-does-fleet-support-query-packs).\u003c/td\u003e\u003ctd\u003e\n1. Packs successfully run on host machines after migrations \u003cbr\u003e\n2. New Packs can be created. \u003cbr\u003e\n3. Packs can be edited and deleted \u003cbr\u003e\n4. Packs results information is logged\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003c/table\u003e\n  \n# Notes\n\nIssues found new to this version:\n\nIssues found that reproduce in last stable version: \n\nWhat has not been tested:\n\n\nInclude any notes on whether issues should block release or not as needed:\n",
          "number": 31533,
          "repository": "fleetdm/fleet",
          "title": "Release QA: 4.71.1",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/31533"
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgdOJOc",
        "labels": [
          ":release",
          "#g-mdm",
          "#g-orchestration",
          "#g-software"
        ],
        "milestone": {
          "title": "4.71.1"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "status": "Done",
        "title": "Release QA: 4.71.1",
        "comments": [
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "```\nFLEET_VERSION_A=v4.71.0 FLEET_VERSION_B=rc-patch-fleet-v4.71.1 go test -v\n--- PASS: TestUpgradeAToB (65.24s)\nPASS\nok  \tgithub.com/fleetdm/fleet/v4/test/upgrade\t65.258s\n```\n\n```\nFLEET_VERSION_A=v4.70.1 FLEET_VERSION_B=rc-patch-fleet-v4.71.1 go test -v\n--- PASS: TestUpgradeAToB (54.12s)\nPASS\nok  \tgithub.com/fleetdm/fleet/v4/test/upgrade\t54.132s\n```\n\n```\nFLEET_VERSION_A=v4.70.0 FLEET_VERSION_B=rc-patch-fleet-v4.71.1 go test -v\n--- PASS: TestUpgradeAToB (52.26s)\nPASS\nok  \tgithub.com/fleetdm/fleet/v4/test/upgrade\t52.281s\n```\n\n```\nFLEET_VERSION_A=v4.69.0 FLEET_VERSION_B=rc-patch-fleet-v4.71.1 go test -v\n--- PASS: TestUpgradeAToB (63.97s)\nPASS\nok  \tgithub.com/fleetdm/fleet/v4/test/upgrade\t63.988s\n```"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "All software smoke tests pass, Software gives 👍 \n\n🔴 NOTE: In 4.70.0 I was able to have a trailing `/` in my Fleet url (`/settings/organization/webaddress`) but in 4.71.0 and 4.71.1 it will not let me log in with SSO if that trailing slash is in the url. I had to remove it to be able to sign in with SSO.\n\ncc @georgekarrv  @getvictor "
          }
        ],
        "issueNumber": 31533,
        "changeType": "added"
      }
    ]
  },
  {
    "timestamp": "2025-08-02T19:04:32.107883478Z",
    "items": [
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdMZs8",
        "status": "✔️Awaiting QA",
        "comments": [
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "FYI @marko-lisica @mostlikelee I assigned Tim. Up to Tim to bring this through estimation.\n\n\u003cimg width=\"697\" height=\"262\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/66df103f-b840-4d35-ac61-62b442934c0f\" /\u003e"
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "\u003e FYI @marko-lisica @mostlikelee I assigned Tim. Up to Tim to bring this through estimation.\n\nCorrect, i'm DRI for anything Ready for Spec onward.   In many cases I'll delegate in those cases i'll re-assign the story."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@drvcodenta This is now spec'd; estimate is capacity allocation for my review. Feel free to self-assign (for some reason GitHub is fighting my ability to assign this to you), move from Waiting to In progress, and assign me for PR review when it's up. Thanks again!"
          },
          {
            "author": {
              "login": "drvcodenta"
            },
            "body": "I'm not a collaborator on the repository or part of the organization/team with write access, so GitHub isn’t letting me self-assign this issue"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@drvcodenta Got it, that makes sense that I wasn't able to either. Either way, this is yours to move forward with as/when you see fit."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@drvcodenta Apparently there's a weird GitHub idiosyncrasy (bug? anti-abuse measure?) where external folks have to comment on the issue before they show up as a potential assignee, so your comment actually allowed me to assign you, which I've done. Thanks @lukeheath for assisting with troubleshooting that one :)\n\nMoving this to Ready now, and you can move to In progress when you're actively working on it."
          },
          {
            "author": {
              "login": "drvcodenta"
            },
            "body": "Hey! I’ve started work on this — PR here: [#31370](https://github.com/fleetdm/fleet/pull/31370).  \nI've updated the PR description to reference this issue instead, as it’s the more accurate one.  \nAlso, I don’t have permission to move the issue to “In progress,” just FYI. Let me know if anything else is needed. Thanks!\n"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@drvcodenta Thanks! Didn't know that had already been approved. I've gone ahead and merged it and am moving this to Awaiting QA."
          },
          {
            "author": {
              "login": "drvcodenta"
            },
            "body": "Thanks🙏🤗"
          }
        ],
        "issueNumber": 31377,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdOJOc",
        "labels": [
          ":release",
          "#g-mdm",
          ":demo",
          "#g-orchestration",
          "#g-software"
        ],
        "issueNumber": 31533,
        "changeType": "modified"
      },
      {
        "assignees": [
          "iansltx"
        ],
        "content": {
          "body": "**Fleet version**: Fleet v4.70.0\n**Orbit version**: Orbit v1.45.1\n**Osquery version**: Osquery v5.18.1\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\nCustomer is experiencing issues when attempting to download a tarball to the variable install path on the fleet instance. Attempted several ways using scripts inside of the tarball, but the script is never accessed.\n\nError Messsage: \n`Fleet failed to install Code42_12.6.0_15252000061260_33_Linux.tgz (Code42_12.6.0_15252000061260_33_Linux.tgz) on ceppenge-l-pf4bx6pl (less than 10 seconds ago).`\n\nTODO\n\n### 🧑‍💻  Steps to reproduce\n\u003c!-- Provide step-by-step actions of how to recreate this bug in a clean install of Fleet. (This helps others understand and fix it more quickly.) --\u003e\n1. Upload Code42 tar archive file to Fleet library\n2. Include an install script ( can just use `mv $INSTALLER_PATH/* /usr/local`)\n3. Include an uninstall script (can just use `rm -rf /usr/local/code42-install`)\n4. Attempt to install on Linux host\n \n \n### 🕯️ More info _(optional)_\nCustomer provided package and install script used during testing, and can provide outside of issue\n\nNOTE: This is not happening for all tar archive files, but is happening for this specific one.",
          "number": 31338,
          "repository": "fleetdm/fleet",
          "title": "Errors downloading tarball to $INSTALLER_PATH",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/31338"
        },
        "estimate": 1,
        "id": "PVTI_lADOBDAnic4A4BEUzgdO8_M",
        "labels": [
          "bug",
          ":release",
          "~released bug",
          ":help-customers",
          ":incoming",
          "customer-cisneros",
          "#g-software"
        ],
        "repository": "https://github.com/fleetdm/fleet",
        "status": "✅ Ready for release",
        "title": "Errors downloading tarball to $INSTALLER_PATH",
        "comments": [
          {
            "author": {
              "login": "Sampfluger88"
            },
            "body": "Linked to Unthread ticket:\n\u003e [Request to update documentation for $INSTALLER_PATH variable #7439](https://fleetdm.unthread.io/dashboard/inbox/all/conversations/cf4ea9d0-d53c-4f25-9456-98ff1c558795)"
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "@reeblybeebly can you please enter reproduce steps?"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "@reeblybeebly can you also provide the install details for the failed install activity feed item? In the host record there should be an informational icon that can be clicked to show details. \n\n\u003cimg width=\"866\" height=\"427\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/bdfecad5-fd79-467b-bb0a-28d203972532\" /\u003e\n\nPlease also provide the orbit log from the time of the failed install for the host the software was to be installed on. On Linux systems this is usually in:\nDebian systems: `/var/log/syslog`\nCentOS: `/var/log/messages`\nFedora: `journalctl -u orbit`\n\nThank you!\n"
          },
          {
            "author": {
              "login": "reeblybeebly"
            },
            "body": "Providing [google drive link to customer provided package and install script](https://drive.google.com/drive/folders/1craEM0TSeTrcqntvqOdIQvdgTxDWCUWk?usp=drive_link) for further testing."
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "I am able to reproduce this on the latest Fleet and Orbit versions. Will need to test back to see if this is due to a recent change. \n\nError from orbit logs (with private info redacted)\n\n```\nINF about to download software installer from URL installerID=10940530-121d-4308-9be8-90468be4aedc runner=installer\nINF done downloading installerID=10940530-121d-4308-9be8-90468be4aedc runner=installer\nINF detected tar.gz archive, extracting to subdirectory installerID=10940530-121d-4308-9be8-90468be4aedc runner=installer\nERR failed extract .tar.gz archive error=\"failed to create \\\"code42-install/install.sh\\\": open /tmp/535331487/extracted/code42-install/install.sh: no such file or directory\" installerID=10940530-121d-4308-9be8-90468be4aedc runner=installer\nERR failures found when processing installers errs=[\"failed to create \\\"code42-install/install.sh\\\": open /tmp/535331487/extracted/code42-install/install.sh: no such file or directory\"] runner=installer\nERR running config receivers error=\"failed to create \\\"code42-install/install.sh\\\": open /tmp/535331487/extracted/code42-install/install.sh: no such file or directory\"\n```\n\nThis is the same issue I am seeing. The installer downloads, we attempt to extract, but fails to locate expected files."
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "I was able to get the file to install by first extracting the tar file to `/` and then re-archiving it:\n\n```\ncd /\ncp -R /Users/janis/Downloads/code42-install .\ntar -czvf code42.tar.gz code42-install\n```\n\nThen uploaded the resulting package to Fleet, and installed. \n\nSounds like we have an idea of how to fix this so a manual work around won't be necessary. "
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Was able to repro the error by adding a file in a subdir directly to a brand new tarball without specifying the top level directory:\n\n[test.tar.gz](https://github.com/user-attachments/files/21559956/test.tar.gz)\n\nSo this is much easier to repro than I initially thought."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "The fix I have implemented ensures each dir exists before extracting files into it. That means we have at minimum an extra `stat` per file extracted but in exchange it'll work with all tarballs and it's a low-impact fix. If we need to optimize later to keep track of dirs we know exist, this fix doesn't prevent us from doing that."
          }
        ],
        "issueNumber": 31338,
        "changeType": "added"
      },
      {
        "content": {
          "body": "**Fleet version**: 4.71.0\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\nInstall fails. UI says package failed to download. Orbit logs show:\n```\n2025-08-01T12:55:07.448501-05:00 nimda-Vivobook-ASUSLaptop-X1404VA-X1404VA orbit[4552]: 2025-08-01T12:55:07-05:00 INF about to download software installer from Fleet installerID=2a8f778e-8cb4-4e14-95de-63382710af86 runner=installer\n2025-08-01T12:55:08.067596-05:00 nimda-Vivobook-ASUSLaptop-X1404VA-X1404VA orbit[4552]: 2025-08-01T12:55:08-05:00 INF done downloading installerID=2a8f778e-8cb4-4e14-95de-63382710af86 runner=installer\n2025-08-01T12:55:08.067821-05:00 nimda-Vivobook-ASUSLaptop-X1404VA-X1404VA orbit[4552]: 2025-08-01T12:55:08-05:00 INF software installer downloaded installerID=2a8f778e-8cb4-4e14-95de-63382710af86 installerPath=/tmp/1721719821/timeshift-22.06.6.tar.gz runner=installer\n2025-08-01T12:55:08.067910-05:00 nimda-Vivobook-ASUSLaptop-X1404VA-X1404VA orbit[4552]: 2025-08-01T12:55:08-05:00 INF detected tar.gz archive, extracting to subdirectory installerID=2a8f778e-8cb4-4e14-95de-63382710af86 runner=installer\n2025-08-01T12:55:08.069230-05:00 nimda-Vivobook-ASUSLaptop-X1404VA-X1404VA orbit[4552]: 2025-08-01T12:55:08-05:00 ERR failed extract .tar.gz archive error=\"unknown flag type \\\"pax_global_header\\\": 103\" installerID=2a8f778e-8cb4-4e14-95de-63382710af86 runner=installer\n2025-08-01T12:55:08.181754-05:00 nimda-Vivobook-ASUSLaptop-X1404VA-X1404VA orbit[4552]: 2025-08-01T12:55:08-05:00 ERR failures found when processing installers errs=[\"unknown flag type \\\"pax_global_header\\\": 103\"] runner=installer\n2025-08-01T12:55:08.182137-05:00 nimda-Vivobook-ASUSLaptop-X1404VA-X1404VA orbit[4552]: 2025-08-01T12:55:08-05:00 ERR running config receivers error=\"unknown flag type \\\"pax_global_header\\\": 103\"\n```\n\n### 🛠️ To fix\n\nSkip unknown header types rather than failing on them.\n\nProduct designer: @iansltx \u003c!-- Who is the product designer to contact if folks have questions about this fix? --\u003e\n\n### 🧑‍💻  Steps to reproduce\n\u003c!-- Provide step-by-step actions of how to recreate this bug in a clean install of Fleet. (This helps others understand and fix it more quickly.) --\u003e\n1. Upload timeshift tarball (can be found here: https://drive.google.com/file/d/1nKWzZBi65P1AUouvvvEYkbZ_EljXilI6/view?usp=drive_link )\n2. Include an install script ( can just use `mv $INSTALLER_PATH/* /usr/local`)\n3. Include an uninstall script (can just use `rm -rf /usr/local/timeshift-22.06.6`)\n4. Attempt to install on Linux host\n5. Review UI Failure and orbit logs\n\n### 🕯️ More info _(optional)_\nExtracting the file manually to `/tmp` and then re-archiving the file, then uploading to Fleet allows the package to be installed. \n```\ncd /tmp\nsudo cp -R /Users/janis/Downloads/timeshift-22.06.6 .\ntar -czvf timeshift-22.06.6.tar.gz timeshift-22.06.6\n```\n\n\u003c!-- If this is a performance issue, follow these steps to generate and attach a debug archive: https://fleetdm.com/docs/using-fleet/monitoring-fleet#debugging-performance-issues --\u003e\n",
          "number": 31525,
          "repository": "fleetdm/fleet",
          "title": "pax_global_header error when attempting to install tar.gz",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/31525"
        },
        "estimate": 1,
        "id": "PVTI_lADOBDAnic4A4BEUzgdO96U",
        "labels": [
          "bug",
          "~agent",
          ":release",
          "~released bug",
          "#g-software"
        ],
        "repository": "https://github.com/fleetdm/fleet",
        "status": "✅ Ready for release",
        "title": "pax_global_header error when attempting to install tar.gz",
        "issueNumber": 31525,
        "changeType": "added"
      }
    ]
  },
  {
    "timestamp": "2025-08-03T07:05:39.358878086Z",
    "items": [
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdO8_M",
        "milestone": {
          "title": "Fleetd-1.46.0"
        },
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "status": "🦤 ‎In review",
        "issueNumber": 31338,
        "changeType": "modified"
      },
      {
        "assignees": [
          "iansltx"
        ],
        "id": "PVTI_lADOBDAnic4A4BEUzgdO96U",
        "milestone": {
          "title": "Fleetd-1.46.0"
        },
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "status": "🦤 ‎In review",
        "issueNumber": 31525,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdOJOc",
        "comments": [
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "```\nFLEET_VERSION_A=v4.71.0 FLEET_VERSION_B=rc-patch-fleet-v4.71.1 go test -v\n--- PASS: TestUpgradeAToB (65.24s)\nPASS\nok  \tgithub.com/fleetdm/fleet/v4/test/upgrade\t65.258s\n```\n\n```\nFLEET_VERSION_A=v4.70.1 FLEET_VERSION_B=rc-patch-fleet-v4.71.1 go test -v\n--- PASS: TestUpgradeAToB (54.12s)\nPASS\nok  \tgithub.com/fleetdm/fleet/v4/test/upgrade\t54.132s\n```\n\n```\nFLEET_VERSION_A=v4.70.0 FLEET_VERSION_B=rc-patch-fleet-v4.71.1 go test -v\n--- PASS: TestUpgradeAToB (52.26s)\nPASS\nok  \tgithub.com/fleetdm/fleet/v4/test/upgrade\t52.281s\n```\n\n```\nFLEET_VERSION_A=v4.69.0 FLEET_VERSION_B=rc-patch-fleet-v4.71.1 go test -v\n--- PASS: TestUpgradeAToB (63.97s)\nPASS\nok  \tgithub.com/fleetdm/fleet/v4/test/upgrade\t63.988s\n```"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "All software smoke tests pass, Software gives 👍 \n\n🔴 NOTE: In 4.70.0 I was able to have a trailing `/` in my Fleet url (`/settings/organization/webaddress`) but in 4.71.0 and 4.71.1 it will not let me log in with SSO if that trailing slash is in the url. I had to remove it to be able to sign in with SSO.\n\ncc @georgekarrv  @getvictor "
          },
          {
            "author": {
              "login": "getvictor"
            },
            "body": "\u003e All software smoke tests pass, Software gives 👍\n\u003e \n\u003e 🔴 NOTE: In 4.70.0 I was able to have a trailing `/` in my Fleet url (`/settings/organization/webaddress`) but in 4.71.0 and 4.71.1 it will not let me log in with SSO if that trailing slash is in the url. I had to remove it to be able to sign in with SSO.\n\u003e \n\u003e cc [@georgekarrv](https://github.com/georgekarrv) [@getvictor](https://github.com/getvictor)\n\nI filed #31545 for this issue. \n\nI recommend we fix it in 4.71.1 since customers may hit it with regular SSO and MDM SSO.\ncc: @ksatter "
          }
        ],
        "issueNumber": 31533,
        "changeType": "modified"
      }
    ]
  },
  {
    "timestamp": "2025-08-03T19:05:02.482658558Z",
    "items": [
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdOJOc",
        "labels": [
          ":release",
          "#g-mdm",
          "#g-orchestration",
          "#g-software"
        ],
        "issueNumber": 31533,
        "changeType": "modified"
      }
    ]
  },
  {
    "timestamp": "2025-08-04T19:06:31.527646958Z",
    "items": [
      {
        "content": {
          "body": "**Fleet version**: 4.72.0\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\n\n\u003cimg width=\"1467\" height=\"581\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/7a3fcf72-5f5c-40e9-8a49-e4cdf74e7ccb\" /\u003e\n\n### 🛠️ To fix\n\u003c!-- Add the expected fix here. If you're not sure, leave this blank for product to specify.  --\u003e\nAdd uninstall action\n\nProduct designer: @RachelElysia \u003c!-- Who is the product designer to contact if folks have questions about this fix? --\u003e\n\n### 🧑‍💻  Steps to reproduce\n\u003c!-- Provide step-by-step actions of how to recreate this bug in a clean install of Fleet. (This helps others understand and fix it more quickly.) --\u003e\n1. Upload a tar.gz archive to a team's library\n2. Include an install and uninstall script, as they are required\n3. Install the tar.gz on a host\n4. After inventory is refetched and the package is showing as installed, look for uninstall action\n\n### 🕯️ More info _(optional)_\n\u003c!-- Add any additional details you think could be relevant to solving or reproducing the bug (e.g., \"this does not reproduce when...\") --\u003e\n\nThis was an item in  #30240\n\u003e Make sure that when the tarball is installed by Fleet, show Installed status + Reinstall and Uninstall actions.\n\n\u003c!-- If this is a performance issue, follow these steps to generate and attach a debug archive: https://fleetdm.com/docs/using-fleet/monitoring-fleet#debugging-performance-issues --\u003e\n",
          "number": 31578,
          "repository": "fleetdm/fleet",
          "title": "Tar.gz files do not have uninstall action available in Library or Self Service",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/31578"
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgdSLuM",
        "labels": [
          "bug",
          ":release",
          "~unreleased bug",
          ":incoming",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-08T00:00:00Z",
          "title": "4.72.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "status": "Done",
        "title": "Tar.gz files do not have uninstall action available in Library or Self Service",
        "issueNumber": 31578,
        "changeType": "added"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdDOeo",
        "status": "🐣 In progress",
        "issueNumber": 30357,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdAjcc",
        "milestone": {
          "dueOn": "2025-08-29T00:00:00Z",
          "title": "4.73.0"
        },
        "status": "🥚 Ready",
        "comments": [
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "Confirmed during 8/4 standup:: This was previously approved in #31384, but since much of the code has been in flux, I am holding off until 4.72 is completely QAed and this PR will solely be a code organization PR and no changes to ensure another deep dive QA will be unnecessary"
          }
        ],
        "issueNumber": 31309,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdCntE",
        "status": "✅ Ready for release",
        "comments": [
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "This was surfaced with BYOD Apple devices. I tagged it with g-software but it could be `#g-mdm`\n@georgekarrv @mostlikelee preference on who tackles this one?\n\nWhen a BYOD (personal) iPhone is enrolled, we only collect inventory for apps that Fleet installs (Managed apps). \nWe are currently showing \"Vulnerabilities are not supported for this type of host\" as the empty state for Inventory, but we should be showing a message telling the user that there are no apps displayed and that only managed apps are reported in inventory, unless they have added the vulnerabilities filter (then it makes sense to show the no vulnerabilities empty state).\n\n\u003cimg width=\"1186\" height=\"374\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/8c7dc1a7-ac0e-497a-91df-08dc8fb31702\" /\u003e"
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "@georgekarrv we're going to take this.  removing it off your board"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "\u003e When a BYOD (personal) iPhone is enrolled, we only collect inventory for apps that Fleet installs (Managed apps).\nWe are currently showing \"Vulnerabilities are not supported for this type of host\" as the empty state for Inventory, but we should be showing a message telling the user that there are no apps displayed and that only managed apps are reported in inventory, unless they have added the vulnerabilities filter (then it makes sense to show the no vulnerabilities empty state).\n\nAbout to put in a PR to show the generic No software detected empty state (plus tests). @marko-lisica if @jmwatts is correct for a different empty state, can you update this ticket if it's imperative for 4.72, or open a new ticket for 4.73 to track the new empty state?\n\nThank you!"
          },
          {
            "author": {
              "login": "marko-lisica"
            },
            "body": "@RachelElysia I just realized this is already on g-software board. I added a few more copy changes that depend on the platform and enrollment type (MDM status). Not sure if you want to estimate this? I can add to planning poker.\n\nFigma link is in issue description."
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "In between in progress \u003c\u003e in review \u003c\u003e in design. PR open, just need some confirmation on specs "
          },
          {
            "author": {
              "login": "AndreyKizimenko"
            },
            "body": "Confirmed that this has been addressed on the latest 4.72. Moving to Ready for Release \n\u003cimg width=\"3794\" height=\"1386\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/6060b878-7697-4a2f-b23d-620aefd1ea1b\" /\u003e"
          }
        ],
        "issueNumber": 31329,
        "changeType": "modified"
      },
      {
        "content": {
          "body": "**Fleet version**: 4.71.0\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\nInstall fails. UI says package failed to download. Orbit logs show:\n```\n2025-08-01T12:55:07.448501-05:00 nimda-Vivobook-ASUSLaptop-X1404VA-X1404VA orbit[4552]: 2025-08-01T12:55:07-05:00 INF about to download software installer from Fleet installerID=2a8f778e-8cb4-4e14-95de-63382710af86 runner=installer\n2025-08-01T12:55:08.067596-05:00 nimda-Vivobook-ASUSLaptop-X1404VA-X1404VA orbit[4552]: 2025-08-01T12:55:08-05:00 INF done downloading installerID=2a8f778e-8cb4-4e14-95de-63382710af86 runner=installer\n2025-08-01T12:55:08.067821-05:00 nimda-Vivobook-ASUSLaptop-X1404VA-X1404VA orbit[4552]: 2025-08-01T12:55:08-05:00 INF software installer downloaded installerID=2a8f778e-8cb4-4e14-95de-63382710af86 installerPath=/tmp/1721719821/timeshift-22.06.6.tar.gz runner=installer\n2025-08-01T12:55:08.067910-05:00 nimda-Vivobook-ASUSLaptop-X1404VA-X1404VA orbit[4552]: 2025-08-01T12:55:08-05:00 INF detected tar.gz archive, extracting to subdirectory installerID=2a8f778e-8cb4-4e14-95de-63382710af86 runner=installer\n2025-08-01T12:55:08.069230-05:00 nimda-Vivobook-ASUSLaptop-X1404VA-X1404VA orbit[4552]: 2025-08-01T12:55:08-05:00 ERR failed extract .tar.gz archive error=\"unknown flag type \\\"pax_global_header\\\": 103\" installerID=2a8f778e-8cb4-4e14-95de-63382710af86 runner=installer\n2025-08-01T12:55:08.181754-05:00 nimda-Vivobook-ASUSLaptop-X1404VA-X1404VA orbit[4552]: 2025-08-01T12:55:08-05:00 ERR failures found when processing installers errs=[\"unknown flag type \\\"pax_global_header\\\": 103\"] runner=installer\n2025-08-01T12:55:08.182137-05:00 nimda-Vivobook-ASUSLaptop-X1404VA-X1404VA orbit[4552]: 2025-08-01T12:55:08-05:00 ERR running config receivers error=\"unknown flag type \\\"pax_global_header\\\": 103\"\n```\n\n### 🛠️ To fix\n\nSkip unknown header types rather than failing on them.\n\nProduct designer: @iansltx \u003c!-- Who is the product designer to contact if folks have questions about this fix? --\u003e\n\n### 🧑‍💻  Steps to reproduce\n\u003c!-- Provide step-by-step actions of how to recreate this bug in a clean install of Fleet. (This helps others understand and fix it more quickly.) --\u003e\n1. Upload timeshift tarball (can be found here: https://drive.google.com/file/d/1nKWzZBi65P1AUouvvvEYkbZ_EljXilI6/view?usp=drive_link )\n2. Include an install script ( can just use `mv $INSTALLER_PATH/* /usr/local`)\n3. Include an uninstall script (can just use `rm -rf /usr/local/timeshift-22.06.6`)\n4. Attempt to install on Linux host\n5. Review UI Failure and orbit logs\n\n### 🕯️ More info _(optional)_\nExtracting the file manually to `/tmp` and then re-archiving the file, then uploading to Fleet allows the package to be installed. \n```\ncd /tmp\nsudo cp -R /Users/janis/Downloads/timeshift-22.06.6 .\ntar -czvf timeshift-22.06.6.tar.gz timeshift-22.06.6\n```\n\n\u003c!-- If this is a performance issue, follow these steps to generate and attach a debug archive: https://fleetdm.com/docs/using-fleet/monitoring-fleet#debugging-performance-issues --\u003e\n"
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgdO96U",
        "status": "✅ Ready for release",
        "comments": [
          {
            "author": {
              "login": "jmwatts"
            },
            "body": " **QA Notes**\n1. Upload timeshift tarball (can be found here: https://drive.google.com/file/d/1nKWzZBi65P1AUouvvvEYkbZ_EljXilI6/view?usp=drive_link )\n2. Include an install script ( can just use `mv $INSTALLER_PATH/* /usr/local`)\n3. Include an uninstall script (can just use `rm -rf /usr/local/timeshift-22.06.6`)\n4. Attempt to install on Linux host\n- [x] Confirm tar archive is extracted and installed to /usr/local/timeshift-22.06.6"
          }
        ],
        "issueNumber": 31525,
        "changeType": "modified"
      },
      {
        "content": {
          "body": "**Fleet version**: Fleet v4.70.0\n**Orbit version**: Orbit v1.45.1\n**Osquery version**: Osquery v5.18.1\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\nCustomer is experiencing issues when attempting to download a tarball to the variable install path on the fleet instance. Attempted several ways using scripts inside of the tarball, but the script is never accessed.\n\nError Messsage: \n`Fleet failed to install Code42_12.6.0_15252000061260_33_Linux.tgz (Code42_12.6.0_15252000061260_33_Linux.tgz) on ceppenge-l-pf4bx6pl (less than 10 seconds ago).`\n\nTODO\n\n### 🧑‍💻  Steps to reproduce\n\u003c!-- Provide step-by-step actions of how to recreate this bug in a clean install of Fleet. (This helps others understand and fix it more quickly.) --\u003e\n1. Upload Code42 tar archive file to Fleet library\n2. Include an install script ( can just use `mv $INSTALLER_PATH/* /usr/local`)\n3. Include an uninstall script (can just use `rm -rf /usr/local/code42-install`)\n4. Attempt to install on Linux host\n \n \n### 🕯️ More info _(optional)_\nCustomer provided package and install script used during testing, and can provide outside of issue\n\nNOTE: This is not happening for all tar archive files, but is happening for this specific one."
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgdO8_M",
        "status": "✅ Ready for release",
        "comments": [
          {
            "author": {
              "login": "Sampfluger88"
            },
            "body": "Linked to Unthread ticket:\n\u003e [Request to update documentation for $INSTALLER_PATH variable #7439](https://fleetdm.unthread.io/dashboard/inbox/all/conversations/cf4ea9d0-d53c-4f25-9456-98ff1c558795)"
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "@reeblybeebly can you please enter reproduce steps?"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "@reeblybeebly can you also provide the install details for the failed install activity feed item? In the host record there should be an informational icon that can be clicked to show details. \n\n\u003cimg width=\"866\" height=\"427\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/bdfecad5-fd79-467b-bb0a-28d203972532\" /\u003e\n\nPlease also provide the orbit log from the time of the failed install for the host the software was to be installed on. On Linux systems this is usually in:\nDebian systems: `/var/log/syslog`\nCentOS: `/var/log/messages`\nFedora: `journalctl -u orbit`\n\nThank you!\n"
          },
          {
            "author": {
              "login": "reeblybeebly"
            },
            "body": "Providing [google drive link to customer provided package and install script](https://drive.google.com/drive/folders/1craEM0TSeTrcqntvqOdIQvdgTxDWCUWk?usp=drive_link) for further testing."
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "I am able to reproduce this on the latest Fleet and Orbit versions. Will need to test back to see if this is due to a recent change. \n\nError from orbit logs (with private info redacted)\n\n```\nINF about to download software installer from URL installerID=10940530-121d-4308-9be8-90468be4aedc runner=installer\nINF done downloading installerID=10940530-121d-4308-9be8-90468be4aedc runner=installer\nINF detected tar.gz archive, extracting to subdirectory installerID=10940530-121d-4308-9be8-90468be4aedc runner=installer\nERR failed extract .tar.gz archive error=\"failed to create \\\"code42-install/install.sh\\\": open /tmp/535331487/extracted/code42-install/install.sh: no such file or directory\" installerID=10940530-121d-4308-9be8-90468be4aedc runner=installer\nERR failures found when processing installers errs=[\"failed to create \\\"code42-install/install.sh\\\": open /tmp/535331487/extracted/code42-install/install.sh: no such file or directory\"] runner=installer\nERR running config receivers error=\"failed to create \\\"code42-install/install.sh\\\": open /tmp/535331487/extracted/code42-install/install.sh: no such file or directory\"\n```\n\nThis is the same issue I am seeing. The installer downloads, we attempt to extract, but fails to locate expected files."
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "I was able to get the file to install by first extracting the tar file to `/` and then re-archiving it:\n\n```\ncd /\ncp -R /Users/janis/Downloads/code42-install .\ntar -czvf code42.tar.gz code42-install\n```\n\nThen uploaded the resulting package to Fleet, and installed. \n\nSounds like we have an idea of how to fix this so a manual work around won't be necessary. "
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Was able to repro the error by adding a file in a subdir directly to a brand new tarball without specifying the top level directory:\n\n[test.tar.gz](https://github.com/user-attachments/files/21559956/test.tar.gz)\n\nSo this is much easier to repro than I initially thought."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "The fix I have implemented ensures each dir exists before extracting files into it. That means we have at minimum an extra `stat` per file extracted but in exchange it'll work with all tarballs and it's a low-impact fix. If we need to optimize later to keep track of dirs we know exist, this fix doesn't prevent us from doing that."
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "**QA Notes**\n\n1. Upload Code42 tar archive file to Fleet library\n2. Include an install script ( can just use `mv $INSTALLER_PATH/* /usr/local`)\n3. Include an uninstall script (can just use `rm -rf /usr/local/code42-install`)\n4. Attempt to install on Linux host\n- [x] Confirm tar.gz archive is extracted and installed on host"
          }
        ],
        "issueNumber": 31338,
        "changeType": "modified"
      },
      {
        "content": {
          "body": "\n# Goal: easy-to-follow test steps for checking a release manually\n\n# Important reference data\n\n1. [fleetctl preview setup](https://fleetdm.com/fleetctl-preview)\n2. [permissions documentation](https://fleetdm.com/docs/using-fleet/permissions) \n3. premium tests require license key (needs renewal) `fleetctl preview --license-key=eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJGbGVldCBEZXZpY2UgTWFuYWdlbWVudCBJbmMuIiwiZXhwIjoxNjQwOTk1MjAwLCJzdWIiOiJkZXZlbG9wbWVudCIsImRldmljZXMiOjEwMCwibm90ZSI6ImZvciBkZXZlbG9wbWVudCBvbmx5IiwidGllciI6ImJhc2ljIiwiaWF0IjoxNjIyNDI2NTg2fQ.WmZ0kG4seW3IrNvULCHUPBSfFdqj38A_eiXdV_DFunMHechjHbkwtfkf1J6JQJoDyqn8raXpgbdhafDwv3rmDw`\n4. premium tests require license key (active - Expires Sunday, January 1, 2023 12:00:00 AM) `fleetctl preview --license-key=eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJGbGVldCBEZXZpY2UgTWFuYWdlbWVudCBJbmMuIiwiZXhwIjoxNjcyNTMxMjAwLCJzdWIiOiJGbGVldCBEZXZpY2UgTWFuYWdlbWVudCIsImRldmljZXMiOjEwMCwibm90ZSI6ImZvciBkZXZlbG9wbWVudCBvbmx5IiwidGllciI6InByZW1pdW0iLCJpYXQiOjE2NDI1MjIxODF9.EGHQjIzM73YyMbnCruswzg360DEYCsDi9uz48YcDwQHq90BabGT5PIXRiculw79emGj5sk2aKgccTd2hU5J7Jw`\n\n# Smoke Tests\nSmoke tests are limited to core functionality and serve as a pre-release final review. If smoke tests are failing, a release cannot proceed.\n\n## Fleet core:\n\n**Fleet version** (Head to the \"My account\" page in the Fleet UI or run `fleetctl version`):\n\n**Web browser** _(e.g. Chrome 88.0.4324)_: \n\n### Prerequisites\n\n1. `fleetctl preview` is set up and running the desired test version using [`--tag` parameters.](https://fleetdm.com/handbook/engineering#run-fleet-locally-for-qa-purposes)\n2. Unless you are explicitly testing older browser versions, browser is up to date.\n3. Certificate \u0026 flagfile are in place to create new host.\n4. In your browser, clear local storage using devtools.\n\n### Orchestration\n\u003ctable\u003e\n\u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eUpdate flow\u003c/td\u003e\u003ctd\u003e\n\n1. remove all fleet processes/agents/etc using `fleetctl preview reset` for a clean slate\n2. run `fleetctl preview` with no tag for latest stable\n3. create a host/query to later confirm upgrade with\n4. STOP fleet-preview-server instances in containers/apps on Docker\n5. run `fleetctl preview` with appropriate testing tag \u003c/td\u003e\u003ctd\u003eAll previously created hosts/queries are verified to still exist\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eLogin flow\u003c/td\u003e\u003ctd\u003e\n\n1. navigate to the login page and attempt to login with both valid and invalid credentials to verify some combination of expected results.\n2. navigate to the login page and attempt to login with both valid and invalid sso credentials to verify expected results.\n\u003c/td\u003e\u003ctd\u003e\n\n1. text fields prompt when blank\n2. correct error message is \"authentication failed\"\n3. forget password link prompts for email\n4. valid credentials result in a successful login.\n5. valid sso credentials result in a successful login\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003ePacks flow\u003c/td\u003e\u003ctd\u003eVerify management, operation, and logging of [\"2017 packs\"](https://fleetdm.com/handbook/company/why-this-way#why-does-fleet-support-query-packs).\u003c/td\u003e\u003ctd\u003e\n\n1. Packs successfully run on host machines after migrations \n2. New Packs can be created\n3. Packs can be edited and deleted\n4. Packs results information is logged\n \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eLog destination flow\u003c/td\u003e\u003ctd\u003eVerify log destination for software, query, policy, and packs.\u003c/td\u003e\u003ctd\u003e\n\n1. Software, query, policy, and packs logs are successfully sent to external log destinations\n2. Software, query, policy, and packs logs are successfully sent to Filesystem log destinations\n \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eOS settings\u003c/td\u003e\u003ctd\u003eVerify OS settings functionality\u003c/td\u003e\u003ctd\u003e\n\n1. Verify able to configure Disk encryption (macOS, Windows, \u0026 Linux).\n2. Verify host enrolled with Disk encryption enforced successfully encrypts.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003c/table\u003e\n\n### MDM\n\u003ctable\u003e\n\u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eMDM enrollment flow\u003c/td\u003e\u003ctd\u003eVerify MDM enrollments, run MDM commands\u003c/td\u003e\u003ctd\u003e\n  \n1. Erase an ADE-eligible macOS host and verify able to complete automated enrollment flow.\n2. With Windows MDM turned On, enroll a Windows host and verify MDM is turned On for the host.\n3. Verify able to run MDM commands on both macOS and Windows hosts from the CLI.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eMDM migration flow\u003c/td\u003e\u003ctd\u003eVerify MDM migration for ADE and non-ADE hosts\u003c/td\u003e\u003ctd\u003e\n  \n1. Turn off MDM on an ADE-eligible macOS host and verify that the native, \"Device Enrollment\" macOS notification appears.\n2. On the My device page, follow the \"Turn on MDM\" instructions and verify that MDM is turned on.\n3. Turn off MDM on a non ADE-eligible macOS host.\n4. On the My device page, follow the \"Turn on MDM\" instructions and verify that MDM is turned on.\n5. Verify Windows host migrates from 3rd party MDM to Fleet when automatic migration is turned on.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eOS settings\u003c/td\u003e\u003ctd\u003eVerify OS settings functionality\u003c/td\u003e\u003ctd\u003e\n\n1. Verify Profiles upload/download/delete (macOS \u0026 Windows).\n2. Verify Profiles are delivered to host and applied. \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eSetup experience\u003c/td\u003e\u003ctd\u003eVerify macOS Setup experience\u003c/td\u003e\u003ctd\u003e\n\n1. Configure End user authentication.\n3. Upload a Bootstrap package.\n4. Add software (FMA, VPP, \u0026 Custom pkg)\n5. Add a script\n6. Enroll an ADE-eligible macOS host and verify successful authentication.\n7. Verify Bootstrap package is delivered.\n8. Verify SwiftDialogue window displays.\n9. Verify software installs and script runs.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eOS updates\u003c/td\u003e\u003ctd\u003eVerify OS updates flow\u003c/td\u003e\u003ctd\u003e\n\n1. Configure OS updates (macOS \u0026 Windows).\n2. Verify on-device that Nudge prompt appears (macOS 13).\n3. Verify enforce minimumOS occurs during enrollment (macOS 14+).\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eiOS/iPadOS\u003c/td\u003e\u003ctd\u003eVerify enrollment, profiles, \u0026 software installs\u003c/td\u003e\u003ctd\u003e\n\n1. Verify ADE enrollment.\n2. Verify OTA enrollment.\n3. Verify Profiles are delivered to host and applied.\n4. Verify VPP apps install \u0026 display correctly in Activity feed.\n5. Verify `Turn Off MDM` for BYOD \u0026 ADE hosts.\n \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\n\u003ctr\u003e\u003ctd\u003eLock \u0026 Wipe\u003c/td\u003e\u003ctd\u003eVerify hosts can be locked \u0026 wiped\u003c/td\u003e\u003ctd\u003e\n\n1. Verify locking a host from the Fleet UI (macOS, Windows, \u0026 Linux)\n2. Verify unlocking a host from the Fleet UI (macOS, Windows, \u0026 Linux)\n3. Verify wiping a host from the Fleet UI (macOS, Windows, \u0026 Linux)\n4. Verify wiping and locking hosts using `fleetctl` (macOS, Windows, \u0026 Linux)\n \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\n\u003ctr\u003e\u003ctd\u003eCertificates Upload\u003c/td\u003e\u003ctd\u003eAPNs cert and ABM token renewal workflow\u003c/td\u003e\u003ctd\u003e\n\n1. Renew APNs Certificate.\n2. Renew ABM Token.\n3. Ensure ADE hosts can enroll.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003c/table\u003e\n\n### Software\n\u003ctable\u003e\n\u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eQuery flow\u003c/td\u003e\u003ctd\u003eCreate, edit, run, and delete queries. \u003c/td\u003e\u003ctd\u003e\n\n1. permissions regarding creating/editing/deleting queries are up to date with documentation\n2. syntax errors result in error messaging\n3. queries can be run manually \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eHost Flow\u003c/td\u003e\u003ctd\u003eVerify a new host can be added and removed following modal instructions using your own device.\u003c/td\u003e\u003ctd\u003e\n\n1. Host is added via command line\n2. Host serial number and date added are accurate\n3. Host is not visible after it is deleted\n4. Warning and informational modals show when expected and make sense\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eMy device page\u003c/td\u003e\u003ctd\u003eVerify the end user's my device page loads successfully.\u003c/td\u003e\u003ctd\u003e\n\n1. Clicking the Fleet desktop item, then \"My device\" successfully loads the my device page.\n2. The \"My device\" page is populated correctly and as expected. \n3. Styling and padding appears correct.\n \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eScripts\u003c/td\u003e\u003ctd\u003eVerify script library and execution\u003c/td\u003e\u003ctd\u003e\n\n1. Verify able to run a script on all host types from CLI.\n2. Verify scripts library upload/download/delete.\n3. From Host details (macOS, Windows, \u0026 Linux) run a script that should PASS, verify.\n4. From Host details (macOS, Windows, \u0026 Linux) run a script that should FAIL, verify.\n5. Verify UI loading state and statuses for scripts.\n8. Disable scripts globally and verify unable to run.\n9. Verify scripts display correctly in Activity feed.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eSoftware\u003c/td\u003e\u003ctd\u003eVerify software library and install / download\u003c/td\u003e\u003ctd\u003e\n\n1. Verify software library upload/download/delete.\n2. From Host details (macOS, Windows, \u0026 Linux) run an install that should PASS, verify.\n3. From My Device (macOS, Windows, \u0026 Linux) software tab should have self-service items available, verify.\n4. Verify UI loading state and statuses for installing software.\n7. Verify software installs display correctly in Activity feed.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\n\u003ctr\u003e\u003ctd\u003eMigration Test\u003c/td\u003e\u003ctd\u003eVerify Fleet can migrate to the next version with no issues.\u003c/td\u003e\u003ctd\u003e\n\nUsing the github action https://github.com/fleetdm/fleet/actions/workflows/db-upgrade-test.yml\n1. Using the most recent stable version of Fleet and `main`, click `Run workflow`\n2. Enter the Docker tag of Fleet starting version, e.g. 'v4.64.2'\n3. Enter the Docker tag of Fleet version to upgrade to, e.g. 'rc-minor-fleet-v4.65.0'\n4. Click `Run workflow`.\n5. Action should complete successfully.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003c/table\u003e\n\n### All Product Groups\n\u003ctable\u003e\n \u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eRelease blockers\u003c/td\u003e\u003ctd\u003eVerify there are no outstanding release blocking tickets.\u003c/td\u003e\u003ctd\u003e\n  \n1. Check [this](https://github.com/fleetdm/fleet/labels/~release%20blocker) filter to view all open `~release blocker` tickets.\n2. If any are found raise an alarm in the `#help-engineering` and `#g-mdm` (or `#g-endpoint-ops`)  channels.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\n\u003ctr\u003e\u003ctd\u003eLoad tests - minor releases only unless otherwise specified\u003c/td\u003e\u003ctd\u003eVerify all load test metrics are within acceptable range on final build of RC.\u003c/td\u003e\u003ctd\u003e\n  \n1. Check [this Google doc](https://docs.google.com/document/d/1V6QtFzcGDsLnn2PIvGin74DAxdAN_3likjxSssOMMQI/edit?tab=t.0#heading=h.15acjob4ji20) to review load test key metrics and checks.\n2. After all expected changes have been merged to the RC branch, two load tests will need to be run - a new instance with no data, and a migrated instance.\n3. For the new instance with no data, set up a load test environment using the RC branch and allow it at least 24hrs of run time.\n4. For the migrated instance, set up a load test environment on the previous minor release branch. Once the environment has been set up and stabilized, follow the instructions in [Deploying code changes to fleet](https://github.com/fleetdm/fleet/blob/main/infrastructure/loadtesting/terraform/readme.md#deploying-code-changes-to-fleet) to migrate to the RC branch. Monitor the metrics post-migration to determine if any performance issues arise.\n5. Record metrics in [this spreadsheet](https://docs.google.com/spreadsheets/d/1FOF0ykFVoZ7DJSTfrveip0olfyRQsY9oT1uXCCZmuKc/edit?usp=drive_link) for the two load test runs. \n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e \n\u003c/table\u003e\n\n### Notes\n\nIssues found new to this version:\n\nIssues found that reproduce in last stable version: \n\nWhat has not been tested:\n\nInclude any notes on whether issues should block release or not as needed:\n\n\u003cbr\u003e\n\u003cbr\u003e\n\n# `fleetd` agent:\n\nIncludes updates to: \n- Orbit: True / False\n- Desktop: True / False\n- Chrome extension: True / False\n\nList versions changes for any component updates below: \n\u003c!-- Remove items without updates --\u003e\n- Orbit `v1.xx.x` \u003e `v1.xx.x`\n- Desktop `v1.xx.x` \u003e `v1.xx.x`\n- Chrome extension `v1.xx.x` \u003e `v1.xx.x`\n\n## Testing gates for new `fleetd` release\n\n### Goal: Ensure new `fleetd` is tested and promoted from local \u003e edge \u003e stable channels\n\n1. Build a new `fleetd` from the release candidate branch as needed for Orbit, Desktop, and Chrome Extension.\n\n\u003ctable\u003e\n\u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e`fleetd` local testing\u003c/td\u003e\n\u003ctd\u003e\n1. Following [Testing TUF]([url](https://github.com/fleetdm/fleet/blob/main/tools/tuf/test/README.md)) instructions create binaries for Mac, Windows, and Ubuntu using your local TUF repository and install on macOS, Linux, and Windows hosts.\u003cbr\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n1. Confirm the hosts install with the updated version and are working correctly.\u003cbr\u003e\n2. Confirm any new features and/or bug fixes associated with this release are working as intended.\u003cbr\u003e\n\u003c/td\u003e\n\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctd\u003e`fleetd` auto-update tests\u003c/td\u003e\n\u003ctd\u003e\n1. Conduct the [`fleetd` auto-update n+1 test]([url](https://github.com/fleetdm/fleet/blob/main/tools/tuf/test/Fleetd-auto-update-test-guide.md))\u003cbr\u003e\n2. QA certifies new release by commenting in issue.\u003cbr\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n1. Agent successfully auto-updates.\u003cbr\u003e\n2. Issue is certified by QA.\u003cbr\u003e\n\u003c/td\u003e\n\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctd\u003e`fleetd` tests\u003c/td\u003e\n\u003ctd\u003e\n1. Set up a host in your instance to receive updates from the `edge` channels.\u003cbr\u003e\n2. Work with engineer leading the release to push changes to the `edge` channel.\u003cbr\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n1. Confirm the hosts running on the edge channel receive the update and are working correctly.\u003cbr\u003e\n2. Confirm any new features and/or bug fixes associated with this release are working as intended.\u003cbr\u003e\n\u003c/td\u003e\n\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\u003c/tr\u003e\n\n\u003c/table\u003e\n\n## New `fleetd` pushed to edge\n\n### Goal: Ensure `fleetd` version pushed to edge is working with the current released version of fleet.\n\n1. Fleet server is running the latest released version available on [Fleet Releases](https://github.com/fleetdm/fleet/releases) page.\n2. Set Agent options to use edge in the Fleet server configuration. For example:\u003cbr\u003e\n `update_channels:` \u003cbr\u003e\n  `osqueryd: edge` \u003cbr\u003e\n  `orbit: edge` \u003cbr\u003e\n  `desktop: edge` \u003cbr\u003e\n\u003ctable\u003e\n\u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n \u003ctr\u003e\u003ctd\u003eQuery flow\u003c/td\u003e\u003ctd\u003eRun queries. \u003c/td\u003e\u003ctd\u003e\n1. Queries can be run manually \n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eHost Flow\u003c/td\u003e\u003ctd\u003eVerify a new host can be added using your own device.\u003c/td\u003e\u003ctd\u003e\n1. Hosts can enroll and report correct version of `fleetd` (orbit, osquery, desktop).\u003cbr\u003e\n2. Refetching host vitals completes and returns updated information.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eMy device page\u003c/td\u003e\u003ctd\u003eVerify the end user's my device page loads successfully.\u003c/td\u003e\u003ctd\u003e\n1. Clicking the Fleet desktop item, then \"My device\" successfully loads the my device page.\u003cbr\u003e\n2. The \"My device\" page is populated correctly and as expected. \u003cbr\u003e\n3. Styling and padding appears correct. \n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eScripts\u003c/td\u003e\u003ctd\u003eVerify script execution\u003c/td\u003e\u003ctd\u003e\n1. Verify able to run a script on all host types from CLI.\u003cbr\u003e\n2. From Host details (macOS, Windows, \u0026 Linux) run a script that should PASS, verify.\u003cbr\u003e\n3. From Host details (macOS, Windows, \u0026 Linux) run a script that should FAIL, verify.\u003cbr\u003e\n4. Verify script results display correctly in Activity feed.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eSoftware\u003c/td\u003e\u003ctd\u003eVerify software install / download\u003c/td\u003e\u003ctd\u003e\n1. From Host details (macOS, Windows, \u0026 Linux) run an install that should PASS, verify.\u003cbr\u003e\n2. From My Device (macOS, Windows, \u0026 Linux) software tab should have self-service items available, verify.\u003cbr\u003e\n3. Verify software installs display correctly in Activity feed.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eOS settings\u003c/td\u003e\u003ctd\u003eVerify OS settings functionality\u003c/td\u003e\u003ctd\u003e\n1. Verify able to configure Disk encryption (macOS, Windows, \u0026 Linux).\u003cbr\u003e\n2. Verify host enrolled with Disk encryption enforced successfully encrypts.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003ePacks flow\u003c/td\u003e\u003ctd\u003eVerify management, operation, and logging of [\"2017 packs\"](https://fleetdm.com/handbook/company/why-this-way#why-does-fleet-support-query-packs).\u003c/td\u003e\u003ctd\u003e\n1. Packs successfully run on host machines after migrations \u003cbr\u003e\n2. New Packs can be created. \u003cbr\u003e\n3. Packs can be edited and deleted \u003cbr\u003e\n4. Packs results information is logged\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003c/table\u003e\n  \n# Notes\n\nIssues found new to this version:\n\nIssues found that reproduce in last stable version: \n\nWhat has not been tested:\n\n\nInclude any notes on whether issues should block release or not as needed:\n"
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgdOJOc",
        "status": "✅ Ready for release",
        "comments": [
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "```\nFLEET_VERSION_A=v4.71.0 FLEET_VERSION_B=rc-patch-fleet-v4.71.1 go test -v\n--- PASS: TestUpgradeAToB (65.24s)\nPASS\nok  \tgithub.com/fleetdm/fleet/v4/test/upgrade\t65.258s\n```\n\n```\nFLEET_VERSION_A=v4.70.1 FLEET_VERSION_B=rc-patch-fleet-v4.71.1 go test -v\n--- PASS: TestUpgradeAToB (54.12s)\nPASS\nok  \tgithub.com/fleetdm/fleet/v4/test/upgrade\t54.132s\n```\n\n```\nFLEET_VERSION_A=v4.70.0 FLEET_VERSION_B=rc-patch-fleet-v4.71.1 go test -v\n--- PASS: TestUpgradeAToB (52.26s)\nPASS\nok  \tgithub.com/fleetdm/fleet/v4/test/upgrade\t52.281s\n```\n\n```\nFLEET_VERSION_A=v4.69.0 FLEET_VERSION_B=rc-patch-fleet-v4.71.1 go test -v\n--- PASS: TestUpgradeAToB (63.97s)\nPASS\nok  \tgithub.com/fleetdm/fleet/v4/test/upgrade\t63.988s\n```"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "All software smoke tests pass, Software gives 👍 \n\n🔴 NOTE: In 4.70.0 I was able to have a trailing `/` in my Fleet url (`/settings/organization/webaddress`) but in 4.71.0 and 4.71.1 it will not let me log in with SSO if that trailing slash is in the url. I had to remove it to be able to sign in with SSO.\n\ncc @georgekarrv  @getvictor "
          },
          {
            "author": {
              "login": "getvictor"
            },
            "body": "\u003e All software smoke tests pass, Software gives 👍\n\u003e \n\u003e 🔴 NOTE: In 4.70.0 I was able to have a trailing `/` in my Fleet url (`/settings/organization/webaddress`) but in 4.71.0 and 4.71.1 it will not let me log in with SSO if that trailing slash is in the url. I had to remove it to be able to sign in with SSO.\n\u003e \n\u003e cc [@georgekarrv](https://github.com/georgekarrv) [@getvictor](https://github.com/getvictor)\n\nI filed #31545 for this issue. \n\nI recommend we fix it in 4.71.1 since customers may hit it with regular SSO and MDM SSO.\ncc: @ksatter "
          },
          {
            "author": {
              "login": "ksatter"
            },
            "body": "\u003e \u003e All software smoke tests pass, Software gives 👍\n\u003e \u003e 🔴 NOTE: In 4.70.0 I was able to have a trailing `/` in my Fleet url (`/settings/organization/webaddress`) but in 4.71.0 and 4.71.1 it will not let me log in with SSO if that trailing slash is in the url. I had to remove it to be able to sign in with SSO.\n\u003e \u003e cc [@georgekarrv](https://github.com/georgekarrv) [@getvictor](https://github.com/getvictor)\n\u003e \n\u003e I filed [#31545](https://github.com/fleetdm/fleet/issues/31545) for this issue.\n\u003e \n\u003e I recommend we fix it in 4.71.1 since customers may hit it with regular SSO and MDM SSO. cc: [@ksatter](https://github.com/ksatter)\n\nI agree @getvictor "
          },
          {
            "author": {
              "login": "getvictor"
            },
            "body": "@xpkoala @jmwatts The fix for https://github.com/fleetdm/fleet/issues/31545 (trailing slash) is on the 4.71.1 RC branch."
          }
        ],
        "issueNumber": 31533,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcX9VU",
        "title": "Inconsistent style: Host details \u003e Software \u003e Show details",
        "issueNumber": 30232,
        "changeType": "removed"
      }
    ]
  },
  {
    "timestamp": "2025-08-05T07:08:37.882248754Z",
    "items": [
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdCpoc",
        "status": "🦤 ‎In review",
        "issueNumber": 31213,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdCpok",
        "status": "🐣 In progress",
        "issueNumber": 31214,
        "changeType": "modified"
      },
      {
        "content": {
          "body": "\n# Goal: easy-to-follow test steps for checking a release manually\n\n# Important reference data\n\n1. [fleetctl preview setup](https://fleetdm.com/fleetctl-preview)\n2. [permissions documentation](https://fleetdm.com/docs/using-fleet/permissions) \n3. premium tests require license key (needs renewal) `fleetctl preview --license-key=eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJGbGVldCBEZXZpY2UgTWFuYWdlbWVudCBJbmMuIiwiZXhwIjoxNjQwOTk1MjAwLCJzdWIiOiJkZXZlbG9wbWVudCIsImRldmljZXMiOjEwMCwibm90ZSI6ImZvciBkZXZlbG9wbWVudCBvbmx5IiwidGllciI6ImJhc2ljIiwiaWF0IjoxNjIyNDI2NTg2fQ.WmZ0kG4seW3IrNvULCHUPBSfFdqj38A_eiXdV_DFunMHechjHbkwtfkf1J6JQJoDyqn8raXpgbdhafDwv3rmDw`\n4. premium tests require license key (active - Expires Sunday, January 1, 2023 12:00:00 AM) `fleetctl preview --license-key=eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJGbGVldCBEZXZpY2UgTWFuYWdlbWVudCBJbmMuIiwiZXhwIjoxNjcyNTMxMjAwLCJzdWIiOiJGbGVldCBEZXZpY2UgTWFuYWdlbWVudCIsImRldmljZXMiOjEwMCwibm90ZSI6ImZvciBkZXZlbG9wbWVudCBvbmx5IiwidGllciI6InByZW1pdW0iLCJpYXQiOjE2NDI1MjIxODF9.EGHQjIzM73YyMbnCruswzg360DEYCsDi9uz48YcDwQHq90BabGT5PIXRiculw79emGj5sk2aKgccTd2hU5J7Jw`\n\n# Smoke Tests\nSmoke tests are limited to core functionality and serve as a pre-release final review. If smoke tests are failing, a release cannot proceed.\n\n## Fleet core:\n\n**Fleet version** (Head to the \"My account\" page in the Fleet UI or run `fleetctl version`):\n\n**Web browser** _(e.g. Chrome 88.0.4324)_: \n\n### Prerequisites\n\n1. `fleetctl preview` is set up and running the desired test version using [`--tag` parameters.](https://fleetdm.com/handbook/engineering#run-fleet-locally-for-qa-purposes)\n2. Unless you are explicitly testing older browser versions, browser is up to date.\n3. Certificate \u0026 flagfile are in place to create new host.\n4. In your browser, clear local storage using devtools.\n\n### Orchestration\n\u003ctable\u003e\n\u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eUpdate flow\u003c/td\u003e\u003ctd\u003e\n\n1. remove all fleet processes/agents/etc using `fleetctl preview reset` for a clean slate\n2. run `fleetctl preview` with no tag for latest stable\n3. create a host/query to later confirm upgrade with\n4. STOP fleet-preview-server instances in containers/apps on Docker\n5. run `fleetctl preview` with appropriate testing tag \u003c/td\u003e\u003ctd\u003eAll previously created hosts/queries are verified to still exist\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eLogin flow\u003c/td\u003e\u003ctd\u003e\n\n1. navigate to the login page and attempt to login with both valid and invalid credentials to verify some combination of expected results.\n2. navigate to the login page and attempt to login with both valid and invalid sso credentials to verify expected results.\n\u003c/td\u003e\u003ctd\u003e\n\n1. text fields prompt when blank\n2. correct error message is \"authentication failed\"\n3. forget password link prompts for email\n4. valid credentials result in a successful login.\n5. valid sso credentials result in a successful login\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003ePacks flow\u003c/td\u003e\u003ctd\u003eVerify management, operation, and logging of [\"2017 packs\"](https://fleetdm.com/handbook/company/why-this-way#why-does-fleet-support-query-packs).\u003c/td\u003e\u003ctd\u003e\n\n1. Packs successfully run on host machines after migrations \n2. New Packs can be created\n3. Packs can be edited and deleted\n4. Packs results information is logged\n \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eLog destination flow\u003c/td\u003e\u003ctd\u003eVerify log destination for software, query, policy, and packs.\u003c/td\u003e\u003ctd\u003e\n\n1. Software, query, policy, and packs logs are successfully sent to external log destinations\n2. Software, query, policy, and packs logs are successfully sent to Filesystem log destinations\n \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eOS settings\u003c/td\u003e\u003ctd\u003eVerify OS settings functionality\u003c/td\u003e\u003ctd\u003e\n\n1. Verify able to configure Disk encryption (macOS, Windows, \u0026 Linux).\n2. Verify host enrolled with Disk encryption enforced successfully encrypts.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003c/table\u003e\n\n### MDM\n\u003ctable\u003e\n\u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eMDM enrollment flow\u003c/td\u003e\u003ctd\u003eVerify MDM enrollments, run MDM commands\u003c/td\u003e\u003ctd\u003e\n  \n1. Erase an ADE-eligible macOS host and verify able to complete automated enrollment flow.\n2. With Windows MDM turned On, enroll a Windows host and verify MDM is turned On for the host.\n3. Verify able to run MDM commands on both macOS and Windows hosts from the CLI.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eMDM migration flow\u003c/td\u003e\u003ctd\u003eVerify MDM migration for ADE and non-ADE hosts\u003c/td\u003e\u003ctd\u003e\n  \n1. Turn off MDM on an ADE-eligible macOS host and verify that the native, \"Device Enrollment\" macOS notification appears.\n2. On the My device page, follow the \"Turn on MDM\" instructions and verify that MDM is turned on.\n3. Turn off MDM on a non ADE-eligible macOS host.\n4. On the My device page, follow the \"Turn on MDM\" instructions and verify that MDM is turned on.\n5. Verify Windows host migrates from 3rd party MDM to Fleet when automatic migration is turned on.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eOS settings\u003c/td\u003e\u003ctd\u003eVerify OS settings functionality\u003c/td\u003e\u003ctd\u003e\n\n1. Verify Profiles upload/download/delete (macOS \u0026 Windows).\n2. Verify Profiles are delivered to host and applied. \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eSetup experience\u003c/td\u003e\u003ctd\u003eVerify macOS Setup experience\u003c/td\u003e\u003ctd\u003e\n\n1. Configure End user authentication.\n3. Upload a Bootstrap package.\n4. Add software (FMA, VPP, \u0026 Custom pkg)\n5. Add a script\n6. Enroll an ADE-eligible macOS host and verify successful authentication.\n7. Verify Bootstrap package is delivered.\n8. Verify SwiftDialogue window displays.\n9. Verify software installs and script runs.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eOS updates\u003c/td\u003e\u003ctd\u003eVerify OS updates flow\u003c/td\u003e\u003ctd\u003e\n\n1. Configure OS updates (macOS \u0026 Windows).\n2. Verify on-device that Nudge prompt appears (macOS 13).\n3. Verify enforce minimumOS occurs during enrollment (macOS 14+).\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eiOS/iPadOS\u003c/td\u003e\u003ctd\u003eVerify enrollment, profiles, \u0026 software installs\u003c/td\u003e\u003ctd\u003e\n\n1. Verify ADE enrollment.\n2. Verify OTA enrollment.\n3. Verify Profiles are delivered to host and applied.\n4. Verify VPP apps install \u0026 display correctly in Activity feed.\n5. Verify `Turn Off MDM` for BYOD \u0026 ADE hosts.\n \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\n\u003ctr\u003e\u003ctd\u003eLock \u0026 Wipe\u003c/td\u003e\u003ctd\u003eVerify hosts can be locked \u0026 wiped\u003c/td\u003e\u003ctd\u003e\n\n1. Verify locking a host from the Fleet UI (macOS, Windows, \u0026 Linux)\n2. Verify unlocking a host from the Fleet UI (macOS, Windows, \u0026 Linux)\n3. Verify wiping a host from the Fleet UI (macOS, Windows, \u0026 Linux)\n4. Verify wiping and locking hosts using `fleetctl` (macOS, Windows, \u0026 Linux)\n \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\n\u003ctr\u003e\u003ctd\u003eCertificates Upload\u003c/td\u003e\u003ctd\u003eAPNs cert and ABM token renewal workflow\u003c/td\u003e\u003ctd\u003e\n\n1. Renew APNs Certificate.\n2. Renew ABM Token.\n3. Ensure ADE hosts can enroll.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003c/table\u003e\n\n### Software\n\u003ctable\u003e\n\u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eQuery flow\u003c/td\u003e\u003ctd\u003eCreate, edit, run, and delete queries. \u003c/td\u003e\u003ctd\u003e\n\n1. permissions regarding creating/editing/deleting queries are up to date with documentation\n2. syntax errors result in error messaging\n3. queries can be run manually \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eHost Flow\u003c/td\u003e\u003ctd\u003eVerify a new host can be added and removed following modal instructions using your own device.\u003c/td\u003e\u003ctd\u003e\n\n1. Host is added via command line\n2. Host serial number and date added are accurate\n3. Host is not visible after it is deleted\n4. Warning and informational modals show when expected and make sense\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eMy device page\u003c/td\u003e\u003ctd\u003eVerify the end user's my device page loads successfully.\u003c/td\u003e\u003ctd\u003e\n\n1. Clicking the Fleet desktop item, then \"My device\" successfully loads the my device page.\n2. The \"My device\" page is populated correctly and as expected. \n3. Styling and padding appears correct.\n \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eScripts\u003c/td\u003e\u003ctd\u003eVerify script library and execution\u003c/td\u003e\u003ctd\u003e\n\n1. Verify able to run a script on all host types from CLI.\n2. Verify scripts library upload/download/delete.\n3. From Host details (macOS, Windows, \u0026 Linux) run a script that should PASS, verify.\n4. From Host details (macOS, Windows, \u0026 Linux) run a script that should FAIL, verify.\n5. Verify UI loading state and statuses for scripts.\n8. Disable scripts globally and verify unable to run.\n9. Verify scripts display correctly in Activity feed.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eSoftware\u003c/td\u003e\u003ctd\u003eVerify software library and install / download\u003c/td\u003e\u003ctd\u003e\n\n1. Verify software library upload/download/delete.\n2. From Host details (macOS, Windows, \u0026 Linux) run an install that should PASS, verify.\n3. From My Device (macOS, Windows, \u0026 Linux) software tab should have self-service items available, verify.\n4. Verify UI loading state and statuses for installing software.\n7. Verify software installs display correctly in Activity feed.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\n\u003ctr\u003e\u003ctd\u003eMigration Test\u003c/td\u003e\u003ctd\u003eVerify Fleet can migrate to the next version with no issues.\u003c/td\u003e\u003ctd\u003e\n\nUsing the github action https://github.com/fleetdm/fleet/actions/workflows/db-upgrade-test.yml\n1. Using the most recent stable version of Fleet and `main`, click `Run workflow`\n2. Enter the Docker tag of Fleet starting version, e.g. 'v4.64.2'\n3. Enter the Docker tag of Fleet version to upgrade to, e.g. 'rc-minor-fleet-v4.65.0'\n4. Click `Run workflow`.\n5. Action should complete successfully.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003c/table\u003e\n\n### All Product Groups\n\u003ctable\u003e\n \u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eRelease blockers\u003c/td\u003e\u003ctd\u003eVerify there are no outstanding release blocking tickets.\u003c/td\u003e\u003ctd\u003e\n  \n1. Check [this](https://github.com/fleetdm/fleet/labels/~release%20blocker) filter to view all open `~release blocker` tickets.\n2. If any are found raise an alarm in the `#help-engineering` and `#g-mdm` (or `#g-endpoint-ops`)  channels.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\n\u003ctr\u003e\u003ctd\u003eLoad tests - minor releases only unless otherwise specified\u003c/td\u003e\u003ctd\u003eVerify all load test metrics are within acceptable range on final build of RC.\u003c/td\u003e\u003ctd\u003e\n  \n1. Check [this Google doc](https://docs.google.com/document/d/1V6QtFzcGDsLnn2PIvGin74DAxdAN_3likjxSssOMMQI/edit?tab=t.0#heading=h.15acjob4ji20) to review load test key metrics and checks.\n2. After all expected changes have been merged to the RC branch, two load tests will need to be run - a new instance with no data, and a migrated instance.\n3. For the new instance with no data, set up a load test environment using the RC branch and allow it at least 24hrs of run time.\n4. For the migrated instance, set up a load test environment on the previous minor release branch. Once the environment has been set up and stabilized, follow the instructions in [Deploying code changes to fleet](https://github.com/fleetdm/fleet/blob/main/infrastructure/loadtesting/terraform/readme.md#deploying-code-changes-to-fleet) to migrate to the RC branch. Monitor the metrics post-migration to determine if any performance issues arise.\n5. Record metrics in [this spreadsheet](https://docs.google.com/spreadsheets/d/1FOF0ykFVoZ7DJSTfrveip0olfyRQsY9oT1uXCCZmuKc/edit?usp=drive_link) for the two load test runs. \n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e \n\u003c/table\u003e\n\n### Notes\n\nIssues found new to this version:\n\nIssues found that reproduce in last stable version: \n\nWhat has not been tested:\n\nInclude any notes on whether issues should block release or not as needed:\n\n\u003cbr\u003e\n\u003cbr\u003e\n\n# `fleetd` agent:\n\nIncludes updates to: \n- Orbit: True / False\n- Desktop: True / False\n- Chrome extension: True / False\n\nList versions changes for any component updates below: \n\u003c!-- Remove items without updates --\u003e\n- Orbit `v1.xx.x` \u003e `v1.xx.x`\n- Desktop `v1.xx.x` \u003e `v1.xx.x`\n- Chrome extension `v1.xx.x` \u003e `v1.xx.x`\n\n## Testing gates for new `fleetd` release\n\n### Goal: Ensure new `fleetd` is tested and promoted from local \u003e edge \u003e stable channels\n\n1. Build a new `fleetd` from the release candidate branch as needed for Orbit, Desktop, and Chrome Extension.\n\n\u003ctable\u003e\n\u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e`fleetd` local testing\u003c/td\u003e\n\u003ctd\u003e\n1. Following [Testing TUF]([url](https://github.com/fleetdm/fleet/blob/main/tools/tuf/test/README.md)) instructions create binaries for Mac, Windows, and Ubuntu using your local TUF repository and install on macOS, Linux, and Windows hosts.\u003cbr\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n1. Confirm the hosts install with the updated version and are working correctly.\u003cbr\u003e\n2. Confirm any new features and/or bug fixes associated with this release are working as intended.\u003cbr\u003e\n\u003c/td\u003e\n\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctd\u003e`fleetd` auto-update tests\u003c/td\u003e\n\u003ctd\u003e\n1. Conduct the [`fleetd` auto-update n+1 test]([url](https://github.com/fleetdm/fleet/blob/main/tools/tuf/test/Fleetd-auto-update-test-guide.md))\u003cbr\u003e\n2. QA certifies new release by commenting in issue.\u003cbr\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n1. Agent successfully auto-updates.\u003cbr\u003e\n2. Issue is certified by QA.\u003cbr\u003e\n\u003c/td\u003e\n\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctd\u003e`fleetd` tests\u003c/td\u003e\n\u003ctd\u003e\n1. Set up a host in your instance to receive updates from the `edge` channels.\u003cbr\u003e\n2. Work with engineer leading the release to push changes to the `edge` channel.\u003cbr\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n1. Confirm the hosts running on the edge channel receive the update and are working correctly.\u003cbr\u003e\n2. Confirm any new features and/or bug fixes associated with this release are working as intended.\u003cbr\u003e\n\u003c/td\u003e\n\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\u003c/tr\u003e\n\n\u003c/table\u003e\n\n## New `fleetd` pushed to edge\n\n### Goal: Ensure `fleetd` version pushed to edge is working with the current released version of fleet.\n\n1. Fleet server is running the latest released version available on [Fleet Releases](https://github.com/fleetdm/fleet/releases) page.\n2. Set Agent options to use edge in the Fleet server configuration. For example:\u003cbr\u003e\n `update_channels:` \u003cbr\u003e\n  `osqueryd: edge` \u003cbr\u003e\n  `orbit: edge` \u003cbr\u003e\n  `desktop: edge` \u003cbr\u003e\n\u003ctable\u003e\n\u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n \u003ctr\u003e\u003ctd\u003eQuery flow\u003c/td\u003e\u003ctd\u003eRun queries. \u003c/td\u003e\u003ctd\u003e\n1. Queries can be run manually \n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eHost Flow\u003c/td\u003e\u003ctd\u003eVerify a new host can be added using your own device.\u003c/td\u003e\u003ctd\u003e\n1. Hosts can enroll and report correct version of `fleetd` (orbit, osquery, desktop).\u003cbr\u003e\n2. Refetching host vitals completes and returns updated information.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eMy device page\u003c/td\u003e\u003ctd\u003eVerify the end user's my device page loads successfully.\u003c/td\u003e\u003ctd\u003e\n1. Clicking the Fleet desktop item, then \"My device\" successfully loads the my device page.\u003cbr\u003e\n2. The \"My device\" page is populated correctly and as expected. \u003cbr\u003e\n3. Styling and padding appears correct. \n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eScripts\u003c/td\u003e\u003ctd\u003eVerify script execution\u003c/td\u003e\u003ctd\u003e\n1. Verify able to run a script on all host types from CLI.\u003cbr\u003e\n2. From Host details (macOS, Windows, \u0026 Linux) run a script that should PASS, verify.\u003cbr\u003e\n3. From Host details (macOS, Windows, \u0026 Linux) run a script that should FAIL, verify.\u003cbr\u003e\n4. Verify script results display correctly in Activity feed.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eSoftware\u003c/td\u003e\u003ctd\u003eVerify software install / download\u003c/td\u003e\u003ctd\u003e\n1. From Host details (macOS, Windows, \u0026 Linux) run an install that should PASS, verify.\u003cbr\u003e\n2. From My Device (macOS, Windows, \u0026 Linux) software tab should have self-service items available, verify.\u003cbr\u003e\n3. Verify software installs display correctly in Activity feed.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eOS settings\u003c/td\u003e\u003ctd\u003eVerify OS settings functionality\u003c/td\u003e\u003ctd\u003e\n1. Verify able to configure Disk encryption (macOS, Windows, \u0026 Linux).\u003cbr\u003e\n2. Verify host enrolled with Disk encryption enforced successfully encrypts.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003ePacks flow\u003c/td\u003e\u003ctd\u003eVerify management, operation, and logging of [\"2017 packs\"](https://fleetdm.com/handbook/company/why-this-way#why-does-fleet-support-query-packs).\u003c/td\u003e\u003ctd\u003e\n1. Packs successfully run on host machines after migrations \u003cbr\u003e\n2. New Packs can be created. \u003cbr\u003e\n3. Packs can be edited and deleted \u003cbr\u003e\n4. Packs results information is logged\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003c/table\u003e\n  \n# Notes\n\nIssues found new to this version:\n\nIssues found that reproduce in last stable version: \n\nWhat has not been tested:\n\n\nInclude any notes on whether issues should block release or not as needed:\n"
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgdOJOc",
        "status": "Done",
        "comments": [
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "```\nFLEET_VERSION_A=v4.71.0 FLEET_VERSION_B=rc-patch-fleet-v4.71.1 go test -v\n--- PASS: TestUpgradeAToB (65.24s)\nPASS\nok  \tgithub.com/fleetdm/fleet/v4/test/upgrade\t65.258s\n```\n\n```\nFLEET_VERSION_A=v4.70.1 FLEET_VERSION_B=rc-patch-fleet-v4.71.1 go test -v\n--- PASS: TestUpgradeAToB (54.12s)\nPASS\nok  \tgithub.com/fleetdm/fleet/v4/test/upgrade\t54.132s\n```\n\n```\nFLEET_VERSION_A=v4.70.0 FLEET_VERSION_B=rc-patch-fleet-v4.71.1 go test -v\n--- PASS: TestUpgradeAToB (52.26s)\nPASS\nok  \tgithub.com/fleetdm/fleet/v4/test/upgrade\t52.281s\n```\n\n```\nFLEET_VERSION_A=v4.69.0 FLEET_VERSION_B=rc-patch-fleet-v4.71.1 go test -v\n--- PASS: TestUpgradeAToB (63.97s)\nPASS\nok  \tgithub.com/fleetdm/fleet/v4/test/upgrade\t63.988s\n```"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "All software smoke tests pass, Software gives 👍 \n\n🔴 NOTE: In 4.70.0 I was able to have a trailing `/` in my Fleet url (`/settings/organization/webaddress`) but in 4.71.0 and 4.71.1 it will not let me log in with SSO if that trailing slash is in the url. I had to remove it to be able to sign in with SSO.\n\ncc @georgekarrv  @getvictor "
          },
          {
            "author": {
              "login": "getvictor"
            },
            "body": "\u003e All software smoke tests pass, Software gives 👍\n\u003e \n\u003e 🔴 NOTE: In 4.70.0 I was able to have a trailing `/` in my Fleet url (`/settings/organization/webaddress`) but in 4.71.0 and 4.71.1 it will not let me log in with SSO if that trailing slash is in the url. I had to remove it to be able to sign in with SSO.\n\u003e \n\u003e cc [@georgekarrv](https://github.com/georgekarrv) [@getvictor](https://github.com/getvictor)\n\nI filed #31545 for this issue. \n\nI recommend we fix it in 4.71.1 since customers may hit it with regular SSO and MDM SSO.\ncc: @ksatter "
          },
          {
            "author": {
              "login": "ksatter"
            },
            "body": "\u003e \u003e All software smoke tests pass, Software gives 👍\n\u003e \u003e 🔴 NOTE: In 4.70.0 I was able to have a trailing `/` in my Fleet url (`/settings/organization/webaddress`) but in 4.71.0 and 4.71.1 it will not let me log in with SSO if that trailing slash is in the url. I had to remove it to be able to sign in with SSO.\n\u003e \u003e cc [@georgekarrv](https://github.com/georgekarrv) [@getvictor](https://github.com/getvictor)\n\u003e \n\u003e I filed [#31545](https://github.com/fleetdm/fleet/issues/31545) for this issue.\n\u003e \n\u003e I recommend we fix it in 4.71.1 since customers may hit it with regular SSO and MDM SSO. cc: [@ksatter](https://github.com/ksatter)\n\nI agree @getvictor "
          },
          {
            "author": {
              "login": "getvictor"
            },
            "body": "@xpkoala @jmwatts The fix for https://github.com/fleetdm/fleet/issues/31545 (trailing slash) is on the 4.71.1 RC branch."
          },
          {
            "author": {
              "login": "xpkoala"
            },
            "body": "Orchestration giving 👍 for release."
          },
          {
            "author": {
              "login": "fleet-release"
            },
            "body": "QA steps clear as dew,\nEasing Fleet's release review.\nGlass city's light grew."
          }
        ],
        "issueNumber": 31533,
        "changeType": "modified"
      },
      {
        "assignees": [
          "lucasmrod"
        ],
        "content": {
          "body": "**Fleet version**: v4.71.0\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\n\nFleet server panics in `ListSoftwareTitles` with the following stack trace:\n```sh\n| 1754333102152 | 2025/08/04 18:45:02 http: panic serving 10.10.11.5:46126: runtime error: invalid memory address or nil pointer dereference                                                                                                                                                                                                            |\n| 1754333102152 | goroutine 737533 [running]:                                                                                                                                                                                                                                                                                                           |\n| 1754333102152 | net/http.(*conn).serve.func1()                                                                                                                                                                                                                                                                                                        |\n| 1754333102152 |  net/http/server.go:1947 +0xbe                                                                                                                                                                                                                                                                                                        |\n| 1754333102152 | panic({0x29fe500?, 0x4bfeb30?})                                                                                                                                                                                                                                                                                                       |\n| 1754333102152 |  runtime/panic.go:792 +0x132                                                                                                                                                                                                                                                                                                          |\n| 1754333102152 | github.com/fleetdm/fleet/v4/server/datastore/mysql.(*Datastore).ListSoftwareTitles(0xc000447500, {0x379a770, 0xc000d50f30}, {{0x0, 0x14, {0xc000b92a78, 0xb}, 0x1, {0x0, 0x0}, ...}, ...}, ...)                                                                                                                                       |\n| 1754333102152 |  github.com/fleetdm/fleet/v4/server/datastore/mysql/software_titles.go:223 +0xecb                                                                                                                                                                                                                                                     |\n| 1754333102152 | github.com/fleetdm/fleet/v4/server/service.(*Service).ListSoftwareTitles(0xc000253908, {0x379a770, 0xc000d50f30}, {{0x0, 0x14, {0xc000b92a78, 0xb}, 0x1, {0x0, 0x0}, ...}, ...})                                                                                                                                                      |\n| 1754333102152 |  github.com/fleetdm/fleet/v4/server/service/software_titles.go:101 +0x2b6                                                                                                                                                                                                                                                             |\n| 1754333102152 | github.com/fleetdm/fleet/v4/server/service.listSoftwareTitlesEndpoint({0x379a770?, 0xc000d50f30?}, {0x2826300?, 0xc0011eb680?}, {0x37da088?, 0xc000d50a50?})                                                                                                                                                                          |\n| 1754333102152 |  github.com/fleetdm/fleet/v4/server/service/software_titles.go:35 +0xc3                                                                                                                                                                                                                                                               |\n| 1754333102152 | github.com/fleetdm/fleet/v4/server/service.(*endpointer).CallHandlerFunc(0xc0015e6300?, 0xc001a7ee70?, {0x379a770?, 0xc000d50f30?}, {0x2826300?, 0xc0011eb680?}, {0x2e78ae0?, 0xc000d50a50?})                                                                                                                                         |\n| 1754333102152 |  github.com/fleetdm/fleet/v4/server/service/endpoint_utils.go:99 +0xd5                                                                                                                                                                                                                                                                |\n| 1754333102152 | github.com/fleetdm/fleet/v4/server/service/middleware/endpoint_utils.(*CommonEndpointer[...]).makeEndpoint.func1({0x2826300, 0xc0011eb680})                                                                                                                                                                                           |\n| 1754333102152 |  github.com/fleetdm/fleet/v4/server/service/middleware/endpoint_utils/endpoint_utils.go:566 +0x76                                                                                                                                                                                                                                     |\n| 1754333102152 | github.com/fleetdm/fleet/v4/server/service/middleware/auth.AuthenticatedUser.func1({0x379a770, 0xc000d50f30}, {0x2826300, 0xc0011eb680})                                                                                                                                                                                              |\n| 1754333102152 |  github.com/fleetdm/fleet/v4/server/service/middleware/auth/auth.go:40 +0xcd                                                                                                                                                                                                                                                          |\n| 1754333102152 | github.com/fleetdm/fleet/v4/server/service/middleware/auth.AuthenticatedUser.Logged.func2({0x379a770, 0xc000d50f30}, {0x2826300?, 0xc0011eb680?})                                                                                                                                                                                     |\n| 1754333102152 |  github.com/fleetdm/fleet/v4/server/service/middleware/log/log.go:15 +0x32                                                                                                                                                                                                                                                            |\n| 1754333102152 | github.com/fleetdm/fleet/v4/server/service/middleware/endpoint_utils.newServer.newServer.(*Middleware).AuthzCheck.func1.func2({0x379a770, 0xc000d505a0}, {0x2826300, 0xc0011eb680})                                                                                                                                                   |\n| 1754333102152 |  github.com/fleetdm/fleet/v4/server/service/middleware/authzcheck/authzcheck.go:31 +0x7c                                                                                                                                                                                                                                              |\n| 1754333102152 | github.com/go-kit/kit/transport/http.Server.ServeHTTP({0xc0011a3610, 0xc0011c8a80, 0x33b8200, {0xc0011a3630, 0x2, 0x2}, {0xc000fd3140, 0x3, 0x3}, 0x33b89d0, ...}, ...)                                                                                                                                                               |\n| 1754333102152 |  github.com/go-kit/kit@v0.12.0/transport/http/server.go:121 +0x334                                                                                                                                                                                                                                                                    |\n| 1754333102152 | github.com/prometheus/client_golang/prometheus/promhttp.InstrumentHandlerRequestSize.func2({0x7f362c2850d0?, 0xc001b21ae0?}, 0xc001187900)                                                                                                                                                                                            |\n| 1754333102152 |  github.com/prometheus/client_golang@v1.21.1/prometheus/promhttp/instrument_server.go:255 +0x7d                                                                                                                                                                                                                                       |\n| 1754333102152 | net/http.HandlerFunc.ServeHTTP(0x7f362c2850d0?, {0x7f362c2850d0?, 0xc001b21ae0?}, 0xc001b21a90?)                                                                                                                                                                                                                                      |\n| 1754333102152 |  net/http/server.go:2294 +0x29                                                                                                                                                                                                                                                                                                        |\n| 1754333102152 | github.com/prometheus/client_golang/prometheus/promhttp.InstrumentHandlerResponseSize.func1({0x7f362c2850d0?, 0xc001b21a90?}, 0xc001187900)                                                                                                                                                                                           |\n| 1754333102152 |  github.com/prometheus/client_golang@v1.21.1/prometheus/promhttp/instrument_server.go:296 +0xcf                                                                                                                                                                                                                                       |\n| 1754333102152 | net/http.HandlerFunc.ServeHTTP(0x3795ab8?, {0x7f362c2850d0?, 0xc001b21a90?}, 0xc001a7f4e8?)                                                                                                                                                                                                                                           |\n| 1754333102152 |  net/http/server.go:2294 +0x29                                                                                                                                                                                                                                                                                                        |\n| 1754333102152 | github.com/prometheus/client_golang/prometheus/promhttp.InstrumentHandlerCounter.func1({0x3795ab8?, 0xc00129fc00?}, 0xc001187900)                                                                                                                                                                                                     |\n| 1754333102152 |  github.com/prometheus/client_golang@v1.21.1/prometheus/promhttp/instrument_server.go:147 +0xc3                                                                                                                                                                                                                                       |\n| 1754333102152 | net/http.HandlerFunc.ServeHTTP(0xc0011eab40?, {0x3795ab8?, 0xc00129fc00?}, 0xc001a7f660?)                                                                                                                                                                                                                                             |\n| 1754333102152 |  net/http/server.go:2294 +0x29                                                                                                                                                                                                                                                                                                        |\n| 1754333102152 | github.com/prometheus/client_golang/prometheus/promhttp.InstrumentHandlerDuration.func2({0x3795ab8, 0xc00129fc00}, 0xc001187900)                                                                                                                                                                                                      |\n| 1754333102152 |  github.com/prometheus/client_golang@v1.21.1/prometheus/promhttp/instrument_server.go:109 +0xc5                                                                                                                                                                                                                                       |\n| 1754333102152 | net/http.HandlerFunc.ServeHTTP(0x379a770?, {0x3795ab8?, 0xc00129fc00?}, 0x375f458?)                                                                                                                                                                                                                                                   |\n| 1754333102152 |  net/http/server.go:2294 +0x29                                                                                                                                                                                                                                                                                                        |\n| 1754333102152 | github.com/fleetdm/fleet/v4/server/service.publicIP.func1({0x3795ab8, 0xc00129fc00}, 0xc0011877c0)                                                                                                                                                                                                                                    |\n| 1754333102152 |  github.com/fleetdm/fleet/v4/server/service/handler.go:136 +0x197                                                                                                                                                                                                                                                                     |\n| 1754333102152 | net/http.HandlerFunc.ServeHTTP(0xc001187540?, {0x3795ab8?, 0xc00129fc00?}, 0xc001a7f828?)                                                                                                                                                                                                                                             |\n| 1754333102152 |  net/http/server.go:2294 +0x29                                                                                                                                                                                                                                                                                                        |\n| 1754333102152 | github.com/gorilla/mux.(*Router).ServeHTTP(0xc000168600, {0x3795ab8, 0xc00129fc00}, 0xc001187400)                                                                                                                                                                                                                                     |\n| 1754333102152 |  github.com/gorilla/mux@v1.8.1/mux.go:212 +0x1e2                                                                                                                                                                                                                                                                                      |\n| 1754333102152 | main.createServeCmd.func1.25({0x3795ab8, 0xc00129fc00}, 0xc001187400)                                                                                                                                                                                                                                                                 |\n| 1754333102152 |  github.com/fleetdm/fleet/v4/cmd/fleet/serve.go:1292 +0x127a                                                                                                                                                                                                                                                                          |\n| 1754333102152 | net/http.HandlerFunc.ServeHTTP(0xc001608900?, {0x3795ab8?, 0xc00129fc00?}, 0x7f367595e5c0?)                                                                                                                                                                                                                                           |\n| 1754333102152 |  net/http/server.go:2294 +0x29                                                                                                                                                                                                                                                                                                        |\n| 1754333102152 | net/http.(*ServeMux).ServeHTTP(0x481dd2?, {0x3795ab8, 0xc00129fc00}, 0xc001187400)                                                                                                                                                                                                                                                    |\n| 1754333102152 |  net/http/server.go:2822 +0x1c4                                                                                                                                                                                                                                                                                                       |\n| 1754333102152 | main.createServeCmd.func1.(*Handler).Handler.53({0x3795ab8?, 0xc00129fc00?}, 0x3?)                                                                                                                                                                                                                                                    |\n| 1754333102152 |  github.com/fleetdm/fleet/v4/server/launcher/server.go:54 +0xa5                                                                                                                                                                                                                                                                       |\n| 1754333102152 | net/http.HandlerFunc.ServeHTTP(0x4783b9?, {0x3795ab8?, 0xc00129fc00?}, 0xc001a7fb70?)                                                                                                                                                                                                                                                 |\n| 1754333102152 |  net/http/server.go:2294 +0x29                                                                                                                                                                                                                                                                                                        |\n| 1754333102152 | net/http.serverHandler.ServeHTTP({0xc00186e870?}, {0x3795ab8?, 0xc00129fc00?}, 0x6?)                                                                                                                                                                                                                                                  |\n| 1754333102152 |  net/http/server.go:3301 +0x8e                                                                                                                                                                                                                                                                                                        |\n| 1754333102152 | net/http.(*conn).serve(0xc0019918c0, {0x379a770, 0xc0019ba2a0})                                                                                                                                                                                                                                                                       |\n| 1754333102152 |  net/http/server.go:2102 +0x625                                                                                                                                                                                                                                                                                                       |\n| 1754333102152 | created by net/http.(*Server).Serve in goroutine 3394                                                                                                                                                                                                                                                                                 |\n| 1754333102152 |  net/http/server.go:3454 +0x485                                                                                                                                                                                                                                                                                                       \n```\n\n### 🛠️ To fix\n\nThere's a clear missing `nil` check here:\nhttps://github.com/fleetdm/fleet/blob/ab0f699e85f530ce7a0a03f93c55ac44172e0ab6/server/datastore/mysql/software_titles.go#L222-L223\n\n### 🧑‍💻  Steps to reproduce\n\nTODO(@lucasmrod): I still need to reproduce this.\n\n### 🕯️ More info _(optional)_\n\nMore context here: https://fleetdm.slack.com/archives/C03EG80BM2A/p1754332898012359",
          "number": 31595,
          "repository": "fleetdm/fleet",
          "title": "Fleet panics in `ListSoftwareTitles`",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/31595"
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgdS0W4",
        "labels": [
          "bug",
          ":reproduce",
          ":incoming"
        ],
        "repository": "https://github.com/fleetdm/fleet",
        "status": "Done",
        "title": "Fleet panics in `ListSoftwareTitles`",
        "comments": [
          {
            "author": {
              "login": "allenhouchins"
            },
            "body": "Possibly related: https://github.com/fleetdm/fleet/issues/31571"
          },
          {
            "author": {
              "login": "lucasmrod"
            },
            "body": "Sorry, my bad, I missed your issue when looking for duplicates. Closing as duplicate."
          },
          {
            "author": {
              "login": "fleet-release"
            },
            "body": "Issue in `ListSoftwareTitles`,\nA fix brings calm to the fight,\nFleet's stability takes flight."
          }
        ],
        "issueNumber": 31595,
        "changeType": "added"
      },
      {
        "assignees": [
          "lucasmrod"
        ],
        "content": {
          "body": "**Fleet version**: 4.71.0\n\n**Web browser and operating system**: Safari\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\nWhen going to All teams \u003e Software, admins are faced with a `Something's gone wrong` message. Going to other teams works as expected. This is currently happening in a prospect environment. Credentials to the environment and underlying infrastructure (Render) are available in 1Password. Reach out to @allenhouchins for more info.\n\n### 🛠️ To fix\n\u003c!-- Add the expected fix here. If you're not sure, leave this blank for product to specify.  --\u003e\nTBD\n\nProduct designer: _________________________\u003c!-- Who is the product designer to contact if folks have questions about this fix? --\u003e\n\n### 🧑‍💻  Steps to reproduce\n\u003c!-- Provide step-by-step actions of how to recreate this bug in a clean install of Fleet. (This helps others understand and fix it more quickly.) --\u003e\n1. Login to prospect environment\n2. Navigate to All teams \u003eSoftware tabe\n3. Observe error\n\n### 🕯️ More info _(optional)_\n\u003c!-- Add any additional details you think could be relevant to solving or reproducing the bug (e.g., \"this does not reproduce when...\") --\u003e\n```\n2025/08/04 16:55:04 http: panic serving 10.201.89.3:48130: runtime error: invalid memory address or nil pointer dereference\ngoroutine 4729 [running]:\nnet/http.(*conn).serve.func1()\n\tnet/http/server.go:1947 +0xbe\npanic({0x29fe500?, 0x4bfeb30?})\n\truntime/panic.go:792 +0x132\ngithub.com/fleetdm/fleet/v4/server/datastore/mysql.(*Datastore).ListSoftwareTitles(0xc000583500, {0x379a770, 0xc00155eae0}, {{0x0, 0x14, {0xc0009b6688, 0xb}, 0x1, {0x0, 0x0}, ...}, ...}, ...)\n\tgithub.com/fleetdm/fleet/v4/server/datastore/mysql/software_titles.go:223 +0xecb\ngithub.com/fleetdm/fleet/v4/server/service.(*Service).ListSoftwareTitles(0xc0007b8608, {0x379a770, 0xc00155eae0}, {{0x0, 0x14, {0xc0009b6688, 0xb}, 0x1, {0x0, 0x0}, ...}, ...})\n\tgithub.com/fleetdm/fleet/v4/server/service/software_titles.go:101 +0x2b6\ngithub.com/fleetdm/fleet/v4/server/service.listSoftwareTitlesEndpoint({0x379a770?, 0xc00155eae0?}, {0x2826300?, 0xc00180d0e0?}, {0x37da088?, 0xc000f945d0?})\n\tgithub.com/fleetdm/fleet/v4/server/service/software_titles.go:35 +0xc3\ngithub.com/fleetdm/fleet/v4/server/service.(*endpointer).CallHandlerFunc(0xc0012d7ef0?, 0xc001aaae70?, {0x379a770?, 0xc00155eae0?}, {0x2826300?, 0xc00180d0e0?}, {0x2e78ae0?, 0xc000f945d0?})\n\tgithub.com/fleetdm/fleet/v4/server/service/endpoint_utils.go:99 +0xd5\ngithub.com/fleetdm/fleet/v4/server/service/middleware/endpoint_utils.(*CommonEndpointer[...]).makeEndpoint.func1({0x2826300, 0xc00180d0e0})\n\tgithub.com/fleetdm/fleet/v4/server/service/middleware/endpoint_utils/endpoint_utils.go:566 +0x76\ngithub.com/fleetdm/fleet/v4/server/service/middleware/auth.AuthenticatedUser.func1({0x379a770, 0xc00155eae0}, {0x2826300, 0xc00180d0e0})\n\tgithub.com/fleetdm/fleet/v4/server/service/middleware/auth/auth.go:40 +0xcd\ngithub.com/fleetdm/fleet/v4/server/service/middleware/auth.AuthenticatedUser.Logged.func2({0x379a770, 0xc00155eae0}, {0x2826300?, 0xc00180d0e0?})\n\tgithub.com/fleetdm/fleet/v4/server/service/middleware/log/log.go:15 +0x32\ngithub.com/fleetdm/fleet/v4/server/service/middleware/endpoint_utils.newServer.newServer.(*Middleware).AuthzCheck.func1.func2({0x379a770, 0xc00155e420}, {0x2826300, 0xc00180d0e0})\n\tgithub.com/fleetdm/fleet/v4/server/service/middleware/authzcheck/authzcheck.go:31 +0x7c\ngithub.com/go-kit/kit/transport/http.Server.ServeHTTP({0xc001013150, 0xc001099d00, 0x33b8200, {0xc001013170, 0x2, 0x2}, {0xc000ea4978, 0x3, 0x3}, 0x33b89d0, ...}, ...)\n\tgithub.com/go-kit/kit@v0.12.0/transport/http/server.go:121 +0x334\ngithub.com/prometheus/client_golang/prometheus/promhttp.InstrumentHandlerRequestSize.func2({0x7a703671a218?, 0xc001f1c550?}, 0xc0014fa140)\n\tgithub.com/prometheus/client_golang@v1.21.1/prometheus/promhttp/instrument_server.go:255 +0x7d\nnet/http.HandlerFunc.ServeHTTP(0x4c13f20?, {0x7a703671a218?, 0xc001f1c550?}, 0xc001f1c500?)\n\tnet/http/server.go:2294 +0x29\ngithub.com/prometheus/client_golang/prometheus/promhttp.InstrumentHandlerResponseSize.func1({0x7a703671a218?, 0xc001f1c500?}, 0xc0014fa140)\n\tgithub.com/prometheus/client_golang@v1.21.1/prometheus/promhttp/instrument_server.go:296 +0xcf\nnet/http.HandlerFunc.ServeHTTP(0x4c13ea0?, {0x7a703671a218?, 0xc001f1c500?}, 0xc000ea74e8?)\n\tnet/http/server.go:2294 +0x29\ngithub.com/prometheus/client_golang/prometheus/promhttp.InstrumentHandlerCounter.func1({0x3795ab8?, 0xc00195a8c0?}, 0xc0014fa140)\n\tgithub.com/prometheus/client_golang@v1.21.1/prometheus/promhttp/instrument_server.go:147 +0xc3\nnet/http.HandlerFunc.ServeHTTP(0x41d3de?, {0x3795ab8?, 0xc00195a8c0?}, 0x8000a81660?)\n\tnet/http/server.go:2294 +0x29\ngithub.com/prometheus/client_golang/prometheus/promhttp.InstrumentHandlerDuration.func2({0x3795ab8, 0xc00195a8c0}, 0xc0014fa140)\n\tgithub.com/prometheus/client_golang@v1.21.1/prometheus/promhttp/instrument_server.go:109 +0xc5\nnet/http.HandlerFunc.ServeHTTP(0x379a770?, {0x3795ab8?, 0xc00195a8c0?}, 0x375f458?)\n\tnet/http/server.go:2294 +0x29\ngithub.com/fleetdm/fleet/v4/server/service.publicIP.func1({0x3795ab8, 0xc00195a8c0}, 0xc0014fa000)\n\tgithub.com/fleetdm/fleet/v4/server/service/handler.go:136 +0x197\nnet/http.HandlerFunc.ServeHTTP(0xc0008b3e00?, {0x3795ab8?, 0xc00195a8c0?}, 0xc001041828?)\n\tnet/http/server.go:2294 +0x29\ngithub.com/gorilla/mux.(*Router).ServeHTTP(0xc000151080, {0x3795ab8, 0xc00195a8c0}, 0xc0008b3b80)\n\tgithub.com/gorilla/mux@v1.8.1/mux.go:212 +0x1e2\nmain.createServeCmd.func1.25({0x3795ab8, 0xc00195a8c0}, 0xc0008b3b80)\n\tgithub.com/fleetdm/fleet/v4/cmd/fleet/serve.go:1292 +0x127a\nnet/http.HandlerFunc.ServeHTTP(0xc0016e1b00?, {0x3795ab8?, 0xc00195a8c0?}, 0x7a707e34cf30?)\n\tnet/http/server.go:2294 +0x29\nnet/http.(*ServeMux).ServeHTTP(0x481dd2?, {0x3795ab8, 0xc00195a8c0}, 0xc0008b3b80)\n\tnet/http/server.go:2822 +0x1c4\nmain.createServeCmd.func1.(*Handler).Handler.53({0x3795ab8?, 0xc00195a8c0?}, 0x3?)\n\tgithub.com/fleetdm/fleet/v4/server/launcher/server.go:54 +0xa5\nnet/http.HandlerFunc.ServeHTTP(0x4783b9?, {0x3795ab8?, 0xc00195a8c0?}, 0xc001041b70?)\n\tnet/http/server.go:2294 +0x29\nnet/http.serverHandler.ServeHTTP({0xc0012d75c0?}, {0x3795ab8?, 0xc00195a8c0?}, 0x6?)\n\tnet/http/server.go:3301 +0x8e\nnet/http.(*conn).serve(0xc001f1b3b0, {0x379a770, 0xc0017ea360})\n\tnet/http/server.go:2102 +0x625\ncreated by net/http.(*Server).Serve in goroutine 3438\n\tnet/http/server.go:3454 +0x485\n2025/08/04 16:55:05 http: panic serving 10.201.29.133:35094: runtime error: invalid memory address or nil pointer dereference\ngoroutine 4772 [running]:\nnet/http.(*conn).serve.func1()\n\tnet/http/server.go:1947 +0xbe\npanic({0x29fe500?, 0x4bfeb30?})\n\truntime/panic.go:792 +0x132\ngithub.com/fleetdm/fleet/v4/server/datastore/mysql.(*Datastore).ListSoftwareTitles(0xc000583500, {0x379a770, 0xc0016458f0}, {{0x0, 0x14, {0xc0009b6718, 0xb}, 0x1, {0x0, 0x0}, ...}, ...}, ...)\n\tgithub.com/fleetdm/fleet/v4/server/datastore/mysql/software_titles.go:223 +0xecb\ngithub.com/fleetdm/fleet/v4/server/service.(*Service).ListSoftwareTitles(0xc0007b8608, {0x379a770, 0xc0016458f0}, {{0x0, 0x14, {0xc0009b6718, 0xb}, 0x1, {0x0, 0x0}, ...}, ...})\n\tgithub.com/fleetdm/fleet/v4/server/service/software_titles.go:101 +0x2b6\ngithub.com/fleetdm/fleet/v4/server/service.listSoftwareTitlesEndpoint({0x379a770?, 0xc0016458f0?}, {0x2826300?, 0xc000ef34a0?}, {0x37da088?, 0xc000f945d0?})\n\tgithub.com/fleetdm/fleet/v4/server/service/software_titles.go:35 +0xc3\ngithub.com/fleetdm/fleet/v4/server/service.(*endpointer).CallHandlerFunc(0xc0015f9bc0?, 0xc001aaae70?, {0x379a770?, 0xc0016458f0?}, {0x2826300?, 0xc000ef34a0?}, {0x2e78ae0?, 0xc000f945d0?})\n\tgithub.com/fleetdm/fleet/v4/server/service/endpoint_utils.go:99 +0xd5\ngithub.com/fleetdm/fleet/v4/server/service/middleware/endpoint_utils.(*CommonEndpointer[...]).makeEndpoint.func1({0x2826300, 0xc000ef34a0})\n\tgithub.com/fleetdm/fleet/v4/server/service/middleware/endpoint_utils/endpoint_utils.go:566 +0x76\ngithub.com/fleetdm/fleet/v4/server/service/middleware/auth.AuthenticatedUser.func1({0x379a770, 0xc0016458f0}, {0x2826300, 0xc000ef34a0})\n\tgithub.com/fleetdm/fleet/v4/server/service/middleware/auth/auth.go:40 +0xcd\ngithub.com/fleetdm/fleet/v4/server/service/middleware/auth.AuthenticatedUser.Logged.func2({0x379a770, 0xc0016458f0}, {0x2826300?, 0xc000ef34a0?})\n\tgithub.com/fleetdm/fleet/v4/server/service/middleware/log/log.go:15 +0x32\ngithub.com/fleetdm/fleet/v4/server/service/middleware/endpoint_utils.newServer.newServer.(*Middleware).AuthzCheck.func1.func2({0x379a770, 0xc0016454d0}, {0x2826300, 0xc000ef34a0})\n\tgithub.com/fleetdm/fleet/v4/server/service/middleware/authzcheck/authzcheck.go:31 +0x7c\ngithub.com/go-kit/kit/transport/http.Server.ServeHTTP({0xc001013150, 0xc001099d00, 0x33b8200, {0xc001013170, 0x2, 0x2}, {0xc000ea4978, 0x3, 0x3}, 0x33b89d0, ...}, ...)\n\tgithub.com/go-kit/kit@v0.12.0/transport/http/server.go:121 +0x334\ngithub.com/prometheus/client_golang/prometheus/promhttp.InstrumentHandlerRequestSize.func2({0x7a703671a218?, 0xc001f1d5e0?}, 0xc0014fbcc0)\n\tgithub.com/prometheus/client_golang@v1.21.1/prometheus/promhttp/instrument_server.go:255 +0x7d\nnet/http.HandlerFunc.ServeHTTP(0x4c13f20?, {0x7a703671a218?, 0xc001f1d5e0?}, 0xc001f1d590?)\n\tnet/http/server.go:2294 +0x29\ngithub.com/prometheus/client_golang/prometheus/promhttp.InstrumentHandlerResponseSize.func1({0x7a703671a218?, 0xc001f1d590?}, 0xc0014fbcc0)\n\tgithub.com/prometheus/client_golang@v1.21.1/prometheus/promhttp/instrument_server.go:296 +0xcf\nnet/http.HandlerFunc.ServeHTTP(0x4c13ea0?, {0x7a703671a218?, 0xc001f1d590?}, 0xc0017414e8?)\n\tnet/http/server.go:2294 +0x29\ngithub.com/prometheus/client_golang/prometheus/promhttp.InstrumentHandlerCounter.func1({0x3795ab8?, 0xc00195ab60?}, 0xc0014fbcc0)\n\tgithub.com/prometheus/client_golang@v1.21.1/prometheus/promhttp/instrument_server.go:147 +0xc3\nnet/http.HandlerFunc.ServeHTTP(0xc0007af4a0?, {0x3795ab8?, 0xc00195ab60?}, 0xc001041660?)\n\tnet/http/server.go:2294 +0x29\ngithub.com/prometheus/client_golang/prometheus/promhttp.InstrumentHandlerDuration.func2({0x3795ab8, 0xc00195ab60}, 0xc0014fbcc0)\n\tgithub.com/prometheus/client_golang@v1.21.1/prometheus/promhttp/instrument_server.go:109 +0xc5\nnet/http.HandlerFunc.ServeHTTP(0x379a770?, {0x3795ab8?, 0xc00195ab60?}, 0x375f458?)\n\tnet/http/server.go:2294 +0x29\ngithub.com/fleetdm/fleet/v4/server/service.publicIP.func1({0x3795ab8, 0xc00195ab60}, 0xc0014fbb80)\n\tgithub.com/fleetdm/fleet/v4/server/service/handler.go:136 +0x197\nnet/http.HandlerFunc.ServeHTTP(0xc0014fba40?, {0x3795ab8?, 0xc00195ab60?}, 0xc001041828?)\n\tnet/http/server.go:2294 +0x29\ngithub.com/gorilla/mux.(*Router).ServeHTTP(0xc000151080, {0x3795ab8, 0xc00195ab60}, 0xc0014fb7c0)\n\tgithub.com/gorilla/mux@v1.8.1/mux.go:212 +0x1e2\nmain.createServeCmd.func1.25({0x3795ab8, 0xc00195ab60}, 0xc0014fb7c0)\n\tgithub.com/fleetdm/fleet/v4/cmd/fleet/serve.go:1292 +0x127a\nnet/http.HandlerFunc.ServeHTTP(0xc0016e1b00?, {0x3795ab8?, 0xc00195ab60?}, 0x7a707e34cf30?)\n\tnet/http/server.go:2294 +0x29\nnet/http.(*ServeMux).ServeHTTP(0x481dd2?, {0x3795ab8, 0xc00195ab60}, 0xc0014fb7c0)\n\tnet/http/server.go:2822 +0x1c4\nmain.createServeCmd.func1.(*Handler).Handler.53({0x3795ab8?, 0xc00195ab60?}, 0x3?)\n\tgithub.com/fleetdm/fleet/v4/server/launcher/server.go:54 +0xa5\nnet/http.HandlerFunc.ServeHTTP(0x4783b9?, {0x3795ab8?, 0xc00195ab60?}, 0xc001041b70?)\n\tnet/http/server.go:2294 +0x29\nnet/http.serverHandler.ServeHTTP({0xc0015f8d50?}, {0x3795ab8?, 0xc00195ab60?}, 0x6?)\n\tnet/http/server.go:3301 +0x8e\nnet/http.(*conn).serve(0xc001f5c240, {0x379a770, 0xc0017ea360})\n\tnet/http/server.go:2102 +0x625\ncreated by net/http.(*Server).Serve in goroutine 3438\n\tnet/http/server.go:3454 +0x485\nlevel=info ts=2025-08-04T16:55:07.158975398Z cron=integrations schedule=integrations instanceID=\"D8eS+5MTcDiMHwyVik9qG0Dc0vJxRD8FjZA4umY3cMUXgeYIrr8UoohkkN/eVogV4Vi4SdwJFzAaOQyDxXNZog==\" status=pending\nlevel=info ts=2025-08-04T16:55:07.161575996Z cron=integrations msg=\"no cooldowns to process\"\nlevel=info ts=2025-08-04T16:55:07.168810078Z cron=integrations schedule=integrations instanceID=\"D8eS+5MTcDiMHwyVik9qG0Dc0vJxRD8FjZA4umY3cMUXgeYIrr8UoohkkN/eVogV4Vi4SdwJFzAaOQyDxXNZog==\" status=completed\nlevel=info ts=2025-08-04T16:55:08.141082597Z cron=apple_mdm_dep_profile_assigner component=nanodep-syncer schedule=apple_mdm_dep_profile_assigner instanceID=\"D8eS+5MTcDiMHwyVik9qG0Dc0vJxRD8FjZA4umY3cMUXgeYIrr8UoohkkN/eVogV4Vi4SdwJFzAaOQyDxXNZog==\" status=pending\nlevel=info ts=2025-08-04T16:55:08.148616975Z cron=apple_mdm_dep_profile_assigner component=nanodep-syncer schedule=apple_mdm_dep_profile_assigner instanceID=\"D8eS+5MTcDiMHwyVik9qG0Dc0vJxRD8FjZA4umY3cMUXgeYIrr8UoohkkN/eVogV4Vi4SdwJFzAaOQyDxXNZog==\" status=completed\nlevel=info ts=2025-08-04T16:55:13.143901869Z cron=apple_mdm_apns_pusher schedule=apple_mdm_apns_pusher instanceID=\"D8eS+5MTcDiMHwyVik9qG0Dc0vJxRD8FjZA4umY3cMUXgeYIrr8UoohkkN/eVogV4Vi4SdwJFzAaOQyDxXNZog==\" status=pending\nlevel=info ts=2025-08-04T16:55:13.15214902Z cron=apple_mdm_apns_pusher schedule=apple_mdm_apns_pusher instanceID=\"D8eS+5MTcDiMHwyVik9qG0Dc0vJxRD8FjZA4umY3cMUXgeYIrr8UoohkkN/eVogV4Vi4SdwJFzAaOQyDxXNZog==\" status=completed\n2025/08/04 16:55:21 http: panic serving 10.201.166.129:41120: runtime error: invalid memory address or nil pointer dereference\ngoroutine 4776 [running]:\nnet/http.(*conn).serve.func1()\n\tnet/http/server.go:1947 +0xbe\npanic({0x29fe500?, 0x4bfeb30?})\n\truntime/panic.go:792 +0x132\ngithub.com/fleetdm/fleet/v4/server/datastore/mysql.(*Datastore).ListSoftwareTitles(0xc000583500, {0x379a770, 0xc0017f4ba0}, {{0x0, 0x14, {0xc0009b67a8, 0xb}, 0x1, {0x0, 0x0}, ...}, ...}, ...)\n\tgithub.com/fleetdm/fleet/v4/server/datastore/mysql/software_titles.go:223 +0xecb\ngithub.com/fleetdm/fleet/v4/server/service.(*Service).ListSoftwareTitles(0xc0007b8608, {0x379a770, 0xc0017f4ba0}, {{0x0, 0x14, {0xc0009b67a8, 0xb}, 0x1, {0x0, 0x0}, ...}, ...})\n\tgithub.com/fleetdm/fleet/v4/server/service/software_titles.go:101 +0x2b6\ngithub.com/fleetdm/fleet/v4/server/service.listSoftwareTitlesEndpoint({0x379a770?, 0xc0017f4ba0?}, {0x2826300?, 0xc00123efa0?}, {0x37da088?, 0xc000f945d0?})\n\tgithub.com/fleetdm/fleet/v4/server/service/software_titles.go:35 +0xc3\ngithub.com/fleetdm/fleet/v4/server/service.(*endpointer).CallHandlerFunc(0xc001984ae0?, 0xc001f6ee70?, {0x379a770?, 0xc0017f4ba0?}, {0x2826300?, 0xc00123efa0?}, {0x2e78ae0?, 0xc000f945d0?})\n\tgithub.com/fleetdm/fleet/v4/server/service/endpoint_utils.go:99 +0xd5\ngithub.com/fleetdm/fleet/v4/server/service/middleware/endpoint_utils.(*CommonEndpointer[...]).makeEndpoint.func1({0x2826300, 0xc00123efa0})\n\tgithub.com/fleetdm/fleet/v4/server/service/middleware/endpoint_utils/endpoint_utils.go:566 +0x76\ngithub.com/fleetdm/fleet/v4/server/service/middleware/auth.AuthenticatedUser.func1({0x379a770, 0xc0017f4ba0}, {0x2826300, 0xc00123efa0})\n\tgithub.com/fleetdm/fleet/v4/server/service/middleware/auth/auth.go:40 +0xcd\ngithub.com/fleetdm/fleet/v4/server/service/middleware/auth.AuthenticatedUser.Logged.func2({0x379a770, 0xc0017f4ba0}, {0x2826300?, 0xc00123efa0?})\n\tgithub.com/fleetdm/fleet/v4/server/service/middleware/log/log.go:15 +0x32\ngithub.com/fleetdm/fleet/v4/server/service/middleware/endpoint_utils.newServer.newServer.(*Middleware).AuthzCheck.func1.func2({0x379a770, 0xc0017f4720}, {0x2826300, 0xc00123efa0})\n\tgithub.com/fleetdm/fleet/v4/server/service/middleware/authzcheck/authzcheck.go:31 +0x7c\ngithub.com/go-kit/kit/transport/http.Server.ServeHTTP({0xc001013150, 0xc001099d00, 0x33b8200, {0xc001013170, 0x2, 0x2}, {0xc000ea4978, 0x3, 0x3}, 0x33b89d0, ...}, ...)\n\tgithub.com/go-kit/kit@v0.12.0/transport/http/server.go:121 +0x334\ngithub.com/prometheus/client_golang/prometheus/promhttp.InstrumentHandlerRequestSize.func2({0x7a703671a218?, 0xc001f1dcc0?}, 0xc001314b40)\n\tgithub.com/prometheus/client_golang@v1.21.1/prometheus/promhttp/instrument_server.go:255 +0x7d\nnet/http.HandlerFunc.ServeHTTP(0x4c13f20?, {0x7a703671a218?, 0xc001f1dcc0?}, 0xc001f1dc70?)\n\tnet/http/server.go:2294 +0x29\ngithub.com/prometheus/client_golang/prometheus/promhttp.InstrumentHandlerResponseSize.func1({0x7a703671a218?, 0xc001f1dc70?}, 0xc001314b40)\n\tgithub.com/prometheus/client_golang@v1.21.1/prometheus/promhttp/instrument_server.go:296 +0xcf\nnet/http.HandlerFunc.ServeHTTP(0x4c13ea0?, {0x7a703671a218?, 0xc001f1dc70?}, 0xc0014ab4e8?)\n\tnet/http/server.go:2294 +0x29\ngithub.com/prometheus/client_golang/prometheus/promhttp.InstrumentHandlerCounter.func1({0x3795ab8?, 0xc00195ac40?}, 0xc001314b40)\n\tgithub.com/prometheus/client_golang@v1.21.1/prometheus/promhttp/instrument_server.go:147 +0xc3\nnet/http.HandlerFunc.ServeHTTP(0xc0007af4a0?, {0x3795ab8?, 0xc00195ac40?}, 0xc001041660?)\n\tnet/http/server.go:2294 +0x29\ngithub.com/prometheus/client_golang/prometheus/promhttp.InstrumentHandlerDuration.func2({0x3795ab8, 0xc00195ac40}, 0xc001314b40)\n\tgithub.com/prometheus/client_golang@v1.21.1/prometheus/promhttp/instrument_server.go:109 +0xc5\nnet/http.HandlerFunc.ServeHTTP(0x379a770?, {0x3795ab8?, 0xc00195ac40?}, 0x375f458?)\n\tnet/http/server.go:2294 +0x29\ngithub.com/fleetdm/fleet/v4/server/service.publicIP.func1({0x3795ab8, 0xc00195ac40}, 0xc001314a00)\n\tgithub.com/fleetdm/fleet/v4/server/service/handler.go:136 +0x197\nnet/http.HandlerFunc.ServeHTTP(0xc0013148c0?, {0x3795ab8?, 0xc00195ac40?}, 0xc001041828?)\n\tnet/http/server.go:2294 +0x29\ngithub.com/gorilla/mux.(*Router).ServeHTTP(0xc000151080, {0x3795ab8, 0xc00195ac40}, 0xc001314780)\n\tgithub.com/gorilla/mux@v1.8.1/mux.go:212 +0x1e2\nmain.createServeCmd.func1.25({0x3795ab8, 0xc00195ac40}, 0xc001314780)\n\tgithub.com/fleetdm/fleet/v4/cmd/fleet/serve.go:1292 +0x127a\nnet/http.HandlerFunc.ServeHTTP(0xc0016e1b00?, {0x3795ab8?, 0xc00195ac40?}, 0x7a707e34cf30?)\n\tnet/http/server.go:2294 +0x29\nnet/http.(*ServeMux).ServeHTTP(0x481dd2?, {0x3795ab8, 0xc00195ac40}, 0xc001314780)\n\tnet/http/server.go:2822 +0x1c4\nmain.createServeCmd.func1.(*Handler).Handler.53({0x3795ab8?, 0xc00195ac40?}, 0x3?)\n\tgithub.com/fleetdm/fleet/v4/server/launcher/server.go:54 +0xa5\nnet/http.HandlerFunc.ServeHTTP(0x4783b9?, {0x3795ab8?, 0xc00195ac40?}, 0xc001041b70?)\n\tnet/http/server.go:2294 +0x29\nnet/http.serverHandler.ServeHTTP({0xc001984660?}, {0x3795ab8?, 0xc00195ac40?}, 0x6?)\n\tnet/http/server.go:3301 +0x8e\nnet/http.(*conn).serve(0xc001f5c510, {0x379a770, 0xc0017ea360})\n\tnet/http/server.go:2102 +0x625\ncreated by net/http.(*Server).Serve in goroutine 3438\n\tnet/http/server.go:3454 +0x485\nlevel=info ts=2025-08-04T16:55:29.398463856Z cron=mdm_windows_profile_manager schedule=mdm_windows_profile_manager instanceID=\"D8eS+5MTcDiMHwyVik9qG0Dc0vJxRD8FjZA4umY3cMUXgeYIrr8UoohkkN/eVogV4Vi4SdwJFzAaOQyDxXNZog==\" status=pending\nlevel=info ts=2025-08-04T16:55:29.410754981Z cron=mdm_windows_profile_manager schedule=mdm_windows_profile_manager instanceID=\"D8eS+5MTcDiMHwyVik9qG0Dc0vJxRD8FjZA4umY3cMUXgeYIrr8UoohkkN/eVogV4Vi4SdwJFzAaOQyDxXNZog==\" status=completed\nlevel=info ts=2025-08-04T16:55:30.408909884Z cron=mdm_apple_profile_manager schedule=mdm_apple_profile_manager instanceID=\"D8eS+5MTcDiMHwyVik9qG0Dc0vJxRD8FjZA4umY3cMUXgeYIrr8UoohkkN/eVogV4Vi4SdwJFzAaOQyDxXNZog==\" status=pending\nlevel=info ts=2025-08-04T16:55:30.426646749Z cron=mdm_apple_profile_manager msg=\"no hosts with changed declarations\"\nlevel=info ts=2025-08-04T16:55:30.433199659Z cron=mdm_apple_profile_manager schedule=mdm_apple_profile_manager instanceID=\"D8eS+5MTcDiMHwyVik9qG0Dc0vJxRD8FjZA4umY3cMUXgeYIrr8UoohkkN/eVogV4Vi4SdwJFzAaOQyDxXNZog==\" status=completed\n```\n\u003c!-- If this is a performance issue, follow these steps to generate and attach a debug archive: https://fleetdm.com/docs/using-fleet/monitoring-fleet#debugging-performance-issues --\u003e\n",
          "number": 31571,
          "repository": "fleetdm/fleet",
          "title": "All teams \u003e Software results in error \"Something's gone wrong\"",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/31571"
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgdS1iA",
        "labels": [
          "bug",
          ":product",
          "#g-software"
        ],
        "repository": "https://github.com/fleetdm/fleet",
        "status": "🥚 Ready",
        "title": "All teams \u003e Software results in error \"Something's gone wrong\"",
        "issueNumber": 31571,
        "changeType": "added"
      }
    ]
  },
  {
    "timestamp": "2025-08-05T19:07:28.01866931Z",
    "items": [
      {
        "assignees": [
          "RachelElysia"
        ],
        "content": {
          "body": "**Fleet version**: 4.72.0\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\n\n\u003cimg width=\"1467\" height=\"581\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/7a3fcf72-5f5c-40e9-8a49-e4cdf74e7ccb\" /\u003e\n\n### 🛠️ To fix\n\u003c!-- Add the expected fix here. If you're not sure, leave this blank for product to specify.  --\u003e\nAdd uninstall action\n\nProduct designer: @RachelElysia \u003c!-- Who is the product designer to contact if folks have questions about this fix? --\u003e\n\n### 🧑‍💻  Steps to reproduce\n\u003c!-- Provide step-by-step actions of how to recreate this bug in a clean install of Fleet. (This helps others understand and fix it more quickly.) --\u003e\n1. Upload a tar.gz archive to a team's library\n2. Include an install and uninstall script, as they are required\n3. Install the tar.gz on a host\n4. After inventory is refetched and the package is showing as installed, look for uninstall action\n\n### 🕯️ More info _(optional)_\n\u003c!-- Add any additional details you think could be relevant to solving or reproducing the bug (e.g., \"this does not reproduce when...\") --\u003e\n\nThis was an item in  #30240\n\u003e Make sure that when the tarball is installed by Fleet, show Installed status + Reinstall and Uninstall actions.\n\n\u003c!-- If this is a performance issue, follow these steps to generate and attach a debug archive: https://fleetdm.com/docs/using-fleet/monitoring-fleet#debugging-performance-issues --\u003e\n"
        },
        "estimate": 1,
        "id": "PVTI_lADOBDAnic4A4BEUzgdSLuM",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "status": "✔️Awaiting QA",
        "comments": [
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "cc: @iansltx @jmwatts \nEst: 1 (under 2 hours) + tests\n\nCan get a PR in before lunch if I priortize this"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "**QA Notes**\n\nTested on-branch ([30240-tarballz-uninstall-bug](https://github.com/fleetdm/fleet/tree/30240-tarballz-uninstall-bug))\n\n- [x] tar.gz files now have uninstall action if they were previously installed\n- [x] \"Installing\", \"Uninstalling\", \"failed\" (install and uninstall), and \"successful\" install and uninstall statuses in Self-service and on Library page all appear correctly and launch the appropriate modals."
          }
        ],
        "issueNumber": 31578,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdCxFk",
        "status": "🐣 In progress",
        "issueNumber": 30803,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdCxJc",
        "status": "🐣 In progress",
        "issueNumber": 31174,
        "changeType": "modified"
      },
      {
        "assignees": [
          "iansltx"
        ],
        "content": {
          "body": "\u003c!-- **This issue's remaining effort can be completed in ≤1 sprint.  It will be valuable even if nothing else ships.**\nIt is [planned and ready](https://fleetdm.com/handbook/company/development-groups#making-changes) to implement.  It is on the proper kanban board. --\u003e\n\n\n## Goal\n\n| User story  |\n|:---------------------------------------------------------------------------|\n| As an IT admin,\n| I want to know when Mac or Windows app has never been used by a user\n| so that I can understand if I can decrease number of licenses for that app.\n\n## Roadmap item\n\nNone\n\n## Original requests\n\n- #27087 \n\n## Context\n- Product Designer: @marko-lisica  \u003c!-- Who is the Product Designer to contact if folks have questions about the UI, CLI, or API changes? --\u003e\n- Engineering DRI: @iansltx    \u003c!-- Who is the Engineer to contact if folks have technical questions? --\u003e\n  \n\u003c!--\nWhat else should contributors [keep in mind](https://fleetdm.com/handbook/company/development-groups#developing-from-wireframes) when working on this change?  (Optional.)\n1. \n2. \n--\u003e\n\n## Changes\n\n### Product\n- [ ] UI changes:\n  - Show \"Never\" rather than omitting header entirely when a `apps` / `programs` / `deb_packages` / `rpm_packages` software item was never opened within modals that show last opened time, and rename headers from \"Last used\" to \"Last opened\" in multi-version host software details and in self-service software details modals\n  - Rename coulmn name form \"Last used\" to \"Last opened\" (on host \u003e software \u003e inventory page)\n  - If software `last_opened_at` is empty then show \"Never\" in \"Last opened\" column if we support last opened time for that source (`apps` or `programs`), `Not Supported` in grey otherwise\n\n\u003cimg width=\"811\" height=\"343\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/c6b8dc7d-74ba-4772-88a2-38645f256a8c\" /\u003e\n\n- [ ] CLI (fleetctl) usage changes: No changes\n- [ ] YAML changes: No changes\n- [ ] REST API changes: No changes\n- [ ] Fleet's agent (fleetd) changes: No changes\n- [ ] GitOps Mode UI changes: No changes\n- [ ] GitOps generation changes: No changes\n- [ ] Activity changes: No changes\n- [ ] Permissions changes: No changes\n- [ ] Changes to paid features or tiers: Fleet Free\n- [ ] My device and fleetdm.com/better changes: No changes\n- [ ] Other reference documentation changes: No changes\n- [ ] First draft of test plan added\n- [ ] Once shipped, requester has been notified\n- [ ] Once shipped, dogfooding issue has been filed\n\n### Engineering\n- [x] Test plan is finalized\n- [ ] Contributor API changes: No changes\n- [ ] Feature guide changes: No changes\n\n\u003e ℹ️  Please read this issue carefully and understand it.  Pay [special attention](https://fleetdm.com/handbook/company/development-groups#developing-from-wireframes) to UI wireframes, especially \"dev notes\".\n\n## QA\n\n### Risk assessment\n\n- Risk level: Low\n\n### Test plan\n\n- [ ] On the software inventory view in host details, confirm the \"Last opened\" column name with no tooltip\n- [ ] Install two versions of an app or Windows program on the same host, but don't open either, and refetch. Confirm that the software inventory shows \"Never\" in black in the \"Last opened\" column. Confirm that the modal for installed paths shows \"Never\" in both entries.\n- [ ] Open one of the versions. Refetch and confirm that the column shows the most recent opened time. Confirm that the modal shows the correct opened time on one entry, \"Never\" for the other.\n- [ ] Open the other version. Refetch and confirm that the column shows the most recent opened time. Confirm that the modal shows the correct opened time on both entries.\n- [ ] Install (or have in inventory) multiple versions of a software item for which we don't support last opened time. Confirm that the \"Last opened\" column shows \"Not supported\" in grey and the versions modal doesn't show the last opened time header.\n- [ ] Confirm that \"Never\" / \"Not supported\" are handled similar to the above with a single installed version on a host\n- [ ] Confirm behavior changes in the modal accessed by clicking a software item's name in My device \u003e Software.\n\n### Testing notes\n\u003c!-- Any additional testing notes relevant to this story or tools required for testing. --\u003e\n\n### Confirmation\n\u003c!-- The engineer responsible for implementing this user story completes the test plan before moving to the \"Ready for QA\" column. --\u003e\n\n1. [ ] Engineer: Added comment to user story confirming successful completion of test plan.\n2. [ ] QA: Added comment to user story confirming successful completion of test plan.\n",
          "number": 31268,
          "repository": "fleetdm/fleet",
          "title": "Host software: display info that Windows and Mac app never been opened",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/31268"
        },
        "estimate": 1,
        "id": "PVTI_lADOBDAnic4A4BEUzgdUaqU",
        "labels": [
          "story",
          ":release",
          "#g-software"
        ],
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "status": "✔️Awaiting QA",
        "title": "Host software: display info that Windows and Mac app never been opened",
        "comments": [
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@marko-lisica FYI we already have `\"last_opened_at\": null` on the API for installed app versions that haven't been opened, so no API changes required here. Revised the ticket template to reflect this.\n\nGoing to include a separate comment with more specific instructions on all I'm pretty sure we need to do, to see if I can feed this into Zed + Sonnet 4 and have it one-shot this :)"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "All we need to do for this is\n\n1. Show `Never` rather than `---` on the column when the API field is null and `source` is `programs` or `apps` (those are the two sources where we have last opened time info), in `HostSoftwareTableConfig.tsx`\n2. Show `Never` rather than skipping the \"Last used\" field in `SoftwareDetailsModal.tsx` and `InventoryVersion.tsx` when the API field is null and `source` is programs or `apps`\n3. Rename \"Last used\" to \"Last opened\" in all three places, and remove the tooltip wrapper in `HostSoftwareTableConfig.tsx`\n4. Update tests in `SoftwareDetailsModal.tests.tsx` to reflect the above changes"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@marko-lisica Mind pulling down the `🤖-31268` branch and seeing if that gets us what we want here?"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Tweaks needed:\n\n* When showing multiple versions, show \"Never\" if all versions don't have an opened time and each individual version would've shown \"Never\"\n* Don't use the grey color for \"Never\" (but keep it for `---`)"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@marko-lisica \n\n\u003cimg width=\"808\" height=\"342\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/20422141-d1eb-445e-9c12-92edd366c242\" /\u003e"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Per design review, we're showing \"Not supported\" rather than \"---\" for sources where we don't support last opened time. Updated the screenshot in the issue description."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@RachelElysia Where do these map to in the UI?\n\nfrontend/pages/hosts/details/cards/Software/SoftwareDetailsModal/SoftwareDetailsModal.tsx\nfrontend/pages/hosts/details/components/InventoryVersions/InventoryVersions.tsx\n\nI think I'm missing a case in the test plan to cover both of these."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Fixed the screenshot to show both cases."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@jmwatts Found the other place where last opened time is: My device \u003e Software. Test plan is updated. Ping when the test plan is good to go; code's already written (by me) so this will land directly on the release board once the test plan is good to go."
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "@iansltx test plan is good to go, tried to move it to the release board, wouldn't budge. GitHub is defiant today. "
          }
        ],
        "issueNumber": 31268,
        "changeType": "added"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcX12Q",
        "comments": [
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@noahtalerman @mostlikelee Removed 'uninstall' from this ticket as the order of operations has determined that this ticket will go ahead of the uninstall ticket (#28038)"
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@jmwatts I took a first pass at the test plan.\n\nQuestions for @mostlikelee:\n\n1. What YAML/API things might need done?\n\nQuestions for @RachelElysia \n\n1. On the carousel, if there are 6 items in the carousel are we thinking it would show 4 and 2 when paginating? Or would we always show four and selecting \"Next\" would go from showing 1 2 3 4 to showing 3 4 5 6?"
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "Notes from 14 April 2025:\n\n1. @noahtalerman : Can we scope this down to Mac only and FMA? \n    1. There are extra complications around Windows due to known issues that we've been discussing. There are also current research tickets on upgrade codes for Windows that are outstanding (#27776) which would be a pre-req for Windows.\n2. Do we want to add activity changes at this time? @mostlikelee and I think no for simplicty's sake.\n"
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "\u003e @noahtalerman : Can we scope this down to Mac only and FMA?\n\n@eugkuo @mostlikelee I think let's draft for all support we support on macOS, Windows, and Linux (custom packages, App Store apps, and Fleet-maintained apps).\n\nAfter we have designs, I think let's discuss and decide how to cut the story up.\n\nWhy? So we know where we're heading and we tease out more complications/unknowns. Then we can come up with a plan for how to address Windows and Linux even if the first iteration we build is just macOS Fleet-maintained apps. Which is a valid first iteration.\n\n\u003e Do we want to add activity changes at this time?\n\n@eugkuo same for activities. I think let's draft activities and then cut."
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "\u003e @eugkuo @mostlikelee I think let's draft for all support we support on macOS, Windows, and Linux (custom packages, App Store apps, and Fleet-maintained apps).\n\n@noahtalerman Coolio. I don't think the design changes. The UI will be the same regardless of platform. (@mostlikelee correct me if I'm wrong).\n\nWRT activities, I added [an example](https://www.figma.com/design/K9BTJ3aZAvwWBXU9N8aqGa/-27983-Fleet-Desktop-%3E-Self-service--Add-%22Update%22-actions-when-updates-are-detected-for-installed-so?node-id=5318-3291\u0026t=LPfejWpLp8jclkAm-11) to the ticket above."
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@noahtalerman @jmwatts @mostlikelee \n I've updated the selected state in the category filters to match work done on [#27245](https://github.com/fleetdm/fleet/issues/27245)"
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "Question 1: what is expected behavior when multiple versions of a software are installed on a host:\n- On macOS, if an application is renamed (`Firefox.app` + `Firefox2.app`), Fleet will show both applications as pending updates in the carousel, but only 1 will patch successfully (Firefox.app because it matches the app name in the dmg)\n- This will also be the case on macOS with `/Applications/Firefox.app` + `~/Downloads/Firefox.app` (only the first will patch)\n- machine vs user installs will also see this symptom on Windows\n\nQuestion 2: Does the update disappear from the carousel if the software install executed successfully, but the app did not actually update?\nexamples:\n- macOS: Firefox.app is renamed to Firefox2.app, install completes successfully and the host now has Firefox.app + Firefox2.app\n- Windows: machine scope is installed, and installer is user scoped (or vice-versa)"
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@mostlikelee @noahtalerman Updates from 7 May 2025 DR:\n\n1. Added [tooltip](https://www.figma.com/design/K9BTJ3aZAvwWBXU9N8aqGa/-27983-Fleet-Desktop-%3E-Self-service--Add-%22Update%22-actions-when-updates-are-detected-for-installed-so?node-id=5366-4609\u0026t=3kh7v4Aj5lLSDppW-11) on `installed` status\n\n"
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@noahtalerman @mostlikelee \n\nUpdated the designs with the following:\n\n1. Removed \"Installed\" status from the update cards at the top of the page.\n2. Upgraded the 'update' action to a button.\n3. For installed apps, updated the action to 'reinstall'"
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "@eugkuo @noahtalerman we realized that we need design when multiple versions of an updatable app is installed"
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@mostlikelee I'm not exactly sure what you mean by this. Wouldn't we still have a single update button for the app? I mean we'd want to update it all to the most recent. I think I might be missing some nuance here.\n\ncc @noahtalerman "
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "Chatted with @mostlikelee and here are the use cases:\n\n1. N different versions in the Applications folder\n2. N copies of the same version in the Applications folder\n    1. Currently can only update the one with the name we expect.\n4. N copies of various versions in different locations.\n\nWe can only update if have following criteria:\n1. Existing path needs to be what's expected (name, location, etc.)\n    1. Works for FMAs\n    2. Does not work as well for custom packages.\n    4. Big question mark around VPP.\n\nLet's discuss in USR.\n\ncc @noahtalerman "
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Looks like there's an off-by-one in step 11 in the test plan.\n\nAlso, for \"Updating\", can we show that status string always when inventory says a piece of software is installed but there's also a pending install? That would allow us to use the existing API there rather than having to build a new one.\n\nI have an idea on making this frontend-only to expedite: use the existing self-service filter, no pagination, and client-side filter to results that have only installed versions where version differs from the installer package. This gets this work out from behind further ListHostSoftware tweaks/derisks it a bit, at the cost of additional frontend munging."
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@iansltx \n\u003e Looks like there's an off-by-one in step 11 in the test plan.\nThanks! Fixed.\n\n\u003eAlso, for \"Updating\", can we show that status string always when inventory says a piece of software is installed but there's also a pending install? That would allow us to use the existing API there rather than having to build a new one.\n\nSo there could be a pending install and we and updating over that? At any rate, if we're updating that software it seems reasonable to show the 'updating' status.\n\n@noahtalerman thoughts?\n\ncc @mostlikelee "
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@eugkuo To clarify, I'm saying that if we have a piece of software already in inventory and there's a pending install (from whatever Fleet-initiated source...Install button, update button, policy execution, whatever), we use the word \"Updating...\" rather than \"Installing...\" in the self-service UI. Then reserve \"Installing...\" for cases where a host _doesn't_ have the same software in inventory already.\n\nSo the pending statuses would be:\n\n* Installing - wasn't in inventory, install is pending\n* Updating - was in inventory, install is pending\n* Uninstalling - uninstall is pending\n\nIf the above are the rules, the frontend already has all of the information it needs (with existing API endpoints) to show the correct status (so, no backend/DB changes to differentiate between \"installing\" and \"updating\")."
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@iansltx Ohhhh! This works for me. Also,  in future we shouldn't have 'Install' as an action on installed software. It'll say 'uninstall' or 'update' so this would mesh nicely.\n\ncc @noahtalerman @mostlikelee "
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@noahtalerman Reverted to secondary update buttons in the update cards."
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "Bumping this as an unresolved question as we expedite this story: https://github.com/fleetdm/fleet/issues/27983#issuecomment-2877468972"
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "During a call on \"Updates in self-service\" call on 2025-05-26, here's what @mostlikelee and I decided for the first iteration: \n\n![Image](https://github.com/user-attachments/assets/1b98c30b-6dc8-444e-826b-a6fc81e8d715)\n\nFleet will document this behavior is the self-service software guide. The UI will link IT admins to this guide (redirect PR is [here](https://github.com/fleetdm/fleet/pull/29445)):\n\n![Image](https://github.com/user-attachments/assets/f6ca58b1-8ce0-473b-a9f3-a9e574e7aaa0)\n\n![Image](https://github.com/user-attachments/assets/30d73148-cd03-4ad8-9b84-5ee89467e68a)\n\nEventually, Fleet will iterate on this behavior. Plan is to ship iterative improvements such that more apps show up in “Updates.”\n\ncc @eugkuo "
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "FYI @eugkuo I moved this 480px width screen into scratchpad [here](https://www.figma.com/design/K9BTJ3aZAvwWBXU9N8aqGa/-27983-Fleet-Desktop-%3E-Self-service--Add-%22Update%22-actions-when-updates-are-detected-for-installed-so?node-id=5408-9141\u0026t=2qzAG36eyoKjsBAb-1). Looking the discussion in [this closed PR](https://github.com/fleetdm/fleet/pull/28465), it sounds like we haven't added support for screen widths down to 480px yet.\n\n![Image](https://github.com/user-attachments/assets/d3909d83-841e-41be-a74c-319dffe80946)"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Thinking through workflow for a moment, if an app shows up in the updates carousel, it's because we've seen it in inventory, and the version in inventory is less than the version of the corresponding installable software (FMA, custom package, or VPP) for that team (and we don't show a card if criteria around installed paths aren't met, see dev note mentioned above). Good so far? This has a side effect of VPP apps being most likely to be in that carousel, as we'll display a new version there within an hour of the version being published via Apple, with no ability for an admin to override this, but...that's probably okay?\n\nNext, an end user clicks \"Update\", at which point we either send the MDM command to install or queue up a package-based install. In both cases, currently there will be a point where the software is reported as installed but software invenotry has not yet been refreshed, even with #28738 implemented. This means that we can show the \"updating\" spinner right up until the install completes, at which point a purely inventory-based system would flip back to having the \"Update\" action displayed until inventory gets run again, which isn't what we want.\n\n## Update status alternative: install status\n\nOne alternative would be to take installation status into account in some form when installs are successful/failed, rather than just when they're pending. Catch here is that we're replicating issues around freshness that affect our existing host software inventory, where an out-of-band update (e.g. Chrome auto-updating) would cause the update card to show when it isn't necessary. This issue is relevant when the update installation fails but the software eventually gets updated out-of-band.\n\n### Install status freshness: version comparison\n\nOne mitigation for the freshness comparison issue would be to compare versions between inventory and the install receipts, and have the higher version win, but VPP installs currently break this as `host_vpp_software_installs` doesn't include the version that was installed, so we'd wind up in a case where VPP apps would never show up in the updates list once installed the first time because installed version would just reference back to the latest available version.\n\n### Install status freshness: refetch wins when more recent than install\n\nAnother mitigation would be to only take install statuses into account when they're more recent than the most recent host vitals refetch. We have install timestamp info and last refetch timestamp info, so this should be reliable, and we can use this nuance to show available updates with e.g. \"Update successful\" or \"Update failed\" if we wanted between getting an install result back and the next refetch.\n\nWe could actually extend this logic to host software listing in general, explicitly ignoring install receipts (success or failure) unless they've happened since the most recent vitals refetch as the vitals refetch should at that point be the source of truth.\n\n## Update status alternative: refetch on install success\n\nAnother alternative would be to retech host vitals (or at least rerun software inventory) after each successful install. Doing this right needs #28738 as a prerequisite so we don't refetch too early. If we did this, the window where software inventory alone was too stale for correctly showing the update carousel would be minimized.\n\n---\n\nWe could combine \"refetch wins when more recent than install\" and \"refetch on install success\", plus maybe polling of host details on the **My device** page while refetching, to get a nearly realtime view of what's actually installed. Clicking Update on a piece of software would pop up a spinner in place of the Update button, then the status would flip to Update Successful for \u003c 1 minute while a vitals refresh was triggered, then the update card would disappear entirely once the vitals refresh triggered by that install was completed. For failed updates, we'd show the \"Update failed\" status until the next vitals refetch, with a retry button, and that failure would go away (replaced with an \"Update\" action with no status) after the next refetch.\n\nThis combined approach will require API changes (but no fleetd changes) to work, but in return we get a clear path to cleaning up inventory-vs-install idiosyncrasies, and we avoid end-user frustration stemming from varying degrees of staleness on the updates list compared to what they have installed."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Unrelated to the above: hopefully installers get targeted properly with labels for e.g. Intel Macs in this customer's deployment, since otherwise we'll be presenting end users with prompts to update apps to versions that won't work on their architecture."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Looking over the wireframes, looks like we have a different activity description than the standard \"installed X app.\" Given the complexity of this ticket as it stands, can we remove the activity from scope, reverting to the standard \"an end user installed X\" activity that we have right now? Otherwise we need to decide how we'll differentiate an update from an install (new param on the install reqeuest? Automatically server-side based on what's in inventory on the machine?) and define a structure for the revised activity record (I assume a new field on `installed_software`), neither of which we've spec'd. Feels like those changes can be added in a follow-up ticket."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "One interesting side effect of \"refetch vitals after every install\" is it could resolve the software install \"half\" of #25969/#28523, albeit in a heavier-weight fashion since IIRC a vitals refetch runs policy queries as well as software inventory queries. If we just run software inventory (so, not a full refetch) those issues are unaffected. TBD whether we'd want to start with a full vitals refetch hre since that's more computationally expensive both client- and server-side and once we implement it it's more likely that admins would rely on the full-refetch behavior so it'd be hard to back out.\n\nBut if we _didn't_ collect the entire set of host vitals, we'd need another timestamp on hosts to indicate how fresh software inventory was relative to the rest of host vitals, so just doing a full refetch is a lot less risky from a development perspective. So \"do a full refetch after an install completes\" still makes sense here I think.\n\nNote that this is _in addition to_, and _after_, the MDM polling covered in #28738, as that polling would only affect software install status and not inventory (even on iOS/iPadOS the polling would be checking for managed apps, while software inventory grabs the entire installed app list)."
          },
          {
            "author": {
              "login": "gillespi314"
            },
            "body": "FYI, we have some existing framework for refetching [critical queries](https://github.com/fleetdm/fleet/blob/f018066beef248bdb67700a3f458809f9bad410a/server/fleet/hosts.go#L361-L362) that might be useful here."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@gillespi314 Thanks for pointing that out! I think that in this case once we implement #28738 we'll only need to refetch once, after the install is confirmed succeeded (on script exit 0 + post-install for package-based, on MDM managed apps success for VPP) so we won't need to take the perf hit of a full refetch on every host check-in (we're making the assumption that the MDM managed app inventory command is less expensive to poll than our standard vitals suite)."
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@iansltx @mostlikelee Removed the updated activity feed and wrote a [FR](https://github.com/fleetdm/fleet/issues/29492) to update this in the future.\n\ncc @noahtalerman "
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "@mostlikelee @eugkuo, just checking, is this story ready to move to \"Estimated\"? Looks like it has an estimate on it."
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "The estimate is from our expedited estimation session.  I'll remove the estimate as we're going to want to estimate this again after Spec.  This story is in the correct spot.  We'll move it over when https://github.com/fleetdm/fleet/issues/29494 is complete."
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "Hey @iansltx just a reminder that this story is ready for spec? Can you please work with the team to get it estimated ahead of next sprint?\n\ncc @mostlikelee "
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@noahtalerman on my list after my responsibilities for 4.69 are concluded."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@jmwatts This test plan is ready for a last look. Make any edits that you need to make, and once it looks good pull this to Ready to Estimate. I've already pulled subtasks to Ready to Estimate as I'm sufficiently confident that I have them spec'd correctly and wanted to give folks a little more runway to put down their own estimates."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Workflow diagrams:\n\n![Image](https://github.com/user-attachments/assets/c265a375-fc3e-437e-8350-b685c605d56d)"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "@iansltx test plan looks good. \n\n\u003e Windows apps don't show in the available updates list if they don't have an associated install path \n\nDo we know if we plan to address https://github.com/fleetdm/fleet/issues/29449 before this ticket?"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@jmwatts That would get addressed in the same sprint at the earliest, given that this will be going into the next sprint. There isn't a direct dependency here, and these shouldn't touch the same code, so if/once that bug is fixed this implementation will \"just work.\""
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "@noahtalerman adding this back into your queue based on our design review discussion re: copy/UI changes for unpatchable software"
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "@mostlikelee can you please update the test plan? We made a change to not worry about where the software is installed (paths). Tip: CMD+F for \"path\" in the issue description."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Revised the spec here (didn't touch Figmas), including test plan, to drop host paths interactions, and drop this down to FE-only. We'll likely need to reimplement with server-side changes in the next iteration, but workload-wise if we tried to implement this plus #30240 in a single sprint with backend changes we'd miss the release cut due to waiting for dependencies.\n\nThis story now consists of frontend changes plus docs changes, so tee shirt sizing is just above an XS. Likely scenario here is that dev gets done in the 4.72 sprint, and docs get updated during the 4.73 dev sprint but prior to 4.72 going GA.\n\nAPI change/path-related subtasks have been dissociated from this story and moved back to the \"New requests\" column; they'll need to be either associated with a new follow-up story or converted to stories themselves to be actionable.\n\nPulled the story back to USR to revalidate the test plan, while keeping subtasks in Estimated based on previous discussions."
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "after some discussion, keeping the original estimates and moving to Estimated."
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "@marko-lisica thanks for jumping right into our team and the mountain of dev/design sync needed. Here's some recap of stuff I need/needed clarified.\n\nPrevious conversations:\n\n000. This isn't in the spec to be able to sort status from host details \u003e software \u003e library. But if we did it would be consistent with self-service status sort. I tried to implement but it proved difficult because of the server side pagination/query/sort happening and sorting on a column that is built in the FE doesn't play nice with server side sort. (https://fleetdm.slack.com/archives/C086V2QK76X/p1752175433082329?thread_ts=1752168568.807959\u0026cid=C086V2QK76X) Confirm we are intentionally scratching sorting on host details \u003e software \u003e library \u003e status column or I need to jump through a lot of hoops to make everything client side sort an then implement\n\n00. I dev-ed in clientside paginating self-service page to 20. When there's updates to specs like this, are you DRI for updating the Figma and QA plan? (https://fleetdm.slack.com/archives/C086V2QK76X/p1752175280199089)\n\n0. We either needed to make 2 API calls, one for update software and the other for filtered software in the self-service section OR move the self-service software search query to be client side. We chose to make everything client side so we don't have to make so many API calls and deal with making 2x the API calls every time an install/uninstall/update action is clicked. It's sticky, partially because this is all frontend hoops jumped through because the API doesn't paginate, doesn't filter categories, and doesn't have a 1:1 map of status's in the API with status shown in the UI.  (https://fleetdm.slack.com/archives/C086V2QK76X/p1752180334175959)\n\nQuestions from [Self-service/Library updates thread](https://fleetdm.slack.com/archives/C086V2QK76X/p1752184798822479):\n\n1. I asked the channel, If there's more than one version installed on a host, what should go on the software updates card for the \"125.0.1 -\u003e 126.0.1\". If recalled correctly, we think the Figma is not correct, and should just show the library version.\n\n2. Do we show the update available modal if you click update in the carousel or does it just automatically make the API call to update\n\n3. When you click the Update all button, do we disable the \"update all\" button?\n\nMore questions not on the thread:\n\n5. Similarly, when you are updating all and there's no other software to update since they're all pending \"Updating...\", do we disable the \"update all\" button?\n\n6. This pagination but changing the number of update software tiles per page on page size might be a little too tricky. For example, you have 20 software that need updates, you're looking at the third page which shows software 9,10,11,12. You shrink your browser horizontally to only see 3 software, which 3 should be shown?? What page are you on now?\n\n7. Do we forsee an update section in host details \u003e software \u003e library? Is it in the works, any heads up might be good in making sure the code is reusable across fleet desktop \u003e self-service and host details \u003e software \u003e library\n\nI'm OOO tomorrow but I'll be back Monday and Thursday next week. If you can address any of these, that would be amazing, ty!\n "
          },
          {
            "author": {
              "login": "marko-lisica"
            },
            "body": "Hey @RachelElysia, thanks for collecting all the questions in one place, it's really helpful.\n\n\u003e This isn't in the spec to be able to sort status from host details \u003e software \u003e library. But if we did it would be consistent with self-service status sort. I tried to implement but it proved difficult because of the server side pagination/query/sort happening and sorting on a column that is built in the FE doesn't play nice with server side sort. (https://fleetdm.slack.com/archives/C086V2QK76X/p1752175433082329?thread_ts=1752168568.807959\u0026cid=C086V2QK76X) Confirm we are intentionally scratching sorting on host details \u003e software \u003e library \u003e status column or I need to jump through a lot of hoops to make everything client side sort an then implement\n\nLet’s skip this. I’ll add follow up story to do some additional UI improvements (details modals without 2 tabs on library page, sorting by status on library page and pagination for self-service in API).\n\n\u003e I dev-ed in clientside paginating self-service page to 20. When there's updates to specs like this, are you DRI for updating the Figma and QA plan? (https://fleetdm.slack.com/archives/C086V2QK76X/p1752175280199089)\n\nClient-side pagination sounds good to me. I added spec to Figma and test case.\n\n\u003e We either needed to make 2 API calls, one for update software and the other for filtered software in the self-service section OR move the self-service software search query to be client side. We chose to make everything client side so we don't have to make so many API calls and deal with making 2x the API calls every time an install/uninstall/update action is clicked. It's sticky, partially because this is all frontend hoops jumped through because the API doesn't paginate, doesn't filter categories, and doesn't have a 1:1 map of status's in the API with status shown in the UI. (https://fleetdm.slack.com/archives/C086V2QK76X/p1752180334175959)\n\nI'm not sure I understand this. Are we going to request all self-service software, and then the frontend will find and display those with available updates in the \"Updates\" section? If that's correct, then I think that's fine.\n\n\u003e I asked the channel, If there's more than one version installed on a host, what should go on the software updates card for the \"125.0.1 -\u003e 126.0.1\". If recalled correctly, we think the Figma is not correct, and should just show the library version.\n\nWe decided to don’t show current version, to simplify in this iteration. We can add that later. It makes things complicated when user has multiple versions of the same app installed in different paths.\n\n\u003e Do we show the update available modal if you click update in the carousel or does it just automatically make the API call to update\n\nWe show update available modal only when user clicks on “update available” in status column. If user click “Update” in self-service table or in the carousel we just directly start update (user sees “Updating” status.\n\n\u003e When you click the Update all button, do we disable the \"update all\" button?\n\nI think we should disable “Update all“ button and show “Updating” status on each item in carousel and self-service table.\n\n\u003e Similarly, when you are updating all and there's no other software to update since they're all pending \"Updating...\", do we disable the \"update all\" button?\n\nI think so. Let’s disable the button if an update is started for all apps that have an update available.\n\n\u003e This pagination but changing the number of update software tiles per page on page size might be a little too tricky. For example, you have 20 software that need updates, you're looking at the third page which shows software 9,10,11,12. You shrink your browser horizontally to only see 3 software, which 3 should be shown?? What page are you on now?\n\nSorry, I don’t understand this. Let’s chat during the design review on Monday. If it’s too early for you, please add something to my calendar.\n\n\u003e Do we forsee an update section in host details \u003e software \u003e library? Is it in the works, any heads up might be good in making sure the code is reusable across fleet desktop \u003e self-service and host details \u003e software \u003e library\n\nI don’t think so. I don’t thin IT admin want’s to see that. They will probably make updates automatic based on some criteria. We might want an additional filter in the existing dropdown for apps that have updates available, but not planned AFAIK."
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "@marko-lisica thanks for all the clarification!\n\n\u003e I'm not sure I understand this. Are we going to request all self-service software, and then the frontend will find and display those with available updates in the \"Updates\" section? If that's correct, then I think that's fine.\n\nExactly\n\n\u003e Sorry, I don’t understand this. Let’s chat during the design review on Monday. If it’s too early for you, please add something to my calendar.\n\nWill add to your calendar\n\nI think everything else is addressed and unblocked so I can dev -- hvala!"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "@marko-lisica Another question re: https://www.figma.com/design/K9BTJ3aZAvwWBXU9N8aqGa/-27983-Fleet-Desktop-%3E-Self-service--Add-%22Update%22-actions-when-updates-are-detected-for-installed-so?node-id=5302-9691\u0026t=xsGXc1YLuwgfuqy1-0\n\nWhen the update fails, it shows \"Update\" button and a \"Failed\" button in the update card, but in the Self-service table view in the card below, should that installer show \"Failed\" or \"Update available\" in the status?\n\nNuances needing clarification from @marko-lisica :\n\n\u003cimg width=\"671\" height=\"187\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/d94eb0bb-adeb-488e-a955-c7a2d365a791\" /\u003e\n\nScenario 1: Docker Desktop has an update available but it failed to update, what should be shown as the status in the table view?\n\nScenario 2: Docker Desktop has an update available but it failed to uninstall, what should be shown as the status in the table view?"
          },
          {
            "author": {
              "login": "marko-lisica"
            },
            "body": "Hey @RachelElysia, I think that we should show \"Failed\" in self service table as well.\n\n\u003e Scenario 1: Docker Desktop has an update available but it failed to update, what should be shown as the status in the table view?\nWe should alwaythe s show latest status in the status column. If it's failed let's show it. Action should be update if update is available.\n\n\u003e Scenario 2: Docker Desktop has an update available but it failed to uninstall, what should be shown as the status in the table view?\n\nWhat do we display today if the uninstallation fails? Do we have a specific status like \"Failed (uninstall),\" or do we show \"Failed\" and then inform the user in the details modal that the uninstallation was unsuccessful?\n\n"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "@marko-lisica \n\n\u003e What do we display today if the uninstallation fails? Do we have a specific status like \"Failed (uninstall),\" or do we show \"Failed\" and then inform the user in the details modal that the uninstallation was unsuccessful?\n\nWe show \"Failed (uninstall)\" which leads to the uninstall modal.\n\nI'll be sure to update these copies to not show update available and show \"Failed\" or \"Failed (uninstall)\" if it meets both criteria, I'll update the QA plan too since I'm in there RN, thank you!"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "@marko-lisica Update available has a tooltip and Failed/Failed (uninstall) has a separate tooltip. Because these options listed above fall into both, I made it so the tooltips show both the Update Available tooltip copy and Failed/Failed (uninstall) copy. WDYT?\n\n```\n  failed_install_update_available: {\n    iconName: \"error-outline\",\n    iconColor: \"ui-fleet-black-50\",\n    displayText: \"Failed\",\n    tooltip: ({ isSelfService, isHostOnline, lastInstalledAt }) =\u003e\n      isSelfService || isHostOnline ? (\n        \u003c\u003e\n          Fleet can update software.{\" \"}\n          \u003c\u003e\n            Software failed to install\n            {lastInstalledAt ? ` (${dateAgo(lastInstalledAt)})` : \"\"}.{\" \"}\n            {isSelfService ? (\n              \u003c\u003e\n                Select \u003cb\u003eRetry\u003c/b\u003e to install again, or contact your IT\n                department.\n              \u003c/\u003e\n            ) : (\n              \u003c\u003e\n                Select \u003cb\u003eDetails \u0026gt; Activity\u003c/b\u003e to view errors.\n              \u003c/\u003e\n            )}\n          \u003c/\u003e\n        \u003c/\u003e\n      ) : (\n        \u003c\u003e\n          Fleet can update software\n          \u003cbr /\u003e when the host comes online.\n          \u003cbr /\u003e\n          Software failed to install\n          {lastInstalledAt ? ` (${dateAgo(lastInstalledAt)})` : \"\"}.{\" \"}\n          {isSelfService ? (\n            \u003c\u003e\n              Select \u003cb\u003eRetry\u003c/b\u003e to install again, or contact your IT\n              department.\n            \u003c/\u003e\n          ) : (\n            \u003c\u003e\n              Select \u003cb\u003eDetails \u0026gt; Activity\u003c/b\u003e to view errors.\n            \u003c/\u003e\n          )}\n        \u003c/\u003e\n      ),\n  },\n  failed_uninstall_update_available: {\n    iconName: \"error-outline\",\n    iconColor: \"ui-fleet-black-50\",\n    displayText: \"Failed (uninstall)\",\n    tooltip: ({ isSelfService, isHostOnline, lastInstalledAt }) =\u003e\n      isSelfService || isHostOnline ? (\n        \u003c\u003e\n          Fleet can update software.\n          \u003cbr /\u003e\n          Software failed to uninstall\n          {lastInstalledAt ? ` (${dateAgo(lastInstalledAt)})` : \"\"}. Select{\" \"}\n          \u003cb\u003eRetry\u003c/b\u003e to uninstall again\n          {isSelfService \u0026\u0026 \", or contact your IT department\"}.\n        \u003c/\u003e\n      ) : (\n        \u003c\u003e\n          Fleet can update software\n          \u003cbr /\u003e when the host comes online.\n          \u003cbr /\u003e Software failed to uninstall\n          {lastInstalledAt ? ` (${dateAgo(lastInstalledAt)})` : \"\"}. Select{\" \"}\n          \u003cb\u003eRetry\u003c/b\u003e to uninstall again\n          {isSelfService \u0026\u0026 \", or contact your IT department\"}.\n        \u003c/\u003e\n      ),\n  },\n```"
          },
          {
            "author": {
              "login": "marko-lisica"
            },
            "body": "@RachelElysia I think we discussed this during standup. We decided not to don't show the update tooltip in the table if it fails. We'll show the update button in the \"Updates\" section + failed status."
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "**QA Notes** (In Progress)\n\nTest with Windows, macOS, Linux hosts\nTest with Chrome, Safari, Edge, Firefox\n\nUI\n\n1. Ensure that there there are more than 8 updates available for a host by installing older versions of the software (e.g. downloading old FMA copies based on previous manifest versions), then adding current versions as available in self-service on the same team.\n2. Navigate to Fleet Desktop.\n\n- [x] Verify that there the \"Updates\" section shows at the top of the page.\n- [ ] Verify that the number next to the Self-service tab matches the number of available updates.\n- [x] Verify that selecting 'Next' swipes over to the next 4 update cards in the Updates section.\n- [x] Verify that the same software titles have 'Update' actions next to them in Self-service table.\n\n3. Select \"Update\" on a software title\n- [x] Verify that the status changes to 'Updating' with an animated circle progress spinner on both the app card and in the Self-service table..\n\n4. Navigate away from the page and navigate back\n- [x] Verify that the status remains.\n5. When the update is complete \n- [x] Verify that the software is updated locally, the card shows \"Updated\", and a refetch has been queued.\n6. Once the refetch completes, \n- [ ] Verify that the card is removed from the top section and that the action in the Self-service table changes to \"Reinstall\" (when the one card is removed, the remaining 3 cards still show but the one that was removed is replaced with the next item in the list, so that it still shows 4 cards)\n- [ ] Verify that the pagination always shows 4 items, so it goes from showing 1 2 3 4 to 5 6 7 8.\n7. Update four more apps.\n- [ ] Verify that the Update section shows 3 cards and that the width of each card is the same as when there are 4 items in the Update section at widths above 1280\n- [ ] Verify layout at 480, 768, and 1024 breakpoints. Note that 2 cards show at 768 and that 3 cards show at 1024.\n- [ ] Verify that self-service is paginated and displays 20 items per page.\n\nOther items\n- [ ] Double check for the additional change in host details for the Self service hover text to add a learn more link\n- [ ] If there was only one update card and I update the app and it refetches, the Updates section disappears\n- [ ] Clicking the Update all option, refetches will occur until all updates are completed. The count will continue decreasing until no further updates are available and then the section will disappear\n- [ ] Failed modal should show details when clicked\n\nUpdate eligibility criteria\n- [ ] Software not available for self-service should not show in the available updates list\n- [ ] Software not in inventory should not show in the available updates list\n- [ ] VPP apps should not show in the available updates list if MDM is turned off\n- [ ] Software in inventory that is \u003e= the version for the installer doesn't show\n- [ ] Software in inventory whose version can't be compared to the installer's version shouldn't show\n- [ ] Software in inventory, installed multiple times, where one install is an older version and one install is a same-or-newer version, should show in the available updates list\n- [ ] Software in inventory, installed once, that is older than the installer's version, should show in the available updates list\n- [ ] Software in the list that was previously successfully installed by Fleet should NOT show install status if a refetch has happened since the install\n- [ ] Software in the list with a pending install SHOULD show install status, even if a refetch has happened since the install started\n- [ ] Software in the list that has been successfully installed by Fleet since the last refetch SHOULD show install status\n- [ ] Software that shows up in the list that has had an install failure by Fleet since the last refetch SHOULD show install status\n\nEdge cases:\n🔴 Software installed in multiple locations - what happens when I update? Does it only update one of the applications? Does that mean the card remains after the update if the other locations weren't updated?\n\"It depends on the install script and the package\"\nShort answer: Yes, the card can still remain if an outdate version exists anywhere on the host\n🔴 Will it install a new firefox in the expected location, and you may end up with more than one version?\nA: Yes\n"
          }
        ],
        "issueNumber": 27983,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdDOeo",
        "status": "🦤 ‎In review",
        "issueNumber": 30357,
        "changeType": "modified"
      },
      {
        "assignees": [
          "ksykulev"
        ],
        "content": {
          "body": "This removes one invocation of the Cloudflare WARP uninstall script, but we manually add the script run via post-uninstall script, so we can continue using the upstream script.",
          "number": 31549,
          "repository": "fleetdm/fleet",
          "title": "Unfreeze Cloudflare Warp macOS FMA",
          "type": "PullRequest",
          "url": "https://github.com/fleetdm/fleet/pull/31549"
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgdUpoM",
        "labels": [
          "~qa-on-branch"
        ],
        "repository": "https://github.com/fleetdm/fleet",
        "status": "✔️Awaiting QA",
        "title": "Unfreeze Cloudflare Warp macOS FMA",
        "issueNumber": 31549,
        "changeType": "added"
      },
      {
        "assignees": [
          "lucasmrod"
        ],
        "content": {
          "body": "**Fleet version**: 4.71.0\n\n**Web browser and operating system**: Safari\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\nWhen going to All teams \u003e Software, admins are faced with a `Something's gone wrong` message. Going to other teams works as expected. This is currently happening in a prospect environment. Credentials to the environment and underlying infrastructure (Render) are available in 1Password. Reach out to @allenhouchins for more info.\n\n### 🛠️ To fix\n\u003c!-- Add the expected fix here. If you're not sure, leave this blank for product to specify.  --\u003e\nTBD\n\nProduct designer: _________________________\u003c!-- Who is the product designer to contact if folks have questions about this fix? --\u003e\n\n### 🧑‍💻  Steps to reproduce\n\u003c!-- Provide step-by-step actions of how to recreate this bug in a clean install of Fleet. (This helps others understand and fix it more quickly.) --\u003e\n1. Login to prospect environment\n2. Navigate to All teams \u003eSoftware tabe\n3. Observe error\n\n### 🕯️ More info _(optional)_\n\u003c!-- Add any additional details you think could be relevant to solving or reproducing the bug (e.g., \"this does not reproduce when...\") --\u003e\n```\n2025/08/04 16:55:04 http: panic serving 10.201.89.3:48130: runtime error: invalid memory address or nil pointer dereference\ngoroutine 4729 [running]:\nnet/http.(*conn).serve.func1()\n\tnet/http/server.go:1947 +0xbe\npanic({0x29fe500?, 0x4bfeb30?})\n\truntime/panic.go:792 +0x132\ngithub.com/fleetdm/fleet/v4/server/datastore/mysql.(*Datastore).ListSoftwareTitles(0xc000583500, {0x379a770, 0xc00155eae0}, {{0x0, 0x14, {0xc0009b6688, 0xb}, 0x1, {0x0, 0x0}, ...}, ...}, ...)\n\tgithub.com/fleetdm/fleet/v4/server/datastore/mysql/software_titles.go:223 +0xecb\ngithub.com/fleetdm/fleet/v4/server/service.(*Service).ListSoftwareTitles(0xc0007b8608, {0x379a770, 0xc00155eae0}, {{0x0, 0x14, {0xc0009b6688, 0xb}, 0x1, {0x0, 0x0}, ...}, ...})\n\tgithub.com/fleetdm/fleet/v4/server/service/software_titles.go:101 +0x2b6\ngithub.com/fleetdm/fleet/v4/server/service.listSoftwareTitlesEndpoint({0x379a770?, 0xc00155eae0?}, {0x2826300?, 0xc00180d0e0?}, {0x37da088?, 0xc000f945d0?})\n\tgithub.com/fleetdm/fleet/v4/server/service/software_titles.go:35 +0xc3\ngithub.com/fleetdm/fleet/v4/server/service.(*endpointer).CallHandlerFunc(0xc0012d7ef0?, 0xc001aaae70?, {0x379a770?, 0xc00155eae0?}, {0x2826300?, 0xc00180d0e0?}, {0x2e78ae0?, 0xc000f945d0?})\n\tgithub.com/fleetdm/fleet/v4/server/service/endpoint_utils.go:99 +0xd5\ngithub.com/fleetdm/fleet/v4/server/service/middleware/endpoint_utils.(*CommonEndpointer[...]).makeEndpoint.func1({0x2826300, 0xc00180d0e0})\n\tgithub.com/fleetdm/fleet/v4/server/service/middleware/endpoint_utils/endpoint_utils.go:566 +0x76\ngithub.com/fleetdm/fleet/v4/server/service/middleware/auth.AuthenticatedUser.func1({0x379a770, 0xc00155eae0}, {0x2826300, 0xc00180d0e0})\n\tgithub.com/fleetdm/fleet/v4/server/service/middleware/auth/auth.go:40 +0xcd\ngithub.com/fleetdm/fleet/v4/server/service/middleware/auth.AuthenticatedUser.Logged.func2({0x379a770, 0xc00155eae0}, {0x2826300?, 0xc00180d0e0?})\n\tgithub.com/fleetdm/fleet/v4/server/service/middleware/log/log.go:15 +0x32\ngithub.com/fleetdm/fleet/v4/server/service/middleware/endpoint_utils.newServer.newServer.(*Middleware).AuthzCheck.func1.func2({0x379a770, 0xc00155e420}, {0x2826300, 0xc00180d0e0})\n\tgithub.com/fleetdm/fleet/v4/server/service/middleware/authzcheck/authzcheck.go:31 +0x7c\ngithub.com/go-kit/kit/transport/http.Server.ServeHTTP({0xc001013150, 0xc001099d00, 0x33b8200, {0xc001013170, 0x2, 0x2}, {0xc000ea4978, 0x3, 0x3}, 0x33b89d0, ...}, ...)\n\tgithub.com/go-kit/kit@v0.12.0/transport/http/server.go:121 +0x334\ngithub.com/prometheus/client_golang/prometheus/promhttp.InstrumentHandlerRequestSize.func2({0x7a703671a218?, 0xc001f1c550?}, 0xc0014fa140)\n\tgithub.com/prometheus/client_golang@v1.21.1/prometheus/promhttp/instrument_server.go:255 +0x7d\nnet/http.HandlerFunc.ServeHTTP(0x4c13f20?, {0x7a703671a218?, 0xc001f1c550?}, 0xc001f1c500?)\n\tnet/http/server.go:2294 +0x29\ngithub.com/prometheus/client_golang/prometheus/promhttp.InstrumentHandlerResponseSize.func1({0x7a703671a218?, 0xc001f1c500?}, 0xc0014fa140)\n\tgithub.com/prometheus/client_golang@v1.21.1/prometheus/promhttp/instrument_server.go:296 +0xcf\nnet/http.HandlerFunc.ServeHTTP(0x4c13ea0?, {0x7a703671a218?, 0xc001f1c500?}, 0xc000ea74e8?)\n\tnet/http/server.go:2294 +0x29\ngithub.com/prometheus/client_golang/prometheus/promhttp.InstrumentHandlerCounter.func1({0x3795ab8?, 0xc00195a8c0?}, 0xc0014fa140)\n\tgithub.com/prometheus/client_golang@v1.21.1/prometheus/promhttp/instrument_server.go:147 +0xc3\nnet/http.HandlerFunc.ServeHTTP(0x41d3de?, {0x3795ab8?, 0xc00195a8c0?}, 0x8000a81660?)\n\tnet/http/server.go:2294 +0x29\ngithub.com/prometheus/client_golang/prometheus/promhttp.InstrumentHandlerDuration.func2({0x3795ab8, 0xc00195a8c0}, 0xc0014fa140)\n\tgithub.com/prometheus/client_golang@v1.21.1/prometheus/promhttp/instrument_server.go:109 +0xc5\nnet/http.HandlerFunc.ServeHTTP(0x379a770?, {0x3795ab8?, 0xc00195a8c0?}, 0x375f458?)\n\tnet/http/server.go:2294 +0x29\ngithub.com/fleetdm/fleet/v4/server/service.publicIP.func1({0x3795ab8, 0xc00195a8c0}, 0xc0014fa000)\n\tgithub.com/fleetdm/fleet/v4/server/service/handler.go:136 +0x197\nnet/http.HandlerFunc.ServeHTTP(0xc0008b3e00?, {0x3795ab8?, 0xc00195a8c0?}, 0xc001041828?)\n\tnet/http/server.go:2294 +0x29\ngithub.com/gorilla/mux.(*Router).ServeHTTP(0xc000151080, {0x3795ab8, 0xc00195a8c0}, 0xc0008b3b80)\n\tgithub.com/gorilla/mux@v1.8.1/mux.go:212 +0x1e2\nmain.createServeCmd.func1.25({0x3795ab8, 0xc00195a8c0}, 0xc0008b3b80)\n\tgithub.com/fleetdm/fleet/v4/cmd/fleet/serve.go:1292 +0x127a\nnet/http.HandlerFunc.ServeHTTP(0xc0016e1b00?, {0x3795ab8?, 0xc00195a8c0?}, 0x7a707e34cf30?)\n\tnet/http/server.go:2294 +0x29\nnet/http.(*ServeMux).ServeHTTP(0x481dd2?, {0x3795ab8, 0xc00195a8c0}, 0xc0008b3b80)\n\tnet/http/server.go:2822 +0x1c4\nmain.createServeCmd.func1.(*Handler).Handler.53({0x3795ab8?, 0xc00195a8c0?}, 0x3?)\n\tgithub.com/fleetdm/fleet/v4/server/launcher/server.go:54 +0xa5\nnet/http.HandlerFunc.ServeHTTP(0x4783b9?, {0x3795ab8?, 0xc00195a8c0?}, 0xc001041b70?)\n\tnet/http/server.go:2294 +0x29\nnet/http.serverHandler.ServeHTTP({0xc0012d75c0?}, {0x3795ab8?, 0xc00195a8c0?}, 0x6?)\n\tnet/http/server.go:3301 +0x8e\nnet/http.(*conn).serve(0xc001f1b3b0, {0x379a770, 0xc0017ea360})\n\tnet/http/server.go:2102 +0x625\ncreated by net/http.(*Server).Serve in goroutine 3438\n\tnet/http/server.go:3454 +0x485\n2025/08/04 16:55:05 http: panic serving 10.201.29.133:35094: runtime error: invalid memory address or nil pointer dereference\ngoroutine 4772 [running]:\nnet/http.(*conn).serve.func1()\n\tnet/http/server.go:1947 +0xbe\npanic({0x29fe500?, 0x4bfeb30?})\n\truntime/panic.go:792 +0x132\ngithub.com/fleetdm/fleet/v4/server/datastore/mysql.(*Datastore).ListSoftwareTitles(0xc000583500, {0x379a770, 0xc0016458f0}, {{0x0, 0x14, {0xc0009b6718, 0xb}, 0x1, {0x0, 0x0}, ...}, ...}, ...)\n\tgithub.com/fleetdm/fleet/v4/server/datastore/mysql/software_titles.go:223 +0xecb\ngithub.com/fleetdm/fleet/v4/server/service.(*Service).ListSoftwareTitles(0xc0007b8608, {0x379a770, 0xc0016458f0}, {{0x0, 0x14, {0xc0009b6718, 0xb}, 0x1, {0x0, 0x0}, ...}, ...})\n\tgithub.com/fleetdm/fleet/v4/server/service/software_titles.go:101 +0x2b6\ngithub.com/fleetdm/fleet/v4/server/service.listSoftwareTitlesEndpoint({0x379a770?, 0xc0016458f0?}, {0x2826300?, 0xc000ef34a0?}, {0x37da088?, 0xc000f945d0?})\n\tgithub.com/fleetdm/fleet/v4/server/service/software_titles.go:35 +0xc3\ngithub.com/fleetdm/fleet/v4/server/service.(*endpointer).CallHandlerFunc(0xc0015f9bc0?, 0xc001aaae70?, {0x379a770?, 0xc0016458f0?}, {0x2826300?, 0xc000ef34a0?}, {0x2e78ae0?, 0xc000f945d0?})\n\tgithub.com/fleetdm/fleet/v4/server/service/endpoint_utils.go:99 +0xd5\ngithub.com/fleetdm/fleet/v4/server/service/middleware/endpoint_utils.(*CommonEndpointer[...]).makeEndpoint.func1({0x2826300, 0xc000ef34a0})\n\tgithub.com/fleetdm/fleet/v4/server/service/middleware/endpoint_utils/endpoint_utils.go:566 +0x76\ngithub.com/fleetdm/fleet/v4/server/service/middleware/auth.AuthenticatedUser.func1({0x379a770, 0xc0016458f0}, {0x2826300, 0xc000ef34a0})\n\tgithub.com/fleetdm/fleet/v4/server/service/middleware/auth/auth.go:40 +0xcd\ngithub.com/fleetdm/fleet/v4/server/service/middleware/auth.AuthenticatedUser.Logged.func2({0x379a770, 0xc0016458f0}, {0x2826300?, 0xc000ef34a0?})\n\tgithub.com/fleetdm/fleet/v4/server/service/middleware/log/log.go:15 +0x32\ngithub.com/fleetdm/fleet/v4/server/service/middleware/endpoint_utils.newServer.newServer.(*Middleware).AuthzCheck.func1.func2({0x379a770, 0xc0016454d0}, {0x2826300, 0xc000ef34a0})\n\tgithub.com/fleetdm/fleet/v4/server/service/middleware/authzcheck/authzcheck.go:31 +0x7c\ngithub.com/go-kit/kit/transport/http.Server.ServeHTTP({0xc001013150, 0xc001099d00, 0x33b8200, {0xc001013170, 0x2, 0x2}, {0xc000ea4978, 0x3, 0x3}, 0x33b89d0, ...}, ...)\n\tgithub.com/go-kit/kit@v0.12.0/transport/http/server.go:121 +0x334\ngithub.com/prometheus/client_golang/prometheus/promhttp.InstrumentHandlerRequestSize.func2({0x7a703671a218?, 0xc001f1d5e0?}, 0xc0014fbcc0)\n\tgithub.com/prometheus/client_golang@v1.21.1/prometheus/promhttp/instrument_server.go:255 +0x7d\nnet/http.HandlerFunc.ServeHTTP(0x4c13f20?, {0x7a703671a218?, 0xc001f1d5e0?}, 0xc001f1d590?)\n\tnet/http/server.go:2294 +0x29\ngithub.com/prometheus/client_golang/prometheus/promhttp.InstrumentHandlerResponseSize.func1({0x7a703671a218?, 0xc001f1d590?}, 0xc0014fbcc0)\n\tgithub.com/prometheus/client_golang@v1.21.1/prometheus/promhttp/instrument_server.go:296 +0xcf\nnet/http.HandlerFunc.ServeHTTP(0x4c13ea0?, {0x7a703671a218?, 0xc001f1d590?}, 0xc0017414e8?)\n\tnet/http/server.go:2294 +0x29\ngithub.com/prometheus/client_golang/prometheus/promhttp.InstrumentHandlerCounter.func1({0x3795ab8?, 0xc00195ab60?}, 0xc0014fbcc0)\n\tgithub.com/prometheus/client_golang@v1.21.1/prometheus/promhttp/instrument_server.go:147 +0xc3\nnet/http.HandlerFunc.ServeHTTP(0xc0007af4a0?, {0x3795ab8?, 0xc00195ab60?}, 0xc001041660?)\n\tnet/http/server.go:2294 +0x29\ngithub.com/prometheus/client_golang/prometheus/promhttp.InstrumentHandlerDuration.func2({0x3795ab8, 0xc00195ab60}, 0xc0014fbcc0)\n\tgithub.com/prometheus/client_golang@v1.21.1/prometheus/promhttp/instrument_server.go:109 +0xc5\nnet/http.HandlerFunc.ServeHTTP(0x379a770?, {0x3795ab8?, 0xc00195ab60?}, 0x375f458?)\n\tnet/http/server.go:2294 +0x29\ngithub.com/fleetdm/fleet/v4/server/service.publicIP.func1({0x3795ab8, 0xc00195ab60}, 0xc0014fbb80)\n\tgithub.com/fleetdm/fleet/v4/server/service/handler.go:136 +0x197\nnet/http.HandlerFunc.ServeHTTP(0xc0014fba40?, {0x3795ab8?, 0xc00195ab60?}, 0xc001041828?)\n\tnet/http/server.go:2294 +0x29\ngithub.com/gorilla/mux.(*Router).ServeHTTP(0xc000151080, {0x3795ab8, 0xc00195ab60}, 0xc0014fb7c0)\n\tgithub.com/gorilla/mux@v1.8.1/mux.go:212 +0x1e2\nmain.createServeCmd.func1.25({0x3795ab8, 0xc00195ab60}, 0xc0014fb7c0)\n\tgithub.com/fleetdm/fleet/v4/cmd/fleet/serve.go:1292 +0x127a\nnet/http.HandlerFunc.ServeHTTP(0xc0016e1b00?, {0x3795ab8?, 0xc00195ab60?}, 0x7a707e34cf30?)\n\tnet/http/server.go:2294 +0x29\nnet/http.(*ServeMux).ServeHTTP(0x481dd2?, {0x3795ab8, 0xc00195ab60}, 0xc0014fb7c0)\n\tnet/http/server.go:2822 +0x1c4\nmain.createServeCmd.func1.(*Handler).Handler.53({0x3795ab8?, 0xc00195ab60?}, 0x3?)\n\tgithub.com/fleetdm/fleet/v4/server/launcher/server.go:54 +0xa5\nnet/http.HandlerFunc.ServeHTTP(0x4783b9?, {0x3795ab8?, 0xc00195ab60?}, 0xc001041b70?)\n\tnet/http/server.go:2294 +0x29\nnet/http.serverHandler.ServeHTTP({0xc0015f8d50?}, {0x3795ab8?, 0xc00195ab60?}, 0x6?)\n\tnet/http/server.go:3301 +0x8e\nnet/http.(*conn).serve(0xc001f5c240, {0x379a770, 0xc0017ea360})\n\tnet/http/server.go:2102 +0x625\ncreated by net/http.(*Server).Serve in goroutine 3438\n\tnet/http/server.go:3454 +0x485\nlevel=info ts=2025-08-04T16:55:07.158975398Z cron=integrations schedule=integrations instanceID=\"D8eS+5MTcDiMHwyVik9qG0Dc0vJxRD8FjZA4umY3cMUXgeYIrr8UoohkkN/eVogV4Vi4SdwJFzAaOQyDxXNZog==\" status=pending\nlevel=info ts=2025-08-04T16:55:07.161575996Z cron=integrations msg=\"no cooldowns to process\"\nlevel=info ts=2025-08-04T16:55:07.168810078Z cron=integrations schedule=integrations instanceID=\"D8eS+5MTcDiMHwyVik9qG0Dc0vJxRD8FjZA4umY3cMUXgeYIrr8UoohkkN/eVogV4Vi4SdwJFzAaOQyDxXNZog==\" status=completed\nlevel=info ts=2025-08-04T16:55:08.141082597Z cron=apple_mdm_dep_profile_assigner component=nanodep-syncer schedule=apple_mdm_dep_profile_assigner instanceID=\"D8eS+5MTcDiMHwyVik9qG0Dc0vJxRD8FjZA4umY3cMUXgeYIrr8UoohkkN/eVogV4Vi4SdwJFzAaOQyDxXNZog==\" status=pending\nlevel=info ts=2025-08-04T16:55:08.148616975Z cron=apple_mdm_dep_profile_assigner component=nanodep-syncer schedule=apple_mdm_dep_profile_assigner instanceID=\"D8eS+5MTcDiMHwyVik9qG0Dc0vJxRD8FjZA4umY3cMUXgeYIrr8UoohkkN/eVogV4Vi4SdwJFzAaOQyDxXNZog==\" status=completed\nlevel=info ts=2025-08-04T16:55:13.143901869Z cron=apple_mdm_apns_pusher schedule=apple_mdm_apns_pusher instanceID=\"D8eS+5MTcDiMHwyVik9qG0Dc0vJxRD8FjZA4umY3cMUXgeYIrr8UoohkkN/eVogV4Vi4SdwJFzAaOQyDxXNZog==\" status=pending\nlevel=info ts=2025-08-04T16:55:13.15214902Z cron=apple_mdm_apns_pusher schedule=apple_mdm_apns_pusher instanceID=\"D8eS+5MTcDiMHwyVik9qG0Dc0vJxRD8FjZA4umY3cMUXgeYIrr8UoohkkN/eVogV4Vi4SdwJFzAaOQyDxXNZog==\" status=completed\n2025/08/04 16:55:21 http: panic serving 10.201.166.129:41120: runtime error: invalid memory address or nil pointer dereference\ngoroutine 4776 [running]:\nnet/http.(*conn).serve.func1()\n\tnet/http/server.go:1947 +0xbe\npanic({0x29fe500?, 0x4bfeb30?})\n\truntime/panic.go:792 +0x132\ngithub.com/fleetdm/fleet/v4/server/datastore/mysql.(*Datastore).ListSoftwareTitles(0xc000583500, {0x379a770, 0xc0017f4ba0}, {{0x0, 0x14, {0xc0009b67a8, 0xb}, 0x1, {0x0, 0x0}, ...}, ...}, ...)\n\tgithub.com/fleetdm/fleet/v4/server/datastore/mysql/software_titles.go:223 +0xecb\ngithub.com/fleetdm/fleet/v4/server/service.(*Service).ListSoftwareTitles(0xc0007b8608, {0x379a770, 0xc0017f4ba0}, {{0x0, 0x14, {0xc0009b67a8, 0xb}, 0x1, {0x0, 0x0}, ...}, ...})\n\tgithub.com/fleetdm/fleet/v4/server/service/software_titles.go:101 +0x2b6\ngithub.com/fleetdm/fleet/v4/server/service.listSoftwareTitlesEndpoint({0x379a770?, 0xc0017f4ba0?}, {0x2826300?, 0xc00123efa0?}, {0x37da088?, 0xc000f945d0?})\n\tgithub.com/fleetdm/fleet/v4/server/service/software_titles.go:35 +0xc3\ngithub.com/fleetdm/fleet/v4/server/service.(*endpointer).CallHandlerFunc(0xc001984ae0?, 0xc001f6ee70?, {0x379a770?, 0xc0017f4ba0?}, {0x2826300?, 0xc00123efa0?}, {0x2e78ae0?, 0xc000f945d0?})\n\tgithub.com/fleetdm/fleet/v4/server/service/endpoint_utils.go:99 +0xd5\ngithub.com/fleetdm/fleet/v4/server/service/middleware/endpoint_utils.(*CommonEndpointer[...]).makeEndpoint.func1({0x2826300, 0xc00123efa0})\n\tgithub.com/fleetdm/fleet/v4/server/service/middleware/endpoint_utils/endpoint_utils.go:566 +0x76\ngithub.com/fleetdm/fleet/v4/server/service/middleware/auth.AuthenticatedUser.func1({0x379a770, 0xc0017f4ba0}, {0x2826300, 0xc00123efa0})\n\tgithub.com/fleetdm/fleet/v4/server/service/middleware/auth/auth.go:40 +0xcd\ngithub.com/fleetdm/fleet/v4/server/service/middleware/auth.AuthenticatedUser.Logged.func2({0x379a770, 0xc0017f4ba0}, {0x2826300?, 0xc00123efa0?})\n\tgithub.com/fleetdm/fleet/v4/server/service/middleware/log/log.go:15 +0x32\ngithub.com/fleetdm/fleet/v4/server/service/middleware/endpoint_utils.newServer.newServer.(*Middleware).AuthzCheck.func1.func2({0x379a770, 0xc0017f4720}, {0x2826300, 0xc00123efa0})\n\tgithub.com/fleetdm/fleet/v4/server/service/middleware/authzcheck/authzcheck.go:31 +0x7c\ngithub.com/go-kit/kit/transport/http.Server.ServeHTTP({0xc001013150, 0xc001099d00, 0x33b8200, {0xc001013170, 0x2, 0x2}, {0xc000ea4978, 0x3, 0x3}, 0x33b89d0, ...}, ...)\n\tgithub.com/go-kit/kit@v0.12.0/transport/http/server.go:121 +0x334\ngithub.com/prometheus/client_golang/prometheus/promhttp.InstrumentHandlerRequestSize.func2({0x7a703671a218?, 0xc001f1dcc0?}, 0xc001314b40)\n\tgithub.com/prometheus/client_golang@v1.21.1/prometheus/promhttp/instrument_server.go:255 +0x7d\nnet/http.HandlerFunc.ServeHTTP(0x4c13f20?, {0x7a703671a218?, 0xc001f1dcc0?}, 0xc001f1dc70?)\n\tnet/http/server.go:2294 +0x29\ngithub.com/prometheus/client_golang/prometheus/promhttp.InstrumentHandlerResponseSize.func1({0x7a703671a218?, 0xc001f1dc70?}, 0xc001314b40)\n\tgithub.com/prometheus/client_golang@v1.21.1/prometheus/promhttp/instrument_server.go:296 +0xcf\nnet/http.HandlerFunc.ServeHTTP(0x4c13ea0?, {0x7a703671a218?, 0xc001f1dc70?}, 0xc0014ab4e8?)\n\tnet/http/server.go:2294 +0x29\ngithub.com/prometheus/client_golang/prometheus/promhttp.InstrumentHandlerCounter.func1({0x3795ab8?, 0xc00195ac40?}, 0xc001314b40)\n\tgithub.com/prometheus/client_golang@v1.21.1/prometheus/promhttp/instrument_server.go:147 +0xc3\nnet/http.HandlerFunc.ServeHTTP(0xc0007af4a0?, {0x3795ab8?, 0xc00195ac40?}, 0xc001041660?)\n\tnet/http/server.go:2294 +0x29\ngithub.com/prometheus/client_golang/prometheus/promhttp.InstrumentHandlerDuration.func2({0x3795ab8, 0xc00195ac40}, 0xc001314b40)\n\tgithub.com/prometheus/client_golang@v1.21.1/prometheus/promhttp/instrument_server.go:109 +0xc5\nnet/http.HandlerFunc.ServeHTTP(0x379a770?, {0x3795ab8?, 0xc00195ac40?}, 0x375f458?)\n\tnet/http/server.go:2294 +0x29\ngithub.com/fleetdm/fleet/v4/server/service.publicIP.func1({0x3795ab8, 0xc00195ac40}, 0xc001314a00)\n\tgithub.com/fleetdm/fleet/v4/server/service/handler.go:136 +0x197\nnet/http.HandlerFunc.ServeHTTP(0xc0013148c0?, {0x3795ab8?, 0xc00195ac40?}, 0xc001041828?)\n\tnet/http/server.go:2294 +0x29\ngithub.com/gorilla/mux.(*Router).ServeHTTP(0xc000151080, {0x3795ab8, 0xc00195ac40}, 0xc001314780)\n\tgithub.com/gorilla/mux@v1.8.1/mux.go:212 +0x1e2\nmain.createServeCmd.func1.25({0x3795ab8, 0xc00195ac40}, 0xc001314780)\n\tgithub.com/fleetdm/fleet/v4/cmd/fleet/serve.go:1292 +0x127a\nnet/http.HandlerFunc.ServeHTTP(0xc0016e1b00?, {0x3795ab8?, 0xc00195ac40?}, 0x7a707e34cf30?)\n\tnet/http/server.go:2294 +0x29\nnet/http.(*ServeMux).ServeHTTP(0x481dd2?, {0x3795ab8, 0xc00195ac40}, 0xc001314780)\n\tnet/http/server.go:2822 +0x1c4\nmain.createServeCmd.func1.(*Handler).Handler.53({0x3795ab8?, 0xc00195ac40?}, 0x3?)\n\tgithub.com/fleetdm/fleet/v4/server/launcher/server.go:54 +0xa5\nnet/http.HandlerFunc.ServeHTTP(0x4783b9?, {0x3795ab8?, 0xc00195ac40?}, 0xc001041b70?)\n\tnet/http/server.go:2294 +0x29\nnet/http.serverHandler.ServeHTTP({0xc001984660?}, {0x3795ab8?, 0xc00195ac40?}, 0x6?)\n\tnet/http/server.go:3301 +0x8e\nnet/http.(*conn).serve(0xc001f5c510, {0x379a770, 0xc0017ea360})\n\tnet/http/server.go:2102 +0x625\ncreated by net/http.(*Server).Serve in goroutine 3438\n\tnet/http/server.go:3454 +0x485\nlevel=info ts=2025-08-04T16:55:29.398463856Z cron=mdm_windows_profile_manager schedule=mdm_windows_profile_manager instanceID=\"D8eS+5MTcDiMHwyVik9qG0Dc0vJxRD8FjZA4umY3cMUXgeYIrr8UoohkkN/eVogV4Vi4SdwJFzAaOQyDxXNZog==\" status=pending\nlevel=info ts=2025-08-04T16:55:29.410754981Z cron=mdm_windows_profile_manager schedule=mdm_windows_profile_manager instanceID=\"D8eS+5MTcDiMHwyVik9qG0Dc0vJxRD8FjZA4umY3cMUXgeYIrr8UoohkkN/eVogV4Vi4SdwJFzAaOQyDxXNZog==\" status=completed\nlevel=info ts=2025-08-04T16:55:30.408909884Z cron=mdm_apple_profile_manager schedule=mdm_apple_profile_manager instanceID=\"D8eS+5MTcDiMHwyVik9qG0Dc0vJxRD8FjZA4umY3cMUXgeYIrr8UoohkkN/eVogV4Vi4SdwJFzAaOQyDxXNZog==\" status=pending\nlevel=info ts=2025-08-04T16:55:30.426646749Z cron=mdm_apple_profile_manager msg=\"no hosts with changed declarations\"\nlevel=info ts=2025-08-04T16:55:30.433199659Z cron=mdm_apple_profile_manager schedule=mdm_apple_profile_manager instanceID=\"D8eS+5MTcDiMHwyVik9qG0Dc0vJxRD8FjZA4umY3cMUXgeYIrr8UoohkkN/eVogV4Vi4SdwJFzAaOQyDxXNZog==\" status=completed\n```\n\n# QA notes\n\nHow to reproduce:\n1. Upload an automatic software installer X to \"No team\".\n2. Wait for software to be installed X on a host in \"No team\".\n3. Run vulnerability scanning (to update host counts).\n4. Go to `Software`\u003e `All teams` and use the filter to find the software X.\n5. \"Something's gone wrong\" error (and a panic in the server logs)",
          "number": 31571,
          "repository": "fleetdm/fleet",
          "title": "All teams \u003e Software results in error \"Something's gone wrong\"",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/31571"
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgdUxWw",
        "labels": [
          "bug",
          ":product",
          "#g-software"
        ],
        "repository": "https://github.com/fleetdm/fleet",
        "status": "Done",
        "title": "All teams \u003e Software results in error \"Something's gone wrong\"",
        "issueNumber": 31571,
        "changeType": "added"
      },
      {
        "content": {
          "body": "**Fleet version**: 4.72.0\n\n**Web browser and operating system**: Safari on macOS only\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\n\nhttps://github.com/user-attachments/assets/33ba644d-029a-4904-852e-5816f054c610\n\n### 🛠️ To fix\n\u003c!-- Add the expected fix here. If you're not sure, leave this blank for product to specify.  --\u003e\nTBD\n\nProduct designer: _________________________\u003c!-- Who is the product designer to contact if folks have questions about this fix? --\u003e\n\n### 🧑‍💻  Steps to reproduce\n\u003c!-- Provide step-by-step actions of how to recreate this bug in a clean install of Fleet. (This helps others understand and fix it more quickly.) --\u003e\n1. Install 8 older versions of software on a macOS host\n2. Add the newest software installers to Fleet in the Team's library, making them available in Self Service\n3. Open Self service on the host, notice that all 8 apps should show in the updates carousel (4 at a time)\n4. Click Next and see that the icons are changing colors in the list view below (see attached screen recording)\n\n### 🕯️ More info _(optional)_\n\u003c!-- Add any additional details you think could be relevant to solving or reproducing the bug (e.g., \"this does not reproduce when...\") --\u003e\nN/A\n\n\u003c!-- If this is a performance issue, follow these steps to generate and attach a debug archive: https://fleetdm.com/docs/using-fleet/monitoring-fleet#debugging-performance-issues --\u003e\n\nTO FIX: Create unique IDs for all software icons using linear gradient\n\n\u003cimg width=\"488\" height=\"394\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/bcab82aa-18fc-4d19-ada7-e0b38973d910\" /\u003e",
          "number": 31619,
          "repository": "fleetdm/fleet",
          "title": "Software icons losing color when paginating through Self service updates carousel",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/31619"
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgdVI0g",
        "labels": [
          "bug",
          "~frontend",
          ":release",
          "~unreleased bug",
          ":incoming",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-08T00:00:00Z",
          "title": "4.72.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "status": "Done",
        "title": "Software icons losing color when paginating through Self service updates carousel",
        "comments": [
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "Your issue with fill colors changing when you switch pages is likely caused by how SVG linear gradients with IDs are defined and referenced. When multiple copies of the SVG are rendered on a single page (like in a React app with client-side navigation), SVG definitions such as `` are injected into the global DOM, and IDs may clash or lose reference, causing gradients to display incorrectly or revert to fallback fills.\n\n**Why does this happen?**\n- The `id=\"paint0_linear_1157_2708\"` and similar IDs are **global in the HTML DOM**. If the same SVG is rendered multiple times or React remounts it, the IDs may point to a wrong/previous/undefined gradient, or multiple elements may try to use the same ID, leading to fill issues.\n\n**How to solve this (Best Practices):**\n1. **Make IDs Unique Per Instance.**\n   - Use a library like [[react-uid](https://www.npmjs.com/package/react-uid)](https://www.npmjs.com/package/react-uid), [[react-unique-id](https://www.npmjs.com/package/react-unique-id)](https://www.npmjs.com/package/react-unique-id), or generate unique IDs at runtime.\n   - Pass a unique suffix into your SVG component and append it to all `id` attributes and their references (e.g., `url(#paint0_linear_${uniqueId})`).\n\n2. **Use `currentColor` or solid colors if you don't need gradients.**\n   - If you can accept a flat color, just use `\"fill='currentColor'\"` and control color with CSS.\n\n**Example Fix: Generating Unique IDs per Instance**\nHere’s how you can patch your component using `useId` from React 18+:\n\n```jsx\nimport React, { useId } from \"react\";\n\nconst Brave = (props) =\u003e {\n  const id = useId();\n  return (\n    \n      {/* ... */}\n      \n      {/* ... */}\n      \n        \n          {/* ... */}\n        \n        {/* ...other gradients with the id suffixed by {id} */}\n      \n    \n  );\n};\n```\n- Also update all `url(#...)` references and corresponding `id` attributes in ``.\n\n**Summary:**  \nSVG gradient/color glitches in React occur because of global ID conflicts. The solution is to scope SVG IDs uniquely per component render using React's `useId` or a similar utility. This will make gradients reliable when navigating or rendering multiple copies across the app.\n\n[1] http://www.w3.org/2000/svg"
          }
        ],
        "issueNumber": 31619,
        "changeType": "added"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdI8OQ",
        "title": "Windows FMA schema validator",
        "issueNumber": 31349,
        "changeType": "removed"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdS1iA",
        "title": "All teams \u003e Software results in error \"Something's gone wrong\"",
        "issueNumber": 31571,
        "changeType": "removed"
      }
    ]
  },
  {
    "timestamp": "2025-08-06T07:09:01.845535909Z",
    "items": [
      {
        "content": {
          "body": "**Fleet version**: 4.72.0\n\u003chr/\u003e\n\n### 💥  Actual behavior\n\nEven though I am sorted by name, I am kicked back to the first page of the list after clicking \"Install\"\nhttps://github.com/user-attachments/assets/b9280052-b979-4c99-89ba-d9da9e67ef7c\n\n\n### 🛠️ To fix\n\u003c!-- Add the expected fix here. If you're not sure, leave this blank for product to specify.  --\u003e\nTBD\n\nProduct designer: _________________________\u003c!-- Who is the product designer to contact if folks have questions about this fix? --\u003e\n\n### 🧑‍💻  Steps to reproduce\n\u003c!-- Provide step-by-step actions of how to recreate this bug in a clean install of Fleet. (This helps others understand and fix it more quickly.) --\u003e\n1. Add 21+ software items to a team's library, all made available for self service (I used macOS apps for this)\n2. Open Self service on a host that has been enrolled in the team and is compatible with the uploaded software items\n3. Sort the list by Name (or leave it at the default which is sorted by name)\n4. In the list, click \"Next\" so you are taken to the 2nd page of the list\n5. Click \"Install\" on one of the software items on the 2nd page\n\n### 🕯️ More info _(optional)_\n\u003c!-- Add any additional details you think could be relevant to solving or reproducing the bug (e.g., \"this does not reproduce when...\") --\u003e\nAlso happens if I click \"Update\", \"Reinstall\", or \"Uninstall\"\nWould make sense if I was sorted by \"Install status\" because the install status changes, but when sorted by name it should leave me on the current page.\n\n\u003c!-- If this is a performance issue, follow these steps to generate and attach a debug archive: https://fleetdm.com/docs/using-fleet/monitoring-fleet#debugging-performance-issues --\u003e\n",
          "number": 31632,
          "repository": "fleetdm/fleet",
          "title": "Taking action on a software item on the 2nd+ page of Self service resets pagination to 1st page",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/31632"
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgdVfUY",
        "labels": [
          "bug",
          ":release",
          "~unreleased bug",
          ":incoming",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-08T00:00:00Z",
          "title": "4.72.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "status": "Done",
        "title": "Taking action on a software item on the 2nd+ page of Self service resets pagination to 1st page",
        "issueNumber": 31632,
        "changeType": "added"
      },
      {
        "content": {
          "body": "**Fleet version**: 4.72.0\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\nHovering over the link seems to give the correct url but clicking on it just takes you to the software title page\n\nhttps://github.com/user-attachments/assets/3e5373c3-2262-4f78-a29e-27b3f7ad5d96\n\n### 🛠️ To fix\n\u003c!-- Add the expected fix here. If you're not sure, leave this blank for product to specify.  --\u003e\nTBD\n\nProduct designer: _________________________\u003c!-- Who is the product designer to contact if folks have questions about this fix? --\u003e\n\n### 🧑‍💻  Steps to reproduce\n\u003c!-- Provide step-by-step actions of how to recreate this bug in a clean install of Fleet. (This helps others understand and fix it more quickly.) --\u003e\n1. Add software to a host's team library, made available for Self service\n2. In the host's details, go to Software \u003e Library and hover over the Self service icon to see the hover text\n3. Click on the learn more link\n\n### 🕯️ More info _(optional)_\n\u003c!-- Add any additional details you think could be relevant to solving or reproducing the bug (e.g., \"this does not reproduce when...\") --\u003e\nN/A\n\n\u003c!-- If this is a performance issue, follow these steps to generate and attach a debug archive: https://fleetdm.com/docs/using-fleet/monitoring-fleet#debugging-performance-issues --\u003e\n",
          "number": 31630,
          "repository": "fleetdm/fleet",
          "title": "Self service \"Learn more\" link doesn't link out to page",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/31630"
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgdVb6w",
        "labels": [
          "bug",
          ":release",
          "~unreleased bug",
          ":incoming",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-08T00:00:00Z",
          "title": "4.72.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "status": "Done",
        "title": "Self service \"Learn more\" link doesn't link out to page",
        "issueNumber": 31630,
        "changeType": "added"
      },
      {
        "content": {
          "body": "**Fleet version**: 4.72.0\n**Web browser and operating system**: n/a\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\nExample: Brave browser is being updated\n\u003cimg width=\"496\" height=\"322\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/d37e4864-189f-4a8e-b977-eeb1754220b8\" /\u003e\n\nWhen the update is successful, the status changes back to \"Update\" instead of \"Updated\" while the host vitals are being refetched\n\u003cimg width=\"528\" height=\"323\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/e53da09a-1f8b-495e-a542-a17ffd35895d\" /\u003e\n\n### 🛠️ To fix\n\u003c!-- Add the expected fix here. If you're not sure, leave this blank for product to specify.  --\u003e\nTBD\n\nProduct designer: _________________________\u003c!-- Who is the product designer to contact if folks have questions about this fix? --\u003e\n\n### 🧑‍💻  Steps to reproduce\n\u003c!-- Provide step-by-step actions of how to recreate this bug in a clean install of Fleet. (This helps others understand and fix it more quickly.) --\u003e\n1. Install at least 1 older version of software on a macOS host\n2. Add the newest software installer for the same app to Fleet in the Team's library, making it available in Self Service\n3. Open Self service on the host, notice that the app shows in the updates carousel \n4. Click Update\n5. Wait for the status to change to Updating and then once the app is done being updated, notice that the status changes back to \"Update\" and a refetch is queued\n\n### 🕯️ More info _(optional)_\nPer Figma, there is supposed to be an \"Updated\" status with a green check icon once the app has successfully updated, before the host refetch completes and the card drops out of the carousel\n\n\u003cimg width=\"654\" height=\"289\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/c88b0a53-9d76-42b3-9df3-2c5a8dd57870\" /\u003e\n\n\u003c!-- If this is a performance issue, follow these steps to generate and attach a debug archive: https://fleetdm.com/docs/using-fleet/monitoring-fleet#debugging-performance-issues --\u003e\n",
          "number": 31629,
          "repository": "fleetdm/fleet",
          "title": "When Self service software update is processed, update card does not show \"Updated\" with green check mark",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/31629"
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgdVayQ",
        "labels": [
          "bug",
          ":release",
          "~unreleased bug",
          ":incoming",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-08T00:00:00Z",
          "title": "4.72.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "status": "Done",
        "title": "When Self service software update is processed, update card does not show \"Updated\" with green check mark",
        "issueNumber": 31629,
        "changeType": "added"
      },
      {
        "assignees": [
          "RachelElysia"
        ],
        "estimate": 1,
        "id": "PVTI_lADOBDAnic4A4BEUzgdVI0g",
        "status": "🦤 ‎In review",
        "comments": [
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "Your issue with fill colors changing when you switch pages is likely caused by how SVG linear gradients with IDs are defined and referenced. When multiple copies of the SVG are rendered on a single page (like in a React app with client-side navigation), SVG definitions such as `` are injected into the global DOM, and IDs may clash or lose reference, causing gradients to display incorrectly or revert to fallback fills.\n\n**Why does this happen?**\n- The `id=\"paint0_linear_1157_2708\"` and similar IDs are **global in the HTML DOM**. If the same SVG is rendered multiple times or React remounts it, the IDs may point to a wrong/previous/undefined gradient, or multiple elements may try to use the same ID, leading to fill issues.\n\n**How to solve this (Best Practices):**\n1. **Make IDs Unique Per Instance.**\n   - Use a library like [[react-uid](https://www.npmjs.com/package/react-uid)](https://www.npmjs.com/package/react-uid), [[react-unique-id](https://www.npmjs.com/package/react-unique-id)](https://www.npmjs.com/package/react-unique-id), or generate unique IDs at runtime.\n   - Pass a unique suffix into your SVG component and append it to all `id` attributes and their references (e.g., `url(#paint0_linear_${uniqueId})`).\n\n2. **Use `currentColor` or solid colors if you don't need gradients.**\n   - If you can accept a flat color, just use `\"fill='currentColor'\"` and control color with CSS.\n\n**Example Fix: Generating Unique IDs per Instance**\nHere’s how you can patch your component using `useId` from React 18+:\n\n```jsx\nimport React, { useId } from \"react\";\n\nconst Brave = (props) =\u003e {\n  const id = useId();\n  return (\n    \n      {/* ... */}\n      \n      {/* ... */}\n      \n        \n          {/* ... */}\n        \n        {/* ...other gradients with the id suffixed by {id} */}\n      \n    \n  );\n};\n```\n- Also update all `url(#...)` references and corresponding `id` attributes in ``.\n\n**Summary:**  \nSVG gradient/color glitches in React occur because of global ID conflicts. The solution is to scope SVG IDs uniquely per component render using React's `useId` or a similar utility. This will make gradients reliable when navigating or rendering multiple copies across the app.\n\n[1] http://www.w3.org/2000/svg"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "Post-Est: 1\n\nTook me 90 minutes to dev"
          }
        ],
        "issueNumber": 31619,
        "changeType": "modified"
      },
      {
        "content": {
          "body": "**Fleet version**: 4.72.0\n\n**Web browser and operating system**: Safari, Chrome, Firefox, Edge\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\n\nSometimes cards are different sizes, sometimes they overflow, table below appears to overflow at a few width transitions as well\n\n\u003cimg width=\"511\" height=\"720\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/6bc107c6-fcb7-4a04-ac29-cd36e63e1dde\" /\u003e\n\n\u003cimg width=\"406\" height=\"543\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/0745d5e7-5195-4db9-b444-24fce00ad040\" /\u003e\n\n\u003cimg width=\"616\" height=\"711\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/5638f160-9368-4972-8592-113fbdfec8a6\" /\u003e\n\n\u003cimg width=\"691\" height=\"516\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/af2f1086-1454-4db5-aa7f-d905eb755d4f\" /\u003e\n\n### 🛠️ To fix\n\u003c!-- Add the expected fix here. If you're not sure, leave this blank for product to specify.  --\u003e\nTBD\n\nProduct designer: _________________________\u003c!-- Who is the product designer to contact if folks have questions about this fix? --\u003e\n\n### 🧑‍💻  Steps to reproduce\n\u003c!-- Provide step-by-step actions of how to recreate this bug in a clean install of Fleet. (This helps others understand and fix it more quickly.) --\u003e\n1. Install at least 4 older versions of software on a macOS host\n2. Add the newest software installers for each of those software items to Fleet in the Team's library, making them available in Self Service\n3. Open Self service on the host, notice that all apps should show in the updates carousel (4 at a time)\n4. Decrease the page width and watch for transitions when the number of cards decrease or when the table overflows\n\n\n### 🕯️ More info _(optional)_\nThe figma for the feature and the test plan both state that there should be 2 cards at 768px, but I never see fewer than 3. Unsure if there are only supposed to be 2 or if something changed in design.\n\n\u003c!-- If this is a performance issue, follow these steps to generate and attach a debug archive: https://fleetdm.com/docs/using-fleet/monitoring-fleet#debugging-performance-issues --\u003e\n",
          "number": 31621,
          "repository": "fleetdm/fleet",
          "title": "Carousel and list view squishiness in Self Service at 768px",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/31621"
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgdVLLc",
        "labels": [
          "bug",
          ":release",
          "~unreleased bug",
          ":incoming",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-08T00:00:00Z",
          "title": "4.72.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "status": "Done",
        "title": "Carousel and list view squishiness in Self Service at 768px",
        "comments": [
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "@marko-lisica \n I suggest:\n1. Updates section we change to drop down to 2 cards per page for under 880px (breakpoint small) instead of the current behavior down to 2 for under 768px (breakpoint xs)\n2. Self-service section, we could make this a scrollable table (which won't work if you end up making additional actions a dropdown) or we have a max width on the name column which is causing the push off the page\n3. Updates section, Add 16px (or whatever px) gap between Update all button and header on left side\n\nScreenshot of improvements in PR: https://github.com/fleetdm/fleet/pull/31627\n\n4. Maybe we truncate long software names on the update cards as well since that'll squish off the page too"
          }
        ],
        "issueNumber": 31621,
        "changeType": "added"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdCxJc",
        "status": "🦤 ‎In review",
        "comments": [
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "\u003e - [ ] Research: Create a public Google doc that answers the following questions:\n\u003e   - Current understanding: `customer-pingali` will compile an `.ipa` file and add it to Fleet. Fleet will install the `.ipa` on iOS/iPadOS hosts with an MDM command (more discussion in [this Google doc](https://docs.google.com/document/d/1zXsIxdpOVgZWJP74V9-2qaIuzZDPbg6MC_ZSlI8Jy74/edit?tab=t.0))\n\u003e     - What MDM command can Fleet use to deploy the app?\n\u003e     - What MDM command can Fleet use to check if the app is installed and add it to software inventory?\n\n@mostlikelee moved this research story to reach to spec. Please feel free to update the research task (see issue description) if I'm missing anything.\n\ncc @marko-lisica "
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "bringing this to standup today"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "https://support.apple.com/guide/deployment/distribute-proprietary-in-house-apps-depce7cefc4d/web#:~:text=Apps%20need%20to%20be%20in,access%20a%20server%20at%20Apple.\n\nApps need to be in .ipa format and be built with an in-house provisioning profile.\n\nThey need to have an XML manifest file.\n\nThey need to be downloaded from a website whose address begins with HTTPS.\n\nThey need to be signed by a certificate that’s trusted on the device.\n\nTheir network configuration needs to allow devices to access a server at Apple. For more information, see the Apple Support article [Use Apple products on enterprise networks](https://support.apple.com/101555)."
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "this missed parking lot yesterday, bringing back today"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "Jamf has this feature and has documentation that may be worth looking over:\n\nhttps://learn.jamf.com/en-US/bundle/jamf-pro-documentation-current/page/In-House_Apps.html\nhttps://learn.jamf.com/en-US/bundle/jamf-pro-documentation-current/page/Provisioning_Profiles_for_In-House_Apps.html"
          },
          {
            "author": {
              "login": "ksykulev"
            },
            "body": "https://foresightmobile.com/blog/ios-app-distribution-guide-2025\n\n[Not recommended]\n**Distribute through Testflight** https://developer.apple.com/testflight/ \n  - Each build is available to test for up to 90 days. Publishing a new build can reset the timer.\n  - \"Designate up to 100 members of your development team\" (internal testing, https://developer.apple.com/help/app-store-connect/test-a-beta-version/add-internal-testers / app store connect users)\n  - \"Up to 10,000 external testers\" (external testers, https://developer.apple.com/help/app-store-connect/test-a-beta-version/invite-external-testers) (It should like the app needs to go through a lighter version of the apple review process to enable external testers)\n  - Requires regular Apple developer program (99/year)\n\n[Not Recommended]\n**Unlisted Apps**\nhttps://support.apple.com/guide/deployment/distribute-unlisted-apps-dep36d738732/web\n  - Requires same review as regular applications\n  - Distributed through App Store via a direct link, not visible in search and categories\n  - Requires regular Apple developer program (99/year)\n\n**Custom App**\nhttps://support.apple.com/guide/apple-business-manager/learn-about-custom-apps-axm58ba3112a/web\n  - Requires same review as regular applications\n  - Distributed through App Store Connect and Apple Business Manager\n  - Requires regular Apple developer program (99/year)\n\n**Custom apps installation via mdm**\n`InstallApplication`: https://developer.apple.com/documentation/devicemanagement/install_an_app | https://developer.apple.com/documentation/devicemanagement/installapplicationcommand/command-data.dictionary\n  - We don't host or manage the .ipa files, company uploads app to App Store Connect \n  - App ID - The unique numerical identifier for the app from App Store Connect\n  - Bundle Identifier\n  - Apple Business Manager ID\n  - VPP Token\n  - Sync Apple Business Manager to retrieve available apps\n  - Send `InstallApplication` command to target devices\n\n**Enterprise app**\nhttps://developer.apple.com/programs/enterprise/\nhttps://support.apple.com/guide/deployment/distribute-proprietary-in-house-apps-depce7cefc4d/web\n  - Does not require review\n  - Distributed through website or mdm https://support.apple.com/guide/deployment/distribute-proprietary-in-house-apps-depce7cefc4d/web\n  - Requires Apple enterprise program (299/year)\n  - Apple enterprise program requirements\n    - Minimum 100 employees\n    - D-U-N-S Number\n    - Public website\n    - Apple conducts rigorous verification (can take up to 4 weeks)\n\n**Enterprise apps installation via mdm**\n`InstallApplication`: https://developer.apple.com/documentation/devicemanagement/install_an_app | https://developer.apple.com/documentation/devicemanagement/installapplicationcommand/command-data.dictionary\n`InstallEnterpriseApplication`: https://developer.apple.com/documentation/devicemanagement/install_an_enterprise_app | https://developer.apple.com/documentation/devicemanagement/installenterpriseapplicationcommand/command\n  - We must host or manage the .ipa and .plist files on fleet HTTPS server or have the client host the files\n  - iOS Distribution Certificate from client from Enterprise portal\n  - App ID\n  - Bundle Identifier\n  - Files required from client or client has to host the files\n    - YourApp.ipa - The application file\n    - manifest.plist - XML manifest file\n    - optional icons\n  - If files provided, upload files to https file server\n  - Send `InstallAplication` or `InstallEnterpriseApplication` commands to target devices\n  - Optional Provisioning profile (expire 12 months after they’re issued). So either the app needs to be re-exported (as an IPA) with the new profile\n    or you can distribute just the new .mobileprovision file, so users won’t have to install the app again. The new provisioning profile overrides the one already in the app archive. https://developer.apple.com/documentation/devicemanagement/install-provisioning-profile-command\n  - Do we want some alerting system about expiring provisioning profiles? Just display a banner? Something more fancy? The app will discontinue opening if the profile expires.\n\n\nHow to check if application has been installed:\nhttps://developer.apple.com/documentation/devicemanagement/installed-application-list-command\nhttps://github.com/fleetdm/fleet/blob/main/server/mdm/apple/commander.go#L313\n\nFront end\nForm to accept all values required. In the case of the enterprise application IPA + manifest file to serve\nNeed create and update functionality\n\nBack end\nAPI and database tables to store all information\nCode to send `InstallApplication` or `InstallEnterpriseApplication` commands"
          },
          {
            "author": {
              "login": "ksykulev"
            },
            "body": "Estimate this work at a medium tshirt size task. Looks like a lot of moving parts. Also the QA on this will be very non-trivial."
          }
        ],
        "issueNumber": 31174,
        "changeType": "modified"
      },
      {
        "content": {
          "body": "\u003c!-- **This issue's remaining effort can be completed in ≤1 sprint.  It will be valuable even if nothing else ships.**\nIt is [planned and ready](https://fleetdm.com/handbook/company/development-groups#making-changes) to implement.  It is on the proper kanban board. --\u003e\n\n\n## Goal\n\n| User story  |\n|:---------------------------------------------------------------------------|\n| As an IT admin,\n| I want to know when Mac or Windows app has never been used by a user\n| so that I can understand if I can decrease number of licenses for that app.\n\n## Roadmap item\n\nNone\n\n## Original requests\n\n- #27087 \n\n## Context\n- Product Designer: @marko-lisica  \u003c!-- Who is the Product Designer to contact if folks have questions about the UI, CLI, or API changes? --\u003e\n- Engineering DRI: @iansltx    \u003c!-- Who is the Engineer to contact if folks have technical questions? --\u003e\n  \n\u003c!--\nWhat else should contributors [keep in mind](https://fleetdm.com/handbook/company/development-groups#developing-from-wireframes) when working on this change?  (Optional.)\n1. \n2. \n--\u003e\n\n## Changes\n\n### Product\n- [ ] UI changes:\n  - Show \"Never\" rather than omitting header entirely when a `apps` / `programs` / `deb_packages` / `rpm_packages` software item was never opened within modals that show last opened time, and rename headers from \"Last used\" to \"Last opened\" in multi-version host software details and in self-service software details modals\n  - Rename coulmn name form \"Last used\" to \"Last opened\" (on host \u003e software \u003e inventory page)\n  - If software `last_opened_at` is empty then show \"Never\" in \"Last opened\" column if we support last opened time for that source (`apps` or `programs`), `Not Supported` in grey otherwise\n\n\u003cimg width=\"811\" height=\"343\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/c6b8dc7d-74ba-4772-88a2-38645f256a8c\" /\u003e\n\n- [ ] CLI (fleetctl) usage changes: No changes\n- [ ] YAML changes: No changes\n- [ ] REST API changes: No changes\n- [ ] Fleet's agent (fleetd) changes: No changes\n- [ ] GitOps Mode UI changes: No changes\n- [ ] GitOps generation changes: No changes\n- [ ] Activity changes: No changes\n- [ ] Permissions changes: No changes\n- [ ] Changes to paid features or tiers: Fleet Free\n- [ ] My device and fleetdm.com/better changes: No changes\n- [ ] Other reference documentation changes: No changes\n- [ ] First draft of test plan added\n- [ ] Once shipped, requester has been notified\n- [ ] Once shipped, dogfooding issue has been filed\n\n### Engineering\n- [x] Test plan is finalized\n- [ ] Contributor API changes: No changes\n- [ ] Feature guide changes: No changes\n\n\u003e ℹ️  Please read this issue carefully and understand it.  Pay [special attention](https://fleetdm.com/handbook/company/development-groups#developing-from-wireframes) to UI wireframes, especially \"dev notes\".\n\n## QA\n\n### Risk assessment\n\n- Risk level: Low\n\n### Test plan\n\n- [ ] On the software inventory view in host details, confirm the \"Last opened\" column name with no tooltip\n- [ ] Install two versions of an app or Windows program on the same host, but don't open either, and refetch. Confirm that the software inventory shows \"Never\" in black in the \"Last opened\" column. Confirm that the modal for installed paths shows \"Never\" in both entries.\n- [ ] Open one of the versions. Refetch and confirm that the column shows the most recent opened time. Confirm that the modal shows the correct opened time on one entry, \"Never\" for the other.\n- [ ] Open the other version. Refetch and confirm that the column shows the most recent opened time. Confirm that the modal shows the correct opened time on both entries.\n- [ ] Install (or have in inventory) multiple versions of a software item for which we don't support last opened time. Confirm that the \"Last opened\" column shows \"Not supported\" in grey and the versions modal doesn't show the last opened time header.\n- [ ] Confirm that \"Never\" / \"Not supported\" are handled similar to the above with a single installed version on a host\n- [ ] Confirm behavior changes in the modal accessed by clicking a software item's name in My device \u003e Software.\n\n### Testing notes\n\u003c!-- Any additional testing notes relevant to this story or tools required for testing. --\u003e\n\n### Confirmation\n\u003c!-- The engineer responsible for implementing this user story completes the test plan before moving to the \"Ready for QA\" column. --\u003e\n\n1. [ ] Engineer: Added comment to user story confirming successful completion of test plan.\n2. [ ] QA: Added comment to user story confirming successful completion of test plan.\n"
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgdUaqU",
        "comments": [
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@marko-lisica FYI we already have `\"last_opened_at\": null` on the API for installed app versions that haven't been opened, so no API changes required here. Revised the ticket template to reflect this.\n\nGoing to include a separate comment with more specific instructions on all I'm pretty sure we need to do, to see if I can feed this into Zed + Sonnet 4 and have it one-shot this :)"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "All we need to do for this is\n\n1. Show `Never` rather than `---` on the column when the API field is null and `source` is `programs` or `apps` (those are the two sources where we have last opened time info), in `HostSoftwareTableConfig.tsx`\n2. Show `Never` rather than skipping the \"Last used\" field in `SoftwareDetailsModal.tsx` and `InventoryVersion.tsx` when the API field is null and `source` is programs or `apps`\n3. Rename \"Last used\" to \"Last opened\" in all three places, and remove the tooltip wrapper in `HostSoftwareTableConfig.tsx`\n4. Update tests in `SoftwareDetailsModal.tests.tsx` to reflect the above changes"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@marko-lisica Mind pulling down the `🤖-31268` branch and seeing if that gets us what we want here?"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Tweaks needed:\n\n* When showing multiple versions, show \"Never\" if all versions don't have an opened time and each individual version would've shown \"Never\"\n* Don't use the grey color for \"Never\" (but keep it for `---`)"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@marko-lisica \n\n\u003cimg width=\"808\" height=\"342\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/20422141-d1eb-445e-9c12-92edd366c242\" /\u003e"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Per design review, we're showing \"Not supported\" rather than \"---\" for sources where we don't support last opened time. Updated the screenshot in the issue description."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@RachelElysia Where do these map to in the UI?\n\nfrontend/pages/hosts/details/cards/Software/SoftwareDetailsModal/SoftwareDetailsModal.tsx\nfrontend/pages/hosts/details/components/InventoryVersions/InventoryVersions.tsx\n\nI think I'm missing a case in the test plan to cover both of these."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Fixed the screenshot to show both cases."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@jmwatts Found the other place where last opened time is: My device \u003e Software. Test plan is updated. Ping when the test plan is good to go; code's already written (by me) so this will land directly on the release board once the test plan is good to go."
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "@iansltx test plan is good to go, tried to move it to the release board, wouldn't budge. GitHub is defiant today. "
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Given #31638 is landing soon, updated the spec here (and code in the PR) to include `deb_packages` and `rpm_packages` in supported software types. Support for the additional package types will land in osquery before 4.73 is out, and 4.73 will include detail query updates for support here, so RPM/DEB last-opened-at can be tested as part of QA for #27902."
          }
        ],
        "issueNumber": 31268,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcX12Q",
        "comments": [
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@noahtalerman @mostlikelee Removed 'uninstall' from this ticket as the order of operations has determined that this ticket will go ahead of the uninstall ticket (#28038)"
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@jmwatts I took a first pass at the test plan.\n\nQuestions for @mostlikelee:\n\n1. What YAML/API things might need done?\n\nQuestions for @RachelElysia \n\n1. On the carousel, if there are 6 items in the carousel are we thinking it would show 4 and 2 when paginating? Or would we always show four and selecting \"Next\" would go from showing 1 2 3 4 to showing 3 4 5 6?"
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "Notes from 14 April 2025:\n\n1. @noahtalerman : Can we scope this down to Mac only and FMA? \n    1. There are extra complications around Windows due to known issues that we've been discussing. There are also current research tickets on upgrade codes for Windows that are outstanding (#27776) which would be a pre-req for Windows.\n2. Do we want to add activity changes at this time? @mostlikelee and I think no for simplicty's sake.\n"
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "\u003e @noahtalerman : Can we scope this down to Mac only and FMA?\n\n@eugkuo @mostlikelee I think let's draft for all support we support on macOS, Windows, and Linux (custom packages, App Store apps, and Fleet-maintained apps).\n\nAfter we have designs, I think let's discuss and decide how to cut the story up.\n\nWhy? So we know where we're heading and we tease out more complications/unknowns. Then we can come up with a plan for how to address Windows and Linux even if the first iteration we build is just macOS Fleet-maintained apps. Which is a valid first iteration.\n\n\u003e Do we want to add activity changes at this time?\n\n@eugkuo same for activities. I think let's draft activities and then cut."
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "\u003e @eugkuo @mostlikelee I think let's draft for all support we support on macOS, Windows, and Linux (custom packages, App Store apps, and Fleet-maintained apps).\n\n@noahtalerman Coolio. I don't think the design changes. The UI will be the same regardless of platform. (@mostlikelee correct me if I'm wrong).\n\nWRT activities, I added [an example](https://www.figma.com/design/K9BTJ3aZAvwWBXU9N8aqGa/-27983-Fleet-Desktop-%3E-Self-service--Add-%22Update%22-actions-when-updates-are-detected-for-installed-so?node-id=5318-3291\u0026t=LPfejWpLp8jclkAm-11) to the ticket above."
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@noahtalerman @jmwatts @mostlikelee \n I've updated the selected state in the category filters to match work done on [#27245](https://github.com/fleetdm/fleet/issues/27245)"
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "Question 1: what is expected behavior when multiple versions of a software are installed on a host:\n- On macOS, if an application is renamed (`Firefox.app` + `Firefox2.app`), Fleet will show both applications as pending updates in the carousel, but only 1 will patch successfully (Firefox.app because it matches the app name in the dmg)\n- This will also be the case on macOS with `/Applications/Firefox.app` + `~/Downloads/Firefox.app` (only the first will patch)\n- machine vs user installs will also see this symptom on Windows\n\nQuestion 2: Does the update disappear from the carousel if the software install executed successfully, but the app did not actually update?\nexamples:\n- macOS: Firefox.app is renamed to Firefox2.app, install completes successfully and the host now has Firefox.app + Firefox2.app\n- Windows: machine scope is installed, and installer is user scoped (or vice-versa)"
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@mostlikelee @noahtalerman Updates from 7 May 2025 DR:\n\n1. Added [tooltip](https://www.figma.com/design/K9BTJ3aZAvwWBXU9N8aqGa/-27983-Fleet-Desktop-%3E-Self-service--Add-%22Update%22-actions-when-updates-are-detected-for-installed-so?node-id=5366-4609\u0026t=3kh7v4Aj5lLSDppW-11) on `installed` status\n\n"
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@noahtalerman @mostlikelee \n\nUpdated the designs with the following:\n\n1. Removed \"Installed\" status from the update cards at the top of the page.\n2. Upgraded the 'update' action to a button.\n3. For installed apps, updated the action to 'reinstall'"
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "@eugkuo @noahtalerman we realized that we need design when multiple versions of an updatable app is installed"
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@mostlikelee I'm not exactly sure what you mean by this. Wouldn't we still have a single update button for the app? I mean we'd want to update it all to the most recent. I think I might be missing some nuance here.\n\ncc @noahtalerman "
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "Chatted with @mostlikelee and here are the use cases:\n\n1. N different versions in the Applications folder\n2. N copies of the same version in the Applications folder\n    1. Currently can only update the one with the name we expect.\n4. N copies of various versions in different locations.\n\nWe can only update if have following criteria:\n1. Existing path needs to be what's expected (name, location, etc.)\n    1. Works for FMAs\n    2. Does not work as well for custom packages.\n    4. Big question mark around VPP.\n\nLet's discuss in USR.\n\ncc @noahtalerman "
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Looks like there's an off-by-one in step 11 in the test plan.\n\nAlso, for \"Updating\", can we show that status string always when inventory says a piece of software is installed but there's also a pending install? That would allow us to use the existing API there rather than having to build a new one.\n\nI have an idea on making this frontend-only to expedite: use the existing self-service filter, no pagination, and client-side filter to results that have only installed versions where version differs from the installer package. This gets this work out from behind further ListHostSoftware tweaks/derisks it a bit, at the cost of additional frontend munging."
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@iansltx \n\u003e Looks like there's an off-by-one in step 11 in the test plan.\nThanks! Fixed.\n\n\u003eAlso, for \"Updating\", can we show that status string always when inventory says a piece of software is installed but there's also a pending install? That would allow us to use the existing API there rather than having to build a new one.\n\nSo there could be a pending install and we and updating over that? At any rate, if we're updating that software it seems reasonable to show the 'updating' status.\n\n@noahtalerman thoughts?\n\ncc @mostlikelee "
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@eugkuo To clarify, I'm saying that if we have a piece of software already in inventory and there's a pending install (from whatever Fleet-initiated source...Install button, update button, policy execution, whatever), we use the word \"Updating...\" rather than \"Installing...\" in the self-service UI. Then reserve \"Installing...\" for cases where a host _doesn't_ have the same software in inventory already.\n\nSo the pending statuses would be:\n\n* Installing - wasn't in inventory, install is pending\n* Updating - was in inventory, install is pending\n* Uninstalling - uninstall is pending\n\nIf the above are the rules, the frontend already has all of the information it needs (with existing API endpoints) to show the correct status (so, no backend/DB changes to differentiate between \"installing\" and \"updating\")."
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@iansltx Ohhhh! This works for me. Also,  in future we shouldn't have 'Install' as an action on installed software. It'll say 'uninstall' or 'update' so this would mesh nicely.\n\ncc @noahtalerman @mostlikelee "
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@noahtalerman Reverted to secondary update buttons in the update cards."
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "Bumping this as an unresolved question as we expedite this story: https://github.com/fleetdm/fleet/issues/27983#issuecomment-2877468972"
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "During a call on \"Updates in self-service\" call on 2025-05-26, here's what @mostlikelee and I decided for the first iteration: \n\n![Image](https://github.com/user-attachments/assets/1b98c30b-6dc8-444e-826b-a6fc81e8d715)\n\nFleet will document this behavior is the self-service software guide. The UI will link IT admins to this guide (redirect PR is [here](https://github.com/fleetdm/fleet/pull/29445)):\n\n![Image](https://github.com/user-attachments/assets/f6ca58b1-8ce0-473b-a9f3-a9e574e7aaa0)\n\n![Image](https://github.com/user-attachments/assets/30d73148-cd03-4ad8-9b84-5ee89467e68a)\n\nEventually, Fleet will iterate on this behavior. Plan is to ship iterative improvements such that more apps show up in “Updates.”\n\ncc @eugkuo "
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "FYI @eugkuo I moved this 480px width screen into scratchpad [here](https://www.figma.com/design/K9BTJ3aZAvwWBXU9N8aqGa/-27983-Fleet-Desktop-%3E-Self-service--Add-%22Update%22-actions-when-updates-are-detected-for-installed-so?node-id=5408-9141\u0026t=2qzAG36eyoKjsBAb-1). Looking the discussion in [this closed PR](https://github.com/fleetdm/fleet/pull/28465), it sounds like we haven't added support for screen widths down to 480px yet.\n\n![Image](https://github.com/user-attachments/assets/d3909d83-841e-41be-a74c-319dffe80946)"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Thinking through workflow for a moment, if an app shows up in the updates carousel, it's because we've seen it in inventory, and the version in inventory is less than the version of the corresponding installable software (FMA, custom package, or VPP) for that team (and we don't show a card if criteria around installed paths aren't met, see dev note mentioned above). Good so far? This has a side effect of VPP apps being most likely to be in that carousel, as we'll display a new version there within an hour of the version being published via Apple, with no ability for an admin to override this, but...that's probably okay?\n\nNext, an end user clicks \"Update\", at which point we either send the MDM command to install or queue up a package-based install. In both cases, currently there will be a point where the software is reported as installed but software invenotry has not yet been refreshed, even with #28738 implemented. This means that we can show the \"updating\" spinner right up until the install completes, at which point a purely inventory-based system would flip back to having the \"Update\" action displayed until inventory gets run again, which isn't what we want.\n\n## Update status alternative: install status\n\nOne alternative would be to take installation status into account in some form when installs are successful/failed, rather than just when they're pending. Catch here is that we're replicating issues around freshness that affect our existing host software inventory, where an out-of-band update (e.g. Chrome auto-updating) would cause the update card to show when it isn't necessary. This issue is relevant when the update installation fails but the software eventually gets updated out-of-band.\n\n### Install status freshness: version comparison\n\nOne mitigation for the freshness comparison issue would be to compare versions between inventory and the install receipts, and have the higher version win, but VPP installs currently break this as `host_vpp_software_installs` doesn't include the version that was installed, so we'd wind up in a case where VPP apps would never show up in the updates list once installed the first time because installed version would just reference back to the latest available version.\n\n### Install status freshness: refetch wins when more recent than install\n\nAnother mitigation would be to only take install statuses into account when they're more recent than the most recent host vitals refetch. We have install timestamp info and last refetch timestamp info, so this should be reliable, and we can use this nuance to show available updates with e.g. \"Update successful\" or \"Update failed\" if we wanted between getting an install result back and the next refetch.\n\nWe could actually extend this logic to host software listing in general, explicitly ignoring install receipts (success or failure) unless they've happened since the most recent vitals refetch as the vitals refetch should at that point be the source of truth.\n\n## Update status alternative: refetch on install success\n\nAnother alternative would be to retech host vitals (or at least rerun software inventory) after each successful install. Doing this right needs #28738 as a prerequisite so we don't refetch too early. If we did this, the window where software inventory alone was too stale for correctly showing the update carousel would be minimized.\n\n---\n\nWe could combine \"refetch wins when more recent than install\" and \"refetch on install success\", plus maybe polling of host details on the **My device** page while refetching, to get a nearly realtime view of what's actually installed. Clicking Update on a piece of software would pop up a spinner in place of the Update button, then the status would flip to Update Successful for \u003c 1 minute while a vitals refresh was triggered, then the update card would disappear entirely once the vitals refresh triggered by that install was completed. For failed updates, we'd show the \"Update failed\" status until the next vitals refetch, with a retry button, and that failure would go away (replaced with an \"Update\" action with no status) after the next refetch.\n\nThis combined approach will require API changes (but no fleetd changes) to work, but in return we get a clear path to cleaning up inventory-vs-install idiosyncrasies, and we avoid end-user frustration stemming from varying degrees of staleness on the updates list compared to what they have installed."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Unrelated to the above: hopefully installers get targeted properly with labels for e.g. Intel Macs in this customer's deployment, since otherwise we'll be presenting end users with prompts to update apps to versions that won't work on their architecture."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Looking over the wireframes, looks like we have a different activity description than the standard \"installed X app.\" Given the complexity of this ticket as it stands, can we remove the activity from scope, reverting to the standard \"an end user installed X\" activity that we have right now? Otherwise we need to decide how we'll differentiate an update from an install (new param on the install reqeuest? Automatically server-side based on what's in inventory on the machine?) and define a structure for the revised activity record (I assume a new field on `installed_software`), neither of which we've spec'd. Feels like those changes can be added in a follow-up ticket."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "One interesting side effect of \"refetch vitals after every install\" is it could resolve the software install \"half\" of #25969/#28523, albeit in a heavier-weight fashion since IIRC a vitals refetch runs policy queries as well as software inventory queries. If we just run software inventory (so, not a full refetch) those issues are unaffected. TBD whether we'd want to start with a full vitals refetch hre since that's more computationally expensive both client- and server-side and once we implement it it's more likely that admins would rely on the full-refetch behavior so it'd be hard to back out.\n\nBut if we _didn't_ collect the entire set of host vitals, we'd need another timestamp on hosts to indicate how fresh software inventory was relative to the rest of host vitals, so just doing a full refetch is a lot less risky from a development perspective. So \"do a full refetch after an install completes\" still makes sense here I think.\n\nNote that this is _in addition to_, and _after_, the MDM polling covered in #28738, as that polling would only affect software install status and not inventory (even on iOS/iPadOS the polling would be checking for managed apps, while software inventory grabs the entire installed app list)."
          },
          {
            "author": {
              "login": "gillespi314"
            },
            "body": "FYI, we have some existing framework for refetching [critical queries](https://github.com/fleetdm/fleet/blob/f018066beef248bdb67700a3f458809f9bad410a/server/fleet/hosts.go#L361-L362) that might be useful here."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@gillespi314 Thanks for pointing that out! I think that in this case once we implement #28738 we'll only need to refetch once, after the install is confirmed succeeded (on script exit 0 + post-install for package-based, on MDM managed apps success for VPP) so we won't need to take the perf hit of a full refetch on every host check-in (we're making the assumption that the MDM managed app inventory command is less expensive to poll than our standard vitals suite)."
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@iansltx @mostlikelee Removed the updated activity feed and wrote a [FR](https://github.com/fleetdm/fleet/issues/29492) to update this in the future.\n\ncc @noahtalerman "
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "@mostlikelee @eugkuo, just checking, is this story ready to move to \"Estimated\"? Looks like it has an estimate on it."
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "The estimate is from our expedited estimation session.  I'll remove the estimate as we're going to want to estimate this again after Spec.  This story is in the correct spot.  We'll move it over when https://github.com/fleetdm/fleet/issues/29494 is complete."
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "Hey @iansltx just a reminder that this story is ready for spec? Can you please work with the team to get it estimated ahead of next sprint?\n\ncc @mostlikelee "
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@noahtalerman on my list after my responsibilities for 4.69 are concluded."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@jmwatts This test plan is ready for a last look. Make any edits that you need to make, and once it looks good pull this to Ready to Estimate. I've already pulled subtasks to Ready to Estimate as I'm sufficiently confident that I have them spec'd correctly and wanted to give folks a little more runway to put down their own estimates."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Workflow diagrams:\n\n![Image](https://github.com/user-attachments/assets/c265a375-fc3e-437e-8350-b685c605d56d)"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "@iansltx test plan looks good. \n\n\u003e Windows apps don't show in the available updates list if they don't have an associated install path \n\nDo we know if we plan to address https://github.com/fleetdm/fleet/issues/29449 before this ticket?"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@jmwatts That would get addressed in the same sprint at the earliest, given that this will be going into the next sprint. There isn't a direct dependency here, and these shouldn't touch the same code, so if/once that bug is fixed this implementation will \"just work.\""
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "@noahtalerman adding this back into your queue based on our design review discussion re: copy/UI changes for unpatchable software"
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "@mostlikelee can you please update the test plan? We made a change to not worry about where the software is installed (paths). Tip: CMD+F for \"path\" in the issue description."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Revised the spec here (didn't touch Figmas), including test plan, to drop host paths interactions, and drop this down to FE-only. We'll likely need to reimplement with server-side changes in the next iteration, but workload-wise if we tried to implement this plus #30240 in a single sprint with backend changes we'd miss the release cut due to waiting for dependencies.\n\nThis story now consists of frontend changes plus docs changes, so tee shirt sizing is just above an XS. Likely scenario here is that dev gets done in the 4.72 sprint, and docs get updated during the 4.73 dev sprint but prior to 4.72 going GA.\n\nAPI change/path-related subtasks have been dissociated from this story and moved back to the \"New requests\" column; they'll need to be either associated with a new follow-up story or converted to stories themselves to be actionable.\n\nPulled the story back to USR to revalidate the test plan, while keeping subtasks in Estimated based on previous discussions."
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "after some discussion, keeping the original estimates and moving to Estimated."
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "@marko-lisica thanks for jumping right into our team and the mountain of dev/design sync needed. Here's some recap of stuff I need/needed clarified.\n\nPrevious conversations:\n\n000. This isn't in the spec to be able to sort status from host details \u003e software \u003e library. But if we did it would be consistent with self-service status sort. I tried to implement but it proved difficult because of the server side pagination/query/sort happening and sorting on a column that is built in the FE doesn't play nice with server side sort. (https://fleetdm.slack.com/archives/C086V2QK76X/p1752175433082329?thread_ts=1752168568.807959\u0026cid=C086V2QK76X) Confirm we are intentionally scratching sorting on host details \u003e software \u003e library \u003e status column or I need to jump through a lot of hoops to make everything client side sort an then implement\n\n00. I dev-ed in clientside paginating self-service page to 20. When there's updates to specs like this, are you DRI for updating the Figma and QA plan? (https://fleetdm.slack.com/archives/C086V2QK76X/p1752175280199089)\n\n0. We either needed to make 2 API calls, one for update software and the other for filtered software in the self-service section OR move the self-service software search query to be client side. We chose to make everything client side so we don't have to make so many API calls and deal with making 2x the API calls every time an install/uninstall/update action is clicked. It's sticky, partially because this is all frontend hoops jumped through because the API doesn't paginate, doesn't filter categories, and doesn't have a 1:1 map of status's in the API with status shown in the UI.  (https://fleetdm.slack.com/archives/C086V2QK76X/p1752180334175959)\n\nQuestions from [Self-service/Library updates thread](https://fleetdm.slack.com/archives/C086V2QK76X/p1752184798822479):\n\n1. I asked the channel, If there's more than one version installed on a host, what should go on the software updates card for the \"125.0.1 -\u003e 126.0.1\". If recalled correctly, we think the Figma is not correct, and should just show the library version.\n\n2. Do we show the update available modal if you click update in the carousel or does it just automatically make the API call to update\n\n3. When you click the Update all button, do we disable the \"update all\" button?\n\nMore questions not on the thread:\n\n5. Similarly, when you are updating all and there's no other software to update since they're all pending \"Updating...\", do we disable the \"update all\" button?\n\n6. This pagination but changing the number of update software tiles per page on page size might be a little too tricky. For example, you have 20 software that need updates, you're looking at the third page which shows software 9,10,11,12. You shrink your browser horizontally to only see 3 software, which 3 should be shown?? What page are you on now?\n\n7. Do we forsee an update section in host details \u003e software \u003e library? Is it in the works, any heads up might be good in making sure the code is reusable across fleet desktop \u003e self-service and host details \u003e software \u003e library\n\nI'm OOO tomorrow but I'll be back Monday and Thursday next week. If you can address any of these, that would be amazing, ty!\n "
          },
          {
            "author": {
              "login": "marko-lisica"
            },
            "body": "Hey @RachelElysia, thanks for collecting all the questions in one place, it's really helpful.\n\n\u003e This isn't in the spec to be able to sort status from host details \u003e software \u003e library. But if we did it would be consistent with self-service status sort. I tried to implement but it proved difficult because of the server side pagination/query/sort happening and sorting on a column that is built in the FE doesn't play nice with server side sort. (https://fleetdm.slack.com/archives/C086V2QK76X/p1752175433082329?thread_ts=1752168568.807959\u0026cid=C086V2QK76X) Confirm we are intentionally scratching sorting on host details \u003e software \u003e library \u003e status column or I need to jump through a lot of hoops to make everything client side sort an then implement\n\nLet’s skip this. I’ll add follow up story to do some additional UI improvements (details modals without 2 tabs on library page, sorting by status on library page and pagination for self-service in API).\n\n\u003e I dev-ed in clientside paginating self-service page to 20. When there's updates to specs like this, are you DRI for updating the Figma and QA plan? (https://fleetdm.slack.com/archives/C086V2QK76X/p1752175280199089)\n\nClient-side pagination sounds good to me. I added spec to Figma and test case.\n\n\u003e We either needed to make 2 API calls, one for update software and the other for filtered software in the self-service section OR move the self-service software search query to be client side. We chose to make everything client side so we don't have to make so many API calls and deal with making 2x the API calls every time an install/uninstall/update action is clicked. It's sticky, partially because this is all frontend hoops jumped through because the API doesn't paginate, doesn't filter categories, and doesn't have a 1:1 map of status's in the API with status shown in the UI. (https://fleetdm.slack.com/archives/C086V2QK76X/p1752180334175959)\n\nI'm not sure I understand this. Are we going to request all self-service software, and then the frontend will find and display those with available updates in the \"Updates\" section? If that's correct, then I think that's fine.\n\n\u003e I asked the channel, If there's more than one version installed on a host, what should go on the software updates card for the \"125.0.1 -\u003e 126.0.1\". If recalled correctly, we think the Figma is not correct, and should just show the library version.\n\nWe decided to don’t show current version, to simplify in this iteration. We can add that later. It makes things complicated when user has multiple versions of the same app installed in different paths.\n\n\u003e Do we show the update available modal if you click update in the carousel or does it just automatically make the API call to update\n\nWe show update available modal only when user clicks on “update available” in status column. If user click “Update” in self-service table or in the carousel we just directly start update (user sees “Updating” status.\n\n\u003e When you click the Update all button, do we disable the \"update all\" button?\n\nI think we should disable “Update all“ button and show “Updating” status on each item in carousel and self-service table.\n\n\u003e Similarly, when you are updating all and there's no other software to update since they're all pending \"Updating...\", do we disable the \"update all\" button?\n\nI think so. Let’s disable the button if an update is started for all apps that have an update available.\n\n\u003e This pagination but changing the number of update software tiles per page on page size might be a little too tricky. For example, you have 20 software that need updates, you're looking at the third page which shows software 9,10,11,12. You shrink your browser horizontally to only see 3 software, which 3 should be shown?? What page are you on now?\n\nSorry, I don’t understand this. Let’s chat during the design review on Monday. If it’s too early for you, please add something to my calendar.\n\n\u003e Do we forsee an update section in host details \u003e software \u003e library? Is it in the works, any heads up might be good in making sure the code is reusable across fleet desktop \u003e self-service and host details \u003e software \u003e library\n\nI don’t think so. I don’t thin IT admin want’s to see that. They will probably make updates automatic based on some criteria. We might want an additional filter in the existing dropdown for apps that have updates available, but not planned AFAIK."
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "@marko-lisica thanks for all the clarification!\n\n\u003e I'm not sure I understand this. Are we going to request all self-service software, and then the frontend will find and display those with available updates in the \"Updates\" section? If that's correct, then I think that's fine.\n\nExactly\n\n\u003e Sorry, I don’t understand this. Let’s chat during the design review on Monday. If it’s too early for you, please add something to my calendar.\n\nWill add to your calendar\n\nI think everything else is addressed and unblocked so I can dev -- hvala!"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "@marko-lisica Another question re: https://www.figma.com/design/K9BTJ3aZAvwWBXU9N8aqGa/-27983-Fleet-Desktop-%3E-Self-service--Add-%22Update%22-actions-when-updates-are-detected-for-installed-so?node-id=5302-9691\u0026t=xsGXc1YLuwgfuqy1-0\n\nWhen the update fails, it shows \"Update\" button and a \"Failed\" button in the update card, but in the Self-service table view in the card below, should that installer show \"Failed\" or \"Update available\" in the status?\n\nNuances needing clarification from @marko-lisica :\n\n\u003cimg width=\"671\" height=\"187\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/d94eb0bb-adeb-488e-a955-c7a2d365a791\" /\u003e\n\nScenario 1: Docker Desktop has an update available but it failed to update, what should be shown as the status in the table view?\n\nScenario 2: Docker Desktop has an update available but it failed to uninstall, what should be shown as the status in the table view?"
          },
          {
            "author": {
              "login": "marko-lisica"
            },
            "body": "Hey @RachelElysia, I think that we should show \"Failed\" in self service table as well.\n\n\u003e Scenario 1: Docker Desktop has an update available but it failed to update, what should be shown as the status in the table view?\nWe should alwaythe s show latest status in the status column. If it's failed let's show it. Action should be update if update is available.\n\n\u003e Scenario 2: Docker Desktop has an update available but it failed to uninstall, what should be shown as the status in the table view?\n\nWhat do we display today if the uninstallation fails? Do we have a specific status like \"Failed (uninstall),\" or do we show \"Failed\" and then inform the user in the details modal that the uninstallation was unsuccessful?\n\n"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "@marko-lisica \n\n\u003e What do we display today if the uninstallation fails? Do we have a specific status like \"Failed (uninstall),\" or do we show \"Failed\" and then inform the user in the details modal that the uninstallation was unsuccessful?\n\nWe show \"Failed (uninstall)\" which leads to the uninstall modal.\n\nI'll be sure to update these copies to not show update available and show \"Failed\" or \"Failed (uninstall)\" if it meets both criteria, I'll update the QA plan too since I'm in there RN, thank you!"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "@marko-lisica Update available has a tooltip and Failed/Failed (uninstall) has a separate tooltip. Because these options listed above fall into both, I made it so the tooltips show both the Update Available tooltip copy and Failed/Failed (uninstall) copy. WDYT?\n\n```\n  failed_install_update_available: {\n    iconName: \"error-outline\",\n    iconColor: \"ui-fleet-black-50\",\n    displayText: \"Failed\",\n    tooltip: ({ isSelfService, isHostOnline, lastInstalledAt }) =\u003e\n      isSelfService || isHostOnline ? (\n        \u003c\u003e\n          Fleet can update software.{\" \"}\n          \u003c\u003e\n            Software failed to install\n            {lastInstalledAt ? ` (${dateAgo(lastInstalledAt)})` : \"\"}.{\" \"}\n            {isSelfService ? (\n              \u003c\u003e\n                Select \u003cb\u003eRetry\u003c/b\u003e to install again, or contact your IT\n                department.\n              \u003c/\u003e\n            ) : (\n              \u003c\u003e\n                Select \u003cb\u003eDetails \u0026gt; Activity\u003c/b\u003e to view errors.\n              \u003c/\u003e\n            )}\n          \u003c/\u003e\n        \u003c/\u003e\n      ) : (\n        \u003c\u003e\n          Fleet can update software\n          \u003cbr /\u003e when the host comes online.\n          \u003cbr /\u003e\n          Software failed to install\n          {lastInstalledAt ? ` (${dateAgo(lastInstalledAt)})` : \"\"}.{\" \"}\n          {isSelfService ? (\n            \u003c\u003e\n              Select \u003cb\u003eRetry\u003c/b\u003e to install again, or contact your IT\n              department.\n            \u003c/\u003e\n          ) : (\n            \u003c\u003e\n              Select \u003cb\u003eDetails \u0026gt; Activity\u003c/b\u003e to view errors.\n            \u003c/\u003e\n          )}\n        \u003c/\u003e\n      ),\n  },\n  failed_uninstall_update_available: {\n    iconName: \"error-outline\",\n    iconColor: \"ui-fleet-black-50\",\n    displayText: \"Failed (uninstall)\",\n    tooltip: ({ isSelfService, isHostOnline, lastInstalledAt }) =\u003e\n      isSelfService || isHostOnline ? (\n        \u003c\u003e\n          Fleet can update software.\n          \u003cbr /\u003e\n          Software failed to uninstall\n          {lastInstalledAt ? ` (${dateAgo(lastInstalledAt)})` : \"\"}. Select{\" \"}\n          \u003cb\u003eRetry\u003c/b\u003e to uninstall again\n          {isSelfService \u0026\u0026 \", or contact your IT department\"}.\n        \u003c/\u003e\n      ) : (\n        \u003c\u003e\n          Fleet can update software\n          \u003cbr /\u003e when the host comes online.\n          \u003cbr /\u003e Software failed to uninstall\n          {lastInstalledAt ? ` (${dateAgo(lastInstalledAt)})` : \"\"}. Select{\" \"}\n          \u003cb\u003eRetry\u003c/b\u003e to uninstall again\n          {isSelfService \u0026\u0026 \", or contact your IT department\"}.\n        \u003c/\u003e\n      ),\n  },\n```"
          },
          {
            "author": {
              "login": "marko-lisica"
            },
            "body": "@RachelElysia I think we discussed this during standup. We decided not to don't show the update tooltip in the table if it fails. We'll show the update button in the \"Updates\" section + failed status."
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "**QA Notes** (In Progress)\n\nTest with Windows, macOS, Linux hosts\nTest with Chrome, Safari, Edge, Firefox\n\nUI\n\n1. Ensure that there there are more than 8 updates available for a host by installing older versions of the software (e.g. downloading old FMA copies based on previous manifest versions), then adding current versions as available in self-service on the same team.\n2. Navigate to Fleet Desktop.\n\n- [x] Verify that there the \"Updates\" section shows at the top of the page.\n- [ ] Verify that the number next to the Self-service tab matches the number of available updates.\n- [x] Verify that selecting 'Next' swipes over to the next 4 update cards in the Updates section.\n- [x] Verify that the same software titles have 'Update' actions next to them in Self-service table.\n\n3. Select \"Update\" on a software title\n- [x] Verify that the status changes to 'Updating' with an animated circle progress spinner on both the app card and in the Self-service table..\n\n4. Navigate away from the page and navigate back\n- [x] Verify that the status remains.\n5. When the update is complete \n- [x] Verify that the software is updated locally, the card shows \"Updated\", and a refetch has been queued.\n6. Once the refetch completes, \n- [x] Verify that the card is removed from the top section and that the action in the Self-service table changes to \"Reinstall\" (when the one card is removed, the remaining 3 cards still show but the one that was removed is replaced with the next item in the list, so that it still shows 4 cards)\n- [x] Verify that the pagination always shows 4 items, so it goes from showing 1 2 3 4 to 5 6 7 8.\n7. Update four more apps.\n- [ ] Verify that the Update section shows 3 cards and that the width of each card is the same as when there are 4 items in the Update section at widths above 1280\n- [ ] Verify layout at 480, 768, and 1024 breakpoints. Note that 2 cards show at 768 and that 3 cards show at 1024.\n- [x] Verify that self-service is paginated and displays 20 items per page.\n\nOther items\n- [ ] Double check for the additional change in host details for the Self service hover text to add a learn more link\n- [x] If there was only one update card and I update the app and it refetches, the Updates section disappears\n- [x] Clicking the Update all option, refetches will occur until all updates are completed. The count will continue decreasing until no further updates are available and then the section will disappear\n- [x] Failed modal should show details when clicked\n\nUpdate eligibility criteria\n- [ ] Software not available for self-service should not show in the available updates list\n- [ ] Software not in inventory should not show in the available updates list\n- [ ] VPP apps should not show in the available updates list if MDM is turned off\n- [ ] Software in inventory that is \u003e= the version for the installer doesn't show\n- [ ] Software in inventory whose version can't be compared to the installer's version shouldn't show\n- [ ] Software in inventory, installed multiple times, where one install is an older version and one install is a same-or-newer version, should show in the available updates list\n- [ ] Software in inventory, installed once, that is older than the installer's version, should show in the available updates list\n- [ ] Software in the list that was previously successfully installed by Fleet should NOT show install status if a refetch has happened since the install\n- [ ] Software in the list with a pending install SHOULD show install status, even if a refetch has happened since the install started\n- [ ] Software in the list that has been successfully installed by Fleet since the last refetch SHOULD show install status\n- [ ] Software that shows up in the list that has had an install failure by Fleet since the last refetch SHOULD show install status\n\nEdge cases:\n🔴 Software installed in multiple locations - what happens when I update? Does it only update one of the applications? Does that mean the card remains after the update if the other locations weren't updated?\n\"It depends on the install script and the package\"\nShort answer: Yes, the card can still remain if an outdate version exists anywhere on the host\n🔴 Will it install a new firefox in the expected location, and you may end up with more than one version?\nA: Yes\n"
          }
        ],
        "issueNumber": 27983,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcYi4Y",
        "status": "✔️Awaiting QA",
        "issueNumber": 30248,
        "changeType": "modified"
      },
      {
        "assignees": [
          "iansltx"
        ],
        "content": {
          "body": "\u003c!-- **This issue's remaining effort can be completed in ≤1 sprint.  It will be valuable even if nothing else ships.**\nIt is [planned and ready](https://fleetdm.com/handbook/company/development-groups#making-changes) to implement.  It is on the proper kanban board. --\u003e\n\n\n## Goal\n\n| User story  |\n|:---------------------------------------------------------------------------|\n| As a Security Engineer,\n| I want to query the [`vscode_extensions`](https://fleetdm.com/tables/vscode_extensions) table and get Cursor and Windsurf extensions\n| so that I can see all the text-editor/IDE extensions for VS Code forks installed across my fleet.\n\n## Roadmap item\n\nNone.\n\n## Original requests\n\n- #30260\n\n## Context\n- Product Designer: @noahtalerman\n- Engineer: @zwass \n\n## Changes\n\n### Product\n- [x] UI changes: No changes\n- [x] CLI (fleetctl) usage changes: No changes\n- [x] YAML changes: No changes\n- [x] REST API changes: No changes\n- [x] Fleet's agent (fleetd) changes: Add 3 new values to the existing column `vscode_edition` to the [`vscode_extensions` osquery table](https://osquery.io/schema/5.18.1/#vscode_extensions). New values are one of `cursor`, `windsurf`, or `vscode_oss`.\n- [x] GitOps mode UI changes: No changes\n- [x] GitOps generation changes: No changes\n- [x] Activity changes: No changes\n- [x] Permissions changes: No changes\n- [x] Changes to paid features or tiers: Fleet Free and Fleet Premium\n- [x] My device and fleetdm.com/better changes: No changes\n- [ ] Other reference documentation changes: Verify that the new osquery schema is merged into fleetdm.com/tables\n- [x] First draft of test plan added\n- [ ] Once shipped, requester has been notified\n- [ ] Once shipped, dogfooding issue has been filed\n\n### Engineering\n- [ ] Test plan is finalized\n- [x] Contributor API changes: No changes\n- [x] Feature guide changes: No changes\n- [x] Database schema migrations: No changes\n- [x] Load testing: No changes\n- [x] Load testing/osquery-perf improvements: No changes\n\n\u003e ℹ️  Please read this issue carefully and understand it.  Pay [special attention](https://fleetdm.com/handbook/company/development-groups#developing-from-wireframes) to UI wireframes, especially \"dev notes\".\n\n## QA\n\n### Risk assessment\n\n- Risk level: Low\n\n### Test plan\n\u003c!-- Add detailed manual testing steps for all affected user roles. --\u003e\n\n\u003e Make sure to go through [the list](https://github.com/fleetdm/fleet/blob/main/docs/Contributing/guides/ui/design-qa-considerations.md) and consider all events that might be related to this story, so we catch edge cases earlier.\n\n1.  On a macOS host install [Windsurf](https://windsurf.com/), [Cursor](https://cursor.com/), and [VSCodium](https://vscodium.com/) and install extensions on each. \n2. Run the following live query in Fleet and verify that the results match the extensions you have installed, with the `vscode_edition` set corresponding to which fork you're using:\n\n```sql\nWITH cached_users AS (WITH cached_groups AS (select * from groups)\n SELECT uid, username, type, groupname, shell\n FROM users LEFT JOIN cached_groups USING (gid)\n WHERE type \u003c\u003e 'special' AND shell NOT LIKE '%/false' AND shell NOT LIKE '%/nologin' AND shell NOT LIKE '%/shutdown' AND shell NOT LIKE '%/halt' AND username NOT LIKE '%$' AND username NOT LIKE '\\_%' ESCAPE '\\' AND NOT (username = 'sync' AND shell ='/bin/sync' AND directory \u003c\u003e ''))\nSELECT\n  name,\n  version,\n  uuid AS extension_id,\n  publisher AS vendor,\n  path AS installed_path,\n  vscode_edition\nFROM cached_users CROSS JOIN vscode_extensions USING (uid)\n```\n\n4. Repeat the above steps for a Windows and Linux host.\n\n### Testing notes\n\u003c!-- Any additional testing notes relevant to this story or tools required for testing. --\u003e\n\n### Confirmation\n\u003c!-- The engineer responsible for implementing this user story completes the test plan before moving to the \"Ready for QA\" column. --\u003e\n\n1. [ ] Engineer: Added comment to user story confirming successful completion of test plan.\n2. [ ] QA: Added comment to user story confirming successful completion of test plan.\n",
          "number": 31476,
          "repository": "fleetdm/fleet",
          "title": "Add Windsurf and Cursor extensions to `vscode_extensions` table",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/31476"
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgdVUIs",
        "labels": [
          "story",
          ":release",
          ":help-customers",
          "#g-software"
        ],
        "repository": "https://github.com/fleetdm/fleet",
        "status": "🦤 ‎In review",
        "title": "Add Windsurf and Cursor extensions to `vscode_extensions` table",
        "comments": [
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@noahtalerman Seems like the `vscode_edition` column serves the same purpose here?"
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "@iansltx oh interesting! Does `vscode_edition` already tell us VS Code v. Cursor v. Windsurf?\n\nIf yes, then it sounds like no osquery changes are needed.\n\nIf not, then I think we stick with a new `ide_type` column. While we're making osquery changes, we take the opportunity to make `vscode_extensions` consistent with the [`chrome_extensions` table](https://fleetdm.com/tables/chrome_extensions).\n\ncc @zwass "
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@noahtalerman It doesn't give us that ability right now (because it doesn't have the mapping added for the user data dirs for windsurf/cursor/vscode-oss), but it uses the exact same method to pull the information that we'd use to get that info, so adding a new column would either wind us up with two columns for the exact same info or one column that we'd have to artificially pin to older behavior, complicating dev/maintenance."
          },
          {
            "author": {
              "login": "zwass"
            },
            "body": "\nAh, I didn't notice the `vscode_edition` column when we discussed this. I agree with @iansltx this should definitely be used to better match the behavior of the `chrome_extensions` table where `edge` vs. `beta` vs. `brave`, etc. are included in the same column."
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "\u003e - [x] Fleet's agent (fleetd) changes: Add 3 new values to the existing column `vscode_edition` to the [`vscode_extensions` osquery table](https://osquery.io/schema/5.18.1/#vscode_extensions). `cursor` can be one of `windsurf`, or `vscode_oss`.\n\n@zwass just chatted with @iansltx and we decided update the specs to use the `vscode_edition` column.\n\nWe also decided to bring in VSCodium which will return `vscode_oss`.\n\nNot sure if other forks (less used) have the same value. Can you please help us do that research? We want to know if `vscode_oss` is VSCodium specific so we can show \"VSCodium\" in the UI/API. "
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@jmwatts Made some tweaks to the test plan for more accuracy, given that we need a users cross join to get VSCode extensions. The new query is based on [our existing VSCode extensions detail query](https://fleetdm.com/vitals/v-scode-extensions#apple)."
          }
        ],
        "issueNumber": 31476,
        "changeType": "added"
      }
    ]
  },
  {
    "timestamp": "2025-08-06T19:06:34.026533555Z",
    "items": [
      {
        "assignees": [
          "RachelElysia"
        ],
        "content": {
          "body": "**Fleet version**: 4.72.0\n\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\nI would expect the modal to show that the software is installed, along with path and version information. Instead I see this modal:\n\u003cimg width=\"1469\" height=\"708\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/5940b677-5d0a-4989-b1b1-a8017b593659\" /\u003e\n\n### 🛠️ To fix\n\u003c!-- Add the expected fix here. If you're not sure, leave this blank for product to specify.  --\u003e\nTBD\n\nProduct designer: _________________________\u003c!-- Who is the product designer to contact if folks have questions about this fix? --\u003e\n\n### 🧑‍💻  Steps to reproduce\n\u003c!-- Provide step-by-step actions of how to recreate this bug in a clean install of Fleet. (This helps others understand and fix it more quickly.) --\u003e\n1. On an enrolled macOS host that has MDM enabled, install an app that also exists or can be added in your VPP token. (Example, I installed iMazing Profile Editor via https://imazing.com/profile-editor/download/macos and also added it in Apple Business Manager as a macOS app)\n2. Add the App to the team's software library via VPP, making it available in Self-service\n3. Refetch host vitals\n4. Open Self-service for the host and notice the app is showing as \"Installed\" and \"Installed\" is clickable\n5. Click \"Installed\"\n\n### 🕯️ More info _(optional)_\n\u003c!-- Add any additional details you think could be relevant to solving or reproducing the bug (e.g., \"this does not reproduce when...\") --\u003e\nN/A\n\n\u003c!-- If this is a performance issue, follow these steps to generate and attach a debug archive: https://fleetdm.com/docs/using-fleet/monitoring-fleet#debugging-performance-issues --\u003e\n",
          "number": 31652,
          "repository": "fleetdm/fleet",
          "title": "Apps that were not installed through Fleet but have a matching VPP app in Self-service show \"Fleet is installing or will install...\" message in \"Installed\" modal",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/31652"
        },
        "estimate": 1,
        "id": "PVTI_lADOBDAnic4A4BEUzgdXQh4",
        "labels": [
          "bug",
          ":release",
          "~unreleased bug",
          ":incoming",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-08T00:00:00Z",
          "title": "4.72.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "status": "Done",
        "title": "Apps that were not installed through Fleet but have a matching VPP app in Self-service show \"Fleet is installing or will install...\" message in \"Installed\" modal",
        "comments": [
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "\u003cimg width=\"774\" height=\"247\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/0fe51c60-9700-4a6b-bfb7-4de9e00d5d0e\" /\u003e"
          }
        ],
        "issueNumber": 31652,
        "changeType": "added"
      },
      {
        "assignees": [
          "RachelElysia"
        ],
        "content": {
          "body": "**Fleet version**: 4.72.0\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\n\n\u003cimg width=\"986\" height=\"474\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/5d5bc7ac-ea7e-4b17-8af3-8ba1eb4b170c\" /\u003e\n\n\n### 🛠️ To fix\nShow uninstall script contents and empty uninstall script output in details dropdown similar to the content that was shown in 4.71.0\n\n\u003cimg width=\"810\" height=\"435\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/f0cd789a-a664-41fa-9d25-f8e487ab7bec\" /\u003e\n\nProduct designer: _________________________\u003c!-- Who is the product designer to contact if folks have questions about this fix? --\u003e\n\n### 🧑‍💻  Steps to reproduce\n\u003c!-- Provide step-by-step actions of how to recreate this bug in a clean install of Fleet. (This helps others understand and fix it more quickly.) --\u003e\n1. Add a tar.gz file to the team's library, specifying appropriate install and uninstall scripts. (Ex: go1.24.2.linux-arm64.tar.gz, install script is: `mv $INSTALLER_PATH/* /usr/local`, uninstall script is: `rm -rf /usr/local/go`\n2. Install the tar.gz on a Linux host\n3. Uninstall the tar.gz from the Linux host\n4. View the Activity feed and click on details to open modal. \n5. Click on details dropdown\n\n### 🕯️ More info _(optional)_\n\u003c!-- Add any additional details you think could be relevant to solving or reproducing the bug (e.g., \"this does not reproduce when...\") --\u003e\nN/A\n\n\u003c!-- If this is a performance issue, follow these steps to generate and attach a debug archive: https://fleetdm.com/docs/using-fleet/monitoring-fleet#debugging-performance-issues --\u003e\n",
          "number": 31660,
          "repository": "fleetdm/fleet",
          "title": "Uninstall details activity modal for tar.gz files shows nothing in the dropdown",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/31660"
        },
        "estimate": 1,
        "id": "PVTI_lADOBDAnic4A4BEUzgdXiVE",
        "labels": [
          "bug",
          ":release",
          "~unreleased bug",
          ":incoming",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-08T00:00:00Z",
          "title": "4.72.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "status": "Done",
        "title": "Uninstall details activity modal for tar.gz files shows nothing in the dropdown",
        "comments": [
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "@marko-lisica The figma looks like we deliberately removed Uninstall script content, and since there's no output for tarballs this is empty.\n\nI'm proposing we should show whatever is available only. So for tarballs it shows script content, for others it might show both content and output. \n\nWDYT? Like why are we hiding script content if it's being returned from the API?\n\nGoing to add it back in for both install and uninstall modals."
          },
          {
            "author": {
              "login": "marko-lisica"
            },
            "body": "\u003e [@marko-lisica](https://github.com/marko-lisica) The figma looks like we deliberately removed Uninstall script content, and since there's no output for tarballs this is empty.\n\u003e \n\u003e I'm proposing we should show whatever is available only. So for tarballs it shows script content, for others it might show both content and output.\n\u003e \n\u003e WDYT? Like why are we hiding script content if it's being returned from the API?\n\u003e \n\u003e Going to add it back in for both install and uninstall modals.\n\n@RachelElysia sounds good!"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "yay, ok, PR incoming\n\nAlso, I realized install script results don't return script content so I filed [a bug to do so](https://github.com/fleetdm/fleet/issues/31668)"
          }
        ],
        "issueNumber": 31660,
        "changeType": "added"
      },
      {
        "content": {
          "body": "**Fleet version**: \u003c!-- Copy this from the \"My account\" page in the Fleet UI, or run `fleetctl --version` --\u003e\n\n**Web browser and operating system**: \u003c!-- e.g. Chrome 88.0.4324 running on macOS --\u003e\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\nThe app will show as \"✅ Installed\" in Host \u003e\u003e Software \u003e\u003e Library, but clicking on \"Installed\" brings up a modal that shows the previous failure\n\n\u003cimg width=\"1472\" height=\"749\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/7bcea2f9-3dff-4ef2-911d-e961f52f9477\" /\u003e\n\n\u003cimg width=\"1495\" height=\"746\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/b563523c-4c74-4179-a7d7-bbc3273493c7\" /\u003e\n\n\n### 🛠️ To fix\n\u003c!-- Add the expected fix here. If you're not sure, leave this blank for product to specify.  --\u003e\nTBD\n\nProduct designer: _________________________\u003c!-- Who is the product designer to contact if folks have questions about this fix? --\u003e\n\n### 🧑‍💻  Steps to reproduce\n\u003c!-- Provide step-by-step actions of how to recreate this bug in a clean install of Fleet. (This helps others understand and fix it more quickly.) --\u003e\n1. Add a small app to a team's library - but edit the install script to include `exit 1` a the end so it reports as failed, and the uninstall script to do nothing but `exit 0` so the app remains installed after it's run\n2. Install the app on a host via Fleet\n3. Attempt to uninstall the app from a host via Fleet\n\n### 🕯️ More info _(optional)_\nThis happened inadvertently as a result of an app that successfully installed but reported as failed (unsure of the reason for this), then an attempted uninstall failed but reported as successfully uninstalled. See https://github.com/fleetdm/fleet/issues/31517 for that bug. \nHowever, this scenario can happen any time there was a previous failure but the status is being returned as \"null\" and the app is being returned in inventory. The steps to reproduce force this state, but it happens \"in the wild\" without trying to break it. \n\nIn 4.71 after a successful uninstall, the status is cleared. The installed version still shows, but does not show \"installed\". We changed the behavior in 4.72 to show \"Installed\" but now it seems to be returning a previous failure in the modal.\n\n\u003c!-- If this is a performance issue, follow these steps to generate and attach a debug archive: https://fleetdm.com/docs/using-fleet/monitoring-fleet#debugging-performance-issues --\u003e\n",
          "number": 31663,
          "repository": "fleetdm/fleet",
          "title": "Software status in list doesn't match modal if software previously reported as failed to install but actually installed, then failed to uninstall but reported success",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/31663"
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgdXw9w",
        "labels": [
          "bug",
          "~backend",
          ":release",
          "~unreleased bug",
          ":incoming",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-08T00:00:00Z",
          "title": "4.72.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "status": "🐣 In progress",
        "title": "Software status in list doesn't match modal if software previously reported as failed to install but actually installed, then failed to uninstall but reported success",
        "comments": [
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "This is how it appeared when I first noticed it (no forced repro here)\n\n\u003cimg width=\"1473\" height=\"741\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/b953613a-75e0-4fe1-bbeb-a58cd221f0d7\" /\u003e\n\n\u003cimg width=\"1474\" height=\"748\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/886d0be1-9e75-4425-98e3-d1d0e60b639c\" /\u003e"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "Database for this can be found in drive https://drive.google.com/file/d/1GPfYhpbFAI41uH-c0oga5MN8GDkseHa8/view?usp=sharing\nMessage @jmwatts for db credentials"
          }
        ],
        "issueNumber": 31663,
        "changeType": "added"
      },
      {
        "assignees": [
          "RachelElysia"
        ],
        "estimate": 1,
        "id": "PVTI_lADOBDAnic4A4BEUzgdVLLc",
        "status": "🦤 ‎In review",
        "comments": [
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "@marko-lisica \n I suggest:\n1. Updates section we change to drop down to 2 cards per page for under 880px (breakpoint small) instead of the current behavior down to 2 for under 768px (breakpoint xs)\n2. Self-service section, we could make this a scrollable table (which won't work if you end up making additional actions a dropdown) or we have a max width on the name column which is causing the push off the page\n3. Updates section, Add 16px (or whatever px) gap between Update all button and header on left side\n\nScreenshot of improvements in PR: https://github.com/fleetdm/fleet/pull/31627\n\n4. Maybe we truncate long software names on the update cards as well since that'll squish off the page too"
          },
          {
            "author": {
              "login": "marko-lisica"
            },
            "body": "\u003e 1. Updates section we change to drop down to 2 cards per page for under 880px (breakpoint small) instead of the current behavior down to 2 for under 768px (breakpoint xs)\n\n@RachelElysia sounds good to me.\n\n\u003e 2. Self-service section, we could make this a scrollable table (which won't work if you end up making additional actions a dropdown) or we have a max width on the name column which is causing the push off the page\n\nI think it makes sense to have max width on the name column, and if the name can't fit we truncate + tooltip on hover to show the full name.\n\n\u003e 3. Updates section, Add 16px (or whatever px) gap between Update all button and header on left side\n\nSounds good to me.\n\n\u003e 4. Maybe we truncate long software names on the update cards as well since that'll squish off the page too\n\nLet's do this as well.\n"
          }
        ],
        "issueNumber": 31621,
        "changeType": "modified"
      },
      {
        "assignees": [
          "RachelElysia"
        ],
        "id": "PVTI_lADOBDAnic4A4BEUzgdVfUY",
        "status": "🦤 ‎In review",
        "issueNumber": 31632,
        "changeType": "modified"
      },
      {
        "assignees": [
          "RachelElysia"
        ],
        "estimate": 1,
        "id": "PVTI_lADOBDAnic4A4BEUzgdVb6w",
        "status": "🦤 ‎In review",
        "comments": [
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "The link is within a link cell \u003e.\u003c\n\nEst: under 2 hours"
          }
        ],
        "issueNumber": 31630,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdCpoc",
        "status": "✔️Awaiting QA",
        "issueNumber": 31213,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdVI0g",
        "status": "✅ Ready for release",
        "comments": [
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "Your issue with fill colors changing when you switch pages is likely caused by how SVG linear gradients with IDs are defined and referenced. When multiple copies of the SVG are rendered on a single page (like in a React app with client-side navigation), SVG definitions such as `` are injected into the global DOM, and IDs may clash or lose reference, causing gradients to display incorrectly or revert to fallback fills.\n\n**Why does this happen?**\n- The `id=\"paint0_linear_1157_2708\"` and similar IDs are **global in the HTML DOM**. If the same SVG is rendered multiple times or React remounts it, the IDs may point to a wrong/previous/undefined gradient, or multiple elements may try to use the same ID, leading to fill issues.\n\n**How to solve this (Best Practices):**\n1. **Make IDs Unique Per Instance.**\n   - Use a library like [[react-uid](https://www.npmjs.com/package/react-uid)](https://www.npmjs.com/package/react-uid), [[react-unique-id](https://www.npmjs.com/package/react-unique-id)](https://www.npmjs.com/package/react-unique-id), or generate unique IDs at runtime.\n   - Pass a unique suffix into your SVG component and append it to all `id` attributes and their references (e.g., `url(#paint0_linear_${uniqueId})`).\n\n2. **Use `currentColor` or solid colors if you don't need gradients.**\n   - If you can accept a flat color, just use `\"fill='currentColor'\"` and control color with CSS.\n\n**Example Fix: Generating Unique IDs per Instance**\nHere’s how you can patch your component using `useId` from React 18+:\n\n```jsx\nimport React, { useId } from \"react\";\n\nconst Brave = (props) =\u003e {\n  const id = useId();\n  return (\n    \n      {/* ... */}\n      \n      {/* ... */}\n      \n        \n          {/* ... */}\n        \n        {/* ...other gradients with the id suffixed by {id} */}\n      \n    \n  );\n};\n```\n- Also update all `url(#...)` references and corresponding `id` attributes in ``.\n\n**Summary:**  \nSVG gradient/color glitches in React occur because of global ID conflicts. The solution is to scope SVG IDs uniquely per component render using React's `useId` or a similar utility. This will make gradients reliable when navigating or rendering multiple copies across the app.\n\n[1] http://www.w3.org/2000/svg"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "Post-Est: 1\n\nTook me 90 minutes to dev"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "**QA Notes**\n\n1. Install 8 older versions of software on a macOS host\n2. Add the newest software installers to Fleet in the Team's library, making them available in Self Service\n3. Open Self service on the host, notice that all 8 apps should show in the updates carousel (4 at a time)\n\n- [x] Click Next and verify that the icons are no longer changing colors in the list view below "
          }
        ],
        "issueNumber": 31619,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdSLuM",
        "status": "✅ Ready for release",
        "issueNumber": 31578,
        "changeType": "modified"
      },
      {
        "assignees": [
          "RachelElysia"
        ],
        "estimate": 2,
        "id": "PVTI_lADOBDAnic4A4BEUzgdVayQ",
        "comments": [
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "Requires a new UI status and to check refetch time stamps against last_install to ensure \"updated\" vs. \"update available\", write tests 🫠"
          }
        ],
        "issueNumber": 31629,
        "changeType": "modified"
      },
      {
        "content": {
          "title": "Research: Deploy enterprise (in-house) iOS app"
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgdCxJc",
        "title": "Research: Deploy enterprise (in-house) iOS app",
        "comments": [
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "\u003e - [ ] Research: Create a public Google doc that answers the following questions:\n\u003e   - Current understanding: `customer-pingali` will compile an `.ipa` file and add it to Fleet. Fleet will install the `.ipa` on iOS/iPadOS hosts with an MDM command (more discussion in [this Google doc](https://docs.google.com/document/d/1zXsIxdpOVgZWJP74V9-2qaIuzZDPbg6MC_ZSlI8Jy74/edit?tab=t.0))\n\u003e     - What MDM command can Fleet use to deploy the app?\n\u003e     - What MDM command can Fleet use to check if the app is installed and add it to software inventory?\n\n@mostlikelee moved this research story to reach to spec. Please feel free to update the research task (see issue description) if I'm missing anything.\n\ncc @marko-lisica "
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "bringing this to standup today"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "https://support.apple.com/guide/deployment/distribute-proprietary-in-house-apps-depce7cefc4d/web#:~:text=Apps%20need%20to%20be%20in,access%20a%20server%20at%20Apple.\n\nApps need to be in .ipa format and be built with an in-house provisioning profile.\n\nThey need to have an XML manifest file.\n\nThey need to be downloaded from a website whose address begins with HTTPS.\n\nThey need to be signed by a certificate that’s trusted on the device.\n\nTheir network configuration needs to allow devices to access a server at Apple. For more information, see the Apple Support article [Use Apple products on enterprise networks](https://support.apple.com/101555)."
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "this missed parking lot yesterday, bringing back today"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "Jamf has this feature and has documentation that may be worth looking over:\n\nhttps://learn.jamf.com/en-US/bundle/jamf-pro-documentation-current/page/In-House_Apps.html\nhttps://learn.jamf.com/en-US/bundle/jamf-pro-documentation-current/page/Provisioning_Profiles_for_In-House_Apps.html"
          },
          {
            "author": {
              "login": "ksykulev"
            },
            "body": "https://foresightmobile.com/blog/ios-app-distribution-guide-2025\n\n[Not recommended]\n**Distribute through Testflight** https://developer.apple.com/testflight/ \n  - Each build is available to test for up to 90 days. Publishing a new build can reset the timer.\n  - \"Designate up to 100 members of your development team\" (internal testing, https://developer.apple.com/help/app-store-connect/test-a-beta-version/add-internal-testers / app store connect users)\n  - \"Up to 10,000 external testers\" (external testers, https://developer.apple.com/help/app-store-connect/test-a-beta-version/invite-external-testers) (It should like the app needs to go through a lighter version of the apple review process to enable external testers)\n  - Requires regular Apple developer program (99/year)\n\n[Not Recommended]\n**Unlisted Apps**\nhttps://support.apple.com/guide/deployment/distribute-unlisted-apps-dep36d738732/web\n  - Requires same review as regular applications\n  - Distributed through App Store via a direct link, not visible in search and categories\n  - Requires regular Apple developer program (99/year)\n\n**Custom App**\nhttps://support.apple.com/guide/apple-business-manager/learn-about-custom-apps-axm58ba3112a/web\n  - Requires same review as regular applications\n  - Distributed through App Store Connect and Apple Business Manager\n  - Requires regular Apple developer program (99/year)\n\n**Custom apps installation via mdm**\n`InstallApplication`: https://developer.apple.com/documentation/devicemanagement/install_an_app | https://developer.apple.com/documentation/devicemanagement/installapplicationcommand/command-data.dictionary\n  - We don't host or manage the .ipa files, company uploads app to App Store Connect \n  - App ID - The unique numerical identifier for the app from App Store Connect\n  - Bundle Identifier\n  - Apple Business Manager ID\n  - VPP Token\n  - Sync Apple Business Manager to retrieve available apps\n  - Send `InstallApplication` command to target devices\n\n**Enterprise app**\nhttps://developer.apple.com/programs/enterprise/\nhttps://support.apple.com/guide/deployment/distribute-proprietary-in-house-apps-depce7cefc4d/web\n  - Does not require review\n  - Distributed through website or mdm https://support.apple.com/guide/deployment/distribute-proprietary-in-house-apps-depce7cefc4d/web\n  - Requires Apple enterprise program (299/year)\n  - Apple enterprise program requirements\n    - Minimum 100 employees\n    - D-U-N-S Number\n    - Public website\n    - Apple conducts rigorous verification (can take up to 4 weeks)\n\n**Enterprise apps installation via mdm**\n`InstallApplication`: https://developer.apple.com/documentation/devicemanagement/install_an_app | https://developer.apple.com/documentation/devicemanagement/installapplicationcommand/command-data.dictionary\n`InstallEnterpriseApplication`: https://developer.apple.com/documentation/devicemanagement/install_an_enterprise_app | https://developer.apple.com/documentation/devicemanagement/installenterpriseapplicationcommand/command\n  - We must host or manage the .ipa and .plist files on fleet HTTPS server or have the client host the files\n  - iOS Distribution Certificate from client from Enterprise portal\n  - App ID\n  - Bundle Identifier\n  - Files required from client or client has to host the files\n    - YourApp.ipa - The application file\n    - manifest.plist - XML manifest file\n    - optional icons\n  - If files provided, upload files to https file server\n  - Send `InstallAplication` or `InstallEnterpriseApplication` commands to target devices\n  - Optional Provisioning profile (expire 12 months after they’re issued). So either the app needs to be re-exported (as an IPA) with the new profile\n    or you can distribute just the new .mobileprovision file, so users won’t have to install the app again. The new provisioning profile overrides the one already in the app archive. https://developer.apple.com/documentation/devicemanagement/install-provisioning-profile-command\n  - Do we want some alerting system about expiring provisioning profiles? Just display a banner? Something more fancy? The app will discontinue opening if the profile expires.\n\n\nHow to check if application has been installed:\nhttps://developer.apple.com/documentation/devicemanagement/installed-application-list-command\nhttps://github.com/fleetdm/fleet/blob/main/server/mdm/apple/commander.go#L313\n\nFront end\nForm to accept all values required. In the case of the enterprise application IPA + manifest file to serve\nNeed create and update functionality\n\nBack end\nAPI and database tables to store all information\nCode to send `InstallApplication` or `InstallEnterpriseApplication` commands"
          },
          {
            "author": {
              "login": "ksykulev"
            },
            "body": "Estimate this work at a medium tshirt size task. Looks like a lot of moving parts. Also the QA on this will be very non-trivial."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Renamed the story title to reflect `pingali` confirmation that they want elEnterprise (IPA upload)."
          },
          {
            "author": {
              "login": "ksykulev"
            },
            "body": "In reviewing the gong snippet, it seemed like there was a lot of talk about the importance of providing a programmatic way of pushing updates to the app. Even potentially pushing updates multiple times a day. "
          }
        ],
        "issueNumber": 31174,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcX1-s",
        "comments": [
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "@noahtalerman: Decided to cut this \"smarter\" logic to solve these problems:\n- Multiple instances of the software installed\n- User v. machine scope on Windows\n\nCurrently, for macOS, only software that's installed in Applications/ shows the \"Update required\" status. If the software isn't in Applications/ but it's in inventory, Fleet shows \"Installed\" regardless of version. Fleet will use the install_path to know if the software is in Applications/\n\nCode wise: if (macOS and install_path is applications/), check only that path if it’s outdated and then show “update available” else show “Installed”\n\nFor Windows Fleet-maintained apps, software only shows \"Update available\" if the installed software is the same scope (user or machine) as the Fleet-maintained app. Based on install_path. Otherwise, if the software is in inventory, Fleet shows \"Installed\".\n\nFor Windows custom packages, software only shows \"Update available\" if the software title has an install_path. Otherwise, if the software is in inventory, Fleet shows \"Installed\"."
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "FYI @RachelElysia, I added copy and a link to the contact URL based on `numa` feedback. We met with them today (2025-06-27) and showed them this story's wireframes.\n\n![Image](https://github.com/user-attachments/assets/6ca4ef45-09f2-4ac3-afee-bd5c995e151a)"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@jmwatts I realize this is offloading work to you that should've been done earlier by someone else, but can you work through a test plan here based on what's in Figma?\n\nIf it's more helpful to delegate the test plan for this to #27983, since these changes touch largely the same UI (though this hits both self-service and host software), that works too, and I can do a first pass there.\n\nWent ahead and updated the story template to remove non-test-plan TODOs to help a little."
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "@iansltx I've added the first pass test plan, just a couple questions left here:\n\n\u003cimg width=\"135\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/1a202f1e-a311-4ccd-9aff-76ec85ef8dac\" /\u003e\n\n~~This is kind of vague, what is the criteria for this \"Update Available\" status?~~\n~~- Software is installed on host~~\n~~- Software installer is available~~\n~~- Software is a different version?~~\n~~- Software installer is a higher version than the version that's installed?~~\n\nNevermind, found that criteria in the [#27983](https://github.com/fleetdm/fleet/issues/27983) ticket. Only question left is:\n\nWhat are the available statuses for tar.gz items? \n"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@jmwatts No update available status for tarballs as they don't have an associated version."
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "moving to estimated with an 8 based on prior discussions"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "@marko-lisica \n\nIn the test plans it says:\n\n\u003e  If software is installed by end user make sure that tooltip over \"Installed\" status is different from one when Fleet installs. See Figma specs.\n\nIs there a different tooltip? I currently have it with no tooltip if it was installed by the user not using Fleet. Can you add the tooltip to the Figma spec or remove this from the QA plan?"
          },
          {
            "author": {
              "login": "jacobshandling"
            },
            "body": "[Doc to track questions around the various modals](https://docs.google.com/document/d/1sAh752RZCCquWhI25emzNtnBVV3wA-GAhjbdlaB2Pls/edit?tab=t.0)"
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "Heads up that we're marking this one for expedited drafting"
          },
          {
            "author": {
              "login": "jacobshandling"
            },
            "body": "@mostlikelee thanks. To over communicate, most of the remaining questions are regarding [the modals subtask](https://github.com/fleetdm/fleet/issues/30860)"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "Throwing this over the fence to you @jmwatts ! I QAed as much as I could--happy Friday\n\nMy blind spots:\n- The intel computer race condition with host refetch/osquery\n- I don't have a macOS that is enrolled into MDM, only a iPad, so self-service VPP was not really QAed on my end, though I know Jacob did while he was deving"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "**QA Notes** (In Progress)\n\nTest plan\n\nOn host details page or Self service with several installers available:\n\n- [x] Default sorting order is by Name ascending\n- [x] Name sort order can be reversed\n- [x] Sorting by status sorts software by status in the order mentioned in Figma (and can be reversed)\n- [x] Font weight should be \"regular\"\n- [x] If software is not in software inventory, status is \"---\"\n- [x] If status is \"---\", available action is \"Install\" (Uninstall should not be available)\n- [x] When a user clicks \"Install\", status changes to \"Installing\"\n- [x] If software installs successfully, status changes to \"Installed\"\n- [x] If software fails to install, status changes to \"Failed\"\n- [x] If software is in software inventory, Status is \"Installed\" NOTE: #31663 \n- [x] If software status is \"Installed\", available actions are \"Reinstall\" and \"Uninstall\"\n- [x] When a user clicks \"Reinstall\", status changes to \"Installing\", and when the action completes, the status changes to \"Installed\"\n- [x] When a user clicks \"Uninstall\", status changes to \"Uninstalling\" and when the action completes, the status changes to \"---\"\n- [x] If software fails to uninstall, status changes to \"Failed (uninstall)\"\n- [x] If software is in software inventory, and other criteria are met (see https://github.com/fleetdm/fleet/issues/27983 ) status is \"Update available\"\n- [x] If status is \"Update available\", available actions are \"Update\" and \"Uninstall\"\n- [x] If Update available is clicked, details modal is shown with detail of installed software and possible actions to take\n- [x] When a user clicks \"Update\", modal closes and status changes to \"Updating\", and when the action completes, the status changes to \"Installed\"\n- [x] If software fails to update, status changes to \"Failed\"\n- [🔴] If software is installed by end user make sure that tooltip over \"Installed\" status is different from one when Fleet installs. See Figma specs. I don't see this in Figma and there are no tooltips showing on \"Installed\" in either Self service or Host \u003e\u003e Software \u003e\u003e Library\n- [x] If software is a tarball (tgz_packages), Fleet won't do inventory, and status in Library tab will only reflect if install is triggered from Fleet.\n- [x] Make sure that when the tarball is installed by Fleet, show Installed status + Reinstall and Uninstall actions. #31578 \n- [🔴] Make sure that when tarball install failed, to show Failed status and Install action only. This shows \"Retry\"\n- [x] Make sure that when tarball is available in library that no status is displayed and only Install action is available.\n- [x] Make sure that the new copy as specified in Figma is added to \"Install details\" modal for each package that is missing version information (no inventory).\n\nClicking on any status for any operating system should open a details modal EXCEPT\n\n- [x] The only non-clickable status is for Host details \u003e software \u003e library \u003e status for VPP successful and failed installs before @ksykulev 4.72 fix merged 8/1/25, those will still have a tooltip to go to the activity feed to view success/fail information - This now shows the correct modal\n- [x] Details modal title should match the status and should conform to Figma\n- [x] Install and Uninstall details dropdown should be collapsed by default and only show for installs or uninstalls completed by fleet (If the software was installed by the user, the modal will still show but will not contain a details dropdown, see Figma)\n- [x] Clicking on an available action button within the modal closes the modal and updates the status in the list, according to the action that was taken, the action completes, and the status is updated again.\n- [x] Confirm multiple versions installed - Note, this only updates the version in the expected install location. Clicking update only installs/reinstalls the app in the expected location. So if you have two versions installed in non-expected locations, and you click update, you'll get a 3rd version installed in the expected location. "
          }
        ],
        "issueNumber": 30240,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcX12Q",
        "comments": [
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@noahtalerman @mostlikelee Removed 'uninstall' from this ticket as the order of operations has determined that this ticket will go ahead of the uninstall ticket (#28038)"
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@jmwatts I took a first pass at the test plan.\n\nQuestions for @mostlikelee:\n\n1. What YAML/API things might need done?\n\nQuestions for @RachelElysia \n\n1. On the carousel, if there are 6 items in the carousel are we thinking it would show 4 and 2 when paginating? Or would we always show four and selecting \"Next\" would go from showing 1 2 3 4 to showing 3 4 5 6?"
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "Notes from 14 April 2025:\n\n1. @noahtalerman : Can we scope this down to Mac only and FMA? \n    1. There are extra complications around Windows due to known issues that we've been discussing. There are also current research tickets on upgrade codes for Windows that are outstanding (#27776) which would be a pre-req for Windows.\n2. Do we want to add activity changes at this time? @mostlikelee and I think no for simplicty's sake.\n"
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "\u003e @noahtalerman : Can we scope this down to Mac only and FMA?\n\n@eugkuo @mostlikelee I think let's draft for all support we support on macOS, Windows, and Linux (custom packages, App Store apps, and Fleet-maintained apps).\n\nAfter we have designs, I think let's discuss and decide how to cut the story up.\n\nWhy? So we know where we're heading and we tease out more complications/unknowns. Then we can come up with a plan for how to address Windows and Linux even if the first iteration we build is just macOS Fleet-maintained apps. Which is a valid first iteration.\n\n\u003e Do we want to add activity changes at this time?\n\n@eugkuo same for activities. I think let's draft activities and then cut."
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "\u003e @eugkuo @mostlikelee I think let's draft for all support we support on macOS, Windows, and Linux (custom packages, App Store apps, and Fleet-maintained apps).\n\n@noahtalerman Coolio. I don't think the design changes. The UI will be the same regardless of platform. (@mostlikelee correct me if I'm wrong).\n\nWRT activities, I added [an example](https://www.figma.com/design/K9BTJ3aZAvwWBXU9N8aqGa/-27983-Fleet-Desktop-%3E-Self-service--Add-%22Update%22-actions-when-updates-are-detected-for-installed-so?node-id=5318-3291\u0026t=LPfejWpLp8jclkAm-11) to the ticket above."
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@noahtalerman @jmwatts @mostlikelee \n I've updated the selected state in the category filters to match work done on [#27245](https://github.com/fleetdm/fleet/issues/27245)"
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "Question 1: what is expected behavior when multiple versions of a software are installed on a host:\n- On macOS, if an application is renamed (`Firefox.app` + `Firefox2.app`), Fleet will show both applications as pending updates in the carousel, but only 1 will patch successfully (Firefox.app because it matches the app name in the dmg)\n- This will also be the case on macOS with `/Applications/Firefox.app` + `~/Downloads/Firefox.app` (only the first will patch)\n- machine vs user installs will also see this symptom on Windows\n\nQuestion 2: Does the update disappear from the carousel if the software install executed successfully, but the app did not actually update?\nexamples:\n- macOS: Firefox.app is renamed to Firefox2.app, install completes successfully and the host now has Firefox.app + Firefox2.app\n- Windows: machine scope is installed, and installer is user scoped (or vice-versa)"
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@mostlikelee @noahtalerman Updates from 7 May 2025 DR:\n\n1. Added [tooltip](https://www.figma.com/design/K9BTJ3aZAvwWBXU9N8aqGa/-27983-Fleet-Desktop-%3E-Self-service--Add-%22Update%22-actions-when-updates-are-detected-for-installed-so?node-id=5366-4609\u0026t=3kh7v4Aj5lLSDppW-11) on `installed` status\n\n"
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@noahtalerman @mostlikelee \n\nUpdated the designs with the following:\n\n1. Removed \"Installed\" status from the update cards at the top of the page.\n2. Upgraded the 'update' action to a button.\n3. For installed apps, updated the action to 'reinstall'"
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "@eugkuo @noahtalerman we realized that we need design when multiple versions of an updatable app is installed"
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@mostlikelee I'm not exactly sure what you mean by this. Wouldn't we still have a single update button for the app? I mean we'd want to update it all to the most recent. I think I might be missing some nuance here.\n\ncc @noahtalerman "
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "Chatted with @mostlikelee and here are the use cases:\n\n1. N different versions in the Applications folder\n2. N copies of the same version in the Applications folder\n    1. Currently can only update the one with the name we expect.\n4. N copies of various versions in different locations.\n\nWe can only update if have following criteria:\n1. Existing path needs to be what's expected (name, location, etc.)\n    1. Works for FMAs\n    2. Does not work as well for custom packages.\n    4. Big question mark around VPP.\n\nLet's discuss in USR.\n\ncc @noahtalerman "
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Looks like there's an off-by-one in step 11 in the test plan.\n\nAlso, for \"Updating\", can we show that status string always when inventory says a piece of software is installed but there's also a pending install? That would allow us to use the existing API there rather than having to build a new one.\n\nI have an idea on making this frontend-only to expedite: use the existing self-service filter, no pagination, and client-side filter to results that have only installed versions where version differs from the installer package. This gets this work out from behind further ListHostSoftware tweaks/derisks it a bit, at the cost of additional frontend munging."
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@iansltx \n\u003e Looks like there's an off-by-one in step 11 in the test plan.\nThanks! Fixed.\n\n\u003eAlso, for \"Updating\", can we show that status string always when inventory says a piece of software is installed but there's also a pending install? That would allow us to use the existing API there rather than having to build a new one.\n\nSo there could be a pending install and we and updating over that? At any rate, if we're updating that software it seems reasonable to show the 'updating' status.\n\n@noahtalerman thoughts?\n\ncc @mostlikelee "
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@eugkuo To clarify, I'm saying that if we have a piece of software already in inventory and there's a pending install (from whatever Fleet-initiated source...Install button, update button, policy execution, whatever), we use the word \"Updating...\" rather than \"Installing...\" in the self-service UI. Then reserve \"Installing...\" for cases where a host _doesn't_ have the same software in inventory already.\n\nSo the pending statuses would be:\n\n* Installing - wasn't in inventory, install is pending\n* Updating - was in inventory, install is pending\n* Uninstalling - uninstall is pending\n\nIf the above are the rules, the frontend already has all of the information it needs (with existing API endpoints) to show the correct status (so, no backend/DB changes to differentiate between \"installing\" and \"updating\")."
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@iansltx Ohhhh! This works for me. Also,  in future we shouldn't have 'Install' as an action on installed software. It'll say 'uninstall' or 'update' so this would mesh nicely.\n\ncc @noahtalerman @mostlikelee "
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@noahtalerman Reverted to secondary update buttons in the update cards."
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "Bumping this as an unresolved question as we expedite this story: https://github.com/fleetdm/fleet/issues/27983#issuecomment-2877468972"
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "During a call on \"Updates in self-service\" call on 2025-05-26, here's what @mostlikelee and I decided for the first iteration: \n\n![Image](https://github.com/user-attachments/assets/1b98c30b-6dc8-444e-826b-a6fc81e8d715)\n\nFleet will document this behavior is the self-service software guide. The UI will link IT admins to this guide (redirect PR is [here](https://github.com/fleetdm/fleet/pull/29445)):\n\n![Image](https://github.com/user-attachments/assets/f6ca58b1-8ce0-473b-a9f3-a9e574e7aaa0)\n\n![Image](https://github.com/user-attachments/assets/30d73148-cd03-4ad8-9b84-5ee89467e68a)\n\nEventually, Fleet will iterate on this behavior. Plan is to ship iterative improvements such that more apps show up in “Updates.”\n\ncc @eugkuo "
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "FYI @eugkuo I moved this 480px width screen into scratchpad [here](https://www.figma.com/design/K9BTJ3aZAvwWBXU9N8aqGa/-27983-Fleet-Desktop-%3E-Self-service--Add-%22Update%22-actions-when-updates-are-detected-for-installed-so?node-id=5408-9141\u0026t=2qzAG36eyoKjsBAb-1). Looking the discussion in [this closed PR](https://github.com/fleetdm/fleet/pull/28465), it sounds like we haven't added support for screen widths down to 480px yet.\n\n![Image](https://github.com/user-attachments/assets/d3909d83-841e-41be-a74c-319dffe80946)"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Thinking through workflow for a moment, if an app shows up in the updates carousel, it's because we've seen it in inventory, and the version in inventory is less than the version of the corresponding installable software (FMA, custom package, or VPP) for that team (and we don't show a card if criteria around installed paths aren't met, see dev note mentioned above). Good so far? This has a side effect of VPP apps being most likely to be in that carousel, as we'll display a new version there within an hour of the version being published via Apple, with no ability for an admin to override this, but...that's probably okay?\n\nNext, an end user clicks \"Update\", at which point we either send the MDM command to install or queue up a package-based install. In both cases, currently there will be a point where the software is reported as installed but software invenotry has not yet been refreshed, even with #28738 implemented. This means that we can show the \"updating\" spinner right up until the install completes, at which point a purely inventory-based system would flip back to having the \"Update\" action displayed until inventory gets run again, which isn't what we want.\n\n## Update status alternative: install status\n\nOne alternative would be to take installation status into account in some form when installs are successful/failed, rather than just when they're pending. Catch here is that we're replicating issues around freshness that affect our existing host software inventory, where an out-of-band update (e.g. Chrome auto-updating) would cause the update card to show when it isn't necessary. This issue is relevant when the update installation fails but the software eventually gets updated out-of-band.\n\n### Install status freshness: version comparison\n\nOne mitigation for the freshness comparison issue would be to compare versions between inventory and the install receipts, and have the higher version win, but VPP installs currently break this as `host_vpp_software_installs` doesn't include the version that was installed, so we'd wind up in a case where VPP apps would never show up in the updates list once installed the first time because installed version would just reference back to the latest available version.\n\n### Install status freshness: refetch wins when more recent than install\n\nAnother mitigation would be to only take install statuses into account when they're more recent than the most recent host vitals refetch. We have install timestamp info and last refetch timestamp info, so this should be reliable, and we can use this nuance to show available updates with e.g. \"Update successful\" or \"Update failed\" if we wanted between getting an install result back and the next refetch.\n\nWe could actually extend this logic to host software listing in general, explicitly ignoring install receipts (success or failure) unless they've happened since the most recent vitals refetch as the vitals refetch should at that point be the source of truth.\n\n## Update status alternative: refetch on install success\n\nAnother alternative would be to retech host vitals (or at least rerun software inventory) after each successful install. Doing this right needs #28738 as a prerequisite so we don't refetch too early. If we did this, the window where software inventory alone was too stale for correctly showing the update carousel would be minimized.\n\n---\n\nWe could combine \"refetch wins when more recent than install\" and \"refetch on install success\", plus maybe polling of host details on the **My device** page while refetching, to get a nearly realtime view of what's actually installed. Clicking Update on a piece of software would pop up a spinner in place of the Update button, then the status would flip to Update Successful for \u003c 1 minute while a vitals refresh was triggered, then the update card would disappear entirely once the vitals refresh triggered by that install was completed. For failed updates, we'd show the \"Update failed\" status until the next vitals refetch, with a retry button, and that failure would go away (replaced with an \"Update\" action with no status) after the next refetch.\n\nThis combined approach will require API changes (but no fleetd changes) to work, but in return we get a clear path to cleaning up inventory-vs-install idiosyncrasies, and we avoid end-user frustration stemming from varying degrees of staleness on the updates list compared to what they have installed."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Unrelated to the above: hopefully installers get targeted properly with labels for e.g. Intel Macs in this customer's deployment, since otherwise we'll be presenting end users with prompts to update apps to versions that won't work on their architecture."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Looking over the wireframes, looks like we have a different activity description than the standard \"installed X app.\" Given the complexity of this ticket as it stands, can we remove the activity from scope, reverting to the standard \"an end user installed X\" activity that we have right now? Otherwise we need to decide how we'll differentiate an update from an install (new param on the install reqeuest? Automatically server-side based on what's in inventory on the machine?) and define a structure for the revised activity record (I assume a new field on `installed_software`), neither of which we've spec'd. Feels like those changes can be added in a follow-up ticket."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "One interesting side effect of \"refetch vitals after every install\" is it could resolve the software install \"half\" of #25969/#28523, albeit in a heavier-weight fashion since IIRC a vitals refetch runs policy queries as well as software inventory queries. If we just run software inventory (so, not a full refetch) those issues are unaffected. TBD whether we'd want to start with a full vitals refetch hre since that's more computationally expensive both client- and server-side and once we implement it it's more likely that admins would rely on the full-refetch behavior so it'd be hard to back out.\n\nBut if we _didn't_ collect the entire set of host vitals, we'd need another timestamp on hosts to indicate how fresh software inventory was relative to the rest of host vitals, so just doing a full refetch is a lot less risky from a development perspective. So \"do a full refetch after an install completes\" still makes sense here I think.\n\nNote that this is _in addition to_, and _after_, the MDM polling covered in #28738, as that polling would only affect software install status and not inventory (even on iOS/iPadOS the polling would be checking for managed apps, while software inventory grabs the entire installed app list)."
          },
          {
            "author": {
              "login": "gillespi314"
            },
            "body": "FYI, we have some existing framework for refetching [critical queries](https://github.com/fleetdm/fleet/blob/f018066beef248bdb67700a3f458809f9bad410a/server/fleet/hosts.go#L361-L362) that might be useful here."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@gillespi314 Thanks for pointing that out! I think that in this case once we implement #28738 we'll only need to refetch once, after the install is confirmed succeeded (on script exit 0 + post-install for package-based, on MDM managed apps success for VPP) so we won't need to take the perf hit of a full refetch on every host check-in (we're making the assumption that the MDM managed app inventory command is less expensive to poll than our standard vitals suite)."
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@iansltx @mostlikelee Removed the updated activity feed and wrote a [FR](https://github.com/fleetdm/fleet/issues/29492) to update this in the future.\n\ncc @noahtalerman "
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "@mostlikelee @eugkuo, just checking, is this story ready to move to \"Estimated\"? Looks like it has an estimate on it."
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "The estimate is from our expedited estimation session.  I'll remove the estimate as we're going to want to estimate this again after Spec.  This story is in the correct spot.  We'll move it over when https://github.com/fleetdm/fleet/issues/29494 is complete."
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "Hey @iansltx just a reminder that this story is ready for spec? Can you please work with the team to get it estimated ahead of next sprint?\n\ncc @mostlikelee "
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@noahtalerman on my list after my responsibilities for 4.69 are concluded."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@jmwatts This test plan is ready for a last look. Make any edits that you need to make, and once it looks good pull this to Ready to Estimate. I've already pulled subtasks to Ready to Estimate as I'm sufficiently confident that I have them spec'd correctly and wanted to give folks a little more runway to put down their own estimates."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Workflow diagrams:\n\n![Image](https://github.com/user-attachments/assets/c265a375-fc3e-437e-8350-b685c605d56d)"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "@iansltx test plan looks good. \n\n\u003e Windows apps don't show in the available updates list if they don't have an associated install path \n\nDo we know if we plan to address https://github.com/fleetdm/fleet/issues/29449 before this ticket?"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@jmwatts That would get addressed in the same sprint at the earliest, given that this will be going into the next sprint. There isn't a direct dependency here, and these shouldn't touch the same code, so if/once that bug is fixed this implementation will \"just work.\""
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "@noahtalerman adding this back into your queue based on our design review discussion re: copy/UI changes for unpatchable software"
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "@mostlikelee can you please update the test plan? We made a change to not worry about where the software is installed (paths). Tip: CMD+F for \"path\" in the issue description."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Revised the spec here (didn't touch Figmas), including test plan, to drop host paths interactions, and drop this down to FE-only. We'll likely need to reimplement with server-side changes in the next iteration, but workload-wise if we tried to implement this plus #30240 in a single sprint with backend changes we'd miss the release cut due to waiting for dependencies.\n\nThis story now consists of frontend changes plus docs changes, so tee shirt sizing is just above an XS. Likely scenario here is that dev gets done in the 4.72 sprint, and docs get updated during the 4.73 dev sprint but prior to 4.72 going GA.\n\nAPI change/path-related subtasks have been dissociated from this story and moved back to the \"New requests\" column; they'll need to be either associated with a new follow-up story or converted to stories themselves to be actionable.\n\nPulled the story back to USR to revalidate the test plan, while keeping subtasks in Estimated based on previous discussions."
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "after some discussion, keeping the original estimates and moving to Estimated."
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "@marko-lisica thanks for jumping right into our team and the mountain of dev/design sync needed. Here's some recap of stuff I need/needed clarified.\n\nPrevious conversations:\n\n000. This isn't in the spec to be able to sort status from host details \u003e software \u003e library. But if we did it would be consistent with self-service status sort. I tried to implement but it proved difficult because of the server side pagination/query/sort happening and sorting on a column that is built in the FE doesn't play nice with server side sort. (https://fleetdm.slack.com/archives/C086V2QK76X/p1752175433082329?thread_ts=1752168568.807959\u0026cid=C086V2QK76X) Confirm we are intentionally scratching sorting on host details \u003e software \u003e library \u003e status column or I need to jump through a lot of hoops to make everything client side sort an then implement\n\n00. I dev-ed in clientside paginating self-service page to 20. When there's updates to specs like this, are you DRI for updating the Figma and QA plan? (https://fleetdm.slack.com/archives/C086V2QK76X/p1752175280199089)\n\n0. We either needed to make 2 API calls, one for update software and the other for filtered software in the self-service section OR move the self-service software search query to be client side. We chose to make everything client side so we don't have to make so many API calls and deal with making 2x the API calls every time an install/uninstall/update action is clicked. It's sticky, partially because this is all frontend hoops jumped through because the API doesn't paginate, doesn't filter categories, and doesn't have a 1:1 map of status's in the API with status shown in the UI.  (https://fleetdm.slack.com/archives/C086V2QK76X/p1752180334175959)\n\nQuestions from [Self-service/Library updates thread](https://fleetdm.slack.com/archives/C086V2QK76X/p1752184798822479):\n\n1. I asked the channel, If there's more than one version installed on a host, what should go on the software updates card for the \"125.0.1 -\u003e 126.0.1\". If recalled correctly, we think the Figma is not correct, and should just show the library version.\n\n2. Do we show the update available modal if you click update in the carousel or does it just automatically make the API call to update\n\n3. When you click the Update all button, do we disable the \"update all\" button?\n\nMore questions not on the thread:\n\n5. Similarly, when you are updating all and there's no other software to update since they're all pending \"Updating...\", do we disable the \"update all\" button?\n\n6. This pagination but changing the number of update software tiles per page on page size might be a little too tricky. For example, you have 20 software that need updates, you're looking at the third page which shows software 9,10,11,12. You shrink your browser horizontally to only see 3 software, which 3 should be shown?? What page are you on now?\n\n7. Do we forsee an update section in host details \u003e software \u003e library? Is it in the works, any heads up might be good in making sure the code is reusable across fleet desktop \u003e self-service and host details \u003e software \u003e library\n\nI'm OOO tomorrow but I'll be back Monday and Thursday next week. If you can address any of these, that would be amazing, ty!\n "
          },
          {
            "author": {
              "login": "marko-lisica"
            },
            "body": "Hey @RachelElysia, thanks for collecting all the questions in one place, it's really helpful.\n\n\u003e This isn't in the spec to be able to sort status from host details \u003e software \u003e library. But if we did it would be consistent with self-service status sort. I tried to implement but it proved difficult because of the server side pagination/query/sort happening and sorting on a column that is built in the FE doesn't play nice with server side sort. (https://fleetdm.slack.com/archives/C086V2QK76X/p1752175433082329?thread_ts=1752168568.807959\u0026cid=C086V2QK76X) Confirm we are intentionally scratching sorting on host details \u003e software \u003e library \u003e status column or I need to jump through a lot of hoops to make everything client side sort an then implement\n\nLet’s skip this. I’ll add follow up story to do some additional UI improvements (details modals without 2 tabs on library page, sorting by status on library page and pagination for self-service in API).\n\n\u003e I dev-ed in clientside paginating self-service page to 20. When there's updates to specs like this, are you DRI for updating the Figma and QA plan? (https://fleetdm.slack.com/archives/C086V2QK76X/p1752175280199089)\n\nClient-side pagination sounds good to me. I added spec to Figma and test case.\n\n\u003e We either needed to make 2 API calls, one for update software and the other for filtered software in the self-service section OR move the self-service software search query to be client side. We chose to make everything client side so we don't have to make so many API calls and deal with making 2x the API calls every time an install/uninstall/update action is clicked. It's sticky, partially because this is all frontend hoops jumped through because the API doesn't paginate, doesn't filter categories, and doesn't have a 1:1 map of status's in the API with status shown in the UI. (https://fleetdm.slack.com/archives/C086V2QK76X/p1752180334175959)\n\nI'm not sure I understand this. Are we going to request all self-service software, and then the frontend will find and display those with available updates in the \"Updates\" section? If that's correct, then I think that's fine.\n\n\u003e I asked the channel, If there's more than one version installed on a host, what should go on the software updates card for the \"125.0.1 -\u003e 126.0.1\". If recalled correctly, we think the Figma is not correct, and should just show the library version.\n\nWe decided to don’t show current version, to simplify in this iteration. We can add that later. It makes things complicated when user has multiple versions of the same app installed in different paths.\n\n\u003e Do we show the update available modal if you click update in the carousel or does it just automatically make the API call to update\n\nWe show update available modal only when user clicks on “update available” in status column. If user click “Update” in self-service table or in the carousel we just directly start update (user sees “Updating” status.\n\n\u003e When you click the Update all button, do we disable the \"update all\" button?\n\nI think we should disable “Update all“ button and show “Updating” status on each item in carousel and self-service table.\n\n\u003e Similarly, when you are updating all and there's no other software to update since they're all pending \"Updating...\", do we disable the \"update all\" button?\n\nI think so. Let’s disable the button if an update is started for all apps that have an update available.\n\n\u003e This pagination but changing the number of update software tiles per page on page size might be a little too tricky. For example, you have 20 software that need updates, you're looking at the third page which shows software 9,10,11,12. You shrink your browser horizontally to only see 3 software, which 3 should be shown?? What page are you on now?\n\nSorry, I don’t understand this. Let’s chat during the design review on Monday. If it’s too early for you, please add something to my calendar.\n\n\u003e Do we forsee an update section in host details \u003e software \u003e library? Is it in the works, any heads up might be good in making sure the code is reusable across fleet desktop \u003e self-service and host details \u003e software \u003e library\n\nI don’t think so. I don’t thin IT admin want’s to see that. They will probably make updates automatic based on some criteria. We might want an additional filter in the existing dropdown for apps that have updates available, but not planned AFAIK."
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "@marko-lisica thanks for all the clarification!\n\n\u003e I'm not sure I understand this. Are we going to request all self-service software, and then the frontend will find and display those with available updates in the \"Updates\" section? If that's correct, then I think that's fine.\n\nExactly\n\n\u003e Sorry, I don’t understand this. Let’s chat during the design review on Monday. If it’s too early for you, please add something to my calendar.\n\nWill add to your calendar\n\nI think everything else is addressed and unblocked so I can dev -- hvala!"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "@marko-lisica Another question re: https://www.figma.com/design/K9BTJ3aZAvwWBXU9N8aqGa/-27983-Fleet-Desktop-%3E-Self-service--Add-%22Update%22-actions-when-updates-are-detected-for-installed-so?node-id=5302-9691\u0026t=xsGXc1YLuwgfuqy1-0\n\nWhen the update fails, it shows \"Update\" button and a \"Failed\" button in the update card, but in the Self-service table view in the card below, should that installer show \"Failed\" or \"Update available\" in the status?\n\nNuances needing clarification from @marko-lisica :\n\n\u003cimg width=\"671\" height=\"187\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/d94eb0bb-adeb-488e-a955-c7a2d365a791\" /\u003e\n\nScenario 1: Docker Desktop has an update available but it failed to update, what should be shown as the status in the table view?\n\nScenario 2: Docker Desktop has an update available but it failed to uninstall, what should be shown as the status in the table view?"
          },
          {
            "author": {
              "login": "marko-lisica"
            },
            "body": "Hey @RachelElysia, I think that we should show \"Failed\" in self service table as well.\n\n\u003e Scenario 1: Docker Desktop has an update available but it failed to update, what should be shown as the status in the table view?\nWe should alwaythe s show latest status in the status column. If it's failed let's show it. Action should be update if update is available.\n\n\u003e Scenario 2: Docker Desktop has an update available but it failed to uninstall, what should be shown as the status in the table view?\n\nWhat do we display today if the uninstallation fails? Do we have a specific status like \"Failed (uninstall),\" or do we show \"Failed\" and then inform the user in the details modal that the uninstallation was unsuccessful?\n\n"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "@marko-lisica \n\n\u003e What do we display today if the uninstallation fails? Do we have a specific status like \"Failed (uninstall),\" or do we show \"Failed\" and then inform the user in the details modal that the uninstallation was unsuccessful?\n\nWe show \"Failed (uninstall)\" which leads to the uninstall modal.\n\nI'll be sure to update these copies to not show update available and show \"Failed\" or \"Failed (uninstall)\" if it meets both criteria, I'll update the QA plan too since I'm in there RN, thank you!"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "@marko-lisica Update available has a tooltip and Failed/Failed (uninstall) has a separate tooltip. Because these options listed above fall into both, I made it so the tooltips show both the Update Available tooltip copy and Failed/Failed (uninstall) copy. WDYT?\n\n```\n  failed_install_update_available: {\n    iconName: \"error-outline\",\n    iconColor: \"ui-fleet-black-50\",\n    displayText: \"Failed\",\n    tooltip: ({ isSelfService, isHostOnline, lastInstalledAt }) =\u003e\n      isSelfService || isHostOnline ? (\n        \u003c\u003e\n          Fleet can update software.{\" \"}\n          \u003c\u003e\n            Software failed to install\n            {lastInstalledAt ? ` (${dateAgo(lastInstalledAt)})` : \"\"}.{\" \"}\n            {isSelfService ? (\n              \u003c\u003e\n                Select \u003cb\u003eRetry\u003c/b\u003e to install again, or contact your IT\n                department.\n              \u003c/\u003e\n            ) : (\n              \u003c\u003e\n                Select \u003cb\u003eDetails \u0026gt; Activity\u003c/b\u003e to view errors.\n              \u003c/\u003e\n            )}\n          \u003c/\u003e\n        \u003c/\u003e\n      ) : (\n        \u003c\u003e\n          Fleet can update software\n          \u003cbr /\u003e when the host comes online.\n          \u003cbr /\u003e\n          Software failed to install\n          {lastInstalledAt ? ` (${dateAgo(lastInstalledAt)})` : \"\"}.{\" \"}\n          {isSelfService ? (\n            \u003c\u003e\n              Select \u003cb\u003eRetry\u003c/b\u003e to install again, or contact your IT\n              department.\n            \u003c/\u003e\n          ) : (\n            \u003c\u003e\n              Select \u003cb\u003eDetails \u0026gt; Activity\u003c/b\u003e to view errors.\n            \u003c/\u003e\n          )}\n        \u003c/\u003e\n      ),\n  },\n  failed_uninstall_update_available: {\n    iconName: \"error-outline\",\n    iconColor: \"ui-fleet-black-50\",\n    displayText: \"Failed (uninstall)\",\n    tooltip: ({ isSelfService, isHostOnline, lastInstalledAt }) =\u003e\n      isSelfService || isHostOnline ? (\n        \u003c\u003e\n          Fleet can update software.\n          \u003cbr /\u003e\n          Software failed to uninstall\n          {lastInstalledAt ? ` (${dateAgo(lastInstalledAt)})` : \"\"}. Select{\" \"}\n          \u003cb\u003eRetry\u003c/b\u003e to uninstall again\n          {isSelfService \u0026\u0026 \", or contact your IT department\"}.\n        \u003c/\u003e\n      ) : (\n        \u003c\u003e\n          Fleet can update software\n          \u003cbr /\u003e when the host comes online.\n          \u003cbr /\u003e Software failed to uninstall\n          {lastInstalledAt ? ` (${dateAgo(lastInstalledAt)})` : \"\"}. Select{\" \"}\n          \u003cb\u003eRetry\u003c/b\u003e to uninstall again\n          {isSelfService \u0026\u0026 \", or contact your IT department\"}.\n        \u003c/\u003e\n      ),\n  },\n```"
          },
          {
            "author": {
              "login": "marko-lisica"
            },
            "body": "@RachelElysia I think we discussed this during standup. We decided not to don't show the update tooltip in the table if it fails. We'll show the update button in the \"Updates\" section + failed status."
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "**QA Notes** (In Progress)\n\nTest with Windows, macOS, Linux hosts\nTest with Chrome, Safari, Edge, Firefox\n\nUI\n\n1. Ensure that there there are more than 8 updates available for a host by installing older versions of the software (e.g. downloading old FMA copies based on previous manifest versions), then adding current versions as available in self-service on the same team.\n2. Navigate to Fleet Desktop.\n\n- [x] Verify that there the \"Updates\" section shows at the top of the page.\n- [ ] Verify that the number next to the Self-service tab matches the number of available updates.\n- [x] Verify that selecting 'Next' swipes over to the next 4 update cards in the Updates section.\n- [x] Verify that the same software titles have 'Update' actions next to them in Self-service table.\n\n3. Select \"Update\" on a software title\n- [x] Verify that the status changes to 'Updating' with an animated circle progress spinner on both the app card and in the Self-service table..\n\n4. Navigate away from the page and navigate back\n- [x] Verify that the status remains.\n5. When the update is complete \n- [x] Verify that the software is updated locally, the card shows \"Updated\", and a refetch has been queued.\n6. Once the refetch completes, \n- [x] Verify that the card is removed from the top section and that the action in the Self-service table changes to \"Reinstall\" (when the one card is removed, the remaining 3 cards still show but the one that was removed is replaced with the next item in the list, so that it still shows 4 cards)\n- [x] Verify that the pagination always shows 4 items, so it goes from showing 1 2 3 4 to 5 6 7 8.\n7. Update four more apps.\n- [ ] Verify that the Update section shows 3 cards and that the width of each card is the same as when there are 4 items in the Update section at widths above 1280\n- [ ] Verify layout at 480, 768, and 1024 breakpoints. Note that 2 cards show at 768 and that 3 cards show at 1024.\n- [x] Verify that self-service is paginated and displays 20 items per page.\n\nOther items\n- [ ] Double check for the additional change in host details for the Self service hover text to add a learn more link\n- [x] If there was only one update card and I update the app and it refetches, the Updates section disappears\n- [x] Clicking the Update all option, refetches will occur until all updates are completed. The count will continue decreasing until no further updates are available and then the section will disappear\n- [x] Failed modal should show details when clicked\n\nUpdate eligibility criteria\n- [ ] Software not available for self-service should not show in the available updates list\n- [ ] Software not in inventory should not show in the available updates list\n- [ ] VPP apps should not show in the available updates list if MDM is turned off\n- [ ] Software in inventory that is \u003e= the version for the installer doesn't show\n- [ ] Software in inventory whose version can't be compared to the installer's version shouldn't show\n- [ ] Software in inventory, installed multiple times, where one install is an older version and one install is a same-or-newer version, should show in the available updates list\n- [ ] Software in inventory, installed once, that is older than the installer's version, should show in the available updates list\n- [ ] Software in the list that was previously successfully installed by Fleet should NOT show install status if a refetch has happened since the install\n- [ ] Software in the list with a pending install SHOULD show install status, even if a refetch has happened since the install started\n- [ ] Software in the list that has been successfully installed by Fleet since the last refetch SHOULD show install status\n- [ ] Software that shows up in the list that has had an install failure by Fleet since the last refetch SHOULD show install status\n\nEdge cases:\n🔴 Software installed in multiple locations - what happens when I update? Does it only update one of the applications? Does that mean the card remains after the update if the other locations weren't updated?\n\"It depends on the install script and the package\"\nShort answer: Yes, the card can still remain if an outdate version exists anywhere on the host\n🔴 Will it install a new firefox in the expected location, and you may end up with more than one version?\nA: Yes\n"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Removing from the orchestration board as QA/any fixes are being handled by #g-software."
          }
        ],
        "issueNumber": 27983,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcdkTI",
        "labels": [
          "story",
          ":release",
          "#g-software",
          "~context",
          "fma"
        ],
        "issueNumber": 30739,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcdAFs",
        "labels": [
          "story",
          ":release",
          "#g-software",
          "~context",
          "fma"
        ],
        "issueNumber": 30724,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcdLoc",
        "labels": [
          "story",
          ":release",
          "#g-software",
          "~context",
          "fma"
        ],
        "issueNumber": 30727,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcgftg",
        "labels": [
          "story",
          ":release",
          "#g-software",
          "~context",
          "fma"
        ],
        "issueNumber": 30802,
        "changeType": "modified"
      },
      {
        "assignees": [
          "ksykulev"
        ],
        "id": "PVTI_lADOBDAnic4A4BEUzgdCxHA",
        "status": "🐣 In progress",
        "issueNumber": 30682,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdUxWw",
        "status": "🐣 In progress",
        "issueNumber": 31571,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdVUIs",
        "comments": [
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@noahtalerman Seems like the `vscode_edition` column serves the same purpose here?"
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "@iansltx oh interesting! Does `vscode_edition` already tell us VS Code v. Cursor v. Windsurf?\n\nIf yes, then it sounds like no osquery changes are needed.\n\nIf not, then I think we stick with a new `ide_type` column. While we're making osquery changes, we take the opportunity to make `vscode_extensions` consistent with the [`chrome_extensions` table](https://fleetdm.com/tables/chrome_extensions).\n\ncc @zwass "
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@noahtalerman It doesn't give us that ability right now (because it doesn't have the mapping added for the user data dirs for windsurf/cursor/vscode-oss), but it uses the exact same method to pull the information that we'd use to get that info, so adding a new column would either wind us up with two columns for the exact same info or one column that we'd have to artificially pin to older behavior, complicating dev/maintenance."
          },
          {
            "author": {
              "login": "zwass"
            },
            "body": "\nAh, I didn't notice the `vscode_edition` column when we discussed this. I agree with @iansltx this should definitely be used to better match the behavior of the `chrome_extensions` table where `edge` vs. `beta` vs. `brave`, etc. are included in the same column."
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "\u003e - [x] Fleet's agent (fleetd) changes: Add 3 new values to the existing column `vscode_edition` to the [`vscode_extensions` osquery table](https://osquery.io/schema/5.18.1/#vscode_extensions). `cursor` can be one of `windsurf`, or `vscode_oss`.\n\n@zwass just chatted with @iansltx and we decided update the specs to use the `vscode_edition` column.\n\nWe also decided to bring in VSCodium which will return `vscode_oss`.\n\nNot sure if other forks (less used) have the same value. Can you please help us do that research? We want to know if `vscode_oss` is VSCodium specific so we can show \"VSCodium\" in the UI/API. "
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@jmwatts Made some tweaks to the test plan for more accuracy, given that we need a users cross join to get VSCode extensions. The new query is based on [our existing VSCode extensions detail query](https://fleetdm.com/vitals/v-scode-extensions#apple)."
          },
          {
            "author": {
              "login": "zwass"
            },
            "body": "\u003e Not sure if other forks (less used) have the same value. Can you please help us do that research? We want to know if vscode_oss is VSCodium specific so we can show \"VSCodium\" in the UI/API.\n\nCan we have it return `vscodium` for maximum clarity?"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@zwass The pattern of dotfiles dirs is `.vscode-oss`, hence my thought of maintaining the \"hyphens to underscores\" pattern. I'm also not 100% sure whether VSCodium is the only fork that uses that dir naming scheme; mind doing a quick check? If that really _is_ VSCodium specific, fair enough and we can break the pattern to specifically call out that we know VSCodium is the only fork that uses that dir naming convention."
          }
        ],
        "issueNumber": 31476,
        "changeType": "modified"
      }
    ]
  },
  {
    "timestamp": "2025-08-07T07:09:05.122177994Z",
    "items": [
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdVfUY",
        "status": "Waiting",
        "comments": [
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "@RachelElysia I'm still seeing this occasionally happen. If I never try to reorder the sort for name or status, it doesn't happen, but if I do that, then set it back to sorted by name, then try an action, it happens.\n\nhttps://github.com/user-attachments/assets/f37c46de-538f-4f57-be0b-a1498e4dd638"
          }
        ],
        "issueNumber": 31632,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdVLLc",
        "status": "Waiting",
        "comments": [
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "@marko-lisica \n I suggest:\n1. Updates section we change to drop down to 2 cards per page for under 880px (breakpoint small) instead of the current behavior down to 2 for under 768px (breakpoint xs)\n2. Self-service section, we could make this a scrollable table (which won't work if you end up making additional actions a dropdown) or we have a max width on the name column which is causing the push off the page\n3. Updates section, Add 16px (or whatever px) gap between Update all button and header on left side\n\nScreenshot of improvements in PR: https://github.com/fleetdm/fleet/pull/31627\n\n4. Maybe we truncate long software names on the update cards as well since that'll squish off the page too"
          },
          {
            "author": {
              "login": "marko-lisica"
            },
            "body": "\u003e 1. Updates section we change to drop down to 2 cards per page for under 880px (breakpoint small) instead of the current behavior down to 2 for under 768px (breakpoint xs)\n\n@RachelElysia sounds good to me.\n\n\u003e 2. Self-service section, we could make this a scrollable table (which won't work if you end up making additional actions a dropdown) or we have a max width on the name column which is causing the push off the page\n\nI think it makes sense to have max width on the name column, and if the name can't fit we truncate + tooltip on hover to show the full name.\n\n\u003e 3. Updates section, Add 16px (or whatever px) gap between Update all button and header on left side\n\nSounds good to me.\n\n\u003e 4. Maybe we truncate long software names on the update cards as well since that'll squish off the page too\n\nLet's do this as well.\n"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "@marko-lisica and @RachelElysia I just want to confirm this is correct:\nI see 2 cards under 880px\nI see 3 cards between 880px and 1400px\nI see 4 cards over 1400px\n\nI see the comment above regarding \"change to drop down to 2 cards per page for under 880px\" which tracks with what I'm seeing, just wasn't sure about the 1400px breakpoint. \n"
          }
        ],
        "issueNumber": 31621,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdXiVE",
        "status": "✅ Ready for release",
        "comments": [
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "@marko-lisica The figma looks like we deliberately removed Uninstall script content, and since there's no output for tarballs this is empty.\n\nI'm proposing we should show whatever is available only. So for tarballs it shows script content, for others it might show both content and output. \n\nWDYT? Like why are we hiding script content if it's being returned from the API?\n\nGoing to add it back in for both install and uninstall modals."
          },
          {
            "author": {
              "login": "marko-lisica"
            },
            "body": "\u003e [@marko-lisica](https://github.com/marko-lisica) The figma looks like we deliberately removed Uninstall script content, and since there's no output for tarballs this is empty.\n\u003e \n\u003e I'm proposing we should show whatever is available only. So for tarballs it shows script content, for others it might show both content and output.\n\u003e \n\u003e WDYT? Like why are we hiding script content if it's being returned from the API?\n\u003e \n\u003e Going to add it back in for both install and uninstall modals.\n\n@RachelElysia sounds good!"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "yay, ok, PR incoming\n\nAlso, I realized install script results don't return script content so I filed [a bug to do so](https://github.com/fleetdm/fleet/issues/31668)"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "**QA Notes**\n\n1. Add a tar.gz file to the team's library, specifying appropriate install and uninstall scripts. (Ex: go1.24.2.linux-arm64.tar.gz, install script is: mv $INSTALLER_PATH/* /usr/local, uninstall script is: rm -rf /usr/local/go\n2. Install the tar.gz on a Linux host\n3. Uninstall the tar.gz from the Linux host\n4. View the Activity feed and click on details to open modal.\n5. Click on details dropdown\n- [x] Verify \"install script output\" is shown for installs\n- [x] Verify that \"uninstall script content\" is shown for uninstalls\n- [x] Verify that \"uninstall script output\" is shown for uninstalls if available \n\n\u003cimg width=\"655\" height=\"419\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/0a4d9002-1be0-43b4-a394-a8a7974a3091\" /\u003e\n\n\u003cimg width=\"660\" height=\"403\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/d83f8a28-039b-4ea6-ad31-845c260a2b91\" /\u003e\n\n\u003cimg width=\"657\" height=\"509\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/8b475d5d-d470-459e-9853-39c9be499620\" /\u003e"
          }
        ],
        "issueNumber": 31660,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdVb6w",
        "status": "✅ Ready for release",
        "comments": [
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "The link is within a link cell \u003e.\u003c\n\nEst: under 2 hours"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "**QA Notes**\n\nConfirmed Learn more link is now linking to https://fleetdm.com/guides/software-self-service"
          }
        ],
        "issueNumber": 31630,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdVayQ",
        "status": "🐣 In progress",
        "issueNumber": 31629,
        "changeType": "modified"
      },
      {
        "assignees": [
          "ksykulev"
        ],
        "id": "PVTI_lADOBDAnic4A4BEUzgdXw9w",
        "status": "🐣 In progress",
        "comments": [
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "This is how it appeared when I first noticed it (no forced repro here)\n\n\u003cimg width=\"1473\" height=\"741\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/b953613a-75e0-4fe1-bbeb-a58cd221f0d7\" /\u003e\n\n\u003cimg width=\"1474\" height=\"748\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/886d0be1-9e75-4425-98e3-d1d0e60b639c\" /\u003e"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "Database for this can be found in drive https://drive.google.com/file/d/1GPfYhpbFAI41uH-c0oga5MN8GDkseHa8/view?usp=sharing\nMessage @jmwatts for db credentials"
          },
          {
            "author": {
              "login": "ksykulev"
            },
            "body": "I am a bit confused about what's going on here. I can see that bdash was `status: failed_install`. But then the other execution id present in the table has a `status: NULL`?\n```\n\u003e select * from host_software_installs where host_id = 2 and software_title_id = 3850;\n*************************** 1. row ***************************\n                           id: 383\n                 execution_id: 9d23bcfd-6a82-418c-a771-88daf943d8c7\n                      host_id: 2\n        software_installer_id: 486\n     pre_install_query_output: NULL\n        install_script_output: installer: Package name is Bdash_1.17.1\ninstaller: Upgrading at base path /\ninstaller: The upgrade was successful.\n\n     install_script_exit_code: 1\n   post_install_script_output: NULL\npost_install_script_exit_code: NULL\n                      user_id: 2\n                   created_at: 2025-08-06 17:03:12.482740\n                   updated_at: 2025-08-06 17:07:05.875222\n                 self_service: 0\n              host_deleted_at: NULL\n                      removed: 0\n      uninstall_script_output: NULL\n   uninstall_script_exit_code: NULL\n                    uninstall: 0\n                       status: failed_install\n                    policy_id: NULL\n           installer_filename: Bdash_1.17.1.pkg\n                      version: version\n            software_title_id: 3850\n          software_title_name: Bdash\n             execution_status: failed_install\n                     canceled: 0\n*************************** 2. row ***************************\n                           id: 384\n                 execution_id: 3749623b-f856-4cbf-9e17-c76d0c9a9dbe\n                      host_id: 2\n        software_installer_id: 486\n     pre_install_query_output: NULL\n        install_script_output: NULL\n     install_script_exit_code: NULL\n   post_install_script_output: NULL\npost_install_script_exit_code: NULL\n                      user_id: 2\n                   created_at: 2025-08-06 17:08:26.634819\n                   updated_at: 2025-08-06 17:08:49.960306\n                 self_service: 0\n              host_deleted_at: NULL\n                      removed: 0\n      uninstall_script_output: NULL\n   uninstall_script_exit_code: 0\n                    uninstall: 1\n                       status: NULL\n                    policy_id: NULL\n           installer_filename: \n                      version: unknown\n            software_title_id: 3850\n          software_title_name: Bdash\n             execution_status: NULL\n                     canceled: 0\n```\n\nThis is how we are ending up with a NULL returned from the API. Trying to understand what a NULL status on an uninstall row means..."
          },
          {
            "author": {
              "login": "ksykulev"
            },
            "body": "```\n`status` enum('pending_install','failed_install','installed','pending_uninstall','failed_uninstall','canceled_install','canceled_uninstall') CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci GENERATED ALWAYS AS ((case when (`removed` = 1) then NULL when ((`canceled` = 1) and (`uninstall` = 0)) then _utf8mb4'canceled_install' when ((`canceled` = 1) and (`uninstall` = 1)) then _utf8mb4'canceled_uninstall' when ((`post_install_script_exit_code` is not null) and (`post_install_script_exit_code` = 0)) then _utf8mb4'installed' when ((`post_install_script_exit_code` is not null) and (`post_install_script_exit_code` \u003c\u003e 0)) then _utf8mb4'failed_install' when ((`install_script_exit_code` is not null) and (`install_script_exit_code` = 0)) then _utf8mb4'installed' when ((`install_script_exit_code` is not null) and (`install_script_exit_code` \u003c\u003e 0)) then _utf8mb4'failed_install' when ((`pre_install_query_output` is not null) and (`pre_install_query_output` = _utf8mb4'')) then _utf8mb4'failed_install' when ((`host_id` is not null) and (`uninstall` = 0)) then _utf8mb4'pending_install' when ((`uninstall_script_exit_code` is not null) and (`uninstall_script_exit_code` \u003c\u003e 0)) then _utf8mb4'failed_uninstall' when ((`uninstall_script_exit_code` is not null) and (`uninstall_script_exit_code` = 0)) then NULL when ((`host_id` is not null) and (`uninstall` = 1)) then _utf8mb4'pending_uninstall' else NULL end)) STORED,\n```\n\n\n`((uninstall_script_exit_code is not null) and (uninstall_script_exit_code = 0)) then NULL`"
          }
        ],
        "issueNumber": 31663,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdCxFk",
        "status": "🥚 Ready",
        "issueNumber": 30803,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcX12Q",
        "comments": [
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@noahtalerman @mostlikelee Removed 'uninstall' from this ticket as the order of operations has determined that this ticket will go ahead of the uninstall ticket (#28038)"
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@jmwatts I took a first pass at the test plan.\n\nQuestions for @mostlikelee:\n\n1. What YAML/API things might need done?\n\nQuestions for @RachelElysia \n\n1. On the carousel, if there are 6 items in the carousel are we thinking it would show 4 and 2 when paginating? Or would we always show four and selecting \"Next\" would go from showing 1 2 3 4 to showing 3 4 5 6?"
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "Notes from 14 April 2025:\n\n1. @noahtalerman : Can we scope this down to Mac only and FMA? \n    1. There are extra complications around Windows due to known issues that we've been discussing. There are also current research tickets on upgrade codes for Windows that are outstanding (#27776) which would be a pre-req for Windows.\n2. Do we want to add activity changes at this time? @mostlikelee and I think no for simplicty's sake.\n"
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "\u003e @noahtalerman : Can we scope this down to Mac only and FMA?\n\n@eugkuo @mostlikelee I think let's draft for all support we support on macOS, Windows, and Linux (custom packages, App Store apps, and Fleet-maintained apps).\n\nAfter we have designs, I think let's discuss and decide how to cut the story up.\n\nWhy? So we know where we're heading and we tease out more complications/unknowns. Then we can come up with a plan for how to address Windows and Linux even if the first iteration we build is just macOS Fleet-maintained apps. Which is a valid first iteration.\n\n\u003e Do we want to add activity changes at this time?\n\n@eugkuo same for activities. I think let's draft activities and then cut."
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "\u003e @eugkuo @mostlikelee I think let's draft for all support we support on macOS, Windows, and Linux (custom packages, App Store apps, and Fleet-maintained apps).\n\n@noahtalerman Coolio. I don't think the design changes. The UI will be the same regardless of platform. (@mostlikelee correct me if I'm wrong).\n\nWRT activities, I added [an example](https://www.figma.com/design/K9BTJ3aZAvwWBXU9N8aqGa/-27983-Fleet-Desktop-%3E-Self-service--Add-%22Update%22-actions-when-updates-are-detected-for-installed-so?node-id=5318-3291\u0026t=LPfejWpLp8jclkAm-11) to the ticket above."
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@noahtalerman @jmwatts @mostlikelee \n I've updated the selected state in the category filters to match work done on [#27245](https://github.com/fleetdm/fleet/issues/27245)"
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "Question 1: what is expected behavior when multiple versions of a software are installed on a host:\n- On macOS, if an application is renamed (`Firefox.app` + `Firefox2.app`), Fleet will show both applications as pending updates in the carousel, but only 1 will patch successfully (Firefox.app because it matches the app name in the dmg)\n- This will also be the case on macOS with `/Applications/Firefox.app` + `~/Downloads/Firefox.app` (only the first will patch)\n- machine vs user installs will also see this symptom on Windows\n\nQuestion 2: Does the update disappear from the carousel if the software install executed successfully, but the app did not actually update?\nexamples:\n- macOS: Firefox.app is renamed to Firefox2.app, install completes successfully and the host now has Firefox.app + Firefox2.app\n- Windows: machine scope is installed, and installer is user scoped (or vice-versa)"
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@mostlikelee @noahtalerman Updates from 7 May 2025 DR:\n\n1. Added [tooltip](https://www.figma.com/design/K9BTJ3aZAvwWBXU9N8aqGa/-27983-Fleet-Desktop-%3E-Self-service--Add-%22Update%22-actions-when-updates-are-detected-for-installed-so?node-id=5366-4609\u0026t=3kh7v4Aj5lLSDppW-11) on `installed` status\n\n"
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@noahtalerman @mostlikelee \n\nUpdated the designs with the following:\n\n1. Removed \"Installed\" status from the update cards at the top of the page.\n2. Upgraded the 'update' action to a button.\n3. For installed apps, updated the action to 'reinstall'"
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "@eugkuo @noahtalerman we realized that we need design when multiple versions of an updatable app is installed"
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@mostlikelee I'm not exactly sure what you mean by this. Wouldn't we still have a single update button for the app? I mean we'd want to update it all to the most recent. I think I might be missing some nuance here.\n\ncc @noahtalerman "
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "Chatted with @mostlikelee and here are the use cases:\n\n1. N different versions in the Applications folder\n2. N copies of the same version in the Applications folder\n    1. Currently can only update the one with the name we expect.\n4. N copies of various versions in different locations.\n\nWe can only update if have following criteria:\n1. Existing path needs to be what's expected (name, location, etc.)\n    1. Works for FMAs\n    2. Does not work as well for custom packages.\n    4. Big question mark around VPP.\n\nLet's discuss in USR.\n\ncc @noahtalerman "
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Looks like there's an off-by-one in step 11 in the test plan.\n\nAlso, for \"Updating\", can we show that status string always when inventory says a piece of software is installed but there's also a pending install? That would allow us to use the existing API there rather than having to build a new one.\n\nI have an idea on making this frontend-only to expedite: use the existing self-service filter, no pagination, and client-side filter to results that have only installed versions where version differs from the installer package. This gets this work out from behind further ListHostSoftware tweaks/derisks it a bit, at the cost of additional frontend munging."
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@iansltx \n\u003e Looks like there's an off-by-one in step 11 in the test plan.\nThanks! Fixed.\n\n\u003eAlso, for \"Updating\", can we show that status string always when inventory says a piece of software is installed but there's also a pending install? That would allow us to use the existing API there rather than having to build a new one.\n\nSo there could be a pending install and we and updating over that? At any rate, if we're updating that software it seems reasonable to show the 'updating' status.\n\n@noahtalerman thoughts?\n\ncc @mostlikelee "
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@eugkuo To clarify, I'm saying that if we have a piece of software already in inventory and there's a pending install (from whatever Fleet-initiated source...Install button, update button, policy execution, whatever), we use the word \"Updating...\" rather than \"Installing...\" in the self-service UI. Then reserve \"Installing...\" for cases where a host _doesn't_ have the same software in inventory already.\n\nSo the pending statuses would be:\n\n* Installing - wasn't in inventory, install is pending\n* Updating - was in inventory, install is pending\n* Uninstalling - uninstall is pending\n\nIf the above are the rules, the frontend already has all of the information it needs (with existing API endpoints) to show the correct status (so, no backend/DB changes to differentiate between \"installing\" and \"updating\")."
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@iansltx Ohhhh! This works for me. Also,  in future we shouldn't have 'Install' as an action on installed software. It'll say 'uninstall' or 'update' so this would mesh nicely.\n\ncc @noahtalerman @mostlikelee "
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@noahtalerman Reverted to secondary update buttons in the update cards."
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "Bumping this as an unresolved question as we expedite this story: https://github.com/fleetdm/fleet/issues/27983#issuecomment-2877468972"
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "During a call on \"Updates in self-service\" call on 2025-05-26, here's what @mostlikelee and I decided for the first iteration: \n\n![Image](https://github.com/user-attachments/assets/1b98c30b-6dc8-444e-826b-a6fc81e8d715)\n\nFleet will document this behavior is the self-service software guide. The UI will link IT admins to this guide (redirect PR is [here](https://github.com/fleetdm/fleet/pull/29445)):\n\n![Image](https://github.com/user-attachments/assets/f6ca58b1-8ce0-473b-a9f3-a9e574e7aaa0)\n\n![Image](https://github.com/user-attachments/assets/30d73148-cd03-4ad8-9b84-5ee89467e68a)\n\nEventually, Fleet will iterate on this behavior. Plan is to ship iterative improvements such that more apps show up in “Updates.”\n\ncc @eugkuo "
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "FYI @eugkuo I moved this 480px width screen into scratchpad [here](https://www.figma.com/design/K9BTJ3aZAvwWBXU9N8aqGa/-27983-Fleet-Desktop-%3E-Self-service--Add-%22Update%22-actions-when-updates-are-detected-for-installed-so?node-id=5408-9141\u0026t=2qzAG36eyoKjsBAb-1). Looking the discussion in [this closed PR](https://github.com/fleetdm/fleet/pull/28465), it sounds like we haven't added support for screen widths down to 480px yet.\n\n![Image](https://github.com/user-attachments/assets/d3909d83-841e-41be-a74c-319dffe80946)"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Thinking through workflow for a moment, if an app shows up in the updates carousel, it's because we've seen it in inventory, and the version in inventory is less than the version of the corresponding installable software (FMA, custom package, or VPP) for that team (and we don't show a card if criteria around installed paths aren't met, see dev note mentioned above). Good so far? This has a side effect of VPP apps being most likely to be in that carousel, as we'll display a new version there within an hour of the version being published via Apple, with no ability for an admin to override this, but...that's probably okay?\n\nNext, an end user clicks \"Update\", at which point we either send the MDM command to install or queue up a package-based install. In both cases, currently there will be a point where the software is reported as installed but software invenotry has not yet been refreshed, even with #28738 implemented. This means that we can show the \"updating\" spinner right up until the install completes, at which point a purely inventory-based system would flip back to having the \"Update\" action displayed until inventory gets run again, which isn't what we want.\n\n## Update status alternative: install status\n\nOne alternative would be to take installation status into account in some form when installs are successful/failed, rather than just when they're pending. Catch here is that we're replicating issues around freshness that affect our existing host software inventory, where an out-of-band update (e.g. Chrome auto-updating) would cause the update card to show when it isn't necessary. This issue is relevant when the update installation fails but the software eventually gets updated out-of-band.\n\n### Install status freshness: version comparison\n\nOne mitigation for the freshness comparison issue would be to compare versions between inventory and the install receipts, and have the higher version win, but VPP installs currently break this as `host_vpp_software_installs` doesn't include the version that was installed, so we'd wind up in a case where VPP apps would never show up in the updates list once installed the first time because installed version would just reference back to the latest available version.\n\n### Install status freshness: refetch wins when more recent than install\n\nAnother mitigation would be to only take install statuses into account when they're more recent than the most recent host vitals refetch. We have install timestamp info and last refetch timestamp info, so this should be reliable, and we can use this nuance to show available updates with e.g. \"Update successful\" or \"Update failed\" if we wanted between getting an install result back and the next refetch.\n\nWe could actually extend this logic to host software listing in general, explicitly ignoring install receipts (success or failure) unless they've happened since the most recent vitals refetch as the vitals refetch should at that point be the source of truth.\n\n## Update status alternative: refetch on install success\n\nAnother alternative would be to retech host vitals (or at least rerun software inventory) after each successful install. Doing this right needs #28738 as a prerequisite so we don't refetch too early. If we did this, the window where software inventory alone was too stale for correctly showing the update carousel would be minimized.\n\n---\n\nWe could combine \"refetch wins when more recent than install\" and \"refetch on install success\", plus maybe polling of host details on the **My device** page while refetching, to get a nearly realtime view of what's actually installed. Clicking Update on a piece of software would pop up a spinner in place of the Update button, then the status would flip to Update Successful for \u003c 1 minute while a vitals refresh was triggered, then the update card would disappear entirely once the vitals refresh triggered by that install was completed. For failed updates, we'd show the \"Update failed\" status until the next vitals refetch, with a retry button, and that failure would go away (replaced with an \"Update\" action with no status) after the next refetch.\n\nThis combined approach will require API changes (but no fleetd changes) to work, but in return we get a clear path to cleaning up inventory-vs-install idiosyncrasies, and we avoid end-user frustration stemming from varying degrees of staleness on the updates list compared to what they have installed."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Unrelated to the above: hopefully installers get targeted properly with labels for e.g. Intel Macs in this customer's deployment, since otherwise we'll be presenting end users with prompts to update apps to versions that won't work on their architecture."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Looking over the wireframes, looks like we have a different activity description than the standard \"installed X app.\" Given the complexity of this ticket as it stands, can we remove the activity from scope, reverting to the standard \"an end user installed X\" activity that we have right now? Otherwise we need to decide how we'll differentiate an update from an install (new param on the install reqeuest? Automatically server-side based on what's in inventory on the machine?) and define a structure for the revised activity record (I assume a new field on `installed_software`), neither of which we've spec'd. Feels like those changes can be added in a follow-up ticket."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "One interesting side effect of \"refetch vitals after every install\" is it could resolve the software install \"half\" of #25969/#28523, albeit in a heavier-weight fashion since IIRC a vitals refetch runs policy queries as well as software inventory queries. If we just run software inventory (so, not a full refetch) those issues are unaffected. TBD whether we'd want to start with a full vitals refetch hre since that's more computationally expensive both client- and server-side and once we implement it it's more likely that admins would rely on the full-refetch behavior so it'd be hard to back out.\n\nBut if we _didn't_ collect the entire set of host vitals, we'd need another timestamp on hosts to indicate how fresh software inventory was relative to the rest of host vitals, so just doing a full refetch is a lot less risky from a development perspective. So \"do a full refetch after an install completes\" still makes sense here I think.\n\nNote that this is _in addition to_, and _after_, the MDM polling covered in #28738, as that polling would only affect software install status and not inventory (even on iOS/iPadOS the polling would be checking for managed apps, while software inventory grabs the entire installed app list)."
          },
          {
            "author": {
              "login": "gillespi314"
            },
            "body": "FYI, we have some existing framework for refetching [critical queries](https://github.com/fleetdm/fleet/blob/f018066beef248bdb67700a3f458809f9bad410a/server/fleet/hosts.go#L361-L362) that might be useful here."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@gillespi314 Thanks for pointing that out! I think that in this case once we implement #28738 we'll only need to refetch once, after the install is confirmed succeeded (on script exit 0 + post-install for package-based, on MDM managed apps success for VPP) so we won't need to take the perf hit of a full refetch on every host check-in (we're making the assumption that the MDM managed app inventory command is less expensive to poll than our standard vitals suite)."
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@iansltx @mostlikelee Removed the updated activity feed and wrote a [FR](https://github.com/fleetdm/fleet/issues/29492) to update this in the future.\n\ncc @noahtalerman "
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "@mostlikelee @eugkuo, just checking, is this story ready to move to \"Estimated\"? Looks like it has an estimate on it."
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "The estimate is from our expedited estimation session.  I'll remove the estimate as we're going to want to estimate this again after Spec.  This story is in the correct spot.  We'll move it over when https://github.com/fleetdm/fleet/issues/29494 is complete."
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "Hey @iansltx just a reminder that this story is ready for spec? Can you please work with the team to get it estimated ahead of next sprint?\n\ncc @mostlikelee "
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@noahtalerman on my list after my responsibilities for 4.69 are concluded."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@jmwatts This test plan is ready for a last look. Make any edits that you need to make, and once it looks good pull this to Ready to Estimate. I've already pulled subtasks to Ready to Estimate as I'm sufficiently confident that I have them spec'd correctly and wanted to give folks a little more runway to put down their own estimates."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Workflow diagrams:\n\n![Image](https://github.com/user-attachments/assets/c265a375-fc3e-437e-8350-b685c605d56d)"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "@iansltx test plan looks good. \n\n\u003e Windows apps don't show in the available updates list if they don't have an associated install path \n\nDo we know if we plan to address https://github.com/fleetdm/fleet/issues/29449 before this ticket?"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@jmwatts That would get addressed in the same sprint at the earliest, given that this will be going into the next sprint. There isn't a direct dependency here, and these shouldn't touch the same code, so if/once that bug is fixed this implementation will \"just work.\""
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "@noahtalerman adding this back into your queue based on our design review discussion re: copy/UI changes for unpatchable software"
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "@mostlikelee can you please update the test plan? We made a change to not worry about where the software is installed (paths). Tip: CMD+F for \"path\" in the issue description."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Revised the spec here (didn't touch Figmas), including test plan, to drop host paths interactions, and drop this down to FE-only. We'll likely need to reimplement with server-side changes in the next iteration, but workload-wise if we tried to implement this plus #30240 in a single sprint with backend changes we'd miss the release cut due to waiting for dependencies.\n\nThis story now consists of frontend changes plus docs changes, so tee shirt sizing is just above an XS. Likely scenario here is that dev gets done in the 4.72 sprint, and docs get updated during the 4.73 dev sprint but prior to 4.72 going GA.\n\nAPI change/path-related subtasks have been dissociated from this story and moved back to the \"New requests\" column; they'll need to be either associated with a new follow-up story or converted to stories themselves to be actionable.\n\nPulled the story back to USR to revalidate the test plan, while keeping subtasks in Estimated based on previous discussions."
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "after some discussion, keeping the original estimates and moving to Estimated."
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "@marko-lisica thanks for jumping right into our team and the mountain of dev/design sync needed. Here's some recap of stuff I need/needed clarified.\n\nPrevious conversations:\n\n000. This isn't in the spec to be able to sort status from host details \u003e software \u003e library. But if we did it would be consistent with self-service status sort. I tried to implement but it proved difficult because of the server side pagination/query/sort happening and sorting on a column that is built in the FE doesn't play nice with server side sort. (https://fleetdm.slack.com/archives/C086V2QK76X/p1752175433082329?thread_ts=1752168568.807959\u0026cid=C086V2QK76X) Confirm we are intentionally scratching sorting on host details \u003e software \u003e library \u003e status column or I need to jump through a lot of hoops to make everything client side sort an then implement\n\n00. I dev-ed in clientside paginating self-service page to 20. When there's updates to specs like this, are you DRI for updating the Figma and QA plan? (https://fleetdm.slack.com/archives/C086V2QK76X/p1752175280199089)\n\n0. We either needed to make 2 API calls, one for update software and the other for filtered software in the self-service section OR move the self-service software search query to be client side. We chose to make everything client side so we don't have to make so many API calls and deal with making 2x the API calls every time an install/uninstall/update action is clicked. It's sticky, partially because this is all frontend hoops jumped through because the API doesn't paginate, doesn't filter categories, and doesn't have a 1:1 map of status's in the API with status shown in the UI.  (https://fleetdm.slack.com/archives/C086V2QK76X/p1752180334175959)\n\nQuestions from [Self-service/Library updates thread](https://fleetdm.slack.com/archives/C086V2QK76X/p1752184798822479):\n\n1. I asked the channel, If there's more than one version installed on a host, what should go on the software updates card for the \"125.0.1 -\u003e 126.0.1\". If recalled correctly, we think the Figma is not correct, and should just show the library version.\n\n2. Do we show the update available modal if you click update in the carousel or does it just automatically make the API call to update\n\n3. When you click the Update all button, do we disable the \"update all\" button?\n\nMore questions not on the thread:\n\n5. Similarly, when you are updating all and there's no other software to update since they're all pending \"Updating...\", do we disable the \"update all\" button?\n\n6. This pagination but changing the number of update software tiles per page on page size might be a little too tricky. For example, you have 20 software that need updates, you're looking at the third page which shows software 9,10,11,12. You shrink your browser horizontally to only see 3 software, which 3 should be shown?? What page are you on now?\n\n7. Do we forsee an update section in host details \u003e software \u003e library? Is it in the works, any heads up might be good in making sure the code is reusable across fleet desktop \u003e self-service and host details \u003e software \u003e library\n\nI'm OOO tomorrow but I'll be back Monday and Thursday next week. If you can address any of these, that would be amazing, ty!\n "
          },
          {
            "author": {
              "login": "marko-lisica"
            },
            "body": "Hey @RachelElysia, thanks for collecting all the questions in one place, it's really helpful.\n\n\u003e This isn't in the spec to be able to sort status from host details \u003e software \u003e library. But if we did it would be consistent with self-service status sort. I tried to implement but it proved difficult because of the server side pagination/query/sort happening and sorting on a column that is built in the FE doesn't play nice with server side sort. (https://fleetdm.slack.com/archives/C086V2QK76X/p1752175433082329?thread_ts=1752168568.807959\u0026cid=C086V2QK76X) Confirm we are intentionally scratching sorting on host details \u003e software \u003e library \u003e status column or I need to jump through a lot of hoops to make everything client side sort an then implement\n\nLet’s skip this. I’ll add follow up story to do some additional UI improvements (details modals without 2 tabs on library page, sorting by status on library page and pagination for self-service in API).\n\n\u003e I dev-ed in clientside paginating self-service page to 20. When there's updates to specs like this, are you DRI for updating the Figma and QA plan? (https://fleetdm.slack.com/archives/C086V2QK76X/p1752175280199089)\n\nClient-side pagination sounds good to me. I added spec to Figma and test case.\n\n\u003e We either needed to make 2 API calls, one for update software and the other for filtered software in the self-service section OR move the self-service software search query to be client side. We chose to make everything client side so we don't have to make so many API calls and deal with making 2x the API calls every time an install/uninstall/update action is clicked. It's sticky, partially because this is all frontend hoops jumped through because the API doesn't paginate, doesn't filter categories, and doesn't have a 1:1 map of status's in the API with status shown in the UI. (https://fleetdm.slack.com/archives/C086V2QK76X/p1752180334175959)\n\nI'm not sure I understand this. Are we going to request all self-service software, and then the frontend will find and display those with available updates in the \"Updates\" section? If that's correct, then I think that's fine.\n\n\u003e I asked the channel, If there's more than one version installed on a host, what should go on the software updates card for the \"125.0.1 -\u003e 126.0.1\". If recalled correctly, we think the Figma is not correct, and should just show the library version.\n\nWe decided to don’t show current version, to simplify in this iteration. We can add that later. It makes things complicated when user has multiple versions of the same app installed in different paths.\n\n\u003e Do we show the update available modal if you click update in the carousel or does it just automatically make the API call to update\n\nWe show update available modal only when user clicks on “update available” in status column. If user click “Update” in self-service table or in the carousel we just directly start update (user sees “Updating” status.\n\n\u003e When you click the Update all button, do we disable the \"update all\" button?\n\nI think we should disable “Update all“ button and show “Updating” status on each item in carousel and self-service table.\n\n\u003e Similarly, when you are updating all and there's no other software to update since they're all pending \"Updating...\", do we disable the \"update all\" button?\n\nI think so. Let’s disable the button if an update is started for all apps that have an update available.\n\n\u003e This pagination but changing the number of update software tiles per page on page size might be a little too tricky. For example, you have 20 software that need updates, you're looking at the third page which shows software 9,10,11,12. You shrink your browser horizontally to only see 3 software, which 3 should be shown?? What page are you on now?\n\nSorry, I don’t understand this. Let’s chat during the design review on Monday. If it’s too early for you, please add something to my calendar.\n\n\u003e Do we forsee an update section in host details \u003e software \u003e library? Is it in the works, any heads up might be good in making sure the code is reusable across fleet desktop \u003e self-service and host details \u003e software \u003e library\n\nI don’t think so. I don’t thin IT admin want’s to see that. They will probably make updates automatic based on some criteria. We might want an additional filter in the existing dropdown for apps that have updates available, but not planned AFAIK."
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "@marko-lisica thanks for all the clarification!\n\n\u003e I'm not sure I understand this. Are we going to request all self-service software, and then the frontend will find and display those with available updates in the \"Updates\" section? If that's correct, then I think that's fine.\n\nExactly\n\n\u003e Sorry, I don’t understand this. Let’s chat during the design review on Monday. If it’s too early for you, please add something to my calendar.\n\nWill add to your calendar\n\nI think everything else is addressed and unblocked so I can dev -- hvala!"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "@marko-lisica Another question re: https://www.figma.com/design/K9BTJ3aZAvwWBXU9N8aqGa/-27983-Fleet-Desktop-%3E-Self-service--Add-%22Update%22-actions-when-updates-are-detected-for-installed-so?node-id=5302-9691\u0026t=xsGXc1YLuwgfuqy1-0\n\nWhen the update fails, it shows \"Update\" button and a \"Failed\" button in the update card, but in the Self-service table view in the card below, should that installer show \"Failed\" or \"Update available\" in the status?\n\nNuances needing clarification from @marko-lisica :\n\n\u003cimg width=\"671\" height=\"187\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/d94eb0bb-adeb-488e-a955-c7a2d365a791\" /\u003e\n\nScenario 1: Docker Desktop has an update available but it failed to update, what should be shown as the status in the table view?\n\nScenario 2: Docker Desktop has an update available but it failed to uninstall, what should be shown as the status in the table view?"
          },
          {
            "author": {
              "login": "marko-lisica"
            },
            "body": "Hey @RachelElysia, I think that we should show \"Failed\" in self service table as well.\n\n\u003e Scenario 1: Docker Desktop has an update available but it failed to update, what should be shown as the status in the table view?\nWe should alwaythe s show latest status in the status column. If it's failed let's show it. Action should be update if update is available.\n\n\u003e Scenario 2: Docker Desktop has an update available but it failed to uninstall, what should be shown as the status in the table view?\n\nWhat do we display today if the uninstallation fails? Do we have a specific status like \"Failed (uninstall),\" or do we show \"Failed\" and then inform the user in the details modal that the uninstallation was unsuccessful?\n\n"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "@marko-lisica \n\n\u003e What do we display today if the uninstallation fails? Do we have a specific status like \"Failed (uninstall),\" or do we show \"Failed\" and then inform the user in the details modal that the uninstallation was unsuccessful?\n\nWe show \"Failed (uninstall)\" which leads to the uninstall modal.\n\nI'll be sure to update these copies to not show update available and show \"Failed\" or \"Failed (uninstall)\" if it meets both criteria, I'll update the QA plan too since I'm in there RN, thank you!"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "@marko-lisica Update available has a tooltip and Failed/Failed (uninstall) has a separate tooltip. Because these options listed above fall into both, I made it so the tooltips show both the Update Available tooltip copy and Failed/Failed (uninstall) copy. WDYT?\n\n```\n  failed_install_update_available: {\n    iconName: \"error-outline\",\n    iconColor: \"ui-fleet-black-50\",\n    displayText: \"Failed\",\n    tooltip: ({ isSelfService, isHostOnline, lastInstalledAt }) =\u003e\n      isSelfService || isHostOnline ? (\n        \u003c\u003e\n          Fleet can update software.{\" \"}\n          \u003c\u003e\n            Software failed to install\n            {lastInstalledAt ? ` (${dateAgo(lastInstalledAt)})` : \"\"}.{\" \"}\n            {isSelfService ? (\n              \u003c\u003e\n                Select \u003cb\u003eRetry\u003c/b\u003e to install again, or contact your IT\n                department.\n              \u003c/\u003e\n            ) : (\n              \u003c\u003e\n                Select \u003cb\u003eDetails \u0026gt; Activity\u003c/b\u003e to view errors.\n              \u003c/\u003e\n            )}\n          \u003c/\u003e\n        \u003c/\u003e\n      ) : (\n        \u003c\u003e\n          Fleet can update software\n          \u003cbr /\u003e when the host comes online.\n          \u003cbr /\u003e\n          Software failed to install\n          {lastInstalledAt ? ` (${dateAgo(lastInstalledAt)})` : \"\"}.{\" \"}\n          {isSelfService ? (\n            \u003c\u003e\n              Select \u003cb\u003eRetry\u003c/b\u003e to install again, or contact your IT\n              department.\n            \u003c/\u003e\n          ) : (\n            \u003c\u003e\n              Select \u003cb\u003eDetails \u0026gt; Activity\u003c/b\u003e to view errors.\n            \u003c/\u003e\n          )}\n        \u003c/\u003e\n      ),\n  },\n  failed_uninstall_update_available: {\n    iconName: \"error-outline\",\n    iconColor: \"ui-fleet-black-50\",\n    displayText: \"Failed (uninstall)\",\n    tooltip: ({ isSelfService, isHostOnline, lastInstalledAt }) =\u003e\n      isSelfService || isHostOnline ? (\n        \u003c\u003e\n          Fleet can update software.\n          \u003cbr /\u003e\n          Software failed to uninstall\n          {lastInstalledAt ? ` (${dateAgo(lastInstalledAt)})` : \"\"}. Select{\" \"}\n          \u003cb\u003eRetry\u003c/b\u003e to uninstall again\n          {isSelfService \u0026\u0026 \", or contact your IT department\"}.\n        \u003c/\u003e\n      ) : (\n        \u003c\u003e\n          Fleet can update software\n          \u003cbr /\u003e when the host comes online.\n          \u003cbr /\u003e Software failed to uninstall\n          {lastInstalledAt ? ` (${dateAgo(lastInstalledAt)})` : \"\"}. Select{\" \"}\n          \u003cb\u003eRetry\u003c/b\u003e to uninstall again\n          {isSelfService \u0026\u0026 \", or contact your IT department\"}.\n        \u003c/\u003e\n      ),\n  },\n```"
          },
          {
            "author": {
              "login": "marko-lisica"
            },
            "body": "@RachelElysia I think we discussed this during standup. We decided not to don't show the update tooltip in the table if it fails. We'll show the update button in the \"Updates\" section + failed status."
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "**QA Notes** (In Progress)\n\nTest with Windows, macOS, Linux hosts\nTest with Chrome, Safari, Edge, Firefox\n\nUI\n\n1. Ensure that there there are more than 8 updates available for a host by installing older versions of the software (e.g. downloading old FMA copies based on previous manifest versions), then adding current versions as available in self-service on the same team.\n2. Navigate to Fleet Desktop.\n\n- [x] Verify that there the \"Updates\" section shows at the top of the page.\n- [🚫] Verify that the number next to the Self-service tab matches the number of available updates. #31646 This was not included in this story.\n- [x] Verify that selecting 'Next' swipes over to the next 4 update cards in the Updates section.\n- [x] Verify that the same software titles have 'Update' actions next to them in Self-service table.\n\n3. Select \"Update\" on a software title\n- [x] Verify that the status changes to 'Updating' with an animated circle progress spinner on both the app card and in the Self-service table..\n\n4. Navigate away from the page and navigate back\n- [x] Verify that the status remains.\n5. When the update is complete \n- [x] Verify that the software is updated locally, the card shows \"Updated\", and a refetch has been queued.\n6. Once the refetch completes, \n- [x] Verify that the card is removed from the top section and that the action in the Self-service table changes to \"Reinstall\" (when the one card is removed, the remaining 3 cards still show but the one that was removed is replaced with the next item in the list, so that it still shows 4 cards)\n- [x] Verify that the pagination always shows the correct number of cards based on the page width, so on the largest page width it shows 4 at a time, i.e. it goes from showing 1 2 3 4 to 5 6 7 8.\n7. Update all but 3 of the remaining \"update available\" apps.\n- [x] Verify that the Update section shows 3 cards and that the width of each card is the same as when there are 4 items in the Update section at widths above largest breakpoint #31621 \n- [x] Verify layout at S, M, L breakpoints. Note that 2 cards show below 880px and that 3 cards show above 880 but below largest breakpoint (determined in #31621)\n- [x] Verify that self-service is paginated and displays 20 items per page.\n\nOther items\n- [x] Double check for the additional change in host details for the Self service hover text to add a learn more link #31630 \n- [x] If there was only one update card and I update the app and it refetches, the Updates section disappears\n- [x] Clicking the Update all option, refetches will occur until all updates are completed. The count will continue decreasing until no further updates are available and then the section will disappear\n- [x] Failed modal should show details when clicked\n\nUpdate eligibility criteria\n- [x] Software not available for self-service should not show in the available updates list\n- [x] Software not in inventory should not show in the available updates list\n- [x] VPP apps should not show in the available updates list if MDM is turned off\n- [x] Software in inventory that is \u003e= the version for the installer doesn't show\n- [x] Software in inventory whose version can't be compared to the installer's version shouldn't show\n- [x] Software in inventory, installed multiple times, where one install is an older version and one install is a same-or-newer version, should show in the available updates list\n- [x] Software in inventory, installed once, that is older than the installer's version, should show in the available updates list\n- [🔴] Software in the list that was previously successfully installed by Fleet should NOT show install status if a refetch has happened since the install - This seems incorrect, shouldn't it show \"✅ Installed\"?\n- [x] Software in the list with a pending install SHOULD show install status, even if a refetch has happened since the install started\n- [x] Software in the list that has been successfully installed by Fleet since the last refetch SHOULD show install status\n- [x] Software that shows up in the list that has had an install failure by Fleet since the last refetch SHOULD show install status\n\nEdge cases:\n‼️ Software installed in multiple locations - Fleet will only update the software in the expected install location. If there are multiple versions installed, it will report \"Update available\" if any of the versions are lower than the Library version, but it will ONLY update the one in the expected install location. \n‼️ If you have a version installed in the non-expected install location, Fleet will show \"Update available\" but it will not update the software in the non-expected install location. It will do a new install in the expected location and will continue to report \"Update available\" until the older version in the non-expected install location is updated manually or uninstalled\n"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Removing from the orchestration board as QA/any fixes are being handled by #g-software."
          }
        ],
        "issueNumber": 27983,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcX124",
        "status": "✅ Ready for release",
        "comments": [
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "Ticket was tested as part of #30240 and #27983, see test results in those tickets. "
          }
        ],
        "issueNumber": 29944,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgck8sI",
        "status": "✅ Ready for release",
        "comments": [
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "@RachelElysia can you add an estimate on this subtask?"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "Ticket was tested as part of #30240 and #27983, see test results in those tickets. "
          }
        ],
        "issueNumber": 30861,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdCxHA",
        "status": "✔️Awaiting QA",
        "issueNumber": 30682,
        "changeType": "modified"
      },
      {
        "assignees": [
          "zwass"
        ],
        "id": "PVTI_lADOBDAnic4A4BEUzgdVUIs",
        "status": "🦤 ‎In review",
        "comments": [
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@noahtalerman Seems like the `vscode_edition` column serves the same purpose here?"
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "@iansltx oh interesting! Does `vscode_edition` already tell us VS Code v. Cursor v. Windsurf?\n\nIf yes, then it sounds like no osquery changes are needed.\n\nIf not, then I think we stick with a new `ide_type` column. While we're making osquery changes, we take the opportunity to make `vscode_extensions` consistent with the [`chrome_extensions` table](https://fleetdm.com/tables/chrome_extensions).\n\ncc @zwass "
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@noahtalerman It doesn't give us that ability right now (because it doesn't have the mapping added for the user data dirs for windsurf/cursor/vscode-oss), but it uses the exact same method to pull the information that we'd use to get that info, so adding a new column would either wind us up with two columns for the exact same info or one column that we'd have to artificially pin to older behavior, complicating dev/maintenance."
          },
          {
            "author": {
              "login": "zwass"
            },
            "body": "\nAh, I didn't notice the `vscode_edition` column when we discussed this. I agree with @iansltx this should definitely be used to better match the behavior of the `chrome_extensions` table where `edge` vs. `beta` vs. `brave`, etc. are included in the same column."
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "\u003e - [x] Fleet's agent (fleetd) changes: Add 3 new values to the existing column `vscode_edition` to the [`vscode_extensions` osquery table](https://osquery.io/schema/5.18.1/#vscode_extensions). `cursor` can be one of `windsurf`, or `vscode_oss`.\n\n@zwass just chatted with @iansltx and we decided update the specs to use the `vscode_edition` column.\n\nWe also decided to bring in VSCodium which will return `vscode_oss`.\n\nNot sure if other forks (less used) have the same value. Can you please help us do that research? We want to know if `vscode_oss` is VSCodium specific so we can show \"VSCodium\" in the UI/API. "
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@jmwatts Made some tweaks to the test plan for more accuracy, given that we need a users cross join to get VSCode extensions. The new query is based on [our existing VSCode extensions detail query](https://fleetdm.com/vitals/v-scode-extensions#apple)."
          },
          {
            "author": {
              "login": "zwass"
            },
            "body": "\u003e Not sure if other forks (less used) have the same value. Can you please help us do that research? We want to know if vscode_oss is VSCodium specific so we can show \"VSCodium\" in the UI/API.\n\nCan we have it return `vscodium` for maximum clarity?"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@zwass The pattern of dotfiles dirs is `.vscode-oss`, hence my thought of maintaining the \"hyphens to underscores\" pattern. I'm also not 100% sure whether VSCodium is the only fork that uses that dir naming scheme; mind doing a quick check? If that really _is_ VSCodium specific, fair enough and we can break the pattern to specifically call out that we know VSCodium is the only fork that uses that dir naming convention."
          },
          {
            "author": {
              "login": "zwass"
            },
            "body": "https://github.com/osquery/osquery/pull/8664\n\nWent with `vscodium` since the server and insiders variants seem to use that. I'm guessing the `vscode-oss` string is a bit of a historical artifact.\n\nIt was also easy to add Trae so I did that."
          }
        ],
        "issueNumber": 31476,
        "changeType": "modified"
      }
    ]
  },
  {
    "timestamp": "2025-08-07T19:06:58.313349071Z",
    "items": [
      {
        "content": {
          "body": "\u003c!-- **This issue's remaining effort can be completed in ≤1 sprint.  It will be valuable even if nothing else ships.**\nIt is [planned and ready](https://fleetdm.com/handbook/company/development-groups#making-changes) to implement.  It is on the proper kanban board. --\u003e\n\n\n## Goal\n\n| User story  |\n|:---------------------------------------------------------------------------|\n| As a Fleet contributor,\n| I want to research the different ways Fleet can deploy custom iOS apps (`.ipa`'s)\n| so that I can draft and build this feature in Fleet.\n\n## Key result\n\nNone.\n\n## Original requests\n\n- https://github.com/fleetdm/fleet/issues/23736\n\n## Context\n- Product Designer: @noahtalerman \n- Engineering DRI: @mostlikelee \n  \n\n## Changes\n\n### Product\n- [x] Research: Create a public Google doc that answers the following questions:\n  - Current understanding: `customer-pingali` will compile an `.ipa` file and add it to Fleet. Fleet will install the `.ipa` on iOS/iPadOS hosts with an MDM command (more discussion in [this Google doc](https://docs.google.com/document/d/1zXsIxdpOVgZWJP74V9-2qaIuzZDPbg6MC_ZSlI8Jy74/edit?tab=t.0))\n    - What MDM command can Fleet use to deploy the app?\n    - What MDM command can Fleet use to check if the app is installed and add it to software inventory?\n    - https://docs.google.com/document/d/1j-26a7UU2_j0v81D9pl47jPvp-BLreAJXVy9DtVZjTE/edit?tab=t.0\n- [x] UI changes: No changes\n- [x] CLI (fleetctl) usage changes: No changes\n- [x] YAML changes: No changes\n- [x] REST API changes: No changes\n- [x] Fleet's agent (fleetd) changes: No changes\n- [x] GitOps Mode UI changes: No changes\n- [x] GitOps generation changes: TODO \u003c!-- Specify changes to results from the fleetctl generate-gitops command. Put \"No changes\" if there are no changes necessary. --\u003e\n- [x] Activity changes: No changes\n- [x] Permissions changes: No changes\n- [x] Changes to paid features or tiers: No changes\n- [x] My device and fleetdm.com/better changes: No changes\n- [x] Other reference documentation changes: No changes\n- [x] First draft of test plan added\n- [x] Once shipped, requester has been notified: WONT for this research story.\n- [x] Once shipped, dogfooding issue has been filed: WONT for this research story.\n\n### Engineering\n\nNo changes for this research story.\n\n## QA\n\nNo changes for this research story.\n"
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgdCxJc",
        "status": "Done",
        "comments": [
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "\u003e - [ ] Research: Create a public Google doc that answers the following questions:\n\u003e   - Current understanding: `customer-pingali` will compile an `.ipa` file and add it to Fleet. Fleet will install the `.ipa` on iOS/iPadOS hosts with an MDM command (more discussion in [this Google doc](https://docs.google.com/document/d/1zXsIxdpOVgZWJP74V9-2qaIuzZDPbg6MC_ZSlI8Jy74/edit?tab=t.0))\n\u003e     - What MDM command can Fleet use to deploy the app?\n\u003e     - What MDM command can Fleet use to check if the app is installed and add it to software inventory?\n\n@mostlikelee moved this research story to reach to spec. Please feel free to update the research task (see issue description) if I'm missing anything.\n\ncc @marko-lisica "
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "bringing this to standup today"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "https://support.apple.com/guide/deployment/distribute-proprietary-in-house-apps-depce7cefc4d/web#:~:text=Apps%20need%20to%20be%20in,access%20a%20server%20at%20Apple.\n\nApps need to be in .ipa format and be built with an in-house provisioning profile.\n\nThey need to have an XML manifest file.\n\nThey need to be downloaded from a website whose address begins with HTTPS.\n\nThey need to be signed by a certificate that’s trusted on the device.\n\nTheir network configuration needs to allow devices to access a server at Apple. For more information, see the Apple Support article [Use Apple products on enterprise networks](https://support.apple.com/101555)."
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "this missed parking lot yesterday, bringing back today"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "Jamf has this feature and has documentation that may be worth looking over:\n\nhttps://learn.jamf.com/en-US/bundle/jamf-pro-documentation-current/page/In-House_Apps.html\nhttps://learn.jamf.com/en-US/bundle/jamf-pro-documentation-current/page/Provisioning_Profiles_for_In-House_Apps.html"
          },
          {
            "author": {
              "login": "ksykulev"
            },
            "body": "https://foresightmobile.com/blog/ios-app-distribution-guide-2025\n\n[Not recommended]\n**Distribute through Testflight** https://developer.apple.com/testflight/ \n  - Each build is available to test for up to 90 days. Publishing a new build can reset the timer.\n  - \"Designate up to 100 members of your development team\" (internal testing, https://developer.apple.com/help/app-store-connect/test-a-beta-version/add-internal-testers / app store connect users)\n  - \"Up to 10,000 external testers\" (external testers, https://developer.apple.com/help/app-store-connect/test-a-beta-version/invite-external-testers) (It should like the app needs to go through a lighter version of the apple review process to enable external testers)\n  - Requires regular Apple developer program (99/year)\n\n[Not Recommended]\n**Unlisted Apps**\nhttps://support.apple.com/guide/deployment/distribute-unlisted-apps-dep36d738732/web\n  - Requires same review as regular applications\n  - Distributed through App Store via a direct link, not visible in search and categories\n  - Requires regular Apple developer program (99/year)\n\n**Custom App**\nhttps://support.apple.com/guide/apple-business-manager/learn-about-custom-apps-axm58ba3112a/web\n  - Requires same review as regular applications\n  - Distributed through App Store Connect and Apple Business Manager\n  - Requires regular Apple developer program (99/year)\n\n**Custom apps installation via mdm**\n`InstallApplication`: https://developer.apple.com/documentation/devicemanagement/install_an_app | https://developer.apple.com/documentation/devicemanagement/installapplicationcommand/command-data.dictionary\n  - We don't host or manage the .ipa files, company uploads app to App Store Connect \n  - App ID - The unique numerical identifier for the app from App Store Connect\n  - Bundle Identifier\n  - Apple Business Manager ID\n  - VPP Token\n  - Sync Apple Business Manager to retrieve available apps\n  - Send `InstallApplication` command to target devices\n\n**Enterprise app**\nhttps://developer.apple.com/programs/enterprise/\nhttps://support.apple.com/guide/deployment/distribute-proprietary-in-house-apps-depce7cefc4d/web\n  - Does not require review\n  - Distributed through website or mdm https://support.apple.com/guide/deployment/distribute-proprietary-in-house-apps-depce7cefc4d/web\n  - Requires Apple enterprise program (299/year)\n  - Apple enterprise program requirements\n    - Minimum 100 employees\n    - D-U-N-S Number\n    - Public website\n    - Apple conducts rigorous verification (can take up to 4 weeks)\n\n**Enterprise apps installation via mdm**\n`InstallApplication`: https://developer.apple.com/documentation/devicemanagement/install_an_app | https://developer.apple.com/documentation/devicemanagement/installapplicationcommand/command-data.dictionary\n`InstallEnterpriseApplication`: https://developer.apple.com/documentation/devicemanagement/install_an_enterprise_app | https://developer.apple.com/documentation/devicemanagement/installenterpriseapplicationcommand/command\n  - We must host or manage the .ipa and .plist files on fleet HTTPS server or have the client host the files\n  - iOS Distribution Certificate from client from Enterprise portal\n  - App ID\n  - Bundle Identifier\n  - Files required from client or client has to host the files\n    - YourApp.ipa - The application file\n    - manifest.plist - XML manifest file\n    - optional icons\n  - If files provided, upload files to https file server\n  - Send `InstallAplication` or `InstallEnterpriseApplication` commands to target devices\n  - Optional Provisioning profile (expire 12 months after they’re issued). So either the app needs to be re-exported (as an IPA) with the new profile\n    or you can distribute just the new .mobileprovision file, so users won’t have to install the app again. The new provisioning profile overrides the one already in the app archive. https://developer.apple.com/documentation/devicemanagement/install-provisioning-profile-command\n  - Do we want some alerting system about expiring provisioning profiles? Just display a banner? Something more fancy? The app will discontinue opening if the profile expires.\n\n\nHow to check if application has been installed:\nhttps://developer.apple.com/documentation/devicemanagement/installed-application-list-command\nhttps://github.com/fleetdm/fleet/blob/main/server/mdm/apple/commander.go#L313\n\nFront end\nForm to accept all values required. In the case of the enterprise application IPA + manifest file to serve\nNeed create and update functionality\n\nBack end\nAPI and database tables to store all information\nCode to send `InstallApplication` or `InstallEnterpriseApplication` commands"
          },
          {
            "author": {
              "login": "ksykulev"
            },
            "body": "Estimate this work at a medium tshirt size task. Looks like a lot of moving parts. Also the QA on this will be very non-trivial."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Renamed the story title to reflect `pingali` confirmation that they want elEnterprise (IPA upload)."
          },
          {
            "author": {
              "login": "ksykulev"
            },
            "body": "In reviewing the gong snippet, it seemed like there was a lot of talk about the importance of providing a programmatic way of pushing updates to the app. Even potentially pushing updates multiple times a day. "
          },
          {
            "author": {
              "login": "fleet-release"
            },
            "body": "In clouds, research blooms,\nCustom iOS apps deployed,\nFleet's reach, ever grows."
          }
        ],
        "issueNumber": 31174,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdVLLc",
        "status": "✅ Ready for release",
        "comments": [
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "@marko-lisica \n I suggest:\n1. Updates section we change to drop down to 2 cards per page for under 880px (breakpoint small) instead of the current behavior down to 2 for under 768px (breakpoint xs)\n2. Self-service section, we could make this a scrollable table (which won't work if you end up making additional actions a dropdown) or we have a max width on the name column which is causing the push off the page\n3. Updates section, Add 16px (or whatever px) gap between Update all button and header on left side\n\nScreenshot of improvements in PR: https://github.com/fleetdm/fleet/pull/31627\n\n4. Maybe we truncate long software names on the update cards as well since that'll squish off the page too"
          },
          {
            "author": {
              "login": "marko-lisica"
            },
            "body": "\u003e 1. Updates section we change to drop down to 2 cards per page for under 880px (breakpoint small) instead of the current behavior down to 2 for under 768px (breakpoint xs)\n\n@RachelElysia sounds good to me.\n\n\u003e 2. Self-service section, we could make this a scrollable table (which won't work if you end up making additional actions a dropdown) or we have a max width on the name column which is causing the push off the page\n\nI think it makes sense to have max width on the name column, and if the name can't fit we truncate + tooltip on hover to show the full name.\n\n\u003e 3. Updates section, Add 16px (or whatever px) gap between Update all button and header on left side\n\nSounds good to me.\n\n\u003e 4. Maybe we truncate long software names on the update cards as well since that'll squish off the page too\n\nLet's do this as well.\n"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "@marko-lisica and @RachelElysia I just want to confirm this is correct:\nI see 2 cards under 880px\nI see 3 cards between 880px and 1400px\nI see 4 cards over 1400px\n\nI see the comment above regarding \"change to drop down to 2 cards per page for under 880px\" which tracks with what I'm seeing, just wasn't sure about the 1400px breakpoint. \n"
          },
          {
            "author": {
              "login": "marko-lisica"
            },
            "body": "\u003e [@marko-lisica](https://github.com/marko-lisica) and [@RachelElysia](https://github.com/RachelElysia) I just want to confirm this is correct: I see 2 cards under 880px I see 3 cards between 880px and 1400px I see 4 cards over 1400px\n\u003e \n\u003e I see the comment above regarding \"change to drop down to 2 cards per page for under 880px\" which tracks with what I'm seeing, just wasn't sure about the 1400px breakpoint.\n\n@jmwatts @RachelElysia I think it makes sense to have 4 over 1400px. I tried on the larger screen, and it looks ok."
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "**QA Notes**\n\n- [x] Verify 2 cards under 880px\n- [x] Verify 3 cards between 880px and 1400px\n- [x] Verify 4 cards over 1400px\n- [x] Verify table (list) doesn't overflow at lower widths"
          }
        ],
        "issueNumber": 31621,
        "changeType": "modified"
      },
      {
        "estimate": 3,
        "id": "PVTI_lADOBDAnic4A4BEUzgdVayQ",
        "comments": [
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "Requires a new UI status and to check refetch time stamps against last_install to ensure \"updated\" vs. \"update available\", write tests 🫠"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "cc: @noahtalerman @marko-lisica @jmwatts \n\nDesign decision additions today during design-review: \n- Add temporary \"Installed\" status requires a new UI status and to check refetch time stamps against `last_install` to ensure \"installed\" vs. \"whatever other status would show\", write tests\n- Add temporary \"---\" status requires a new UI status and to check refetch time stamps against `last_uninstall` to ensure \"---\" vs. \"whatever other staus would show\", write tests\n- Add tooltips to all 3 temporary statuses to ensure users know it's a temporary status \"Fleet successfully [installed/uninstalled/updated] software and is fetching latest software inventory.\""
          }
        ],
        "issueNumber": 31629,
        "changeType": "modified"
      },
      {
        "estimate": 2,
        "id": "PVTI_lADOBDAnic4A4BEUzgdVfUY",
        "status": "🐣 In progress",
        "comments": [
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "@RachelElysia I'm still seeing this occasionally happen. If I never try to reorder the sort for name or status, it doesn't happen, but if I do that, then set it back to sorted by name, then try an action, it happens.\n\nhttps://github.com/user-attachments/assets/f37c46de-538f-4f57-be0b-a1498e4dd638"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "Rachel:\nTODO:\nAdd all clientside filtering to URL bar to keep this from happening (I think it's missing categories, sort)"
          }
        ],
        "issueNumber": 31632,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcX1-s",
        "status": "✅ Ready for release",
        "comments": [
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "@noahtalerman: Decided to cut this \"smarter\" logic to solve these problems:\n- Multiple instances of the software installed\n- User v. machine scope on Windows\n\nCurrently, for macOS, only software that's installed in Applications/ shows the \"Update required\" status. If the software isn't in Applications/ but it's in inventory, Fleet shows \"Installed\" regardless of version. Fleet will use the install_path to know if the software is in Applications/\n\nCode wise: if (macOS and install_path is applications/), check only that path if it’s outdated and then show “update available” else show “Installed”\n\nFor Windows Fleet-maintained apps, software only shows \"Update available\" if the installed software is the same scope (user or machine) as the Fleet-maintained app. Based on install_path. Otherwise, if the software is in inventory, Fleet shows \"Installed\".\n\nFor Windows custom packages, software only shows \"Update available\" if the software title has an install_path. Otherwise, if the software is in inventory, Fleet shows \"Installed\"."
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "FYI @RachelElysia, I added copy and a link to the contact URL based on `numa` feedback. We met with them today (2025-06-27) and showed them this story's wireframes.\n\n![Image](https://github.com/user-attachments/assets/6ca4ef45-09f2-4ac3-afee-bd5c995e151a)"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@jmwatts I realize this is offloading work to you that should've been done earlier by someone else, but can you work through a test plan here based on what's in Figma?\n\nIf it's more helpful to delegate the test plan for this to #27983, since these changes touch largely the same UI (though this hits both self-service and host software), that works too, and I can do a first pass there.\n\nWent ahead and updated the story template to remove non-test-plan TODOs to help a little."
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "@iansltx I've added the first pass test plan, just a couple questions left here:\n\n\u003cimg width=\"135\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/1a202f1e-a311-4ccd-9aff-76ec85ef8dac\" /\u003e\n\n~~This is kind of vague, what is the criteria for this \"Update Available\" status?~~\n~~- Software is installed on host~~\n~~- Software installer is available~~\n~~- Software is a different version?~~\n~~- Software installer is a higher version than the version that's installed?~~\n\nNevermind, found that criteria in the [#27983](https://github.com/fleetdm/fleet/issues/27983) ticket. Only question left is:\n\nWhat are the available statuses for tar.gz items? \n"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@jmwatts No update available status for tarballs as they don't have an associated version."
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "moving to estimated with an 8 based on prior discussions"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "@marko-lisica \n\nIn the test plans it says:\n\n\u003e  If software is installed by end user make sure that tooltip over \"Installed\" status is different from one when Fleet installs. See Figma specs.\n\nIs there a different tooltip? I currently have it with no tooltip if it was installed by the user not using Fleet. Can you add the tooltip to the Figma spec or remove this from the QA plan?"
          },
          {
            "author": {
              "login": "jacobshandling"
            },
            "body": "[Doc to track questions around the various modals](https://docs.google.com/document/d/1sAh752RZCCquWhI25emzNtnBVV3wA-GAhjbdlaB2Pls/edit?tab=t.0)"
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "Heads up that we're marking this one for expedited drafting"
          },
          {
            "author": {
              "login": "jacobshandling"
            },
            "body": "@mostlikelee thanks. To over communicate, most of the remaining questions are regarding [the modals subtask](https://github.com/fleetdm/fleet/issues/30860)"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "Throwing this over the fence to you @jmwatts ! I QAed as much as I could--happy Friday\n\nMy blind spots:\n- The intel computer race condition with host refetch/osquery\n- I don't have a macOS that is enrolled into MDM, only a iPad, so self-service VPP was not really QAed on my end, though I know Jacob did while he was deving"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "**QA Notes** (In Progress)\n\nTest plan\n\nOn host details page or Self service with several installers available:\n\n- [x] Default sorting order is by Name ascending\n- [x] Name sort order can be reversed\n- [x] Sorting by status sorts software by status in the order mentioned in Figma (and can be reversed)\n- [x] Font weight should be \"regular\"\n- [x] If software is not in software inventory, status is \"---\"\n- [x] If status is \"---\", available action is \"Install\" (Uninstall should not be available)\n- [x] When a user clicks \"Install\", status changes to \"Installing\"\n- [x] If software installs successfully, status changes to \"Installed\"\n- [x] If software fails to install, status changes to \"Failed\"\n- [x] If software is in software inventory, Status is \"Installed\" NOTE: #31663 \n- [x] If software status is \"Installed\", available actions are \"Reinstall\" and \"Uninstall\"\n- [x] When a user clicks \"Reinstall\", status changes to \"Installing\", and when the action completes, the status changes to \"Installed\"\n- [x] When a user clicks \"Uninstall\", status changes to \"Uninstalling\" and when the action completes, the status changes to \"---\"\n- [x] If software fails to uninstall, status changes to \"Failed (uninstall)\"\n- [x] If software is in software inventory, and other criteria are met (see https://github.com/fleetdm/fleet/issues/27983 ) status is \"Update available\"\n- [x] If status is \"Update available\", available actions are \"Update\" and \"Uninstall\"\n- [x] If Update available is clicked, details modal is shown with detail of installed software and possible actions to take\n- [x] When a user clicks \"Update\", modal closes and status changes to \"Updating\", and when the action completes, the status changes to \"Installed\"\n- [x] If software fails to update, status changes to \"Failed\"\n- [x] If software is installed by end user there is not tooltip over \"Installed\" status. If the software was installed by Fleet, it states when the software was last successfully installed.\n- [x] If software is a tarball (tgz_packages), Fleet won't do inventory, and status in Library tab will only reflect if install is triggered from Fleet.\n- [x] Make sure that when the tarball is installed by Fleet, show Installed status + Reinstall and Uninstall actions. #31578 \n- [x] Make sure that when tarball install failed, to show Failed status and \"Retry\" action only.\n- [x] Make sure that when tarball is available in library that no status is displayed and only Install action is available.\n- [x] Make sure that the new copy as specified in Figma is added to \"Install details\" modal for each package that is missing version information (no inventory).\n\nClicking on any status for any operating system should open a details modal EXCEPT\n\n- [x] The only non-clickable status is for Host details \u003e software \u003e library \u003e status for VPP successful and failed installs before @ksykulev 4.72 fix merged 8/1/25, those will still have a tooltip to go to the activity feed to view success/fail information - This now shows the correct modal\n- [x] Details modal title should match the status and should conform to Figma\n- [x] Install and Uninstall details dropdown should be collapsed by default and only show for installs or uninstalls completed by fleet (If the software was installed by the user, the modal will still show but will not contain a details dropdown, see Figma)\n- [x] Clicking on an available action button within the modal closes the modal and updates the status in the list, according to the action that was taken, the action completes, and the status is updated again.\n- [x] Confirm multiple versions installed - Note, this only updates the version in the expected install location. Clicking update only installs/reinstalls the app in the expected location. So if you have two versions installed in non-expected locations, and you click update, you'll get a 3rd version installed in the expected location. "
          }
        ],
        "issueNumber": 30240,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcX12Q",
        "status": "✅ Ready for release",
        "comments": [
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@noahtalerman @mostlikelee Removed 'uninstall' from this ticket as the order of operations has determined that this ticket will go ahead of the uninstall ticket (#28038)"
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@jmwatts I took a first pass at the test plan.\n\nQuestions for @mostlikelee:\n\n1. What YAML/API things might need done?\n\nQuestions for @RachelElysia \n\n1. On the carousel, if there are 6 items in the carousel are we thinking it would show 4 and 2 when paginating? Or would we always show four and selecting \"Next\" would go from showing 1 2 3 4 to showing 3 4 5 6?"
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "Notes from 14 April 2025:\n\n1. @noahtalerman : Can we scope this down to Mac only and FMA? \n    1. There are extra complications around Windows due to known issues that we've been discussing. There are also current research tickets on upgrade codes for Windows that are outstanding (#27776) which would be a pre-req for Windows.\n2. Do we want to add activity changes at this time? @mostlikelee and I think no for simplicty's sake.\n"
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "\u003e @noahtalerman : Can we scope this down to Mac only and FMA?\n\n@eugkuo @mostlikelee I think let's draft for all support we support on macOS, Windows, and Linux (custom packages, App Store apps, and Fleet-maintained apps).\n\nAfter we have designs, I think let's discuss and decide how to cut the story up.\n\nWhy? So we know where we're heading and we tease out more complications/unknowns. Then we can come up with a plan for how to address Windows and Linux even if the first iteration we build is just macOS Fleet-maintained apps. Which is a valid first iteration.\n\n\u003e Do we want to add activity changes at this time?\n\n@eugkuo same for activities. I think let's draft activities and then cut."
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "\u003e @eugkuo @mostlikelee I think let's draft for all support we support on macOS, Windows, and Linux (custom packages, App Store apps, and Fleet-maintained apps).\n\n@noahtalerman Coolio. I don't think the design changes. The UI will be the same regardless of platform. (@mostlikelee correct me if I'm wrong).\n\nWRT activities, I added [an example](https://www.figma.com/design/K9BTJ3aZAvwWBXU9N8aqGa/-27983-Fleet-Desktop-%3E-Self-service--Add-%22Update%22-actions-when-updates-are-detected-for-installed-so?node-id=5318-3291\u0026t=LPfejWpLp8jclkAm-11) to the ticket above."
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@noahtalerman @jmwatts @mostlikelee \n I've updated the selected state in the category filters to match work done on [#27245](https://github.com/fleetdm/fleet/issues/27245)"
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "Question 1: what is expected behavior when multiple versions of a software are installed on a host:\n- On macOS, if an application is renamed (`Firefox.app` + `Firefox2.app`), Fleet will show both applications as pending updates in the carousel, but only 1 will patch successfully (Firefox.app because it matches the app name in the dmg)\n- This will also be the case on macOS with `/Applications/Firefox.app` + `~/Downloads/Firefox.app` (only the first will patch)\n- machine vs user installs will also see this symptom on Windows\n\nQuestion 2: Does the update disappear from the carousel if the software install executed successfully, but the app did not actually update?\nexamples:\n- macOS: Firefox.app is renamed to Firefox2.app, install completes successfully and the host now has Firefox.app + Firefox2.app\n- Windows: machine scope is installed, and installer is user scoped (or vice-versa)"
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@mostlikelee @noahtalerman Updates from 7 May 2025 DR:\n\n1. Added [tooltip](https://www.figma.com/design/K9BTJ3aZAvwWBXU9N8aqGa/-27983-Fleet-Desktop-%3E-Self-service--Add-%22Update%22-actions-when-updates-are-detected-for-installed-so?node-id=5366-4609\u0026t=3kh7v4Aj5lLSDppW-11) on `installed` status\n\n"
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@noahtalerman @mostlikelee \n\nUpdated the designs with the following:\n\n1. Removed \"Installed\" status from the update cards at the top of the page.\n2. Upgraded the 'update' action to a button.\n3. For installed apps, updated the action to 'reinstall'"
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "@eugkuo @noahtalerman we realized that we need design when multiple versions of an updatable app is installed"
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@mostlikelee I'm not exactly sure what you mean by this. Wouldn't we still have a single update button for the app? I mean we'd want to update it all to the most recent. I think I might be missing some nuance here.\n\ncc @noahtalerman "
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "Chatted with @mostlikelee and here are the use cases:\n\n1. N different versions in the Applications folder\n2. N copies of the same version in the Applications folder\n    1. Currently can only update the one with the name we expect.\n4. N copies of various versions in different locations.\n\nWe can only update if have following criteria:\n1. Existing path needs to be what's expected (name, location, etc.)\n    1. Works for FMAs\n    2. Does not work as well for custom packages.\n    4. Big question mark around VPP.\n\nLet's discuss in USR.\n\ncc @noahtalerman "
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Looks like there's an off-by-one in step 11 in the test plan.\n\nAlso, for \"Updating\", can we show that status string always when inventory says a piece of software is installed but there's also a pending install? That would allow us to use the existing API there rather than having to build a new one.\n\nI have an idea on making this frontend-only to expedite: use the existing self-service filter, no pagination, and client-side filter to results that have only installed versions where version differs from the installer package. This gets this work out from behind further ListHostSoftware tweaks/derisks it a bit, at the cost of additional frontend munging."
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@iansltx \n\u003e Looks like there's an off-by-one in step 11 in the test plan.\nThanks! Fixed.\n\n\u003eAlso, for \"Updating\", can we show that status string always when inventory says a piece of software is installed but there's also a pending install? That would allow us to use the existing API there rather than having to build a new one.\n\nSo there could be a pending install and we and updating over that? At any rate, if we're updating that software it seems reasonable to show the 'updating' status.\n\n@noahtalerman thoughts?\n\ncc @mostlikelee "
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@eugkuo To clarify, I'm saying that if we have a piece of software already in inventory and there's a pending install (from whatever Fleet-initiated source...Install button, update button, policy execution, whatever), we use the word \"Updating...\" rather than \"Installing...\" in the self-service UI. Then reserve \"Installing...\" for cases where a host _doesn't_ have the same software in inventory already.\n\nSo the pending statuses would be:\n\n* Installing - wasn't in inventory, install is pending\n* Updating - was in inventory, install is pending\n* Uninstalling - uninstall is pending\n\nIf the above are the rules, the frontend already has all of the information it needs (with existing API endpoints) to show the correct status (so, no backend/DB changes to differentiate between \"installing\" and \"updating\")."
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@iansltx Ohhhh! This works for me. Also,  in future we shouldn't have 'Install' as an action on installed software. It'll say 'uninstall' or 'update' so this would mesh nicely.\n\ncc @noahtalerman @mostlikelee "
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@noahtalerman Reverted to secondary update buttons in the update cards."
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "Bumping this as an unresolved question as we expedite this story: https://github.com/fleetdm/fleet/issues/27983#issuecomment-2877468972"
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "During a call on \"Updates in self-service\" call on 2025-05-26, here's what @mostlikelee and I decided for the first iteration: \n\n![Image](https://github.com/user-attachments/assets/1b98c30b-6dc8-444e-826b-a6fc81e8d715)\n\nFleet will document this behavior is the self-service software guide. The UI will link IT admins to this guide (redirect PR is [here](https://github.com/fleetdm/fleet/pull/29445)):\n\n![Image](https://github.com/user-attachments/assets/f6ca58b1-8ce0-473b-a9f3-a9e574e7aaa0)\n\n![Image](https://github.com/user-attachments/assets/30d73148-cd03-4ad8-9b84-5ee89467e68a)\n\nEventually, Fleet will iterate on this behavior. Plan is to ship iterative improvements such that more apps show up in “Updates.”\n\ncc @eugkuo "
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "FYI @eugkuo I moved this 480px width screen into scratchpad [here](https://www.figma.com/design/K9BTJ3aZAvwWBXU9N8aqGa/-27983-Fleet-Desktop-%3E-Self-service--Add-%22Update%22-actions-when-updates-are-detected-for-installed-so?node-id=5408-9141\u0026t=2qzAG36eyoKjsBAb-1). Looking the discussion in [this closed PR](https://github.com/fleetdm/fleet/pull/28465), it sounds like we haven't added support for screen widths down to 480px yet.\n\n![Image](https://github.com/user-attachments/assets/d3909d83-841e-41be-a74c-319dffe80946)"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Thinking through workflow for a moment, if an app shows up in the updates carousel, it's because we've seen it in inventory, and the version in inventory is less than the version of the corresponding installable software (FMA, custom package, or VPP) for that team (and we don't show a card if criteria around installed paths aren't met, see dev note mentioned above). Good so far? This has a side effect of VPP apps being most likely to be in that carousel, as we'll display a new version there within an hour of the version being published via Apple, with no ability for an admin to override this, but...that's probably okay?\n\nNext, an end user clicks \"Update\", at which point we either send the MDM command to install or queue up a package-based install. In both cases, currently there will be a point where the software is reported as installed but software invenotry has not yet been refreshed, even with #28738 implemented. This means that we can show the \"updating\" spinner right up until the install completes, at which point a purely inventory-based system would flip back to having the \"Update\" action displayed until inventory gets run again, which isn't what we want.\n\n## Update status alternative: install status\n\nOne alternative would be to take installation status into account in some form when installs are successful/failed, rather than just when they're pending. Catch here is that we're replicating issues around freshness that affect our existing host software inventory, where an out-of-band update (e.g. Chrome auto-updating) would cause the update card to show when it isn't necessary. This issue is relevant when the update installation fails but the software eventually gets updated out-of-band.\n\n### Install status freshness: version comparison\n\nOne mitigation for the freshness comparison issue would be to compare versions between inventory and the install receipts, and have the higher version win, but VPP installs currently break this as `host_vpp_software_installs` doesn't include the version that was installed, so we'd wind up in a case where VPP apps would never show up in the updates list once installed the first time because installed version would just reference back to the latest available version.\n\n### Install status freshness: refetch wins when more recent than install\n\nAnother mitigation would be to only take install statuses into account when they're more recent than the most recent host vitals refetch. We have install timestamp info and last refetch timestamp info, so this should be reliable, and we can use this nuance to show available updates with e.g. \"Update successful\" or \"Update failed\" if we wanted between getting an install result back and the next refetch.\n\nWe could actually extend this logic to host software listing in general, explicitly ignoring install receipts (success or failure) unless they've happened since the most recent vitals refetch as the vitals refetch should at that point be the source of truth.\n\n## Update status alternative: refetch on install success\n\nAnother alternative would be to retech host vitals (or at least rerun software inventory) after each successful install. Doing this right needs #28738 as a prerequisite so we don't refetch too early. If we did this, the window where software inventory alone was too stale for correctly showing the update carousel would be minimized.\n\n---\n\nWe could combine \"refetch wins when more recent than install\" and \"refetch on install success\", plus maybe polling of host details on the **My device** page while refetching, to get a nearly realtime view of what's actually installed. Clicking Update on a piece of software would pop up a spinner in place of the Update button, then the status would flip to Update Successful for \u003c 1 minute while a vitals refresh was triggered, then the update card would disappear entirely once the vitals refresh triggered by that install was completed. For failed updates, we'd show the \"Update failed\" status until the next vitals refetch, with a retry button, and that failure would go away (replaced with an \"Update\" action with no status) after the next refetch.\n\nThis combined approach will require API changes (but no fleetd changes) to work, but in return we get a clear path to cleaning up inventory-vs-install idiosyncrasies, and we avoid end-user frustration stemming from varying degrees of staleness on the updates list compared to what they have installed."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Unrelated to the above: hopefully installers get targeted properly with labels for e.g. Intel Macs in this customer's deployment, since otherwise we'll be presenting end users with prompts to update apps to versions that won't work on their architecture."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Looking over the wireframes, looks like we have a different activity description than the standard \"installed X app.\" Given the complexity of this ticket as it stands, can we remove the activity from scope, reverting to the standard \"an end user installed X\" activity that we have right now? Otherwise we need to decide how we'll differentiate an update from an install (new param on the install reqeuest? Automatically server-side based on what's in inventory on the machine?) and define a structure for the revised activity record (I assume a new field on `installed_software`), neither of which we've spec'd. Feels like those changes can be added in a follow-up ticket."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "One interesting side effect of \"refetch vitals after every install\" is it could resolve the software install \"half\" of #25969/#28523, albeit in a heavier-weight fashion since IIRC a vitals refetch runs policy queries as well as software inventory queries. If we just run software inventory (so, not a full refetch) those issues are unaffected. TBD whether we'd want to start with a full vitals refetch hre since that's more computationally expensive both client- and server-side and once we implement it it's more likely that admins would rely on the full-refetch behavior so it'd be hard to back out.\n\nBut if we _didn't_ collect the entire set of host vitals, we'd need another timestamp on hosts to indicate how fresh software inventory was relative to the rest of host vitals, so just doing a full refetch is a lot less risky from a development perspective. So \"do a full refetch after an install completes\" still makes sense here I think.\n\nNote that this is _in addition to_, and _after_, the MDM polling covered in #28738, as that polling would only affect software install status and not inventory (even on iOS/iPadOS the polling would be checking for managed apps, while software inventory grabs the entire installed app list)."
          },
          {
            "author": {
              "login": "gillespi314"
            },
            "body": "FYI, we have some existing framework for refetching [critical queries](https://github.com/fleetdm/fleet/blob/f018066beef248bdb67700a3f458809f9bad410a/server/fleet/hosts.go#L361-L362) that might be useful here."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@gillespi314 Thanks for pointing that out! I think that in this case once we implement #28738 we'll only need to refetch once, after the install is confirmed succeeded (on script exit 0 + post-install for package-based, on MDM managed apps success for VPP) so we won't need to take the perf hit of a full refetch on every host check-in (we're making the assumption that the MDM managed app inventory command is less expensive to poll than our standard vitals suite)."
          },
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@iansltx @mostlikelee Removed the updated activity feed and wrote a [FR](https://github.com/fleetdm/fleet/issues/29492) to update this in the future.\n\ncc @noahtalerman "
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "@mostlikelee @eugkuo, just checking, is this story ready to move to \"Estimated\"? Looks like it has an estimate on it."
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "The estimate is from our expedited estimation session.  I'll remove the estimate as we're going to want to estimate this again after Spec.  This story is in the correct spot.  We'll move it over when https://github.com/fleetdm/fleet/issues/29494 is complete."
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "Hey @iansltx just a reminder that this story is ready for spec? Can you please work with the team to get it estimated ahead of next sprint?\n\ncc @mostlikelee "
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@noahtalerman on my list after my responsibilities for 4.69 are concluded."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@jmwatts This test plan is ready for a last look. Make any edits that you need to make, and once it looks good pull this to Ready to Estimate. I've already pulled subtasks to Ready to Estimate as I'm sufficiently confident that I have them spec'd correctly and wanted to give folks a little more runway to put down their own estimates."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Workflow diagrams:\n\n![Image](https://github.com/user-attachments/assets/c265a375-fc3e-437e-8350-b685c605d56d)"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "@iansltx test plan looks good. \n\n\u003e Windows apps don't show in the available updates list if they don't have an associated install path \n\nDo we know if we plan to address https://github.com/fleetdm/fleet/issues/29449 before this ticket?"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@jmwatts That would get addressed in the same sprint at the earliest, given that this will be going into the next sprint. There isn't a direct dependency here, and these shouldn't touch the same code, so if/once that bug is fixed this implementation will \"just work.\""
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "@noahtalerman adding this back into your queue based on our design review discussion re: copy/UI changes for unpatchable software"
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "@mostlikelee can you please update the test plan? We made a change to not worry about where the software is installed (paths). Tip: CMD+F for \"path\" in the issue description."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Revised the spec here (didn't touch Figmas), including test plan, to drop host paths interactions, and drop this down to FE-only. We'll likely need to reimplement with server-side changes in the next iteration, but workload-wise if we tried to implement this plus #30240 in a single sprint with backend changes we'd miss the release cut due to waiting for dependencies.\n\nThis story now consists of frontend changes plus docs changes, so tee shirt sizing is just above an XS. Likely scenario here is that dev gets done in the 4.72 sprint, and docs get updated during the 4.73 dev sprint but prior to 4.72 going GA.\n\nAPI change/path-related subtasks have been dissociated from this story and moved back to the \"New requests\" column; they'll need to be either associated with a new follow-up story or converted to stories themselves to be actionable.\n\nPulled the story back to USR to revalidate the test plan, while keeping subtasks in Estimated based on previous discussions."
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "after some discussion, keeping the original estimates and moving to Estimated."
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "@marko-lisica thanks for jumping right into our team and the mountain of dev/design sync needed. Here's some recap of stuff I need/needed clarified.\n\nPrevious conversations:\n\n000. This isn't in the spec to be able to sort status from host details \u003e software \u003e library. But if we did it would be consistent with self-service status sort. I tried to implement but it proved difficult because of the server side pagination/query/sort happening and sorting on a column that is built in the FE doesn't play nice with server side sort. (https://fleetdm.slack.com/archives/C086V2QK76X/p1752175433082329?thread_ts=1752168568.807959\u0026cid=C086V2QK76X) Confirm we are intentionally scratching sorting on host details \u003e software \u003e library \u003e status column or I need to jump through a lot of hoops to make everything client side sort an then implement\n\n00. I dev-ed in clientside paginating self-service page to 20. When there's updates to specs like this, are you DRI for updating the Figma and QA plan? (https://fleetdm.slack.com/archives/C086V2QK76X/p1752175280199089)\n\n0. We either needed to make 2 API calls, one for update software and the other for filtered software in the self-service section OR move the self-service software search query to be client side. We chose to make everything client side so we don't have to make so many API calls and deal with making 2x the API calls every time an install/uninstall/update action is clicked. It's sticky, partially because this is all frontend hoops jumped through because the API doesn't paginate, doesn't filter categories, and doesn't have a 1:1 map of status's in the API with status shown in the UI.  (https://fleetdm.slack.com/archives/C086V2QK76X/p1752180334175959)\n\nQuestions from [Self-service/Library updates thread](https://fleetdm.slack.com/archives/C086V2QK76X/p1752184798822479):\n\n1. I asked the channel, If there's more than one version installed on a host, what should go on the software updates card for the \"125.0.1 -\u003e 126.0.1\". If recalled correctly, we think the Figma is not correct, and should just show the library version.\n\n2. Do we show the update available modal if you click update in the carousel or does it just automatically make the API call to update\n\n3. When you click the Update all button, do we disable the \"update all\" button?\n\nMore questions not on the thread:\n\n5. Similarly, when you are updating all and there's no other software to update since they're all pending \"Updating...\", do we disable the \"update all\" button?\n\n6. This pagination but changing the number of update software tiles per page on page size might be a little too tricky. For example, you have 20 software that need updates, you're looking at the third page which shows software 9,10,11,12. You shrink your browser horizontally to only see 3 software, which 3 should be shown?? What page are you on now?\n\n7. Do we forsee an update section in host details \u003e software \u003e library? Is it in the works, any heads up might be good in making sure the code is reusable across fleet desktop \u003e self-service and host details \u003e software \u003e library\n\nI'm OOO tomorrow but I'll be back Monday and Thursday next week. If you can address any of these, that would be amazing, ty!\n "
          },
          {
            "author": {
              "login": "marko-lisica"
            },
            "body": "Hey @RachelElysia, thanks for collecting all the questions in one place, it's really helpful.\n\n\u003e This isn't in the spec to be able to sort status from host details \u003e software \u003e library. But if we did it would be consistent with self-service status sort. I tried to implement but it proved difficult because of the server side pagination/query/sort happening and sorting on a column that is built in the FE doesn't play nice with server side sort. (https://fleetdm.slack.com/archives/C086V2QK76X/p1752175433082329?thread_ts=1752168568.807959\u0026cid=C086V2QK76X) Confirm we are intentionally scratching sorting on host details \u003e software \u003e library \u003e status column or I need to jump through a lot of hoops to make everything client side sort an then implement\n\nLet’s skip this. I’ll add follow up story to do some additional UI improvements (details modals without 2 tabs on library page, sorting by status on library page and pagination for self-service in API).\n\n\u003e I dev-ed in clientside paginating self-service page to 20. When there's updates to specs like this, are you DRI for updating the Figma and QA plan? (https://fleetdm.slack.com/archives/C086V2QK76X/p1752175280199089)\n\nClient-side pagination sounds good to me. I added spec to Figma and test case.\n\n\u003e We either needed to make 2 API calls, one for update software and the other for filtered software in the self-service section OR move the self-service software search query to be client side. We chose to make everything client side so we don't have to make so many API calls and deal with making 2x the API calls every time an install/uninstall/update action is clicked. It's sticky, partially because this is all frontend hoops jumped through because the API doesn't paginate, doesn't filter categories, and doesn't have a 1:1 map of status's in the API with status shown in the UI. (https://fleetdm.slack.com/archives/C086V2QK76X/p1752180334175959)\n\nI'm not sure I understand this. Are we going to request all self-service software, and then the frontend will find and display those with available updates in the \"Updates\" section? If that's correct, then I think that's fine.\n\n\u003e I asked the channel, If there's more than one version installed on a host, what should go on the software updates card for the \"125.0.1 -\u003e 126.0.1\". If recalled correctly, we think the Figma is not correct, and should just show the library version.\n\nWe decided to don’t show current version, to simplify in this iteration. We can add that later. It makes things complicated when user has multiple versions of the same app installed in different paths.\n\n\u003e Do we show the update available modal if you click update in the carousel or does it just automatically make the API call to update\n\nWe show update available modal only when user clicks on “update available” in status column. If user click “Update” in self-service table or in the carousel we just directly start update (user sees “Updating” status.\n\n\u003e When you click the Update all button, do we disable the \"update all\" button?\n\nI think we should disable “Update all“ button and show “Updating” status on each item in carousel and self-service table.\n\n\u003e Similarly, when you are updating all and there's no other software to update since they're all pending \"Updating...\", do we disable the \"update all\" button?\n\nI think so. Let’s disable the button if an update is started for all apps that have an update available.\n\n\u003e This pagination but changing the number of update software tiles per page on page size might be a little too tricky. For example, you have 20 software that need updates, you're looking at the third page which shows software 9,10,11,12. You shrink your browser horizontally to only see 3 software, which 3 should be shown?? What page are you on now?\n\nSorry, I don’t understand this. Let’s chat during the design review on Monday. If it’s too early for you, please add something to my calendar.\n\n\u003e Do we forsee an update section in host details \u003e software \u003e library? Is it in the works, any heads up might be good in making sure the code is reusable across fleet desktop \u003e self-service and host details \u003e software \u003e library\n\nI don’t think so. I don’t thin IT admin want’s to see that. They will probably make updates automatic based on some criteria. We might want an additional filter in the existing dropdown for apps that have updates available, but not planned AFAIK."
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "@marko-lisica thanks for all the clarification!\n\n\u003e I'm not sure I understand this. Are we going to request all self-service software, and then the frontend will find and display those with available updates in the \"Updates\" section? If that's correct, then I think that's fine.\n\nExactly\n\n\u003e Sorry, I don’t understand this. Let’s chat during the design review on Monday. If it’s too early for you, please add something to my calendar.\n\nWill add to your calendar\n\nI think everything else is addressed and unblocked so I can dev -- hvala!"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "@marko-lisica Another question re: https://www.figma.com/design/K9BTJ3aZAvwWBXU9N8aqGa/-27983-Fleet-Desktop-%3E-Self-service--Add-%22Update%22-actions-when-updates-are-detected-for-installed-so?node-id=5302-9691\u0026t=xsGXc1YLuwgfuqy1-0\n\nWhen the update fails, it shows \"Update\" button and a \"Failed\" button in the update card, but in the Self-service table view in the card below, should that installer show \"Failed\" or \"Update available\" in the status?\n\nNuances needing clarification from @marko-lisica :\n\n\u003cimg width=\"671\" height=\"187\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/d94eb0bb-adeb-488e-a955-c7a2d365a791\" /\u003e\n\nScenario 1: Docker Desktop has an update available but it failed to update, what should be shown as the status in the table view?\n\nScenario 2: Docker Desktop has an update available but it failed to uninstall, what should be shown as the status in the table view?"
          },
          {
            "author": {
              "login": "marko-lisica"
            },
            "body": "Hey @RachelElysia, I think that we should show \"Failed\" in self service table as well.\n\n\u003e Scenario 1: Docker Desktop has an update available but it failed to update, what should be shown as the status in the table view?\nWe should alwaythe s show latest status in the status column. If it's failed let's show it. Action should be update if update is available.\n\n\u003e Scenario 2: Docker Desktop has an update available but it failed to uninstall, what should be shown as the status in the table view?\n\nWhat do we display today if the uninstallation fails? Do we have a specific status like \"Failed (uninstall),\" or do we show \"Failed\" and then inform the user in the details modal that the uninstallation was unsuccessful?\n\n"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "@marko-lisica \n\n\u003e What do we display today if the uninstallation fails? Do we have a specific status like \"Failed (uninstall),\" or do we show \"Failed\" and then inform the user in the details modal that the uninstallation was unsuccessful?\n\nWe show \"Failed (uninstall)\" which leads to the uninstall modal.\n\nI'll be sure to update these copies to not show update available and show \"Failed\" or \"Failed (uninstall)\" if it meets both criteria, I'll update the QA plan too since I'm in there RN, thank you!"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "@marko-lisica Update available has a tooltip and Failed/Failed (uninstall) has a separate tooltip. Because these options listed above fall into both, I made it so the tooltips show both the Update Available tooltip copy and Failed/Failed (uninstall) copy. WDYT?\n\n```\n  failed_install_update_available: {\n    iconName: \"error-outline\",\n    iconColor: \"ui-fleet-black-50\",\n    displayText: \"Failed\",\n    tooltip: ({ isSelfService, isHostOnline, lastInstalledAt }) =\u003e\n      isSelfService || isHostOnline ? (\n        \u003c\u003e\n          Fleet can update software.{\" \"}\n          \u003c\u003e\n            Software failed to install\n            {lastInstalledAt ? ` (${dateAgo(lastInstalledAt)})` : \"\"}.{\" \"}\n            {isSelfService ? (\n              \u003c\u003e\n                Select \u003cb\u003eRetry\u003c/b\u003e to install again, or contact your IT\n                department.\n              \u003c/\u003e\n            ) : (\n              \u003c\u003e\n                Select \u003cb\u003eDetails \u0026gt; Activity\u003c/b\u003e to view errors.\n              \u003c/\u003e\n            )}\n          \u003c/\u003e\n        \u003c/\u003e\n      ) : (\n        \u003c\u003e\n          Fleet can update software\n          \u003cbr /\u003e when the host comes online.\n          \u003cbr /\u003e\n          Software failed to install\n          {lastInstalledAt ? ` (${dateAgo(lastInstalledAt)})` : \"\"}.{\" \"}\n          {isSelfService ? (\n            \u003c\u003e\n              Select \u003cb\u003eRetry\u003c/b\u003e to install again, or contact your IT\n              department.\n            \u003c/\u003e\n          ) : (\n            \u003c\u003e\n              Select \u003cb\u003eDetails \u0026gt; Activity\u003c/b\u003e to view errors.\n            \u003c/\u003e\n          )}\n        \u003c/\u003e\n      ),\n  },\n  failed_uninstall_update_available: {\n    iconName: \"error-outline\",\n    iconColor: \"ui-fleet-black-50\",\n    displayText: \"Failed (uninstall)\",\n    tooltip: ({ isSelfService, isHostOnline, lastInstalledAt }) =\u003e\n      isSelfService || isHostOnline ? (\n        \u003c\u003e\n          Fleet can update software.\n          \u003cbr /\u003e\n          Software failed to uninstall\n          {lastInstalledAt ? ` (${dateAgo(lastInstalledAt)})` : \"\"}. Select{\" \"}\n          \u003cb\u003eRetry\u003c/b\u003e to uninstall again\n          {isSelfService \u0026\u0026 \", or contact your IT department\"}.\n        \u003c/\u003e\n      ) : (\n        \u003c\u003e\n          Fleet can update software\n          \u003cbr /\u003e when the host comes online.\n          \u003cbr /\u003e Software failed to uninstall\n          {lastInstalledAt ? ` (${dateAgo(lastInstalledAt)})` : \"\"}. Select{\" \"}\n          \u003cb\u003eRetry\u003c/b\u003e to uninstall again\n          {isSelfService \u0026\u0026 \", or contact your IT department\"}.\n        \u003c/\u003e\n      ),\n  },\n```"
          },
          {
            "author": {
              "login": "marko-lisica"
            },
            "body": "@RachelElysia I think we discussed this during standup. We decided not to don't show the update tooltip in the table if it fails. We'll show the update button in the \"Updates\" section + failed status."
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "**QA Notes** (In Progress)\n\nTest with Windows, macOS, Linux hosts\nTest with Chrome, Safari, Edge, Firefox\n\nUI\n\n1. Ensure that there there are more than 8 updates available for a host by installing older versions of the software (e.g. downloading old FMA copies based on previous manifest versions), then adding current versions as available in self-service on the same team.\n2. Navigate to Fleet Desktop.\n\n- [x] Verify that there the \"Updates\" section shows at the top of the page.\n- [🚫] Verify that the number next to the Self-service tab matches the number of available updates. #31646 This was not included in this story.\n- [x] Verify that selecting 'Next' swipes over to the next 4 update cards in the Updates section.\n- [x] Verify that the same software titles have 'Update' actions next to them in Self-service table.\n\n3. Select \"Update\" on a software title\n- [x] Verify that the status changes to 'Updating' with an animated circle progress spinner on both the app card and in the Self-service table..\n\n4. Navigate away from the page and navigate back\n- [x] Verify that the status remains.\n5. When the update is complete \n- [x] Verify that the software is updated locally, the card shows \"Updated\", and a refetch has been queued.\n6. Once the refetch completes, \n- [x] Verify that the card is removed from the top section and that the action in the Self-service table changes to \"Reinstall\" (when the one card is removed, the remaining 3 cards still show but the one that was removed is replaced with the next item in the list, so that it still shows 4 cards)\n- [x] Verify that the pagination always shows the correct number of cards based on the page width, so on the largest page width it shows 4 at a time, i.e. it goes from showing 1 2 3 4 to 5 6 7 8.\n7. Update all but 3 of the remaining \"update available\" apps.\n- [x] Verify that the Update section shows 3 cards and that the width of each card is the same as when there are 4 items in the Update section at widths above largest breakpoint #31621 \n- [x] Verify layout at S, M, L breakpoints. Note that 2 cards show below 880px and that 3 cards show above 880 but below largest breakpoint (determined in #31621)\n- [x] Verify that self-service is paginated and displays 20 items per page.\n\nOther items\n- [x] Double check for the additional change in host details for the Self service hover text to add a learn more link #31630 \n- [x] If there was only one update card and I update the app and it refetches, the Updates section disappears\n- [x] Clicking the Update all option, refetches will occur until all updates are completed. The count will continue decreasing until no further updates are available and then the section will disappear\n- [x] Failed modal should show details when clicked\n\nUpdate eligibility criteria\n- [x] Software not available for self-service should not show in the available updates list\n- [x] Software not in inventory should not show in the available updates list\n- [x] VPP apps should not show in the available updates list if MDM is turned off\n- [x] Software in inventory that is \u003e= the version for the installer doesn't show\n- [x] Software in inventory whose version can't be compared to the installer's version shouldn't show\n- [x] Software in inventory, installed multiple times, where one install is an older version and one install is a same-or-newer version, should show in the available updates list\n- [x] Software in inventory, installed once, that is older than the installer's version, should show in the available updates list\n- [x] Software in the list with a pending install SHOULD show install status, even if a refetch has happened since the install started\n- [x] Software in the list that has been successfully installed by Fleet since the last refetch SHOULD show install status\n- [x] Software that shows up in the list that has had an install failure by Fleet since the last refetch SHOULD show install status\n\nEdge cases:\n‼️ Software installed in multiple locations - Fleet will only update the software in the expected install location. If there are multiple versions installed, it will report \"Update available\" if any of the versions are lower than the Library version, but it will ONLY update the one in the expected install location. \n‼️ If you have a version installed in the non-expected install location, Fleet will show \"Update available\" but it will not update the software in the non-expected install location. It will do a new install in the expected location and will continue to report \"Update available\" until the older version in the non-expected install location is updated manually or uninstalled\n"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Removing from the orchestration board as QA/any fixes are being handled by #g-software."
          }
        ],
        "issueNumber": 27983,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdDOeo",
        "milestone": {
          "dueOn": "2025-08-29T00:00:00Z",
          "title": "4.73.0"
        },
        "status": "✔️Awaiting QA",
        "issueNumber": 30357,
        "changeType": "modified"
      },
      {
        "content": {
          "body": "\n# Goal: easy-to-follow test steps for checking a release manually\n\n# Important reference data\n\n1. [fleetctl preview setup](https://fleetdm.com/fleetctl-preview)\n2. [permissions documentation](https://fleetdm.com/docs/using-fleet/permissions) \n3. premium tests require license key (needs renewal) `fleetctl preview --license-key=eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJGbGVldCBEZXZpY2UgTWFuYWdlbWVudCBJbmMuIiwiZXhwIjoxNjQwOTk1MjAwLCJzdWIiOiJkZXZlbG9wbWVudCIsImRldmljZXMiOjEwMCwibm90ZSI6ImZvciBkZXZlbG9wbWVudCBvbmx5IiwidGllciI6ImJhc2ljIiwiaWF0IjoxNjIyNDI2NTg2fQ.WmZ0kG4seW3IrNvULCHUPBSfFdqj38A_eiXdV_DFunMHechjHbkwtfkf1J6JQJoDyqn8raXpgbdhafDwv3rmDw`\n4. premium tests require license key (active - Expires Sunday, January 1, 2023 12:00:00 AM) `fleetctl preview --license-key=eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJGbGVldCBEZXZpY2UgTWFuYWdlbWVudCBJbmMuIiwiZXhwIjoxNjcyNTMxMjAwLCJzdWIiOiJGbGVldCBEZXZpY2UgTWFuYWdlbWVudCIsImRldmljZXMiOjEwMCwibm90ZSI6ImZvciBkZXZlbG9wbWVudCBvbmx5IiwidGllciI6InByZW1pdW0iLCJpYXQiOjE2NDI1MjIxODF9.EGHQjIzM73YyMbnCruswzg360DEYCsDi9uz48YcDwQHq90BabGT5PIXRiculw79emGj5sk2aKgccTd2hU5J7Jw`\n\n# Smoke Tests\nSmoke tests are limited to core functionality and serve as a pre-release final review. If smoke tests are failing, a release cannot proceed.\n\n## Fleet core:\n\n**Fleet version** (Head to the \"My account\" page in the Fleet UI or run `fleetctl version`):\n\n**Web browser** _(e.g. Chrome 88.0.4324)_: \n\n### Prerequisites\n\n1. `fleetctl preview` is set up and running the desired test version using [`--tag` parameters.](https://fleetdm.com/handbook/engineering#run-fleet-locally-for-qa-purposes)\n2. Unless you are explicitly testing older browser versions, browser is up to date.\n3. Certificate \u0026 flagfile are in place to create new host.\n4. In your browser, clear local storage using devtools.\n\n### Orchestration\n\u003ctable\u003e\n\u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eUpdate flow\u003c/td\u003e\u003ctd\u003e\n\n1. remove all fleet processes/agents/etc using `fleetctl preview reset` for a clean slate\n2. run `fleetctl preview` with no tag for latest stable\n3. create a host/query to later confirm upgrade with\n4. STOP fleet-preview-server instances in containers/apps on Docker\n5. run `fleetctl preview` with appropriate testing tag \u003c/td\u003e\u003ctd\u003eAll previously created hosts/queries are verified to still exist\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eLogin flow\u003c/td\u003e\u003ctd\u003e\n\n1. navigate to the login page and attempt to login with both valid and invalid credentials to verify some combination of expected results.\n2. navigate to the login page and attempt to login with both valid and invalid sso credentials to verify expected results.\n\u003c/td\u003e\u003ctd\u003e\n\n1. text fields prompt when blank\n2. correct error message is \"authentication failed\"\n3. forget password link prompts for email\n4. valid credentials result in a successful login.\n5. valid sso credentials result in a successful login\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003ePacks flow\u003c/td\u003e\u003ctd\u003eVerify management, operation, and logging of [\"2017 packs\"](https://fleetdm.com/handbook/company/why-this-way#why-does-fleet-support-query-packs).\u003c/td\u003e\u003ctd\u003e\n\n1. Packs successfully run on host machines after migrations \n2. New Packs can be created\n3. Packs can be edited and deleted\n4. Packs results information is logged\n \n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eLog destination flow\u003c/td\u003e\u003ctd\u003eVerify log destination for software, query, policy, and packs.\u003c/td\u003e\u003ctd\u003e\n\n1. Software, query, policy, and packs logs are successfully sent to external log destinations\n2. Software, query, policy, and packs logs are successfully sent to Filesystem log destinations\n \n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eOS settings\u003c/td\u003e\u003ctd\u003eVerify OS settings functionality\u003c/td\u003e\u003ctd\u003e\n\n1. Verify able to configure Disk encryption (macOS, Windows, \u0026 Linux).\n2. Verify host enrolled with Disk encryption enforced successfully encrypts.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003c/table\u003e\n\n### MDM\n\u003ctable\u003e\n\u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eMDM enrollment flow\u003c/td\u003e\u003ctd\u003eVerify MDM enrollments, run MDM commands\u003c/td\u003e\u003ctd\u003e\n  \n1. Erase an ADE-eligible macOS host and verify able to complete automated enrollment flow.\n2. With Windows MDM turned On, enroll a Windows host and verify MDM is turned On for the host.\n3. Verify able to run MDM commands on both macOS and Windows hosts from the CLI.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eMDM migration flow\u003c/td\u003e\u003ctd\u003eVerify MDM migration for ADE and non-ADE hosts\u003c/td\u003e\u003ctd\u003e\n  \n1. Turn off MDM on an ADE-eligible macOS host and verify that the native, \"Device Enrollment\" macOS notification appears.\n2. On the My device page, follow the \"Turn on MDM\" instructions and verify that MDM is turned on.\n3. Turn off MDM on a non ADE-eligible macOS host.\n4. On the My device page, follow the \"Turn on MDM\" instructions and verify that MDM is turned on.\n5. Verify Windows host migrates from 3rd party MDM to Fleet when automatic migration is turned on.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eOS settings\u003c/td\u003e\u003ctd\u003eVerify OS settings functionality\u003c/td\u003e\u003ctd\u003e\n\n1. Verify Profiles upload/download/delete (macOS \u0026 Windows).\n2. Verify Profiles are delivered to host and applied. \n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eSetup experience\u003c/td\u003e\u003ctd\u003eVerify macOS Setup experience\u003c/td\u003e\u003ctd\u003e\n\n1. Configure End user authentication.\n3. Upload a Bootstrap package.\n4. Add software (FMA, VPP, \u0026 Custom pkg)\n5. Add a script\n6. Enroll an ADE-eligible macOS host and verify successful authentication.\n7. Verify Bootstrap package is delivered.\n8. Verify SwiftDialogue window displays.\n9. Verify software installs and script runs.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eOS updates\u003c/td\u003e\u003ctd\u003eVerify OS updates flow\u003c/td\u003e\u003ctd\u003e\n\n1. Configure OS updates (macOS \u0026 Windows).\n2. Verify on-device that Nudge prompt appears (macOS 13).\n3. Verify enforce minimumOS occurs during enrollment (macOS 14+).\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eiOS/iPadOS\u003c/td\u003e\u003ctd\u003eVerify enrollment, profiles, \u0026 software installs\u003c/td\u003e\u003ctd\u003e\n\n1. Verify ADE enrollment.\n2. Verify OTA enrollment.\n3. Verify Profiles are delivered to host and applied.\n4. Verify VPP apps install \u0026 display correctly in Activity feed.\n5. Verify `Turn Off MDM` for BYOD \u0026 ADE hosts.\n \n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\n\u003ctr\u003e\u003ctd\u003eLock \u0026 Wipe\u003c/td\u003e\u003ctd\u003eVerify hosts can be locked \u0026 wiped\u003c/td\u003e\u003ctd\u003e\n\n1. Verify locking a host from the Fleet UI (macOS, Windows, \u0026 Linux)\n2. Verify unlocking a host from the Fleet UI (macOS, Windows, \u0026 Linux)\n3. Verify wiping a host from the Fleet UI (macOS, Windows, \u0026 Linux)\n4. Verify wiping and locking hosts using `fleetctl` (macOS, Windows, \u0026 Linux)\n \n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\n\u003ctr\u003e\u003ctd\u003eCertificates Upload\u003c/td\u003e\u003ctd\u003eAPNs cert and ABM token renewal workflow\u003c/td\u003e\u003ctd\u003e\n\n1. Renew APNs Certificate.\n2. Renew ABM Token.\n3. Ensure ADE hosts can enroll.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003c/table\u003e\n\n### Software\n\u003ctable\u003e\n\u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eQuery flow\u003c/td\u003e\u003ctd\u003eCreate, edit, run, and delete queries. \u003c/td\u003e\u003ctd\u003e\n\n1. permissions regarding creating/editing/deleting queries are up to date with documentation\n2. syntax errors result in error messaging\n3. queries can be run manually \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eHost Flow\u003c/td\u003e\u003ctd\u003eVerify a new host can be added and removed following modal instructions using your own device.\u003c/td\u003e\u003ctd\u003e\n\n1. Host is added via command line\n2. Host serial number and date added are accurate\n3. Host is not visible after it is deleted\n4. Warning and informational modals show when expected and make sense\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eMy device page\u003c/td\u003e\u003ctd\u003eVerify the end user's my device page loads successfully.\u003c/td\u003e\u003ctd\u003e\n\n1. Clicking the Fleet desktop item, then \"My device\" successfully loads the my device page.\n2. The \"My device\" page is populated correctly and as expected. \n3. Styling and padding appears correct.\n \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eScripts\u003c/td\u003e\u003ctd\u003eVerify script library and execution\u003c/td\u003e\u003ctd\u003e\n\n1. Verify able to run a script on all host types from CLI.\n2. Verify scripts library upload/download/delete.\n3. From Host details (macOS, Windows, \u0026 Linux) run a script that should PASS, verify.\n4. From Host details (macOS, Windows, \u0026 Linux) run a script that should FAIL, verify.\n5. Verify UI loading state and statuses for scripts.\n8. Disable scripts globally and verify unable to run.\n9. Verify scripts display correctly in Activity feed.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eSoftware\u003c/td\u003e\u003ctd\u003eVerify software library and install / download\u003c/td\u003e\u003ctd\u003e\n\n1. Verify software library upload/download/delete.\n2. From Host details (macOS, Windows, \u0026 Linux) run an install that should PASS, verify.\n3. From My Device (macOS, Windows, \u0026 Linux) software tab should have self-service items available, verify.\n4. Verify UI loading state and statuses for installing software.\n7. Verify software installs display correctly in Activity feed.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\n\u003ctr\u003e\u003ctd\u003eMigration Test\u003c/td\u003e\u003ctd\u003eVerify Fleet can migrate to the next version with no issues.\u003c/td\u003e\u003ctd\u003e\n\nUsing the github action https://github.com/fleetdm/fleet/actions/workflows/db-upgrade-test.yml\n1. Using the most recent stable version of Fleet and `main`, click `Run workflow`\n2. Enter the Docker tag of Fleet starting version, e.g. 'v4.64.2'\n3. Enter the Docker tag of Fleet version to upgrade to, e.g. 'rc-minor-fleet-v4.65.0'\n4. Click `Run workflow`.\n5. Action should complete successfully.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003c/table\u003e\n\n### All Product Groups\n\u003ctable\u003e\n \u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eRelease blockers\u003c/td\u003e\u003ctd\u003eVerify there are no outstanding release blocking tickets.\u003c/td\u003e\u003ctd\u003e\n  \n1. Check [this](https://github.com/fleetdm/fleet/labels/~release%20blocker) filter to view all open `~release blocker` tickets.\n2. If any are found raise an alarm in the `#help-engineering` and `#g-mdm` (or `#g-endpoint-ops`)  channels.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\n\u003ctr\u003e\u003ctd\u003eLoad tests - minor releases only unless otherwise specified\u003c/td\u003e\u003ctd\u003eVerify all load test metrics are within acceptable range on final build of RC.\u003c/td\u003e\u003ctd\u003e\n  \n1. Check [this Google doc](https://docs.google.com/document/d/1V6QtFzcGDsLnn2PIvGin74DAxdAN_3likjxSssOMMQI/edit?tab=t.0#heading=h.15acjob4ji20) to review load test key metrics and checks.\n2. After all expected changes have been merged to the RC branch, two load tests will need to be run - a new instance with no data, and a migrated instance.\n3. For the new instance with no data, set up a load test environment using the RC branch and allow it at least 24hrs of run time.\n4. For the migrated instance, set up a load test environment on the previous minor release branch. Once the environment has been set up and stabilized, follow the instructions in [Deploying code changes to fleet](https://github.com/fleetdm/fleet/blob/main/infrastructure/loadtesting/terraform/readme.md#deploying-code-changes-to-fleet) to migrate to the RC branch. Monitor the metrics post-migration to determine if any performance issues arise.\n5. Record metrics in [this spreadsheet](https://docs.google.com/spreadsheets/d/1FOF0ykFVoZ7DJSTfrveip0olfyRQsY9oT1uXCCZmuKc/edit?usp=drive_link) for the two load test runs. \n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e \n\u003c/table\u003e\n\n### Notes\n\nIssues found new to this version:\n\nIssues found that reproduce in last stable version: \n\nWhat has not been tested:\n\nInclude any notes on whether issues should block release or not as needed:\n\n\u003cbr\u003e\n\u003cbr\u003e\n\n"
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgc-TB0",
        "comments": [
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "```\nFLEET_VERSION_A=v4.71.1 FLEET_VERSION_B=rc-minor-fleet-v4.72.0 go test -v\n--- PASS: TestUpgradeAToB (57.07s)\nPASS\nok  \tgithub.com/fleetdm/fleet/v4/test/upgrade\t57.084s\n```\n\n```\nFLEET_VERSION_A=v4.71.0 FLEET_VERSION_B=rc-minor-fleet-v4.72.0 go test -v\n--- PASS: TestUpgradeAToB (52.56s)\nPASS\nok  \tgithub.com/fleetdm/fleet/v4/test/upgrade\t52.577s\n```\n\n```\nFLEET_VERSION_A=v4.70.0 FLEET_VERSION_B=rc-minor-fleet-v4.72.0 go test -v\n--- PASS: TestUpgradeAToB (112.70s)\nPASS\nok  \tgithub.com/fleetdm/fleet/v4/test/upgrade\t112.715s\n```\n\n```\nFLEET_VERSION_A=v4.69.0 FLEET_VERSION_B=rc-minor-fleet-v4.72.0 go test -v\n--- PASS: TestUpgradeAToB (68.57s)\nPASS\nok  \tgithub.com/fleetdm/fleet/v4/test/upgrade\t68.590s\n```"
          }
        ],
        "issueNumber": 31274,
        "changeType": "modified"
      },
      {
        "estimate": 0,
        "id": "PVTI_lADOBDAnic4A4BEUzgdCluM",
        "status": "Done",
        "comments": [
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "@iansltx is going to spec out this ticket since I'm swamped with new 4.72 tickets"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "^ Also I'm not gonna take a capacity hit for this because the extent of my involvement is filling out the issue template and putting it up for estimation. We talked through this and dropped scope a bit during USR today."
          },
          {
            "author": {
              "login": "fleet-release"
            },
            "body": "Open instructions,\nLike a morning sun, guide us,\nKnowledge blooms, self-served."
          }
        ],
        "issueNumber": 31316,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdUxWw",
        "status": "🥚 Ready",
        "issueNumber": 31571,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdXw9w",
        "title": "Software status in list doesn't match modal if software previously reported as failed to install but actually installed, then failed to uninstall but reported success",
        "issueNumber": 31663,
        "changeType": "removed"
      }
    ]
  },
  {
    "timestamp": "2025-08-08T07:09:05.369693525Z",
    "items": [
      {
        "assignees": [
          "iansltx"
        ],
        "content": {
          "body": "**Fleet version**: 4.72\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\n\u003c!-- What did you see?  Paste a screenshot, include a 30s video, or write 1-2 sentences describing the issue you observed. --\u003e\n\n\u003cimg width=\"720\" height=\"592\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/3fb10186-89d6-4b2f-9d51-de7941e432a2\" /\u003e\n\n### 🛠️ To fix\n\nOverride install statuses in the correct order (and update JS tests to repro this issue)\n\nProduct designer: @iansltx\n\n### 🧑‍💻  Steps to reproduce\n\u003c!-- Provide step-by-step actions of how to recreate this bug in a clean install of Fleet. (This helps others understand and fix it more quickly.) --\u003e\n1. Add a tar.gz file to a team's library, made available for Self Service. Include install and uninstall scripts.\nFor a physical linux box you can use the go tar.gz file here: https://drive.google.com/file/d/15uKzk2J7IYH7MNYhBHdPAKP_uvVXSx1Z/view?usp=sharing\nFor a linux VM on Apple Silicon you can use the go tar.gz file here: https://drive.google.com/file/d/1ktV0lZH88Q7lqdFUIo3YCt_mgcql1NUN/view?usp=sharing\nInstall script is: `mv $INSTALLER_PATH/* /usr/local`\nUninstall script is: `rm -rf /usr/local/go`\n2. On enrolled linux host, open Self service and click \"Install\"\n3. Wait for install to complete, refetch to complete, then hover over \"Installed\" status\n\n### 🕯️ More info _(optional)_\n\u003c!-- Add any additional details you think could be relevant to solving or reproducing the bug (e.g., \"this does not reproduce when...\") --\u003e\nI used a different tar.gz when reproducing to gather additional info, seems this is only happening for the first install.\nAPI Response:\n```\n    {\n      \"id\": 3875,\n      \"name\": \"gimp-3.0.0.tar.gz\",\n      \"source\": \"tgz_packages\",\n      \"status\": \"installed\",\n      \"installed_versions\": null,\n      \"software_package\": {\n        \"name\": \"gimp-3.0.0.tar.gz\",\n        \"automatic_install_policies\": null,\n        \"version\": \"\",\n        \"platform\": \"linux\",\n        \"self_service\": true,\n        \"icon_url\": null,\n        \"last_install\": {\n          \"install_uuid\": \"e48dbdaf-dde1-44cb-b8c2-6f29839eeaec\",\n          \"installed_at\": \"2025-08-11T14:28:44.201641Z\"\n        },\n        \"last_uninstall\": null,\n        \"package_url\": null\n      },\n      \"app_store_app\": null\n    },\n```\n\u003c!-- If this is a performance issue, follow these steps to generate and attach a debug archive: https://fleetdm.com/docs/using-fleet/monitoring-fleet#debugging-performance-issues --\u003e\n\n## 🛠️ To fix\n\nProduct designer @marko-lisica \n\nDo a special case for tarballs, so we don't have a state where we wait for refetch, as it's not in the inventory.\nIt should be possible to click on the status to see more information about script results in details modal.",
          "number": 31721,
          "repository": "fleetdm/fleet",
          "title": "tar.gz installs show in Self service as fetching inventory after install and refetch has already happened",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/31721"
        },
        "estimate": 1,
        "id": "PVTI_lADOBDAnic4A4BEUzgdbCMM",
        "labels": [
          "bug",
          ":release",
          "~unreleased bug",
          ":incoming",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-08T00:00:00Z",
          "title": "4.72.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "status": "Waiting",
        "title": "tar.gz installs show in Self service as fetching inventory after install and refetch has already happened",
        "issueNumber": 31721,
        "changeType": "added"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdVayQ",
        "status": "✅ Ready for release",
        "comments": [
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "Requires a new UI status and to check refetch time stamps against last_install to ensure \"updated\" vs. \"update available\", write tests 🫠"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "cc: @noahtalerman @marko-lisica @jmwatts \n\nDesign decision additions today during design-review: \n- Add temporary \"Installed\" status requires a new UI status and to check refetch time stamps against `last_install` to ensure \"installed\" vs. \"whatever other status would show\", write tests\n- Add temporary \"---\" status requires a new UI status and to check refetch time stamps against `last_uninstall` to ensure \"---\" vs. \"whatever other staus would show\", write tests\n- Add tooltips to all 3 temporary statuses to ensure users know it's a temporary status \"Fleet successfully [installed/uninstalled/updated] software and is fetching latest software inventory.\""
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "Tested this with a cherry pick from the PR to 4.72.0 on Windows, macOS, and Ubuntu, Firefox, Edge and Chrome. Looks good, as long as there are no functional changes, this one should be good to merge to main and the RC.\n\n\u003cimg width=\"1070\" height=\"497\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/f8c60a77-97dd-43b8-b64f-607c5cf127f5\" /\u003e\n\n\u003cimg width=\"1130\" height=\"555\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/9c3e245d-9e13-4a3f-ba5c-bf1d2d831e1c\" /\u003e\n\n\u003cimg width=\"1398\" height=\"578\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/c4d3ae00-66e7-46ee-a907-b8be0a165c6d\" /\u003e"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "**QA Notes**\n\n- [x] Update available when installed by Fleet - Shows in Carousel with \"Update\" and list with linked \"Update available\" with modal\n- [x] Recently updated (update complete, refetching) - Shows non-linked \"Updated\" with hover \"Fleet successfully updated software and is fetching latest software inventory\"\n- [x] Recently installed (install complete, refetching)- Shows non-linked \"Installed\" with hover \"Fleet successfully installed software and is fetching latest software inventory\"\n- [🔴 ]  tgz installed - Should this have a linked \"Installed\"? I get a non-linked installed and the hover text says \"Fleet successfully installed software and is fetching latest software inventory\" but it's not refetching anymore - Filed #31721\n- [x] “normal” installed (refetch complete) - When refetch is complete it turns into a linked \"Installed\" with modal\n- [x] “normal” uninstalled (refetch complete) - After refetch is complete it's --- and says \"\u003cPackage name\u003e can be installed on the host. Select Actions \u003e Install to install\""
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "merged to RC with https://github.com/fleetdm/fleet/pull/31718"
          }
        ],
        "issueNumber": 31629,
        "changeType": "modified"
      },
      {
        "content": {
          "body": "\n# Goal: easy-to-follow test steps for checking a release manually\n\n# Important reference data\n\n1. [fleetctl preview setup](https://fleetdm.com/fleetctl-preview)\n2. [permissions documentation](https://fleetdm.com/docs/using-fleet/permissions) \n3. premium tests require license key (needs renewal) `fleetctl preview --license-key=eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJGbGVldCBEZXZpY2UgTWFuYWdlbWVudCBJbmMuIiwiZXhwIjoxNjQwOTk1MjAwLCJzdWIiOiJkZXZlbG9wbWVudCIsImRldmljZXMiOjEwMCwibm90ZSI6ImZvciBkZXZlbG9wbWVudCBvbmx5IiwidGllciI6ImJhc2ljIiwiaWF0IjoxNjIyNDI2NTg2fQ.WmZ0kG4seW3IrNvULCHUPBSfFdqj38A_eiXdV_DFunMHechjHbkwtfkf1J6JQJoDyqn8raXpgbdhafDwv3rmDw`\n4. premium tests require license key (active - Expires Sunday, January 1, 2023 12:00:00 AM) `fleetctl preview --license-key=eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJGbGVldCBEZXZpY2UgTWFuYWdlbWVudCBJbmMuIiwiZXhwIjoxNjcyNTMxMjAwLCJzdWIiOiJGbGVldCBEZXZpY2UgTWFuYWdlbWVudCIsImRldmljZXMiOjEwMCwibm90ZSI6ImZvciBkZXZlbG9wbWVudCBvbmx5IiwidGllciI6InByZW1pdW0iLCJpYXQiOjE2NDI1MjIxODF9.EGHQjIzM73YyMbnCruswzg360DEYCsDi9uz48YcDwQHq90BabGT5PIXRiculw79emGj5sk2aKgccTd2hU5J7Jw`\n\n# Smoke Tests\nSmoke tests are limited to core functionality and serve as a pre-release final review. If smoke tests are failing, a release cannot proceed.\n\n## Fleet core:\n\n**Fleet version** (Head to the \"My account\" page in the Fleet UI or run `fleetctl version`):\n\n**Web browser** _(e.g. Chrome 88.0.4324)_: \n\n### Prerequisites\n\n1. `fleetctl preview` is set up and running the desired test version using [`--tag` parameters.](https://fleetdm.com/handbook/engineering#run-fleet-locally-for-qa-purposes)\n2. Unless you are explicitly testing older browser versions, browser is up to date.\n3. Certificate \u0026 flagfile are in place to create new host.\n4. In your browser, clear local storage using devtools.\n\n### Orchestration\n\u003ctable\u003e\n\u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eUpdate flow\u003c/td\u003e\u003ctd\u003e\n\n1. remove all fleet processes/agents/etc using `fleetctl preview reset` for a clean slate\n2. run `fleetctl preview` with no tag for latest stable\n3. create a host/query to later confirm upgrade with\n4. STOP fleet-preview-server instances in containers/apps on Docker\n5. run `fleetctl preview` with appropriate testing tag \u003c/td\u003e\u003ctd\u003eAll previously created hosts/queries are verified to still exist\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eLogin flow\u003c/td\u003e\u003ctd\u003e\n\n1. navigate to the login page and attempt to login with both valid and invalid credentials to verify some combination of expected results.\n2. navigate to the login page and attempt to login with both valid and invalid sso credentials to verify expected results.\n\u003c/td\u003e\u003ctd\u003e\n\n1. text fields prompt when blank\n2. correct error message is \"authentication failed\"\n3. forget password link prompts for email\n4. valid credentials result in a successful login.\n5. valid sso credentials result in a successful login\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003ePacks flow\u003c/td\u003e\u003ctd\u003eVerify management, operation, and logging of [\"2017 packs\"](https://fleetdm.com/handbook/company/why-this-way#why-does-fleet-support-query-packs).\u003c/td\u003e\u003ctd\u003e\n\n1. Packs successfully run on host machines after migrations \n2. New Packs can be created\n3. Packs can be edited and deleted\n4. Packs results information is logged\n \n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eLog destination flow\u003c/td\u003e\u003ctd\u003eVerify log destination for software, query, policy, and packs.\u003c/td\u003e\u003ctd\u003e\n\n1. Software, query, policy, and packs logs are successfully sent to external log destinations\n2. Software, query, policy, and packs logs are successfully sent to Filesystem log destinations\n \n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eOS settings\u003c/td\u003e\u003ctd\u003eVerify OS settings functionality\u003c/td\u003e\u003ctd\u003e\n\n1. Verify able to configure Disk encryption (macOS, Windows, \u0026 Linux).\n2. Verify host enrolled with Disk encryption enforced successfully encrypts.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003c/table\u003e\n\n### MDM\n\u003ctable\u003e\n\u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eMDM enrollment flow\u003c/td\u003e\u003ctd\u003eVerify MDM enrollments, run MDM commands\u003c/td\u003e\u003ctd\u003e\n  \n1. Erase an ADE-eligible macOS host and verify able to complete automated enrollment flow.\n2. With Windows MDM turned On, enroll a Windows host and verify MDM is turned On for the host.\n3. Verify able to run MDM commands on both macOS and Windows hosts from the CLI.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eMDM migration flow\u003c/td\u003e\u003ctd\u003eVerify MDM migration for ADE and non-ADE hosts\u003c/td\u003e\u003ctd\u003e\n  \n1. Turn off MDM on an ADE-eligible macOS host and verify that the native, \"Device Enrollment\" macOS notification appears.\n2. On the My device page, follow the \"Turn on MDM\" instructions and verify that MDM is turned on.\n3. Turn off MDM on a non ADE-eligible macOS host.\n4. On the My device page, follow the \"Turn on MDM\" instructions and verify that MDM is turned on.\n5. Verify Windows host migrates from 3rd party MDM to Fleet when automatic migration is turned on.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eOS settings\u003c/td\u003e\u003ctd\u003eVerify OS settings functionality\u003c/td\u003e\u003ctd\u003e\n\n1. Verify Profiles upload/download/delete (macOS \u0026 Windows).\n2. Verify Profiles are delivered to host and applied. \n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eSetup experience\u003c/td\u003e\u003ctd\u003eVerify macOS Setup experience\u003c/td\u003e\u003ctd\u003e\n\n1. Configure End user authentication.\n3. Upload a Bootstrap package.\n4. Add software (FMA, VPP, \u0026 Custom pkg)\n5. Add a script\n6. Enroll an ADE-eligible macOS host and verify successful authentication.\n7. Verify Bootstrap package is delivered.\n8. Verify SwiftDialogue window displays.\n9. Verify software installs and script runs.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eOS updates\u003c/td\u003e\u003ctd\u003eVerify OS updates flow\u003c/td\u003e\u003ctd\u003e\n\n1. Configure OS updates (macOS \u0026 Windows).\n2. Verify on-device that Nudge prompt appears (macOS 13).\n3. Verify enforce minimumOS occurs during enrollment (macOS 14+).\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eiOS/iPadOS\u003c/td\u003e\u003ctd\u003eVerify enrollment, profiles, \u0026 software installs\u003c/td\u003e\u003ctd\u003e\n\n1. Verify ADE enrollment.\n2. Verify OTA enrollment.\n3. Verify Profiles are delivered to host and applied.\n4. Verify VPP apps install \u0026 display correctly in Activity feed.\n5. Verify `Turn Off MDM` for BYOD \u0026 ADE hosts.\n \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\n\u003ctr\u003e\u003ctd\u003eLock \u0026 Wipe\u003c/td\u003e\u003ctd\u003eVerify hosts can be locked \u0026 wiped\u003c/td\u003e\u003ctd\u003e\n\n1. Verify locking a host from the Fleet UI (macOS, Windows, \u0026 Linux)\n2. Verify unlocking a host from the Fleet UI (macOS, Windows, \u0026 Linux)\n3. Verify wiping a host from the Fleet UI (macOS, Windows, \u0026 Linux)\n4. Verify wiping and locking hosts using `fleetctl` (macOS, Windows, \u0026 Linux)\n \n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\n\u003ctr\u003e\u003ctd\u003eCertificates Upload\u003c/td\u003e\u003ctd\u003eAPNs cert and ABM token renewal workflow\u003c/td\u003e\u003ctd\u003e\n\n1. Renew APNs Certificate.\n2. Renew ABM Token.\n3. Ensure ADE hosts can enroll.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003c/table\u003e\n\n### Software\n\u003ctable\u003e\n\u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eQuery flow\u003c/td\u003e\u003ctd\u003eCreate, edit, run, and delete queries. \u003c/td\u003e\u003ctd\u003e\n\n1. permissions regarding creating/editing/deleting queries are up to date with documentation\n2. syntax errors result in error messaging\n3. queries can be run manually \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eHost Flow\u003c/td\u003e\u003ctd\u003eVerify a new host can be added and removed following modal instructions using your own device.\u003c/td\u003e\u003ctd\u003e\n\n1. Host is added via command line\n2. Host serial number and date added are accurate\n3. Host is not visible after it is deleted\n4. Warning and informational modals show when expected and make sense\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eMy device page\u003c/td\u003e\u003ctd\u003eVerify the end user's my device page loads successfully.\u003c/td\u003e\u003ctd\u003e\n\n1. Clicking the Fleet desktop item, then \"My device\" successfully loads the my device page.\n2. The \"My device\" page is populated correctly and as expected. \n3. Styling and padding appears correct.\n \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eScripts\u003c/td\u003e\u003ctd\u003eVerify script library and execution\u003c/td\u003e\u003ctd\u003e\n\n1. Verify able to run a script on all host types from CLI.\n2. Verify scripts library upload/download/delete.\n3. From Host details (macOS, Windows, \u0026 Linux) run a script that should PASS, verify.\n4. From Host details (macOS, Windows, \u0026 Linux) run a script that should FAIL, verify.\n5. Verify UI loading state and statuses for scripts.\n8. Disable scripts globally and verify unable to run.\n9. Verify scripts display correctly in Activity feed.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eSoftware\u003c/td\u003e\u003ctd\u003eVerify software library and install / download\u003c/td\u003e\u003ctd\u003e\n\n1. Verify software library upload/download/delete.\n2. From Host details (macOS, Windows, \u0026 Linux) run an install that should PASS, verify.\n3. From My Device (macOS, Windows, \u0026 Linux) software tab should have self-service items available, verify.\n4. Verify UI loading state and statuses for installing software.\n7. Verify software installs display correctly in Activity feed.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\n\u003ctr\u003e\u003ctd\u003eMigration Test\u003c/td\u003e\u003ctd\u003eVerify Fleet can migrate to the next version with no issues.\u003c/td\u003e\u003ctd\u003e\n\nUsing the github action https://github.com/fleetdm/fleet/actions/workflows/db-upgrade-test.yml\n1. Using the most recent stable version of Fleet and `main`, click `Run workflow`\n2. Enter the Docker tag of Fleet starting version, e.g. 'v4.64.2'\n3. Enter the Docker tag of Fleet version to upgrade to, e.g. 'rc-minor-fleet-v4.65.0'\n4. Click `Run workflow`.\n5. Action should complete successfully.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003c/table\u003e\n\n### All Product Groups\n\u003ctable\u003e\n \u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eRelease blockers\u003c/td\u003e\u003ctd\u003eVerify there are no outstanding release blocking tickets.\u003c/td\u003e\u003ctd\u003e\n  \n1. Check [this](https://github.com/fleetdm/fleet/labels/~release%20blocker) filter to view all open `~release blocker` tickets.\n2. If any are found raise an alarm in the `#help-engineering` and `#g-mdm` (or `#g-endpoint-ops`)  channels.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\n\u003ctr\u003e\u003ctd\u003eLoad tests - minor releases only unless otherwise specified\u003c/td\u003e\u003ctd\u003eVerify all load test metrics are within acceptable range on final build of RC.\u003c/td\u003e\u003ctd\u003e\n  \n1. Check [this Google doc](https://docs.google.com/document/d/1V6QtFzcGDsLnn2PIvGin74DAxdAN_3likjxSssOMMQI/edit?tab=t.0#heading=h.15acjob4ji20) to review load test key metrics and checks.\n2. After all expected changes have been merged to the RC branch, two load tests will need to be run - a new instance with no data, and a migrated instance.\n3. For the new instance with no data, set up a load test environment using the RC branch and allow it at least 24hrs of run time.\n4. For the migrated instance, set up a load test environment on the previous minor release branch. Once the environment has been set up and stabilized, follow the instructions in [Deploying code changes to fleet](https://github.com/fleetdm/fleet/blob/main/infrastructure/loadtesting/terraform/readme.md#deploying-code-changes-to-fleet) to migrate to the RC branch. Monitor the metrics post-migration to determine if any performance issues arise.\n5. Record metrics in [this spreadsheet](https://docs.google.com/spreadsheets/d/1FOF0ykFVoZ7DJSTfrveip0olfyRQsY9oT1uXCCZmuKc/edit?usp=drive_link) for the two load test runs. \n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e \n\u003c/table\u003e\n\n### Notes\n\nIssues found new to this version:\n\nIssues found that reproduce in last stable version: \n\nWhat has not been tested:\n\nInclude any notes on whether issues should block release or not as needed:\n\n\u003cbr\u003e\n\u003cbr\u003e\n\n"
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgc-TB0",
        "issueNumber": 31274,
        "changeType": "modified"
      },
      {
        "content": {
          "body": "**Fleet version**: \u003e= 4.67.3\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\n\nSee #28626. We've avoided the nil pointer panic (via #28674) but there's still probably an underlying issue for getting us to the warning point in the first place.\n\n### 🧑‍💻  Steps to reproduce\n\nTODO; primary effort for this ticket will be finding a valid repro scenario, and confirmaing expected behavior on software ingest for that repro behavior.\n\nTo see \n```\nlevel=warn msg=\"updateModifiedHostSoftwareDB: last opened at is nil for new software, but not for current software\" \n```\nSteps to reproduce are:\n\n1. Install software via fleet that does not automatically open after install (do not use CloudFlare Warp or TeamViewer), and open the software after install, then close it.\n2. Refetch host vitals\n3. Confirm \"Last used\" time is shown on Host \u003e Software \u003e Inventory tab\n4. Reinstall or Update the software via Fleet and make sure it doesn't open on its own. Do not open it. \n5. Refetch completes automatically after installation (or refetch manually)\n6. \"Last used\" time is cleared out on Host \u003e Software \u003eInventory tab\n7. Warning is shown in the log\n\n\n### 🕯️ More info\n\nThusfar we have only been able to reproduce this issue in customer environments, so what we probably need is enough logging to determine which host(s) have this issue, and then both snapshots of current host software and incoming detail queries to reproduce the broad issue.\n\n### 🛠️ To fix\n\nIt sounds like this is a little bit open pending the TODO in steps to reproduce and that the initial task will be that TODO task."
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgdCxBg",
        "status": "Waiting",
        "comments": [
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@iansltx I see that the steps to reproduce is still a **to do**.\n\nHowever, the way you've written it sounds like part of the ticket will be to find a way to reproduce this. I'm a little uncertain how to proceed. Should I move this forward and indicate that todo as part of the fix area?\n\ncc @mostlikelee "
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "Whoops, my bad on removing `:reproduce`"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@eugkuo Yeah, this will need to be moved through to engineering with the reproduce tag intact as we'll likely need to coordinate with customers to get a repro."
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "let's timebox this, whether it is reproduction, or adding logging"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Pulling the :reproduce label off of this since that makes it less clear whose work queue this is in. Timebox is for investigation/repro by an engineer."
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "@ksykulev heads up that this is a related ticket: https://github.com/fleetdm/fleet/issues/29050"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@noahtalerman @marko-lisica See [this Slack thread](https://fleetdm.slack.com/archives/C086V2QK76X/p1754591131297309) for context on why this is Waiting. We have some product questions on whether/when we should clear \"last opened\", and the behavior may not be consistent right now cross-os (e.g. @zwass mentioned that we don't take version into account when checking package last-opened times in Linux)."
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "Was able to reproduce the warning in the log:\n\n```\nlevel=warn ts=2025-08-07T19:08:27.209411Z msg=\"updateModifiedHostSoftwareDB: last opened at is nil for new software, but not for current software\" new_software=\"Microsoft Word\" current_software=\"Microsoft Word\" bundle_identifier=com.microsoft.Word\n```\nBy doing the following:\n\n1. Install Microsoft Word, and open\n2. Refetch host vitals\n3. Confirm \"Last used\" time is shown on Host \u003e Software \u003eInventory tab\n4. Reinstall or Update Microsoft Word via Fleet, do not open\n5. Refetch completes after installation automatically\n6. \"Last used\" time is cleared out on Host \u003e Software \u003eInventory tab\n\nAdded steps to repro in description."
          },
          {
            "author": {
              "login": "ksykulev"
            },
            "body": "Not sure we need more confirmation, but..\nI downloaded firefox 139.0.4, installed it\n\n\u003cimg width=\"1206\" height=\"105\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/9c714aa4-6e4b-4e9a-9741-8f5bdddcd980\" /\u003e\n\nOpened firefox\n\n\u003cimg width=\"1219\" height=\"126\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/a07f13ee-cacb-4f58-bbde-092b31846c7b\" /\u003e\n\nDownloaded firefox 141.0.3, installed it\n\n\u003cimg width=\"1203\" height=\"126\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/9f4138ea-edd9-4bf8-9c00-e1c274526c2f\" /\u003e"
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "\u003e @noahtalerman @marko-lisica See [this Slack thread](https://fleetdm.slack.com/archives/C086V2QK76X/p1754591131297309) for context on why this is Waiting. We have some product questions on whether/when we should clear \"last opened\", and the behavior may not be consistent right now cross-os (e.g. @zwass mentioned that we don't take version into account when checking package last-opened times in Linux).\n\nUp to @marko-lisica "
          }
        ],
        "issueNumber": 29061,
        "changeType": "modified"
      }
    ]
  },
  {
    "timestamp": "2025-08-08T19:04:53.754336734Z",
    "items": [
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcX120",
        "status": "✅ Ready for release",
        "issueNumber": 29914,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdB-kE",
        "status": "🐣 In progress",
        "issueNumber": 31212,
        "changeType": "modified"
      },
      {
        "assignees": [
          "RachelElysia"
        ],
        "id": "PVTI_lADOBDAnic4A4BEUzgdbCMM",
        "labels": [
          "bug",
          ":release",
          ":incoming",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-29T00:00:00Z",
          "title": "4.73.0"
        },
        "status": "Waiting",
        "comments": [
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Reassigning because I'm right in the middle of the interrupt work swimlane :("
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@RachelElysia thanks for noticing that _uninstall_ is the tooltip being shown, so we're going to want an API response for this one to troubleshoot further. Given that @jmwatts is out and to avoid a repro rabbit trail, going to make the call of not blocking the release for this; we'll troubleshoot and resolve in 4.73."
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "More info:\nrecently_uninstalled UI status would only show if `newerDate === lastUninstallDate` which is super bizarre in this case and would require repro with API responses"
          }
        ],
        "issueNumber": 31721,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdUaqU",
        "milestone": {
          "dueOn": "2025-08-29T00:00:00Z",
          "title": "4.73.0"
        },
        "issueNumber": 31268,
        "changeType": "modified"
      },
      {
        "estimate": 3,
        "id": "PVTI_lADOBDAnic4A4BEUzgdAjcc",
        "issueNumber": 31309,
        "changeType": "modified"
      },
      {
        "estimate": 3,
        "id": "PVTI_lADOBDAnic4A4BEUzgdVfUY",
        "status": "✅ Ready for release",
        "comments": [
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "@RachelElysia I'm still seeing this occasionally happen. If I never try to reorder the sort for name or status, it doesn't happen, but if I do that, then set it back to sorted by name, then try an action, it happens.\n\nhttps://github.com/user-attachments/assets/f37c46de-538f-4f57-be0b-a1498e4dd638"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "Rachel:\nTODO:\nAdd all clientside filtering to URL bar to keep this from happening (I think it's missing categories, sort)"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "Changed this to a 3 to match all the extra work it took to figure out wth was going on with react-table and data changing causing resets"
          },
          {
            "author": {
              "login": "AndreyKizimenko"
            },
            "body": "QA notes: \n\n- Confirmed that with 4+ pages the user remains on the page where they interacted with the software no matter what filtration is selected. \n   - Tried installing, uninstalling, and reinstalling \n- Additionally confirmed that if an admin is also pushing software to the host it has no effect on the pagination on the host's side. \n\nMoving to **Ready for Release** "
          }
        ],
        "issueNumber": 31632,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdXQh4",
        "status": "✔️Awaiting QA",
        "issueNumber": 31652,
        "changeType": "modified"
      },
      {
        "assignees": [
          "xpkoala",
          "AndreyKizimenko",
          "PezHub",
          "jmwatts"
        ],
        "content": {
          "body": "\n# Goal: easy-to-follow test steps for checking a release manually\n\n# Important reference data\n\n1. [fleetctl preview setup](https://fleetdm.com/fleetctl-preview)\n2. [permissions documentation](https://fleetdm.com/docs/using-fleet/permissions) \n3. premium tests require license key (needs renewal) `fleetctl preview --license-key=eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJGbGVldCBEZXZpY2UgTWFuYWdlbWVudCBJbmMuIiwiZXhwIjoxNjQwOTk1MjAwLCJzdWIiOiJkZXZlbG9wbWVudCIsImRldmljZXMiOjEwMCwibm90ZSI6ImZvciBkZXZlbG9wbWVudCBvbmx5IiwidGllciI6ImJhc2ljIiwiaWF0IjoxNjIyNDI2NTg2fQ.WmZ0kG4seW3IrNvULCHUPBSfFdqj38A_eiXdV_DFunMHechjHbkwtfkf1J6JQJoDyqn8raXpgbdhafDwv3rmDw`\n4. premium tests require license key (active - Expires Sunday, January 1, 2023 12:00:00 AM) `fleetctl preview --license-key=eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJGbGVldCBEZXZpY2UgTWFuYWdlbWVudCBJbmMuIiwiZXhwIjoxNjcyNTMxMjAwLCJzdWIiOiJGbGVldCBEZXZpY2UgTWFuYWdlbWVudCIsImRldmljZXMiOjEwMCwibm90ZSI6ImZvciBkZXZlbG9wbWVudCBvbmx5IiwidGllciI6InByZW1pdW0iLCJpYXQiOjE2NDI1MjIxODF9.EGHQjIzM73YyMbnCruswzg360DEYCsDi9uz48YcDwQHq90BabGT5PIXRiculw79emGj5sk2aKgccTd2hU5J7Jw`\n\n# Smoke Tests\nSmoke tests are limited to core functionality and serve as a pre-release final review. If smoke tests are failing, a release cannot proceed.\n\n## Fleet core:\n\n**Fleet version** (Head to the \"My account\" page in the Fleet UI or run `fleetctl version`):\n\n**Web browser** _(e.g. Chrome 88.0.4324)_: \n\n### Prerequisites\n\n1. `fleetctl preview` is set up and running the desired test version using [`--tag` parameters.](https://fleetdm.com/handbook/engineering#run-fleet-locally-for-qa-purposes)\n2. Unless you are explicitly testing older browser versions, browser is up to date.\n3. Certificate \u0026 flagfile are in place to create new host.\n4. In your browser, clear local storage using devtools.\n\n### Orchestration\n\u003ctable\u003e\n\u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eUpdate flow\u003c/td\u003e\u003ctd\u003e\n\n1. remove all fleet processes/agents/etc using `fleetctl preview reset` for a clean slate\n2. run `fleetctl preview` with no tag for latest stable\n3. create a host/query to later confirm upgrade with\n4. STOP fleet-preview-server instances in containers/apps on Docker\n5. run `fleetctl preview` with appropriate testing tag \u003c/td\u003e\u003ctd\u003eAll previously created hosts/queries are verified to still exist\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eLogin flow\u003c/td\u003e\u003ctd\u003e\n\n1. navigate to the login page and attempt to login with both valid and invalid credentials to verify some combination of expected results.\n2. navigate to the login page and attempt to login with both valid and invalid sso credentials to verify expected results.\n\u003c/td\u003e\u003ctd\u003e\n\n1. text fields prompt when blank\n2. correct error message is \"authentication failed\"\n3. forget password link prompts for email\n4. valid credentials result in a successful login.\n5. valid sso credentials result in a successful login\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003ePacks flow\u003c/td\u003e\u003ctd\u003eVerify management, operation, and logging of [\"2017 packs\"](https://fleetdm.com/handbook/company/why-this-way#why-does-fleet-support-query-packs).\u003c/td\u003e\u003ctd\u003e\n\n1. Packs successfully run on host machines after migrations \n2. New Packs can be created\n3. Packs can be edited and deleted\n4. Packs results information is logged\n \n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eLog destination flow\u003c/td\u003e\u003ctd\u003eVerify log destination for software, query, policy, and packs.\u003c/td\u003e\u003ctd\u003e\n\n1. Software, query, policy, and packs logs are successfully sent to external log destinations\n2. Software, query, policy, and packs logs are successfully sent to Filesystem log destinations\n \n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eOS settings\u003c/td\u003e\u003ctd\u003eVerify OS settings functionality\u003c/td\u003e\u003ctd\u003e\n\n1. Verify able to configure Disk encryption (macOS, Windows, \u0026 Linux).\n2. Verify host enrolled with Disk encryption enforced successfully encrypts.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003c/table\u003e\n\n### MDM\n\u003ctable\u003e\n\u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eMDM enrollment flow\u003c/td\u003e\u003ctd\u003eVerify MDM enrollments, run MDM commands\u003c/td\u003e\u003ctd\u003e\n  \n1. Erase an ADE-eligible macOS host and verify able to complete automated enrollment flow.\n2. With Windows MDM turned On, enroll a Windows host and verify MDM is turned On for the host.\n3. Verify able to run MDM commands on both macOS and Windows hosts from the CLI.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eMDM migration flow\u003c/td\u003e\u003ctd\u003eVerify MDM migration for ADE and non-ADE hosts\u003c/td\u003e\u003ctd\u003e\n  \n1. Turn off MDM on an ADE-eligible macOS host and verify that the native, \"Device Enrollment\" macOS notification appears.\n2. On the My device page, follow the \"Turn on MDM\" instructions and verify that MDM is turned on.\n3. Turn off MDM on a non ADE-eligible macOS host.\n4. On the My device page, follow the \"Turn on MDM\" instructions and verify that MDM is turned on.\n5. Verify Windows host migrates from 3rd party MDM to Fleet when automatic migration is turned on.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eOS settings\u003c/td\u003e\u003ctd\u003eVerify OS settings functionality\u003c/td\u003e\u003ctd\u003e\n\n1. Verify Profiles upload/download/delete (macOS \u0026 Windows).\n2. Verify Profiles are delivered to host and applied. \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eSetup experience\u003c/td\u003e\u003ctd\u003eVerify macOS Setup experience\u003c/td\u003e\u003ctd\u003e\n\n1. Configure End user authentication.\n3. Upload a Bootstrap package.\n4. Add software (FMA, VPP, \u0026 Custom pkg)\n5. Add a script\n6. Enroll an ADE-eligible macOS host and verify successful authentication.\n7. Verify Bootstrap package is delivered.\n8. Verify SwiftDialogue window displays.\n9. Verify software installs and script runs.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eOS updates\u003c/td\u003e\u003ctd\u003eVerify OS updates flow\u003c/td\u003e\u003ctd\u003e\n\n1. Configure OS updates (macOS \u0026 Windows).\n2. Verify on-device that Nudge prompt appears (macOS 13).\n3. Verify enforce minimumOS occurs during enrollment (macOS 14+).\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eiOS/iPadOS\u003c/td\u003e\u003ctd\u003eVerify enrollment, profiles, \u0026 software installs\u003c/td\u003e\u003ctd\u003e\n\n1. Verify ADE enrollment.\n2. Verify OTA enrollment.\n3. Verify Profiles are delivered to host and applied.\n4. Verify VPP apps install \u0026 display correctly in Activity feed.\n5. Verify `Turn Off MDM` for BYOD \u0026 ADE hosts.\n \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\n\u003ctr\u003e\u003ctd\u003eLock \u0026 Wipe\u003c/td\u003e\u003ctd\u003eVerify hosts can be locked \u0026 wiped\u003c/td\u003e\u003ctd\u003e\n\n1. Verify locking a host from the Fleet UI (macOS, Windows, \u0026 Linux)\n2. Verify unlocking a host from the Fleet UI (macOS, Windows, \u0026 Linux)\n3. Verify wiping a host from the Fleet UI (macOS, Windows, \u0026 Linux)\n4. Verify wiping and locking hosts using `fleetctl` (macOS, Windows, \u0026 Linux)\n \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\n\u003ctr\u003e\u003ctd\u003eCertificates Upload\u003c/td\u003e\u003ctd\u003eAPNs cert and ABM token renewal workflow\u003c/td\u003e\u003ctd\u003e\n\n1. Renew APNs Certificate.\n2. Renew ABM Token.\n3. Ensure ADE hosts can enroll.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003c/table\u003e\n\n### Software\n\u003ctable\u003e\n\u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eQuery flow\u003c/td\u003e\u003ctd\u003eCreate, edit, run, and delete queries. \u003c/td\u003e\u003ctd\u003e\n\n1. permissions regarding creating/editing/deleting queries are up to date with documentation\n2. syntax errors result in error messaging\n3. queries can be run manually \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eHost Flow\u003c/td\u003e\u003ctd\u003eVerify a new host can be added and removed following modal instructions using your own device.\u003c/td\u003e\u003ctd\u003e\n\n1. Host is added via command line\n2. Host serial number and date added are accurate\n3. Host is not visible after it is deleted\n4. Warning and informational modals show when expected and make sense\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eMy device page\u003c/td\u003e\u003ctd\u003eVerify the end user's my device page loads successfully.\u003c/td\u003e\u003ctd\u003e\n\n1. Clicking the Fleet desktop item, then \"My device\" successfully loads the my device page.\n2. The \"My device\" page is populated correctly and as expected. \n3. Styling and padding appears correct.\n \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eScripts\u003c/td\u003e\u003ctd\u003eVerify script library and execution\u003c/td\u003e\u003ctd\u003e\n\n1. Verify able to run a script on all host types from CLI.\n2. Verify scripts library upload/download/delete.\n3. From Host details (macOS, Windows, \u0026 Linux) run a script that should PASS, verify.\n4. From Host details (macOS, Windows, \u0026 Linux) run a script that should FAIL, verify.\n5. Verify UI loading state and statuses for scripts.\n8. Disable scripts globally and verify unable to run.\n9. Verify scripts display correctly in Activity feed.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eSoftware\u003c/td\u003e\u003ctd\u003eVerify software library and install / download\u003c/td\u003e\u003ctd\u003e\n\n1. Verify software library upload/download/delete.\n2. From Host details (macOS, Windows, \u0026 Linux) run an install that should PASS, verify.\n3. From My Device (macOS, Windows, \u0026 Linux) software tab should have self-service items available, verify.\n4. Verify UI loading state and statuses for installing software.\n7. Verify software installs display correctly in Activity feed.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\n\u003ctr\u003e\u003ctd\u003eMigration Test\u003c/td\u003e\u003ctd\u003eVerify Fleet can migrate to the next version with no issues.\u003c/td\u003e\u003ctd\u003e\n\nUsing the github action https://github.com/fleetdm/fleet/actions/workflows/db-upgrade-test.yml\n1. Using the most recent stable version of Fleet and `main`, click `Run workflow`\n2. Enter the Docker tag of Fleet starting version, e.g. 'v4.64.2'\n3. Enter the Docker tag of Fleet version to upgrade to, e.g. 'rc-minor-fleet-v4.65.0'\n4. Click `Run workflow`.\n5. Action should complete successfully.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003c/table\u003e\n\n### All Product Groups\n\u003ctable\u003e\n \u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eRelease blockers\u003c/td\u003e\u003ctd\u003eVerify there are no outstanding release blocking tickets.\u003c/td\u003e\u003ctd\u003e\n  \n1. Check [this](https://github.com/fleetdm/fleet/labels/~release%20blocker) filter to view all open `~release blocker` tickets.\n2. If any are found raise an alarm in the `#help-engineering` and `#g-mdm` (or `#g-endpoint-ops`)  channels.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\n\u003ctr\u003e\u003ctd\u003eLoad tests - minor releases only unless otherwise specified\u003c/td\u003e\u003ctd\u003eVerify all load test metrics are within acceptable range on final build of RC.\u003c/td\u003e\u003ctd\u003e\n  \n1. Check [this Google doc](https://docs.google.com/document/d/1V6QtFzcGDsLnn2PIvGin74DAxdAN_3likjxSssOMMQI/edit?tab=t.0#heading=h.15acjob4ji20) to review load test key metrics and checks.\n2. After all expected changes have been merged to the RC branch, two load tests will need to be run - a new instance with no data, and a migrated instance.\n3. For the new instance with no data, set up a load test environment using the RC branch and allow it at least 24hrs of run time.\n4. For the migrated instance, set up a load test environment on the previous minor release branch. Once the environment has been set up and stabilized, follow the instructions in [Deploying code changes to fleet](https://github.com/fleetdm/fleet/blob/main/infrastructure/loadtesting/terraform/readme.md#deploying-code-changes-to-fleet) to migrate to the RC branch. Monitor the metrics post-migration to determine if any performance issues arise.\n5. Record metrics in [this spreadsheet](https://docs.google.com/spreadsheets/d/1FOF0ykFVoZ7DJSTfrveip0olfyRQsY9oT1uXCCZmuKc/edit?usp=drive_link) for the two load test runs. \n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e \n\u003c/table\u003e\n\n### Notes\n\nIssues found new to this version:\n\nIssues found that reproduce in last stable version: \n\nWhat has not been tested:\n\nInclude any notes on whether issues should block release or not as needed:\n\n\u003cbr\u003e\n\u003cbr\u003e\n\n"
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgc-TB0",
        "issueNumber": 31274,
        "changeType": "modified"
      },
      {
        "content": {
          "body": "**Fleet version**: 4.71.0\n\n**Web browser and operating system**: Safari\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\nWhen going to All teams \u003e Software, admins are faced with a `Something's gone wrong` message. Going to other teams works as expected. This is currently happening in a prospect environment. Credentials to the environment and underlying infrastructure (Render) are available in 1Password. Reach out to @allenhouchins for more info.\n\n### 🛠️ To fix\n\u003c!-- Add the expected fix here. If you're not sure, leave this blank for product to specify.  --\u003e\nTBD\n\nProduct designer: _________________________\u003c!-- Who is the product designer to contact if folks have questions about this fix? --\u003e\n\n### 🧑‍💻  Steps to reproduce\n\u003c!-- Provide step-by-step actions of how to recreate this bug in a clean install of Fleet. (This helps others understand and fix it more quickly.) --\u003e\n1. Login to prospect environment\n2. Navigate to All teams \u003eSoftware tabe\n3. Observe error\n\n### 🕯️ More info _(optional)_\n\u003c!-- Add any additional details you think could be relevant to solving or reproducing the bug (e.g., \"this does not reproduce when...\") --\u003e\n```\n2025/08/04 16:55:04 http: panic serving 10.201.89.3:48130: runtime error: invalid memory address or nil pointer dereference\ngoroutine 4729 [running]:\nnet/http.(*conn).serve.func1()\n\tnet/http/server.go:1947 +0xbe\npanic({0x29fe500?, 0x4bfeb30?})\n\truntime/panic.go:792 +0x132\ngithub.com/fleetdm/fleet/v4/server/datastore/mysql.(*Datastore).ListSoftwareTitles(0xc000583500, {0x379a770, 0xc00155eae0}, {{0x0, 0x14, {0xc0009b6688, 0xb}, 0x1, {0x0, 0x0}, ...}, ...}, ...)\n\tgithub.com/fleetdm/fleet/v4/server/datastore/mysql/software_titles.go:223 +0xecb\ngithub.com/fleetdm/fleet/v4/server/service.(*Service).ListSoftwareTitles(0xc0007b8608, {0x379a770, 0xc00155eae0}, {{0x0, 0x14, {0xc0009b6688, 0xb}, 0x1, {0x0, 0x0}, ...}, ...})\n\tgithub.com/fleetdm/fleet/v4/server/service/software_titles.go:101 +0x2b6\ngithub.com/fleetdm/fleet/v4/server/service.listSoftwareTitlesEndpoint({0x379a770?, 0xc00155eae0?}, {0x2826300?, 0xc00180d0e0?}, {0x37da088?, 0xc000f945d0?})\n\tgithub.com/fleetdm/fleet/v4/server/service/software_titles.go:35 +0xc3\ngithub.com/fleetdm/fleet/v4/server/service.(*endpointer).CallHandlerFunc(0xc0012d7ef0?, 0xc001aaae70?, {0x379a770?, 0xc00155eae0?}, {0x2826300?, 0xc00180d0e0?}, {0x2e78ae0?, 0xc000f945d0?})\n\tgithub.com/fleetdm/fleet/v4/server/service/endpoint_utils.go:99 +0xd5\ngithub.com/fleetdm/fleet/v4/server/service/middleware/endpoint_utils.(*CommonEndpointer[...]).makeEndpoint.func1({0x2826300, 0xc00180d0e0})\n\tgithub.com/fleetdm/fleet/v4/server/service/middleware/endpoint_utils/endpoint_utils.go:566 +0x76\ngithub.com/fleetdm/fleet/v4/server/service/middleware/auth.AuthenticatedUser.func1({0x379a770, 0xc00155eae0}, {0x2826300, 0xc00180d0e0})\n\tgithub.com/fleetdm/fleet/v4/server/service/middleware/auth/auth.go:40 +0xcd\ngithub.com/fleetdm/fleet/v4/server/service/middleware/auth.AuthenticatedUser.Logged.func2({0x379a770, 0xc00155eae0}, {0x2826300?, 0xc00180d0e0?})\n\tgithub.com/fleetdm/fleet/v4/server/service/middleware/log/log.go:15 +0x32\ngithub.com/fleetdm/fleet/v4/server/service/middleware/endpoint_utils.newServer.newServer.(*Middleware).AuthzCheck.func1.func2({0x379a770, 0xc00155e420}, {0x2826300, 0xc00180d0e0})\n\tgithub.com/fleetdm/fleet/v4/server/service/middleware/authzcheck/authzcheck.go:31 +0x7c\ngithub.com/go-kit/kit/transport/http.Server.ServeHTTP({0xc001013150, 0xc001099d00, 0x33b8200, {0xc001013170, 0x2, 0x2}, {0xc000ea4978, 0x3, 0x3}, 0x33b89d0, ...}, ...)\n\tgithub.com/go-kit/kit@v0.12.0/transport/http/server.go:121 +0x334\ngithub.com/prometheus/client_golang/prometheus/promhttp.InstrumentHandlerRequestSize.func2({0x7a703671a218?, 0xc001f1c550?}, 0xc0014fa140)\n\tgithub.com/prometheus/client_golang@v1.21.1/prometheus/promhttp/instrument_server.go:255 +0x7d\nnet/http.HandlerFunc.ServeHTTP(0x4c13f20?, {0x7a703671a218?, 0xc001f1c550?}, 0xc001f1c500?)\n\tnet/http/server.go:2294 +0x29\ngithub.com/prometheus/client_golang/prometheus/promhttp.InstrumentHandlerResponseSize.func1({0x7a703671a218?, 0xc001f1c500?}, 0xc0014fa140)\n\tgithub.com/prometheus/client_golang@v1.21.1/prometheus/promhttp/instrument_server.go:296 +0xcf\nnet/http.HandlerFunc.ServeHTTP(0x4c13ea0?, {0x7a703671a218?, 0xc001f1c500?}, 0xc000ea74e8?)\n\tnet/http/server.go:2294 +0x29\ngithub.com/prometheus/client_golang/prometheus/promhttp.InstrumentHandlerCounter.func1({0x3795ab8?, 0xc00195a8c0?}, 0xc0014fa140)\n\tgithub.com/prometheus/client_golang@v1.21.1/prometheus/promhttp/instrument_server.go:147 +0xc3\nnet/http.HandlerFunc.ServeHTTP(0x41d3de?, {0x3795ab8?, 0xc00195a8c0?}, 0x8000a81660?)\n\tnet/http/server.go:2294 +0x29\ngithub.com/prometheus/client_golang/prometheus/promhttp.InstrumentHandlerDuration.func2({0x3795ab8, 0xc00195a8c0}, 0xc0014fa140)\n\tgithub.com/prometheus/client_golang@v1.21.1/prometheus/promhttp/instrument_server.go:109 +0xc5\nnet/http.HandlerFunc.ServeHTTP(0x379a770?, {0x3795ab8?, 0xc00195a8c0?}, 0x375f458?)\n\tnet/http/server.go:2294 +0x29\ngithub.com/fleetdm/fleet/v4/server/service.publicIP.func1({0x3795ab8, 0xc00195a8c0}, 0xc0014fa000)\n\tgithub.com/fleetdm/fleet/v4/server/service/handler.go:136 +0x197\nnet/http.HandlerFunc.ServeHTTP(0xc0008b3e00?, {0x3795ab8?, 0xc00195a8c0?}, 0xc001041828?)\n\tnet/http/server.go:2294 +0x29\ngithub.com/gorilla/mux.(*Router).ServeHTTP(0xc000151080, {0x3795ab8, 0xc00195a8c0}, 0xc0008b3b80)\n\tgithub.com/gorilla/mux@v1.8.1/mux.go:212 +0x1e2\nmain.createServeCmd.func1.25({0x3795ab8, 0xc00195a8c0}, 0xc0008b3b80)\n\tgithub.com/fleetdm/fleet/v4/cmd/fleet/serve.go:1292 +0x127a\nnet/http.HandlerFunc.ServeHTTP(0xc0016e1b00?, {0x3795ab8?, 0xc00195a8c0?}, 0x7a707e34cf30?)\n\tnet/http/server.go:2294 +0x29\nnet/http.(*ServeMux).ServeHTTP(0x481dd2?, {0x3795ab8, 0xc00195a8c0}, 0xc0008b3b80)\n\tnet/http/server.go:2822 +0x1c4\nmain.createServeCmd.func1.(*Handler).Handler.53({0x3795ab8?, 0xc00195a8c0?}, 0x3?)\n\tgithub.com/fleetdm/fleet/v4/server/launcher/server.go:54 +0xa5\nnet/http.HandlerFunc.ServeHTTP(0x4783b9?, {0x3795ab8?, 0xc00195a8c0?}, 0xc001041b70?)\n\tnet/http/server.go:2294 +0x29\nnet/http.serverHandler.ServeHTTP({0xc0012d75c0?}, {0x3795ab8?, 0xc00195a8c0?}, 0x6?)\n\tnet/http/server.go:3301 +0x8e\nnet/http.(*conn).serve(0xc001f1b3b0, {0x379a770, 0xc0017ea360})\n\tnet/http/server.go:2102 +0x625\ncreated by net/http.(*Server).Serve in goroutine 3438\n\tnet/http/server.go:3454 +0x485\n2025/08/04 16:55:05 http: panic serving 10.201.29.133:35094: runtime error: invalid memory address or nil pointer dereference\ngoroutine 4772 [running]:\nnet/http.(*conn).serve.func1()\n\tnet/http/server.go:1947 +0xbe\npanic({0x29fe500?, 0x4bfeb30?})\n\truntime/panic.go:792 +0x132\ngithub.com/fleetdm/fleet/v4/server/datastore/mysql.(*Datastore).ListSoftwareTitles(0xc000583500, {0x379a770, 0xc0016458f0}, {{0x0, 0x14, {0xc0009b6718, 0xb}, 0x1, {0x0, 0x0}, ...}, ...}, ...)\n\tgithub.com/fleetdm/fleet/v4/server/datastore/mysql/software_titles.go:223 +0xecb\ngithub.com/fleetdm/fleet/v4/server/service.(*Service).ListSoftwareTitles(0xc0007b8608, {0x379a770, 0xc0016458f0}, {{0x0, 0x14, {0xc0009b6718, 0xb}, 0x1, {0x0, 0x0}, ...}, ...})\n\tgithub.com/fleetdm/fleet/v4/server/service/software_titles.go:101 +0x2b6\ngithub.com/fleetdm/fleet/v4/server/service.listSoftwareTitlesEndpoint({0x379a770?, 0xc0016458f0?}, {0x2826300?, 0xc000ef34a0?}, {0x37da088?, 0xc000f945d0?})\n\tgithub.com/fleetdm/fleet/v4/server/service/software_titles.go:35 +0xc3\ngithub.com/fleetdm/fleet/v4/server/service.(*endpointer).CallHandlerFunc(0xc0015f9bc0?, 0xc001aaae70?, {0x379a770?, 0xc0016458f0?}, {0x2826300?, 0xc000ef34a0?}, {0x2e78ae0?, 0xc000f945d0?})\n\tgithub.com/fleetdm/fleet/v4/server/service/endpoint_utils.go:99 +0xd5\ngithub.com/fleetdm/fleet/v4/server/service/middleware/endpoint_utils.(*CommonEndpointer[...]).makeEndpoint.func1({0x2826300, 0xc000ef34a0})\n\tgithub.com/fleetdm/fleet/v4/server/service/middleware/endpoint_utils/endpoint_utils.go:566 +0x76\ngithub.com/fleetdm/fleet/v4/server/service/middleware/auth.AuthenticatedUser.func1({0x379a770, 0xc0016458f0}, {0x2826300, 0xc000ef34a0})\n\tgithub.com/fleetdm/fleet/v4/server/service/middleware/auth/auth.go:40 +0xcd\ngithub.com/fleetdm/fleet/v4/server/service/middleware/auth.AuthenticatedUser.Logged.func2({0x379a770, 0xc0016458f0}, {0x2826300?, 0xc000ef34a0?})\n\tgithub.com/fleetdm/fleet/v4/server/service/middleware/log/log.go:15 +0x32\ngithub.com/fleetdm/fleet/v4/server/service/middleware/endpoint_utils.newServer.newServer.(*Middleware).AuthzCheck.func1.func2({0x379a770, 0xc0016454d0}, {0x2826300, 0xc000ef34a0})\n\tgithub.com/fleetdm/fleet/v4/server/service/middleware/authzcheck/authzcheck.go:31 +0x7c\ngithub.com/go-kit/kit/transport/http.Server.ServeHTTP({0xc001013150, 0xc001099d00, 0x33b8200, {0xc001013170, 0x2, 0x2}, {0xc000ea4978, 0x3, 0x3}, 0x33b89d0, ...}, ...)\n\tgithub.com/go-kit/kit@v0.12.0/transport/http/server.go:121 +0x334\ngithub.com/prometheus/client_golang/prometheus/promhttp.InstrumentHandlerRequestSize.func2({0x7a703671a218?, 0xc001f1d5e0?}, 0xc0014fbcc0)\n\tgithub.com/prometheus/client_golang@v1.21.1/prometheus/promhttp/instrument_server.go:255 +0x7d\nnet/http.HandlerFunc.ServeHTTP(0x4c13f20?, {0x7a703671a218?, 0xc001f1d5e0?}, 0xc001f1d590?)\n\tnet/http/server.go:2294 +0x29\ngithub.com/prometheus/client_golang/prometheus/promhttp.InstrumentHandlerResponseSize.func1({0x7a703671a218?, 0xc001f1d590?}, 0xc0014fbcc0)\n\tgithub.com/prometheus/client_golang@v1.21.1/prometheus/promhttp/instrument_server.go:296 +0xcf\nnet/http.HandlerFunc.ServeHTTP(0x4c13ea0?, {0x7a703671a218?, 0xc001f1d590?}, 0xc0017414e8?)\n\tnet/http/server.go:2294 +0x29\ngithub.com/prometheus/client_golang/prometheus/promhttp.InstrumentHandlerCounter.func1({0x3795ab8?, 0xc00195ab60?}, 0xc0014fbcc0)\n\tgithub.com/prometheus/client_golang@v1.21.1/prometheus/promhttp/instrument_server.go:147 +0xc3\nnet/http.HandlerFunc.ServeHTTP(0xc0007af4a0?, {0x3795ab8?, 0xc00195ab60?}, 0xc001041660?)\n\tnet/http/server.go:2294 +0x29\ngithub.com/prometheus/client_golang/prometheus/promhttp.InstrumentHandlerDuration.func2({0x3795ab8, 0xc00195ab60}, 0xc0014fbcc0)\n\tgithub.com/prometheus/client_golang@v1.21.1/prometheus/promhttp/instrument_server.go:109 +0xc5\nnet/http.HandlerFunc.ServeHTTP(0x379a770?, {0x3795ab8?, 0xc00195ab60?}, 0x375f458?)\n\tnet/http/server.go:2294 +0x29\ngithub.com/fleetdm/fleet/v4/server/service.publicIP.func1({0x3795ab8, 0xc00195ab60}, 0xc0014fbb80)\n\tgithub.com/fleetdm/fleet/v4/server/service/handler.go:136 +0x197\nnet/http.HandlerFunc.ServeHTTP(0xc0014fba40?, {0x3795ab8?, 0xc00195ab60?}, 0xc001041828?)\n\tnet/http/server.go:2294 +0x29\ngithub.com/gorilla/mux.(*Router).ServeHTTP(0xc000151080, {0x3795ab8, 0xc00195ab60}, 0xc0014fb7c0)\n\tgithub.com/gorilla/mux@v1.8.1/mux.go:212 +0x1e2\nmain.createServeCmd.func1.25({0x3795ab8, 0xc00195ab60}, 0xc0014fb7c0)\n\tgithub.com/fleetdm/fleet/v4/cmd/fleet/serve.go:1292 +0x127a\nnet/http.HandlerFunc.ServeHTTP(0xc0016e1b00?, {0x3795ab8?, 0xc00195ab60?}, 0x7a707e34cf30?)\n\tnet/http/server.go:2294 +0x29\nnet/http.(*ServeMux).ServeHTTP(0x481dd2?, {0x3795ab8, 0xc00195ab60}, 0xc0014fb7c0)\n\tnet/http/server.go:2822 +0x1c4\nmain.createServeCmd.func1.(*Handler).Handler.53({0x3795ab8?, 0xc00195ab60?}, 0x3?)\n\tgithub.com/fleetdm/fleet/v4/server/launcher/server.go:54 +0xa5\nnet/http.HandlerFunc.ServeHTTP(0x4783b9?, {0x3795ab8?, 0xc00195ab60?}, 0xc001041b70?)\n\tnet/http/server.go:2294 +0x29\nnet/http.serverHandler.ServeHTTP({0xc0015f8d50?}, {0x3795ab8?, 0xc00195ab60?}, 0x6?)\n\tnet/http/server.go:3301 +0x8e\nnet/http.(*conn).serve(0xc001f5c240, {0x379a770, 0xc0017ea360})\n\tnet/http/server.go:2102 +0x625\ncreated by net/http.(*Server).Serve in goroutine 3438\n\tnet/http/server.go:3454 +0x485\nlevel=info ts=2025-08-04T16:55:07.158975398Z cron=integrations schedule=integrations instanceID=\"D8eS+5MTcDiMHwyVik9qG0Dc0vJxRD8FjZA4umY3cMUXgeYIrr8UoohkkN/eVogV4Vi4SdwJFzAaOQyDxXNZog==\" status=pending\nlevel=info ts=2025-08-04T16:55:07.161575996Z cron=integrations msg=\"no cooldowns to process\"\nlevel=info ts=2025-08-04T16:55:07.168810078Z cron=integrations schedule=integrations instanceID=\"D8eS+5MTcDiMHwyVik9qG0Dc0vJxRD8FjZA4umY3cMUXgeYIrr8UoohkkN/eVogV4Vi4SdwJFzAaOQyDxXNZog==\" status=completed\nlevel=info ts=2025-08-04T16:55:08.141082597Z cron=apple_mdm_dep_profile_assigner component=nanodep-syncer schedule=apple_mdm_dep_profile_assigner instanceID=\"D8eS+5MTcDiMHwyVik9qG0Dc0vJxRD8FjZA4umY3cMUXgeYIrr8UoohkkN/eVogV4Vi4SdwJFzAaOQyDxXNZog==\" status=pending\nlevel=info ts=2025-08-04T16:55:08.148616975Z cron=apple_mdm_dep_profile_assigner component=nanodep-syncer schedule=apple_mdm_dep_profile_assigner instanceID=\"D8eS+5MTcDiMHwyVik9qG0Dc0vJxRD8FjZA4umY3cMUXgeYIrr8UoohkkN/eVogV4Vi4SdwJFzAaOQyDxXNZog==\" status=completed\nlevel=info ts=2025-08-04T16:55:13.143901869Z cron=apple_mdm_apns_pusher schedule=apple_mdm_apns_pusher instanceID=\"D8eS+5MTcDiMHwyVik9qG0Dc0vJxRD8FjZA4umY3cMUXgeYIrr8UoohkkN/eVogV4Vi4SdwJFzAaOQyDxXNZog==\" status=pending\nlevel=info ts=2025-08-04T16:55:13.15214902Z cron=apple_mdm_apns_pusher schedule=apple_mdm_apns_pusher instanceID=\"D8eS+5MTcDiMHwyVik9qG0Dc0vJxRD8FjZA4umY3cMUXgeYIrr8UoohkkN/eVogV4Vi4SdwJFzAaOQyDxXNZog==\" status=completed\n2025/08/04 16:55:21 http: panic serving 10.201.166.129:41120: runtime error: invalid memory address or nil pointer dereference\ngoroutine 4776 [running]:\nnet/http.(*conn).serve.func1()\n\tnet/http/server.go:1947 +0xbe\npanic({0x29fe500?, 0x4bfeb30?})\n\truntime/panic.go:792 +0x132\ngithub.com/fleetdm/fleet/v4/server/datastore/mysql.(*Datastore).ListSoftwareTitles(0xc000583500, {0x379a770, 0xc0017f4ba0}, {{0x0, 0x14, {0xc0009b67a8, 0xb}, 0x1, {0x0, 0x0}, ...}, ...}, ...)\n\tgithub.com/fleetdm/fleet/v4/server/datastore/mysql/software_titles.go:223 +0xecb\ngithub.com/fleetdm/fleet/v4/server/service.(*Service).ListSoftwareTitles(0xc0007b8608, {0x379a770, 0xc0017f4ba0}, {{0x0, 0x14, {0xc0009b67a8, 0xb}, 0x1, {0x0, 0x0}, ...}, ...})\n\tgithub.com/fleetdm/fleet/v4/server/service/software_titles.go:101 +0x2b6\ngithub.com/fleetdm/fleet/v4/server/service.listSoftwareTitlesEndpoint({0x379a770?, 0xc0017f4ba0?}, {0x2826300?, 0xc00123efa0?}, {0x37da088?, 0xc000f945d0?})\n\tgithub.com/fleetdm/fleet/v4/server/service/software_titles.go:35 +0xc3\ngithub.com/fleetdm/fleet/v4/server/service.(*endpointer).CallHandlerFunc(0xc001984ae0?, 0xc001f6ee70?, {0x379a770?, 0xc0017f4ba0?}, {0x2826300?, 0xc00123efa0?}, {0x2e78ae0?, 0xc000f945d0?})\n\tgithub.com/fleetdm/fleet/v4/server/service/endpoint_utils.go:99 +0xd5\ngithub.com/fleetdm/fleet/v4/server/service/middleware/endpoint_utils.(*CommonEndpointer[...]).makeEndpoint.func1({0x2826300, 0xc00123efa0})\n\tgithub.com/fleetdm/fleet/v4/server/service/middleware/endpoint_utils/endpoint_utils.go:566 +0x76\ngithub.com/fleetdm/fleet/v4/server/service/middleware/auth.AuthenticatedUser.func1({0x379a770, 0xc0017f4ba0}, {0x2826300, 0xc00123efa0})\n\tgithub.com/fleetdm/fleet/v4/server/service/middleware/auth/auth.go:40 +0xcd\ngithub.com/fleetdm/fleet/v4/server/service/middleware/auth.AuthenticatedUser.Logged.func2({0x379a770, 0xc0017f4ba0}, {0x2826300?, 0xc00123efa0?})\n\tgithub.com/fleetdm/fleet/v4/server/service/middleware/log/log.go:15 +0x32\ngithub.com/fleetdm/fleet/v4/server/service/middleware/endpoint_utils.newServer.newServer.(*Middleware).AuthzCheck.func1.func2({0x379a770, 0xc0017f4720}, {0x2826300, 0xc00123efa0})\n\tgithub.com/fleetdm/fleet/v4/server/service/middleware/authzcheck/authzcheck.go:31 +0x7c\ngithub.com/go-kit/kit/transport/http.Server.ServeHTTP({0xc001013150, 0xc001099d00, 0x33b8200, {0xc001013170, 0x2, 0x2}, {0xc000ea4978, 0x3, 0x3}, 0x33b89d0, ...}, ...)\n\tgithub.com/go-kit/kit@v0.12.0/transport/http/server.go:121 +0x334\ngithub.com/prometheus/client_golang/prometheus/promhttp.InstrumentHandlerRequestSize.func2({0x7a703671a218?, 0xc001f1dcc0?}, 0xc001314b40)\n\tgithub.com/prometheus/client_golang@v1.21.1/prometheus/promhttp/instrument_server.go:255 +0x7d\nnet/http.HandlerFunc.ServeHTTP(0x4c13f20?, {0x7a703671a218?, 0xc001f1dcc0?}, 0xc001f1dc70?)\n\tnet/http/server.go:2294 +0x29\ngithub.com/prometheus/client_golang/prometheus/promhttp.InstrumentHandlerResponseSize.func1({0x7a703671a218?, 0xc001f1dc70?}, 0xc001314b40)\n\tgithub.com/prometheus/client_golang@v1.21.1/prometheus/promhttp/instrument_server.go:296 +0xcf\nnet/http.HandlerFunc.ServeHTTP(0x4c13ea0?, {0x7a703671a218?, 0xc001f1dc70?}, 0xc0014ab4e8?)\n\tnet/http/server.go:2294 +0x29\ngithub.com/prometheus/client_golang/prometheus/promhttp.InstrumentHandlerCounter.func1({0x3795ab8?, 0xc00195ac40?}, 0xc001314b40)\n\tgithub.com/prometheus/client_golang@v1.21.1/prometheus/promhttp/instrument_server.go:147 +0xc3\nnet/http.HandlerFunc.ServeHTTP(0xc0007af4a0?, {0x3795ab8?, 0xc00195ac40?}, 0xc001041660?)\n\tnet/http/server.go:2294 +0x29\ngithub.com/prometheus/client_golang/prometheus/promhttp.InstrumentHandlerDuration.func2({0x3795ab8, 0xc00195ac40}, 0xc001314b40)\n\tgithub.com/prometheus/client_golang@v1.21.1/prometheus/promhttp/instrument_server.go:109 +0xc5\nnet/http.HandlerFunc.ServeHTTP(0x379a770?, {0x3795ab8?, 0xc00195ac40?}, 0x375f458?)\n\tnet/http/server.go:2294 +0x29\ngithub.com/fleetdm/fleet/v4/server/service.publicIP.func1({0x3795ab8, 0xc00195ac40}, 0xc001314a00)\n\tgithub.com/fleetdm/fleet/v4/server/service/handler.go:136 +0x197\nnet/http.HandlerFunc.ServeHTTP(0xc0013148c0?, {0x3795ab8?, 0xc00195ac40?}, 0xc001041828?)\n\tnet/http/server.go:2294 +0x29\ngithub.com/gorilla/mux.(*Router).ServeHTTP(0xc000151080, {0x3795ab8, 0xc00195ac40}, 0xc001314780)\n\tgithub.com/gorilla/mux@v1.8.1/mux.go:212 +0x1e2\nmain.createServeCmd.func1.25({0x3795ab8, 0xc00195ac40}, 0xc001314780)\n\tgithub.com/fleetdm/fleet/v4/cmd/fleet/serve.go:1292 +0x127a\nnet/http.HandlerFunc.ServeHTTP(0xc0016e1b00?, {0x3795ab8?, 0xc00195ac40?}, 0x7a707e34cf30?)\n\tnet/http/server.go:2294 +0x29\nnet/http.(*ServeMux).ServeHTTP(0x481dd2?, {0x3795ab8, 0xc00195ac40}, 0xc001314780)\n\tnet/http/server.go:2822 +0x1c4\nmain.createServeCmd.func1.(*Handler).Handler.53({0x3795ab8?, 0xc00195ac40?}, 0x3?)\n\tgithub.com/fleetdm/fleet/v4/server/launcher/server.go:54 +0xa5\nnet/http.HandlerFunc.ServeHTTP(0x4783b9?, {0x3795ab8?, 0xc00195ac40?}, 0xc001041b70?)\n\tnet/http/server.go:2294 +0x29\nnet/http.serverHandler.ServeHTTP({0xc001984660?}, {0x3795ab8?, 0xc00195ac40?}, 0x6?)\n\tnet/http/server.go:3301 +0x8e\nnet/http.(*conn).serve(0xc001f5c510, {0x379a770, 0xc0017ea360})\n\tnet/http/server.go:2102 +0x625\ncreated by net/http.(*Server).Serve in goroutine 3438\n\tnet/http/server.go:3454 +0x485\nlevel=info ts=2025-08-04T16:55:29.398463856Z cron=mdm_windows_profile_manager schedule=mdm_windows_profile_manager instanceID=\"D8eS+5MTcDiMHwyVik9qG0Dc0vJxRD8FjZA4umY3cMUXgeYIrr8UoohkkN/eVogV4Vi4SdwJFzAaOQyDxXNZog==\" status=pending\nlevel=info ts=2025-08-04T16:55:29.410754981Z cron=mdm_windows_profile_manager schedule=mdm_windows_profile_manager instanceID=\"D8eS+5MTcDiMHwyVik9qG0Dc0vJxRD8FjZA4umY3cMUXgeYIrr8UoohkkN/eVogV4Vi4SdwJFzAaOQyDxXNZog==\" status=completed\nlevel=info ts=2025-08-04T16:55:30.408909884Z cron=mdm_apple_profile_manager schedule=mdm_apple_profile_manager instanceID=\"D8eS+5MTcDiMHwyVik9qG0Dc0vJxRD8FjZA4umY3cMUXgeYIrr8UoohkkN/eVogV4Vi4SdwJFzAaOQyDxXNZog==\" status=pending\nlevel=info ts=2025-08-04T16:55:30.426646749Z cron=mdm_apple_profile_manager msg=\"no hosts with changed declarations\"\nlevel=info ts=2025-08-04T16:55:30.433199659Z cron=mdm_apple_profile_manager schedule=mdm_apple_profile_manager instanceID=\"D8eS+5MTcDiMHwyVik9qG0Dc0vJxRD8FjZA4umY3cMUXgeYIrr8UoohkkN/eVogV4Vi4SdwJFzAaOQyDxXNZog==\" status=completed\n```\n\n# QA notes\n\nHow to reproduce:\n1. Upload an automatic software installer X to \"No team\".\n2. Wait for software to be installed X on a host in \"No team\".\n3. Run vulnerability scanning (to update host counts).\n4. Go to `Software`\u003e `All teams` and use the filter to find the software X.\n5. \"Something's gone wrong\" error (and a panic in the server logs)"
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgdUxWw",
        "milestone": {
          "dueOn": "2025-08-29T00:00:00Z",
          "title": "4.73.0"
        },
        "issueNumber": 31571,
        "changeType": "modified"
      },
      {
        "assignees": [
          "ksykulev"
        ],
        "content": {
          "body": " Summary\r\n\r\n  • Allow custom CISA vulnerability data source URL to work around blocked requests\r\n  • Updates vulnerability sync logic to use configurable CISA endpoint\r\n  • Enables organizations to use CISA mirrors when direct access is blocked\r\n\r\n## Testing\r\n\r\n- [x] Added/updated automated tests\r\n- [x] QA'd all new/changed functionality manually",
          "number": 31728,
          "repository": "fleetdm/fleet",
          "title": "feat: allow different cisa url to be provided",
          "type": "PullRequest",
          "url": "https://github.com/fleetdm/fleet/pull/31728"
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgdcmxA",
        "repository": "https://github.com/fleetdm/fleet",
        "status": "Done",
        "title": "feat: allow different cisa url to be provided",
        "issueNumber": 31728,
        "changeType": "added"
      }
    ]
  },
  {
    "timestamp": "2025-08-09T07:04:56.67408612Z",
    "items": [
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdXQh4",
        "status": "🐣 In progress",
        "comments": [
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "\u003cimg width=\"774\" height=\"247\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/0fe51c60-9700-4a6b-bfb7-4de9e00d5d0e\" /\u003e"
          },
          {
            "author": {
              "login": "AndreyKizimenko"
            },
            "body": "Moving to in-progress since this hasn't been fully resolved. @RachelElysia is aware and will be looking into it on Monday\n\nSlack convo:  https://fleetdm.slack.com/archives/C086V2QK76X/p1754680621910399"
          }
        ],
        "issueNumber": 31652,
        "changeType": "modified"
      },
      {
        "content": {
          "body": "\n# Goal: easy-to-follow test steps for checking a release manually\n\n# Important reference data\n\n1. [fleetctl preview setup](https://fleetdm.com/fleetctl-preview)\n2. [permissions documentation](https://fleetdm.com/docs/using-fleet/permissions) \n3. premium tests require license key (needs renewal) `fleetctl preview --license-key=eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJGbGVldCBEZXZpY2UgTWFuYWdlbWVudCBJbmMuIiwiZXhwIjoxNjQwOTk1MjAwLCJzdWIiOiJkZXZlbG9wbWVudCIsImRldmljZXMiOjEwMCwibm90ZSI6ImZvciBkZXZlbG9wbWVudCBvbmx5IiwidGllciI6ImJhc2ljIiwiaWF0IjoxNjIyNDI2NTg2fQ.WmZ0kG4seW3IrNvULCHUPBSfFdqj38A_eiXdV_DFunMHechjHbkwtfkf1J6JQJoDyqn8raXpgbdhafDwv3rmDw`\n4. premium tests require license key (active - Expires Sunday, January 1, 2023 12:00:00 AM) `fleetctl preview --license-key=eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJGbGVldCBEZXZpY2UgTWFuYWdlbWVudCBJbmMuIiwiZXhwIjoxNjcyNTMxMjAwLCJzdWIiOiJGbGVldCBEZXZpY2UgTWFuYWdlbWVudCIsImRldmljZXMiOjEwMCwibm90ZSI6ImZvciBkZXZlbG9wbWVudCBvbmx5IiwidGllciI6InByZW1pdW0iLCJpYXQiOjE2NDI1MjIxODF9.EGHQjIzM73YyMbnCruswzg360DEYCsDi9uz48YcDwQHq90BabGT5PIXRiculw79emGj5sk2aKgccTd2hU5J7Jw`\n\n# Smoke Tests\nSmoke tests are limited to core functionality and serve as a pre-release final review. If smoke tests are failing, a release cannot proceed.\n\n## Fleet core:\n\n**Fleet version** (Head to the \"My account\" page in the Fleet UI or run `fleetctl version`):\n\n**Web browser** _(e.g. Chrome 88.0.4324)_: \n\n### Prerequisites\n\n1. `fleetctl preview` is set up and running the desired test version using [`--tag` parameters.](https://fleetdm.com/handbook/engineering#run-fleet-locally-for-qa-purposes)\n2. Unless you are explicitly testing older browser versions, browser is up to date.\n3. Certificate \u0026 flagfile are in place to create new host.\n4. In your browser, clear local storage using devtools.\n\n### Orchestration\n\u003ctable\u003e\n\u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eUpdate flow\u003c/td\u003e\u003ctd\u003e\n\n1. remove all fleet processes/agents/etc using `fleetctl preview reset` for a clean slate\n2. run `fleetctl preview` with no tag for latest stable\n3. create a host/query to later confirm upgrade with\n4. STOP fleet-preview-server instances in containers/apps on Docker\n5. run `fleetctl preview` with appropriate testing tag \u003c/td\u003e\u003ctd\u003eAll previously created hosts/queries are verified to still exist\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eLogin flow\u003c/td\u003e\u003ctd\u003e\n\n1. navigate to the login page and attempt to login with both valid and invalid credentials to verify some combination of expected results.\n2. navigate to the login page and attempt to login with both valid and invalid sso credentials to verify expected results.\n\u003c/td\u003e\u003ctd\u003e\n\n1. text fields prompt when blank\n2. correct error message is \"authentication failed\"\n3. forget password link prompts for email\n4. valid credentials result in a successful login.\n5. valid sso credentials result in a successful login\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003ePacks flow\u003c/td\u003e\u003ctd\u003eVerify management, operation, and logging of [\"2017 packs\"](https://fleetdm.com/handbook/company/why-this-way#why-does-fleet-support-query-packs).\u003c/td\u003e\u003ctd\u003e\n\n1. Packs successfully run on host machines after migrations \n2. New Packs can be created\n3. Packs can be edited and deleted\n4. Packs results information is logged\n \n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eLog destination flow\u003c/td\u003e\u003ctd\u003eVerify log destination for software, query, policy, and packs.\u003c/td\u003e\u003ctd\u003e\n\n1. Software, query, policy, and packs logs are successfully sent to external log destinations\n2. Software, query, policy, and packs logs are successfully sent to Filesystem log destinations\n \n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eOS settings\u003c/td\u003e\u003ctd\u003eVerify OS settings functionality\u003c/td\u003e\u003ctd\u003e\n\n1. Verify able to configure Disk encryption (macOS, Windows, \u0026 Linux).\n2. Verify host enrolled with Disk encryption enforced successfully encrypts.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003c/table\u003e\n\n### MDM\n\u003ctable\u003e\n\u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eMDM enrollment flow\u003c/td\u003e\u003ctd\u003eVerify MDM enrollments, run MDM commands\u003c/td\u003e\u003ctd\u003e\n  \n1. Erase an ADE-eligible macOS host and verify able to complete automated enrollment flow.\n2. With Windows MDM turned On, enroll a Windows host and verify MDM is turned On for the host.\n3. Verify able to run MDM commands on both macOS and Windows hosts from the CLI.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eMDM migration flow\u003c/td\u003e\u003ctd\u003eVerify MDM migration for ADE and non-ADE hosts\u003c/td\u003e\u003ctd\u003e\n  \n1. Turn off MDM on an ADE-eligible macOS host and verify that the native, \"Device Enrollment\" macOS notification appears.\n2. On the My device page, follow the \"Turn on MDM\" instructions and verify that MDM is turned on.\n3. Turn off MDM on a non ADE-eligible macOS host.\n4. On the My device page, follow the \"Turn on MDM\" instructions and verify that MDM is turned on.\n5. Verify Windows host migrates from 3rd party MDM to Fleet when automatic migration is turned on.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eOS settings\u003c/td\u003e\u003ctd\u003eVerify OS settings functionality\u003c/td\u003e\u003ctd\u003e\n\n1. Verify Profiles upload/download/delete (macOS \u0026 Windows).\n2. Verify Profiles are delivered to host and applied. \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eSetup experience\u003c/td\u003e\u003ctd\u003eVerify macOS Setup experience\u003c/td\u003e\u003ctd\u003e\n\n1. Configure End user authentication.\n3. Upload a Bootstrap package.\n4. Add software (FMA, VPP, \u0026 Custom pkg)\n5. Add a script\n6. Enroll an ADE-eligible macOS host and verify successful authentication.\n7. Verify Bootstrap package is delivered.\n8. Verify SwiftDialogue window displays.\n9. Verify software installs and script runs.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eOS updates\u003c/td\u003e\u003ctd\u003eVerify OS updates flow\u003c/td\u003e\u003ctd\u003e\n\n1. Configure OS updates (macOS \u0026 Windows).\n2. Verify on-device that Nudge prompt appears (macOS 13).\n3. Verify enforce minimumOS occurs during enrollment (macOS 14+).\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eiOS/iPadOS\u003c/td\u003e\u003ctd\u003eVerify enrollment, profiles, \u0026 software installs\u003c/td\u003e\u003ctd\u003e\n\n1. Verify ADE enrollment.\n2. Verify OTA enrollment.\n3. Verify Profiles are delivered to host and applied.\n4. Verify VPP apps install \u0026 display correctly in Activity feed.\n5. Verify `Turn Off MDM` for BYOD \u0026 ADE hosts.\n \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\n\u003ctr\u003e\u003ctd\u003eLock \u0026 Wipe\u003c/td\u003e\u003ctd\u003eVerify hosts can be locked \u0026 wiped\u003c/td\u003e\u003ctd\u003e\n\n1. Verify locking a host from the Fleet UI (macOS, Windows, \u0026 Linux)\n2. Verify unlocking a host from the Fleet UI (macOS, Windows, \u0026 Linux)\n3. Verify wiping a host from the Fleet UI (macOS, Windows, \u0026 Linux)\n4. Verify wiping and locking hosts using `fleetctl` (macOS, Windows, \u0026 Linux)\n \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\n\u003ctr\u003e\u003ctd\u003eCertificates Upload\u003c/td\u003e\u003ctd\u003eAPNs cert and ABM token renewal workflow\u003c/td\u003e\u003ctd\u003e\n\n1. Renew APNs Certificate.\n2. Renew ABM Token.\n3. Ensure ADE hosts can enroll.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003c/table\u003e\n\n### Software\n\u003ctable\u003e\n\u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eQuery flow\u003c/td\u003e\u003ctd\u003eCreate, edit, run, and delete queries. \u003c/td\u003e\u003ctd\u003e\n\n1. permissions regarding creating/editing/deleting queries are up to date with documentation\n2. syntax errors result in error messaging\n3. queries can be run manually \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eHost Flow\u003c/td\u003e\u003ctd\u003eVerify a new host can be added and removed following modal instructions using your own device.\u003c/td\u003e\u003ctd\u003e\n\n1. Host is added via command line\n2. Host serial number and date added are accurate\n3. Host is not visible after it is deleted\n4. Warning and informational modals show when expected and make sense\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eMy device page\u003c/td\u003e\u003ctd\u003eVerify the end user's my device page loads successfully.\u003c/td\u003e\u003ctd\u003e\n\n1. Clicking the Fleet desktop item, then \"My device\" successfully loads the my device page.\n2. The \"My device\" page is populated correctly and as expected. \n3. Styling and padding appears correct.\n \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eScripts\u003c/td\u003e\u003ctd\u003eVerify script library and execution\u003c/td\u003e\u003ctd\u003e\n\n1. Verify able to run a script on all host types from CLI.\n2. Verify scripts library upload/download/delete.\n3. From Host details (macOS, Windows, \u0026 Linux) run a script that should PASS, verify.\n4. From Host details (macOS, Windows, \u0026 Linux) run a script that should FAIL, verify.\n5. Verify UI loading state and statuses for scripts.\n8. Disable scripts globally and verify unable to run.\n9. Verify scripts display correctly in Activity feed.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eSoftware\u003c/td\u003e\u003ctd\u003eVerify software library and install / download\u003c/td\u003e\u003ctd\u003e\n\n1. Verify software library upload/download/delete.\n2. From Host details (macOS, Windows, \u0026 Linux) run an install that should PASS, verify.\n3. From My Device (macOS, Windows, \u0026 Linux) software tab should have self-service items available, verify.\n4. Verify UI loading state and statuses for installing software.\n7. Verify software installs display correctly in Activity feed.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\n\u003ctr\u003e\u003ctd\u003eMigration Test\u003c/td\u003e\u003ctd\u003eVerify Fleet can migrate to the next version with no issues.\u003c/td\u003e\u003ctd\u003e\n\nUsing the github action https://github.com/fleetdm/fleet/actions/workflows/db-upgrade-test.yml\n1. Using the most recent stable version of Fleet and `main`, click `Run workflow`\n2. Enter the Docker tag of Fleet starting version, e.g. 'v4.64.2'\n3. Enter the Docker tag of Fleet version to upgrade to, e.g. 'rc-minor-fleet-v4.65.0'\n4. Click `Run workflow`.\n5. Action should complete successfully.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003c/table\u003e\n\n### All Product Groups\n\u003ctable\u003e\n \u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eRelease blockers\u003c/td\u003e\u003ctd\u003eVerify there are no outstanding release blocking tickets.\u003c/td\u003e\u003ctd\u003e\n  \n1. Check [this](https://github.com/fleetdm/fleet/labels/~release%20blocker) filter to view all open `~release blocker` tickets.\n2. If any are found raise an alarm in the `#help-engineering` and `#g-mdm` (or `#g-endpoint-ops`)  channels.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\n\u003ctr\u003e\u003ctd\u003eLoad tests - minor releases only unless otherwise specified\u003c/td\u003e\u003ctd\u003eVerify all load test metrics are within acceptable range on final build of RC.\u003c/td\u003e\u003ctd\u003e\n  \n1. Check [this Google doc](https://docs.google.com/document/d/1V6QtFzcGDsLnn2PIvGin74DAxdAN_3likjxSssOMMQI/edit?tab=t.0#heading=h.15acjob4ji20) to review load test key metrics and checks.\n2. After all expected changes have been merged to the RC branch, two load tests will need to be run - a new instance with no data, and a migrated instance.\n3. For the new instance with no data, set up a load test environment using the RC branch and allow it at least 24hrs of run time.\n4. For the migrated instance, set up a load test environment on the previous minor release branch. Once the environment has been set up and stabilized, follow the instructions in [Deploying code changes to fleet](https://github.com/fleetdm/fleet/blob/main/infrastructure/loadtesting/terraform/readme.md#deploying-code-changes-to-fleet) to migrate to the RC branch. Monitor the metrics post-migration to determine if any performance issues arise.\n5. Record metrics in [this spreadsheet](https://docs.google.com/spreadsheets/d/1FOF0ykFVoZ7DJSTfrveip0olfyRQsY9oT1uXCCZmuKc/edit?usp=drive_link) for the two load test runs. \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e \n\u003c/table\u003e\n\n### Notes\n\nIssues found new to this version:\n\nIssues found that reproduce in last stable version: \n\nWhat has not been tested:\n\nInclude any notes on whether issues should block release or not as needed:\n\n\u003cbr\u003e\n\u003cbr\u003e\n\n"
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgc-TB0",
        "issueNumber": 31274,
        "changeType": "modified"
      }
    ]
  },
  {
    "timestamp": "2025-08-11T19:06:22.452057957Z",
    "items": [
      {
        "assignees": [
          "ksykulev"
        ],
        "id": "PVTI_lADOBDAnic4A4BEUzgdCk80",
        "status": "🐣 In progress",
        "comments": [
          {
            "author": {
              "login": "iansltx"
            },
            "body": "[Planning poker](https://fleetdm.slack.com/archives/C08RXDH5LHZ/p1753243569811379)"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Reassigned as I'm behind on sprint work, pending on-call capacity (this might fall back to me if stuff gets busy, TBD)."
          }
        ],
        "issueNumber": 31164,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdXQh4",
        "status": "✅ Ready for release",
        "comments": [
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "\u003cimg width=\"774\" height=\"247\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/0fe51c60-9700-4a6b-bfb7-4de9e00d5d0e\" /\u003e"
          },
          {
            "author": {
              "login": "AndreyKizimenko"
            },
            "body": "Moving to in-progress since this hasn't been fully resolved. @RachelElysia is aware and will be looking into it on Monday\n\nSlack convo:  https://fleetdm.slack.com/archives/C086V2QK76X/p1754680621910399"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "**QA Notes**\n\n1. On an enrolled macOS host that has MDM enabled, install an app that also exists or can be added in your VPP token. \n2. Add the App to the team's software library via VPP, making it available in Self-service\n3. Refetch host vitals\n4. Open Self-service for the host and notice the app is showing as \"Installed\" and \"Installed\" is clickable\n5. Click \"Installed\"\n\nI'm seeing the correct message now:\n\u003cimg width=\"1494\" height=\"458\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/eb8de26b-2917-45c8-b809-c788189d52b0\" /\u003e\n\nAlso confirmed that if no mdm command is found for a pending install, the modal doesn't error out, but retries 3x and still populates the pending install copy as expected.\n\n\u003cimg width=\"1498\" height=\"744\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/f0838eec-0f7b-4b59-b8dc-272367728606\" /\u003e\n\nWill investigate the underlying backend piece of that 2nd part ^ and file accordingly. "
          }
        ],
        "issueNumber": 31652,
        "changeType": "modified"
      },
      {
        "content": {
          "body": "**Fleet version**: 4.72\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\n\u003c!-- What did you see?  Paste a screenshot, include a 30s video, or write 1-2 sentences describing the issue you observed. --\u003e\n\n\u003cimg width=\"720\" height=\"592\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/3fb10186-89d6-4b2f-9d51-de7941e432a2\" /\u003e\n\n### 🛠️ To fix\n\nOverride install statuses in the correct order (and update JS tests to repro this issue)\n\nProduct designer: @iansltx\n\n### 🧑‍💻  Steps to reproduce\n\u003c!-- Provide step-by-step actions of how to recreate this bug in a clean install of Fleet. (This helps others understand and fix it more quickly.) --\u003e\n1. Add a tar.gz file to a team's library, made available for Self Service. Include install and uninstall scripts.\nFor a physical linux box you can use the go tar.gz file here: https://drive.google.com/file/d/15uKzk2J7IYH7MNYhBHdPAKP_uvVXSx1Z/view?usp=sharing\nFor a linux VM on Apple Silicon you can use the go tar.gz file here: https://drive.google.com/file/d/1ktV0lZH88Q7lqdFUIo3YCt_mgcql1NUN/view?usp=sharing\nInstall script is: `mv $INSTALLER_PATH/* /usr/local`\nUninstall script is: `rm -rf /usr/local/go`\n2. On enrolled linux host, open Self service and click \"Install\"\n3. Wait for install to complete, refetch to complete, then hover over \"Installed\" status\n\n### 🕯️ More info _(optional)_\n\u003c!-- Add any additional details you think could be relevant to solving or reproducing the bug (e.g., \"this does not reproduce when...\") --\u003e\nI used a different tar.gz when reproducing to gather additional info, seems this is only happening for the first install.\nAPI Response:\n```\n    {\n      \"id\": 3875,\n      \"name\": \"gimp-3.0.0.tar.gz\",\n      \"source\": \"tgz_packages\",\n      \"status\": \"installed\",\n      \"installed_versions\": null,\n      \"software_package\": {\n        \"name\": \"gimp-3.0.0.tar.gz\",\n        \"automatic_install_policies\": null,\n        \"version\": \"\",\n        \"platform\": \"linux\",\n        \"self_service\": true,\n        \"icon_url\": null,\n        \"last_install\": {\n          \"install_uuid\": \"e48dbdaf-dde1-44cb-b8c2-6f29839eeaec\",\n          \"installed_at\": \"2025-08-11T14:28:44.201641Z\"\n        },\n        \"last_uninstall\": null,\n        \"package_url\": null\n      },\n      \"app_store_app\": null\n    },\n```\n\u003c!-- If this is a performance issue, follow these steps to generate and attach a debug archive: https://fleetdm.com/docs/using-fleet/monitoring-fleet#debugging-performance-issues --\u003e\n"
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgdbCMM",
        "status": "🥚 Ready",
        "comments": [
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Reassigning because I'm right in the middle of the interrupt work swimlane :("
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@RachelElysia thanks for noticing that _uninstall_ is the tooltip being shown, so we're going to want an API response for this one to troubleshoot further. Given that @jmwatts is out and to avoid a repro rabbit trail, going to make the call of not blocking the release for this; we'll troubleshoot and resolve in 4.73."
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "More info:\nrecently_uninstalled UI status would only show if `newerDate === lastUninstallDate` which is super bizarre in this case and would require repro with API responses"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "Updated ticket to show install UI status\n"
          }
        ],
        "issueNumber": 31721,
        "changeType": "modified"
      },
      {
        "estimate": 3,
        "id": "PVTI_lADOBDAnic4A4BEUzgdCnk8",
        "issueNumber": 31319,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgbpzkM",
        "comments": [
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "The version reported in osquery is 16.0 but when I look in \"About this Mac\" and System Settings \u003e\u003e General it's 26.0\nIt does get the build right though... 25A5279m"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "When I try to enforce encryption I'm not seeing the banner instructing me to restart or log out, until I've restarted or logged out. Then it stays there no matter how many times I restart. I'm not seeing the banner clear and even after running the `cleanups_then_aggregation` cron the encryption status isn't updated and it says `unrecognized`:\n\n![Image](https://github.com/user-attachments/assets/f3c0b064-8aae-4c39-9993-bd01af2fbd84)\n\nOn the host, I can see the disk encryption profile in System Settings and Filevault is turned on and a recovery key has been set:\n\n\u003cimg width=\"741\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/013cc568-6b97-4bbb-be68-a458bbbdf56b\" /\u003e\n\n\u003cimg width=\"730\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/986b4c3e-42f2-4b9c-9756-f1acc8e1f302\" /\u003e"
          },
          {
            "author": {
              "login": "PezHub"
            },
            "body": "Apple introduced a new Device Migration feature (that only works with the latest OSes) which will move your host from a 3rd party MDM server over to Fleet,  all via ABM. It works! however during the enrollment to Fleet the Setup Experience SwiftDialogue window did not display the software Fleet was installing in the background"
          },
          {
            "author": {
              "login": "zayhanlon"
            },
            "body": "@PezHub from customer-numa\nmacOS 26 - MDM migration invokes Setup Experience (silently) - awaitconfigured\n\n- Upgraded endpoint to macOS 26 \n- ABM recognizes that\n- Able to set a deadline\n- Device starts to migrate\n- Unenrolled from previous MDM (didn’t have to initiate anything)\n- Recognizes that it needs to enroll into Fleet\n- Waiting for ‘device configured’ command\n- Starts going through setup experience again (calling through all apps, VPP apps, setup script)\n\nExpected behavior: Assume host has all apps already installed. It’s been previously managed. It’s not a net new device so it shouldn’t run setup experience. VPP apps would get removed from previous MDM so those would be the one thing that should run again\n\nNote from @mostlikelee : Technically, as soon as the device gets the Fleet MDM profile, the apps should come along with it. We should test"
          },
          {
            "author": {
              "login": "zayhanlon"
            },
            "body": "@PezHub from customer-eponym\nFleet menu bar item doesn't show up after enrollment in beta 2"
          },
          {
            "author": {
              "login": "Sampfluger88"
            },
            "body": "Linked to Unthread ticket:\n\u003e [Fleet menu not showing after enrollment in macOS 26 beta 2 #6834](https://fleetdm.unthread.io/dashboard/inbox/all/conversations/3ec39176-1e2a-49ec-aea4-3c44108d90d0)"
          },
          {
            "author": {
              "login": "AndreyKizimenko"
            },
            "body": "Changing MDMs without a deadline doesn't not show a notification on the host. Maybe it takes a lot more time (writing this after waiting for 2-3 hours)"
          },
          {
            "author": {
              "login": "PezHub"
            },
            "body": "Hi all 👋 , any issues directly related to the new MDM migration feature Apple introduced in ABM should be tracked separately here https://github.com/orgs/fleetdm/projects/58/views/9?pane=issue\u0026itemId=119675644\u0026issue=fleetdm%7Cfleet%7C30695\n"
          },
          {
            "author": {
              "login": "AndreyKizimenko"
            },
            "body": "Noticed that MacOS26 isn't getting orbit updates from a local tuf server. WIll retest it later next week and file an issue "
          },
          {
            "author": {
              "login": "reeblybeebly"
            },
            "body": "`customer-thumper` reported several occurrences of a host enrollment issue on macOS Tahoe 26, where the \"setup is complete\" dialog box is blank, as evident in the provided screenshot.\n\n**Fleet Version:** 4.71.1\n**macOS Version:** 26.0 Beta 25A5316i\n\nPotentially related logging pulled from server\n```{\ncalendarTime:Mon Aug 11 14:15:05 2025 UTC\nhostIdentifier:B397E6E6-7985-56BF-9BAC-B297B186F192\nunixTime:1754921705\nquery_id:373\nname:pack/team-2/\u003ccustomer-thumper\u003e usr directory\nnumerics:false\naction:snapshot\nepoch:0\ndecorations:{\nhost_uuid:B397E6E6-7985-56BF-9BAC-B297B186F192\nhostname:10bd3a85e979-mac\n}\ncounter:0\nsnapshot:[\n{\ndirectory_status:Exists\nprimary_user:\u003cuser\u003e\n}\n]\n}\n```\n**Screenshot**\n\n\u003cimg width=\"3024\" height=\"1964\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/876d80db-d518-49f3-bc05-9bd50edcaa27\" /\u003e"
          },
          {
            "author": {
              "login": "Sampfluger88"
            },
            "body": "Linked to Unthread ticket:\n\u003e [Issue during macOS 26 onboarding #7769](https://fleetdm.unthread.io/dashboard/inbox/all/conversations/7384f042-079b-4283-a4e7-5e079beb7fc9)"
          }
        ],
        "issueNumber": 30136,
        "changeType": "modified"
      },
      {
        "assignees": [
          "jkatz01"
        ],
        "content": {
          "body": "**Fleet version**: v4.71.0\n**Web browser and operating system**: \u003c!-- e.g. Chrome 88.0.4324 running on macOS --\u003e\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\n\u003c!-- What did you see?  Paste a screenshot, include a 30s video, or write 1-2 sentences describing the issue you observed. --\u003e\n\nBoth of these CVEs Show up when searching in [Software \u003e Vulnerabilities](https://dogfood.fleetdm.com/software/vulnerabilities?exploit=false\u0026query=CVE-2025-363\u0026order_direction=desc\u0026order_key=hosts_count\u0026page=0):\n\n\u003cimg width=\"939\" height=\"573\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/7222d7eb-cd3d-486e-93cb-fc78e484b4f1\" /\u003e\n\nClicking on \"view hosts\" shows a list of hosts affected by each vulnerability, and the host counts match:\n\n[CVE-2025-36350\n](https://dogfood.fleetdm.com/hosts/manage?page=0\u0026order_key=display_name\u0026order_direction=asc\u0026vulnerability=CVE-2025-36350)\u003cimg width=\"925\" height=\"614\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/fe0edf90-9f14-49f6-a19a-94d0efc01d8c\" /\u003e\n\n\n[CVE-2025-36357\n](https://dogfood.fleetdm.com/software/vulnerabilities?exploit=false\u0026query=CVE-2025-363\u0026order_direction=desc\u0026order_key=hosts_count\u0026page=0)\n\n\u003cimg width=\"924\" height=\"567\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/e5183f58-f6ca-47b4-b347-ee59a6b19141\" /\u003e\n\nBut when viewing the [vulnerability details](https://dogfood.fleetdm.com/software/vulnerabilities/CVE-2025-36350), no hosts are detected:\n\n\u003cimg width=\"938\" height=\"253\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/ecc5c5f9-6ade-4d35-ac08-cba0799cab91\" /\u003e\n\n\nThe API request to load vulnerability data returns the following error:\n\n```\n{\n  \"message\": \"Resource Not Found\",\n  \"errors\": [\n    {\n      \"name\": \"base\",\n      \"reason\": \"This is not a known CVE. None of Fleet’s vulnerability sources are aware of this CVE.\"\n    }\n  ]\n}\n\n```\n\n\n### 🧑‍💻  Steps to reproduce\n\n1. Run vulnerabilities on a host running Windows 11 Pro 24H2 10.0.26100.4061, e.g. [this one in Dogfood](https://dogfood.fleetdm.com/hosts/1317/details).\n2. Check the vulns list\n\n### 🕯️ More info _(optional)_\n\u003c!-- Add any additional details you think could be relevant to solving or reproducing the bug (e.g., \"this does not reproduce when...\") --\u003e\nObserved in dogfood, presumably an issue occurred within the past month that either:\n1. Corrected a previously misidentified CVE\n2. Made a CVE magically disappear from NIST databases. \n3. Correctly identified a new CVE that doesn't have the information we need to display it as a valid CVE in the UI\n\n\u003c!-- If this is a performance issue, follow these steps to generate and attach a debug archive: https://fleetdm.com/docs/using-fleet/monitoring-fleet#debugging-performance-issues --\u003e\n\n### 🛠️ To fix\n\nExclude the above 2025 vulns on the advisory currently containing them via revised MSRC feed parsing. The exclusion should affect the advisory where they're currently found; if the numbers get used later for actual vulns that will be a future advisory and shouldn't be affected.\n",
          "number": 31474,
          "repository": "fleetdm/fleet",
          "title": "Error when viewing details for CVE-2025-36350 and CVE-2025-36357",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/31474"
        },
        "estimate": 3,
        "id": "PVTI_lADOBDAnic4A4BEUzgdg7ps",
        "labels": [
          "bug",
          "~vulnerability-management",
          ":product",
          "customer-stazzema",
          "#g-software"
        ],
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "status": "✔️Awaiting QA",
        "title": "Error when viewing details for CVE-2025-36350 and CVE-2025-36357",
        "comments": [
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Looks like MSRC typo'd (and still has typo'd) CVE-2024-36357 and CVE-2024-36350 to CVE-2025-[nnnnn] (verified against the original AMD advisory). This results in broken links on their side in a few places, and we're consuming that broken feed in MSRC parsing.\n\nWe should be able to fix this with updates to our MSRC feed generation, at which point an `nvd` feed run (the daily one, not the every-half-hour `vulnerabilities` feed run) will publish a new feed and Fleet servers will consume it later and remove the affected hosts (the source for these OS-level vulns is the MSRC feed)."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@jkatz01 Let's work on this one first. Will throw you more tickets as needed.\n\nMoving this to the release board."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@jkatz01 You'll need to comment here to ack so I can actually assign you in GitHub, at least for now."
          },
          {
            "author": {
              "login": "jkatz01"
            },
            "body": "@iansltx Commenting so you can assign me. "
          }
        ],
        "issueNumber": 31474,
        "changeType": "added"
      },
      {
        "assignees": [
          "jahzielv"
        ],
        "content": {
          "body": "**Fleet version**: 4.72.0\n\n**Web browser and operating system**: \u003c!-- e.g. Chrome 88.0.4324 running on macOS --\u003e\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\n\u003c!-- What did you see?  Paste a screenshot, include a 30s video, or write 1-2 sentences describing the issue you observed. --\u003e\nVulns that should show up for RHEL (CentOS and Fedora) OS' Linux kernels are not shown in Fleet.\n\n### 🛠️ To fix\n\nHere's what we decided during #g-software design review on 2025-08-15:\n\n\u003cimg width=\"964\" height=\"581\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/71e39c76-c548-4038-baa5-183a15935d8a\" /\u003e\n\nIan: Also need \"Not supported\" on the OS details page. In the Kernels list. And the Software version detail page (kernel view):\n\n\u003cimg width=\"1142\" height=\"711\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/1e52ee41-54ae-4f3f-a9ca-b875c59bca2d\" /\u003e\n\n\u003cimg width=\"611\" height=\"401\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/b296aa88-f525-4666-b1cc-b306212c03fb\" /\u003e\n\n### 🧑‍💻  Steps to reproduce\n\u003c!-- Provide step-by-step actions of how to recreate this bug in a clean install of Fleet. (This helps others understand and fix it more quickly.) --\u003e\n1. Enroll a RHEL (CentOS or Fedora) host in Fleet. \n2. Run vulns processing\n3. Note that the Linux kernel shows up as software for this host, but does not have any vulnerabilities.\n\n### 🕯️ More info _(optional)_\n\u003c!-- Add any additional details you think could be relevant to solving or reproducing the bug (e.g., \"this does not reproduce when...\") --\u003e\nN/A\n\n\u003c!-- If this is a performance issue, follow these steps to generate and attach a debug archive: https://fleetdm.com/docs/using-fleet/monitoring-fleet#debugging-performance-issues --\u003e\n",
          "number": 31495,
          "repository": "fleetdm/fleet",
          "title": "RHEL kernels don't have expected vulnerabilities in Fleet",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/31495"
        },
        "estimate": 5,
        "id": "PVTI_lADOBDAnic4A4BEUzgdhCgY",
        "labels": [
          "bug",
          "~vulnerability-management",
          ":incoming",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-29T00:00:00Z",
          "title": "4.73.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "status": "🐣 In progress",
        "title": "RHEL kernels don't have expected vulnerabilities in Fleet",
        "issueNumber": 31495,
        "changeType": "added"
      },
      {
        "assignees": [
          "drvcodenta"
        ],
        "content": {
          "body": "\u003c!-- **This issue's remaining effort can be completed in ≤1 sprint.  It will be valuable even if nothing else ships.**\nIt is [planned and ready](https://fleetdm.com/handbook/company/development-groups#making-changes) to implement.  It is on the proper kanban board. --\u003e\n\n\n## Goal\n\n| User story  |\n|:---------------------------------------------------------------------------|\n| As a reviewer for Fleet-maintained apps changes,\n| I want to quickly see a diff of changed (un)install scripts in the PRs where they're changed\n| so that I can confidently review and approve changes with minimal effort.\n\n## Key result\n\nFMA app library Q2 OKR\n\n## Original requests\n\nNone\n\n## Context\n- Product Designer: @iansltx\n  \n\u003c!--\nWhat else should contributors [keep in mind](https://fleetdm.com/handbook/company/development-groups#developing-from-wireframes) when working on this change?  (Optional.)\n1. \n2. \n--\u003e\n\n## Changes\n\n### Engineering\n- [x] Test plan is finalized\n- [ ] When script refs (for nstall/uninstall) for a version change between `main` and a candidate branch, include the diff between the old install/uninstall scripts and the new ones as a comment on the FMA update PR, similar to [this comment](https://github.com/fleetdm/fleet/pull/28188#issuecomment-2799980715). #31496 should be a good start for this. Can also use #31481 comments as inspiration.\n\n\u003e ℹ️  Please read this issue carefully and understand it.  Pay [special attention](https://fleetdm.com/handbook/company/development-groups#developing-from-wireframes) to UI wireframes, especially \"dev notes\".\n\n## QA\n\n### Risk assessment\n\n- Risk level: Low\n\n### Test plan\n\n1. Commit a change that adds an extra newline to macOS scripts (harmless, but will change hashes) _without_ re-ingesting apps on the branch.\n2. Confirm that the auto-generated follow-up PR includes diffs as either a comment or the PR description.\n\n### Testing notes\n\u003c!-- Any additional testing notes relevant to this story or tools required for testing. --\u003e\n\n### Confirmation\n\u003c!-- The engineer responsible for implementing this user story completes the test plan before moving to the \"Ready for QA\" column. --\u003e\n\n1. [ ] Engineer: Added comment to user story confirming successful completion of test plan.\n2. [ ] QA: Added comment to user story confirming successful completion of test plan.\n",
          "number": 28189,
          "repository": "fleetdm/fleet",
          "title": "Include easy-to-read automatic script diffs on FMA update PRs",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/28189"
        },
        "estimate": 3,
        "id": "PVTI_lADOBDAnic4A4BEUzgdhNKc",
        "labels": [
          "~engineering-initiated",
          ":product",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-29T00:00:00Z",
          "title": "4.73.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "status": "🐣 In progress",
        "title": "Include easy-to-read automatic script diffs on FMA update PRs",
        "comments": [
          {
            "author": {
              "login": "lukeheath"
            },
            "body": "Thanks @iansltx. This will result in faster reviews that are more accurate, supporting stability. Moving to the drafting board to move across per https://fleetdm.com/handbook/engineering#draft-an-engineering-initiated-story. "
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@jmwatts Let me know what else you need test-plan-wise here. Thinking we can async the USR here."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@drvcodenta Can you confirm that this is WIP in a comment? Side effect will be that I can assign you to this one."
          },
          {
            "author": {
              "login": "drvcodenta"
            },
            "body": "Yes it's WIP"
          }
        ],
        "issueNumber": 28189,
        "changeType": "added"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdCxDU",
        "title": "🪲macOS apps with duplicate bundleIDs do not appear in Fleet",
        "issueNumber": 28788,
        "changeType": "removed"
      }
    ]
  },
  {
    "timestamp": "2025-08-12T07:06:41.986150834Z",
    "items": [
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcYi4Y",
        "comments": [
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "FYI @lukeheath marking this story as `P2`. The current behavior makes it look like Fleet does not understand how people actually use CVSS.  But now we do."
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "TODO RAchel: first draft of test plan"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@jmwatts Just filled in this story checklist so it's ready for User Story Review (credit to @RachelElysia for the test plan)."
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "assigning to @RachelElysia to estimate"
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "@lukeheath needs your estimate here and we can move it to the software board"
          },
          {
            "author": {
              "login": "jacobshandling"
            },
            "body": "For everyone's info, I was asked to estimate this this morning and estimated it at a 4. Looks like changing the project removed the estimate. @sharon-fdm @mostlikelee "
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "oh no that's my bad.  we discussed in sprint kickoff review that Luke is going to take this one @jacobshandling "
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "I'll assign a 4 here and move it to the software board for Luke"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@lukeheath Might be minimal extra work to solve #30524 alongside this since filter + sort seems like it would be sufficient there. Maybe dev this with that request in mind and check with the customer to see whether that solves their issue?"
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "removing milestone.  will not get to this story this sprint"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@lukeheath Can you create Sprint 45 and move this into it?"
          },
          {
            "author": {
              "login": "lukeheath"
            },
            "body": "@RachelElysia Thanks for taking this. I thought I'd be able to squeeze it in, but wasn't able to."
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "**QA Notes** (In Progress)\n\n- [x] Min max is present and new help text is present\n- [x] Min max is enabled only if vuln software toggle is enabled\n- [x] Defaults to \"Any severity\"\n- [x] If a user clicks on a given severity like \"Critical severity\", the min and max will be auto populated\n- [x] If a user clicks on \"Any severity\", the min and max are cleared\n- [x] If a user clicks on \"Custom severity\", the min and max do not change\n- [x] If a user types in a custom min or custom max, the dropdown will change to \"Custom severity\"\n- [x] If a user clears both custom min/max, the dropdown will change to \"Any severity\" but returns to \"Custom severity\" if they start typing\n- [x] If the user hits apply with no severity entered, it will apply any severity\n- [x] If the user clicks apply with only a min entered, it will only apply the min (e.g. \u003e=4.0)\n- [x] If the user clicks apply with only a max entered, it will only apply the max (e.g. \u003c= 8.0)\n- [x] If the user types in an invalid number into either min/max (e.g. 4.11 or -3), the in label error states it must be a number between 0-10 with an increment of 0.1\n- [x] 12b. The user cannot type in string as the input is limited to type number\n- [x] If the user types in a min larger than the max, the Apply button is disabled with a tooltip stating that the min can not be greater than the max.\n- [x] By clicking \"Apply\", the severity ranges will filter results to only vulnerable software with severity scores in the selected range\n- [x] Clearing the filter should show all software\n\n@RachelElysia Questions:\n❓ The Figma appears to show placeholder text but I don't see any in the UI - should that be there?\n❓ The modal accepts 010 as a number - should it?\n❓ If I enter 10 in the max, it clears it out on save - should it?\n❓ If I set the filter to \"Critical Severity\" it changes it to \"Custom Severity\" on save and clears out the max value - should it?"
          }
        ],
        "issueNumber": 30248,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdCoeo",
        "status": "🦤 ‎In review",
        "issueNumber": 25636,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgc-TB0",
        "status": "✅ Ready for release",
        "issueNumber": 31274,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdg7ps",
        "status": "🐣 In progress",
        "issueNumber": 31474,
        "changeType": "modified"
      }
    ]
  },
  {
    "timestamp": "2025-08-12T19:05:23.974632285Z",
    "items": [
      {
        "content": {
          "body": "\n# Goal: easy-to-follow test steps for checking a release manually\n\n# Important reference data\n\n1. [fleetctl preview setup](https://fleetdm.com/fleetctl-preview)\n2. [permissions documentation](https://fleetdm.com/docs/using-fleet/permissions) \n3. premium tests require license key (needs renewal) `fleetctl preview --license-key=eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJGbGVldCBEZXZpY2UgTWFuYWdlbWVudCBJbmMuIiwiZXhwIjoxNjQwOTk1MjAwLCJzdWIiOiJkZXZlbG9wbWVudCIsImRldmljZXMiOjEwMCwibm90ZSI6ImZvciBkZXZlbG9wbWVudCBvbmx5IiwidGllciI6ImJhc2ljIiwiaWF0IjoxNjIyNDI2NTg2fQ.WmZ0kG4seW3IrNvULCHUPBSfFdqj38A_eiXdV_DFunMHechjHbkwtfkf1J6JQJoDyqn8raXpgbdhafDwv3rmDw`\n4. premium tests require license key (active - Expires Sunday, January 1, 2023 12:00:00 AM) `fleetctl preview --license-key=eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJGbGVldCBEZXZpY2UgTWFuYWdlbWVudCBJbmMuIiwiZXhwIjoxNjcyNTMxMjAwLCJzdWIiOiJGbGVldCBEZXZpY2UgTWFuYWdlbWVudCIsImRldmljZXMiOjEwMCwibm90ZSI6ImZvciBkZXZlbG9wbWVudCBvbmx5IiwidGllciI6InByZW1pdW0iLCJpYXQiOjE2NDI1MjIxODF9.EGHQjIzM73YyMbnCruswzg360DEYCsDi9uz48YcDwQHq90BabGT5PIXRiculw79emGj5sk2aKgccTd2hU5J7Jw`\n\n# Smoke Tests\nSmoke tests are limited to core functionality and serve as a pre-release final review. If smoke tests are failing, a release cannot proceed.\n\n## Fleet core:\n\n**Fleet version** (Head to the \"My account\" page in the Fleet UI or run `fleetctl version`):\n\n**Web browser** _(e.g. Chrome 88.0.4324)_: \n\n### Prerequisites\n\n1. `fleetctl preview` is set up and running the desired test version using [`--tag` parameters.](https://fleetdm.com/handbook/engineering#run-fleet-locally-for-qa-purposes)\n2. Unless you are explicitly testing older browser versions, browser is up to date.\n3. Certificate \u0026 flagfile are in place to create new host.\n4. In your browser, clear local storage using devtools.\n\n### Orchestration\n\u003ctable\u003e\n\u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eUpdate flow\u003c/td\u003e\u003ctd\u003e\n\n1. remove all fleet processes/agents/etc using `fleetctl preview reset` for a clean slate\n2. run `fleetctl preview` with no tag for latest stable\n3. create a host/query to later confirm upgrade with\n4. STOP fleet-preview-server instances in containers/apps on Docker\n5. run `fleetctl preview` with appropriate testing tag \u003c/td\u003e\u003ctd\u003eAll previously created hosts/queries are verified to still exist\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eLogin flow\u003c/td\u003e\u003ctd\u003e\n\n1. navigate to the login page and attempt to login with both valid and invalid credentials to verify some combination of expected results.\n2. navigate to the login page and attempt to login with both valid and invalid sso credentials to verify expected results.\n\u003c/td\u003e\u003ctd\u003e\n\n1. text fields prompt when blank\n2. correct error message is \"authentication failed\"\n3. forget password link prompts for email\n4. valid credentials result in a successful login.\n5. valid sso credentials result in a successful login\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003ePacks flow\u003c/td\u003e\u003ctd\u003eVerify management, operation, and logging of [\"2017 packs\"](https://fleetdm.com/handbook/company/why-this-way#why-does-fleet-support-query-packs).\u003c/td\u003e\u003ctd\u003e\n\n1. Packs successfully run on host machines after migrations \n2. New Packs can be created\n3. Packs can be edited and deleted\n4. Packs results information is logged\n \n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eLog destination flow\u003c/td\u003e\u003ctd\u003eVerify log destination for software, query, policy, and packs.\u003c/td\u003e\u003ctd\u003e\n\n1. Software, query, policy, and packs logs are successfully sent to external log destinations\n2. Software, query, policy, and packs logs are successfully sent to Filesystem log destinations\n \n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eOS settings\u003c/td\u003e\u003ctd\u003eVerify OS settings functionality\u003c/td\u003e\u003ctd\u003e\n\n1. Verify able to configure Disk encryption (macOS, Windows, \u0026 Linux).\n2. Verify host enrolled with Disk encryption enforced successfully encrypts.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003c/table\u003e\n\n### MDM\n\u003ctable\u003e\n\u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eMDM enrollment flow\u003c/td\u003e\u003ctd\u003eVerify MDM enrollments, run MDM commands\u003c/td\u003e\u003ctd\u003e\n  \n1. Erase an ADE-eligible macOS host and verify able to complete automated enrollment flow.\n2. With Windows MDM turned On, enroll a Windows host and verify MDM is turned On for the host.\n3. Verify able to run MDM commands on both macOS and Windows hosts from the CLI.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eMDM migration flow\u003c/td\u003e\u003ctd\u003eVerify MDM migration for ADE and non-ADE hosts\u003c/td\u003e\u003ctd\u003e\n  \n1. Turn off MDM on an ADE-eligible macOS host and verify that the native, \"Device Enrollment\" macOS notification appears.\n2. On the My device page, follow the \"Turn on MDM\" instructions and verify that MDM is turned on.\n3. Turn off MDM on a non ADE-eligible macOS host.\n4. On the My device page, follow the \"Turn on MDM\" instructions and verify that MDM is turned on.\n5. Verify Windows host migrates from 3rd party MDM to Fleet when automatic migration is turned on.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eOS settings\u003c/td\u003e\u003ctd\u003eVerify OS settings functionality\u003c/td\u003e\u003ctd\u003e\n\n1. Verify Profiles upload/download/delete (macOS \u0026 Windows).\n2. Verify Profiles are delivered to host and applied. \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eSetup experience\u003c/td\u003e\u003ctd\u003eVerify macOS Setup experience\u003c/td\u003e\u003ctd\u003e\n\n1. Configure End user authentication.\n3. Upload a Bootstrap package.\n4. Add software (FMA, VPP, \u0026 Custom pkg)\n5. Add a script\n6. Enroll an ADE-eligible macOS host and verify successful authentication.\n7. Verify Bootstrap package is delivered.\n8. Verify SwiftDialogue window displays.\n9. Verify software installs and script runs.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eOS updates\u003c/td\u003e\u003ctd\u003eVerify OS updates flow\u003c/td\u003e\u003ctd\u003e\n\n1. Configure OS updates (macOS \u0026 Windows).\n2. Verify on-device that Nudge prompt appears (macOS 13).\n3. Verify enforce minimumOS occurs during enrollment (macOS 14+).\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eiOS/iPadOS\u003c/td\u003e\u003ctd\u003eVerify enrollment, profiles, \u0026 software installs\u003c/td\u003e\u003ctd\u003e\n\n1. Verify ADE enrollment.\n2. Verify OTA enrollment.\n3. Verify Profiles are delivered to host and applied.\n4. Verify VPP apps install \u0026 display correctly in Activity feed.\n5. Verify `Turn Off MDM` for BYOD \u0026 ADE hosts.\n \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\n\u003ctr\u003e\u003ctd\u003eLock \u0026 Wipe\u003c/td\u003e\u003ctd\u003eVerify hosts can be locked \u0026 wiped\u003c/td\u003e\u003ctd\u003e\n\n1. Verify locking a host from the Fleet UI (macOS, Windows, \u0026 Linux)\n2. Verify unlocking a host from the Fleet UI (macOS, Windows, \u0026 Linux)\n3. Verify wiping a host from the Fleet UI (macOS, Windows, \u0026 Linux)\n4. Verify wiping and locking hosts using `fleetctl` (macOS, Windows, \u0026 Linux)\n \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\n\u003ctr\u003e\u003ctd\u003eCertificates Upload\u003c/td\u003e\u003ctd\u003eAPNs cert and ABM token renewal workflow\u003c/td\u003e\u003ctd\u003e\n\n1. Renew APNs Certificate.\n2. Renew ABM Token.\n3. Ensure ADE hosts can enroll.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003c/table\u003e\n\n### Software\n\u003ctable\u003e\n\u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eQuery flow\u003c/td\u003e\u003ctd\u003eCreate, edit, run, and delete queries. \u003c/td\u003e\u003ctd\u003e\n\n1. permissions regarding creating/editing/deleting queries are up to date with documentation\n2. syntax errors result in error messaging\n3. queries can be run manually \n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eHost Flow\u003c/td\u003e\u003ctd\u003eVerify a new host can be added and removed following modal instructions using your own device.\u003c/td\u003e\u003ctd\u003e\n\n1. Host is added via command line\n2. Host serial number and date added are accurate\n3. Host is not visible after it is deleted\n4. Warning and informational modals show when expected and make sense\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eMy device page\u003c/td\u003e\u003ctd\u003eVerify the end user's my device page loads successfully.\u003c/td\u003e\u003ctd\u003e\n\n1. Clicking the Fleet desktop item, then \"My device\" successfully loads the my device page.\n2. The \"My device\" page is populated correctly and as expected. \n3. Styling and padding appears correct.\n \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eScripts\u003c/td\u003e\u003ctd\u003eVerify script library and execution\u003c/td\u003e\u003ctd\u003e\n\n1. Verify able to run a script on all host types from CLI.\n2. Verify scripts library upload/download/delete.\n3. From Host details (macOS, Windows, \u0026 Linux) run a script that should PASS, verify.\n4. From Host details (macOS, Windows, \u0026 Linux) run a script that should FAIL, verify.\n5. Verify UI loading state and statuses for scripts.\n8. Disable scripts globally and verify unable to run.\n9. Verify scripts display correctly in Activity feed.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eSoftware\u003c/td\u003e\u003ctd\u003eVerify software library and install / download\u003c/td\u003e\u003ctd\u003e\n\n1. Verify software library upload/download/delete.\n2. From Host details (macOS, Windows, \u0026 Linux) run an install that should PASS, verify.\n3. From My Device (macOS, Windows, \u0026 Linux) software tab should have self-service items available, verify.\n4. Verify UI loading state and statuses for installing software.\n7. Verify software installs display correctly in Activity feed.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\n\u003ctr\u003e\u003ctd\u003eMigration Test\u003c/td\u003e\u003ctd\u003eVerify Fleet can migrate to the next version with no issues.\u003c/td\u003e\u003ctd\u003e\n\nUsing the github action https://github.com/fleetdm/fleet/actions/workflows/db-upgrade-test.yml\n1. Using the most recent stable version of Fleet and `main`, click `Run workflow`\n2. Enter the Docker tag of Fleet starting version, e.g. 'v4.64.2'\n3. Enter the Docker tag of Fleet version to upgrade to, e.g. 'rc-minor-fleet-v4.65.0'\n4. Click `Run workflow`.\n5. Action should complete successfully.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003c/table\u003e\n\n### All Product Groups\n\u003ctable\u003e\n \u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eRelease blockers\u003c/td\u003e\u003ctd\u003eVerify there are no outstanding release blocking tickets.\u003c/td\u003e\u003ctd\u003e\n  \n1. Check [this](https://github.com/fleetdm/fleet/labels/~release%20blocker) filter to view all open `~release blocker` tickets.\n2. If any are found raise an alarm in the `#help-engineering` and `#g-mdm` (or `#g-endpoint-ops`)  channels.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\n\u003ctr\u003e\u003ctd\u003eLoad tests - minor releases only unless otherwise specified\u003c/td\u003e\u003ctd\u003eVerify all load test metrics are within acceptable range on final build of RC.\u003c/td\u003e\u003ctd\u003e\n  \n1. Check [this Google doc](https://docs.google.com/document/d/1V6QtFzcGDsLnn2PIvGin74DAxdAN_3likjxSssOMMQI/edit?tab=t.0#heading=h.15acjob4ji20) to review load test key metrics and checks.\n2. After all expected changes have been merged to the RC branch, two load tests will need to be run - a new instance with no data, and a migrated instance.\n3. For the new instance with no data, set up a load test environment using the RC branch and allow it at least 24hrs of run time.\n4. For the migrated instance, set up a load test environment on the previous minor release branch. Once the environment has been set up and stabilized, follow the instructions in [Deploying code changes to fleet](https://github.com/fleetdm/fleet/blob/main/infrastructure/loadtesting/terraform/readme.md#deploying-code-changes-to-fleet) to migrate to the RC branch. Monitor the metrics post-migration to determine if any performance issues arise.\n5. Record metrics in [this spreadsheet](https://docs.google.com/spreadsheets/d/1FOF0ykFVoZ7DJSTfrveip0olfyRQsY9oT1uXCCZmuKc/edit?usp=drive_link) for the two load test runs. \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e \n\u003c/table\u003e\n\n### Notes\n\nIssues found new to this version:\n\nIssues found that reproduce in last stable version: \n\nWhat has not been tested:\n\nInclude any notes on whether issues should block release or not as needed:\n\n\u003cbr\u003e\n\u003cbr\u003e\n\n"
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgc-TB0",
        "status": "✔️Awaiting QA",
        "issueNumber": 31274,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdhCgY",
        "status": "🐣 In progress",
        "issueNumber": 31495,
        "changeType": "modified"
      },
      {
        "assignees": [
          "RachelElysia"
        ],
        "content": {
          "body": "Steps to reproduce:\n1. Click on the \"Policies\" tab\n2. Grab a random policy\n3. Click on the selected policy\n4. Click the \"Run\" button\n5. On 'Select targets' page click the \"Run\" button\n6. Wait for query to finish\n7. Scroll to bottom and click 'Next' button\nExpected: 'Next' button changes list page on click\nActual: 'Next' button does not change list page on click\n\nTimestamp: 0:30\nVideo: \nhttps://www.loom.com/share/cbb30ffd7e3c44129679e4eb54b1f784 (https://www.loom.com/share/cbb30ffd7e3c44129679e4eb54b1f784)\n",
          "number": 31805,
          "repository": "fleetdm/fleet",
          "title": "Pagination \"Next\" button on Live Policy results not correctly switching pages",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/31805"
        },
        "estimate": 1,
        "id": "PVTI_lADOBDAnic4A4BEUzgdj4pY",
        "labels": [
          "bug",
          ":release",
          "~unreleased bug",
          ":incoming",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-08-08T00:00:00Z",
          "title": "4.72.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "status": "Done",
        "title": "Pagination \"Next\" button on Live Policy results not correctly switching pages",
        "comments": [
          {
            "author": {
              "login": "AndreyKizimenko"
            },
            "body": "Was able to reproduce this on Dogfood on 4.72\nDoes not happen on 4.71"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "Bug I pushed, seeing how I can remove it without wrecking the fix to clientside sort bug on sorted table resetting when clicking an action\n"
          }
        ],
        "issueNumber": 31805,
        "changeType": "added"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcYi4Y",
        "status": "🐣 In progress",
        "issueNumber": 30248,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdCpok",
        "status": "🦤 ‎In review",
        "issueNumber": 31214,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdCk88",
        "comments": [
          {
            "author": {
              "login": "iansltx"
            },
            "body": "[Planning poker](https://fleetdm.slack.com/archives/C08RXDH5LHZ/p1753243609663689)"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "Please include instructions on how to use said tool, esp for environments with many teams and packages please!"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@ksykulev If on-call remains quiet, take this one iydm"
          }
        ],
        "issueNumber": 31165,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdUxWw",
        "labels": [
          "bug",
          ":product",
          "P1",
          "#g-software",
          "prospect-vulcano"
        ],
        "status": "✔️Awaiting QA",
        "comments": [
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "@lukeheath added `P1` because I just learned from @allenhouchins that several prospects are running into this bug. I think we can call this workflow broken.\n\n\u003cimg width=\"774\" height=\"224\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/28a203d9-9d36-4b3b-9a5f-3c4282ef4c2f\" /\u003e"
          },
          {
            "author": {
              "login": "lukeheath"
            },
            "body": "@noahtalerman Agreed. Have we been able to reproduce in our own environment? "
          }
        ],
        "issueNumber": 31571,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdUpoM",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "issueNumber": 31549,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdVUIs",
        "milestone": {
          "title": "osquery-5.19.0"
        },
        "issueNumber": 31476,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdcmxA",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "issueNumber": 31728,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdg7ps",
        "comments": [
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Looks like MSRC typo'd (and still has typo'd) CVE-2024-36357 and CVE-2024-36350 to CVE-2025-[nnnnn] (verified against the original AMD advisory). This results in broken links on their side in a few places, and we're consuming that broken feed in MSRC parsing.\n\nWe should be able to fix this with updates to our MSRC feed generation, at which point an `nvd` feed run (the daily one, not the every-half-hour `vulnerabilities` feed run) will publish a new feed and Fleet servers will consume it later and remove the affected hosts (the source for these OS-level vulns is the MSRC feed)."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@jkatz01 Let's work on this one first. Will throw you more tickets as needed.\n\nMoving this to the release board."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@jkatz01 You'll need to comment here to ack so I can actually assign you in GitHub, at least for now."
          },
          {
            "author": {
              "login": "jkatz01"
            },
            "body": "@iansltx Commenting so you can assign me. "
          },
          {
            "author": {
              "login": "jkatz01"
            },
            "body": "@mostlikelee @iansltx I wrote a [draft](https://github.com/fleetdm/fleet/pull/31812) for skipping (hardcoded) CVEs in the MSRC feed parsing. I wrote and ran a unit test for it.\n\nHowever, I have not been able to reproduce the bug and get these CVEs on my local environment, so I have not been able to manually make sure it works and the CVEs don't show up from the MSRC feed.\n\nCould I get some advice on what to do next? Is it possible to maybe connect one of the computers that have this issue to my fleet instance or test my code in dogfood?"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@jkatz01 I believe you could revise data in the DB (`operating_systems` table) to match the OS name and version shown [in Dogfood](https://dogfood.fleetdm.com/hosts/manage?page=0\u0026order_key=display_name\u0026order_direction=asc\u0026vulnerability=CVE-2025-36350). All of the affected hosts have been offline for awhile so not sure whether they're even in the state that would repro at this point."
          }
        ],
        "issueNumber": 31474,
        "changeType": "modified"
      }
    ]
  },
  {
    "timestamp": "2025-08-13T07:06:41.033517292Z",
    "items": [
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdCxFk",
        "status": "🐣 In progress",
        "issueNumber": 30803,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdB-kE",
        "status": "🦤 ‎In review",
        "issueNumber": 31212,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcYi4Y",
        "status": "🦤 ‎In review",
        "comments": [
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "FYI @lukeheath marking this story as `P2`. The current behavior makes it look like Fleet does not understand how people actually use CVSS.  But now we do."
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "TODO RAchel: first draft of test plan"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@jmwatts Just filled in this story checklist so it's ready for User Story Review (credit to @RachelElysia for the test plan)."
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "assigning to @RachelElysia to estimate"
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "@lukeheath needs your estimate here and we can move it to the software board"
          },
          {
            "author": {
              "login": "jacobshandling"
            },
            "body": "For everyone's info, I was asked to estimate this this morning and estimated it at a 4. Looks like changing the project removed the estimate. @sharon-fdm @mostlikelee "
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "oh no that's my bad.  we discussed in sprint kickoff review that Luke is going to take this one @jacobshandling "
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "I'll assign a 4 here and move it to the software board for Luke"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@lukeheath Might be minimal extra work to solve #30524 alongside this since filter + sort seems like it would be sufficient there. Maybe dev this with that request in mind and check with the customer to see whether that solves their issue?"
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "removing milestone.  will not get to this story this sprint"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@lukeheath Can you create Sprint 45 and move this into it?"
          },
          {
            "author": {
              "login": "lukeheath"
            },
            "body": "@RachelElysia Thanks for taking this. I thought I'd be able to squeeze it in, but wasn't able to."
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "**QA Notes** (In Progress)\n\n- [x] Min max is present and new help text is present\n- [x] Min max is enabled only if vuln software toggle is enabled\n- [x] Defaults to \"Any severity\"\n- [x] If a user clicks on a given severity like \"Critical severity\", the min and max will be auto populated\n- [x] If a user clicks on \"Any severity\", the min and max are cleared\n- [x] If a user clicks on \"Custom severity\", the min and max do not change\n- [x] If a user types in a custom min or custom max, the dropdown will change to \"Custom severity\"\n- [x] If a user clears both custom min/max, the dropdown will change to \"Any severity\" but returns to \"Custom severity\" if they start typing\n- [x] If the user hits apply with no severity entered, it will apply any severity\n- [x] If the user clicks apply with only a min entered, it will only apply the min (e.g. \u003e=4.0)\n- [x] If the user clicks apply with only a max entered, it will only apply the max (e.g. \u003c= 8.0)\n- [x] If the user types in an invalid number into either min/max (e.g. 4.11 or -3), the in label error states it must be a number between 0-10 with an increment of 0.1\n- [x] 12b. The user cannot type in string as the input is limited to type number\n- [x] If the user types in a min larger than the max, the Apply button is disabled with a tooltip stating that the min can not be greater than the max.\n- [x] By clicking \"Apply\", the severity ranges will filter results to only vulnerable software with severity scores in the selected range\n- [x] Clearing the filter should show all software\n\n@RachelElysia Questions:\n❓ The Figma appears to show placeholder text but I don't see any in the UI - should that be there?\n❓ The modal accepts 010 as a number - should it?\n❓ If I enter 10 in the max, it clears it out on save - should it?\n❓ If I set the filter to \"Critical Severity\" it changes it to \"Custom Severity\" on save and clears out the max value - should it?"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "Thanks @jmwatts for your thoroughness!\n\n❓ The Figma appears to show placeholder text but I don't see any in the UI - should that be there?\nIt should, putting in a followup PR for this\n\n❓ The modal accepts 010 as a number - should it?\nLooking at this, I would have to add a check to `InputField` `type number`'s `onInputChange` function, but I'd be worried it might be too restrictive if someone needs to use input field with leading zeros? It feels hacky, so I think we should only add this into  `InputField` `type number`'s `onInputChange` function if it prevents a bug, but the UI/API kindly handles 0003 so I think it's okay to leave it in. Thoughts @marko-lisica \n\n❓ If I enter 10 in the max, it clears it out on save - should it?\nI did this to minimize the number of unnecessary parameters passed, like if they input 0 and 10, it really means no cvss custom range... but if it's causing Critical Severity to change to custom, it's buggy. so I'll add it back in and only clear both min and max if both values are set (\"0\" and \"10\")\n\n❓ If I set the filter to \"Critical Severity\" it changes it to \"Custom Severity\" on save and clears out the max value - should it?\nIt should stay Critical Severity, putting in a followup PR for this"
          }
        ],
        "issueNumber": 30248,
        "changeType": "modified"
      },
      {
        "content": {
          "body": "\n# Goal: easy-to-follow test steps for checking a release manually\n\n# Important reference data\n\n1. [fleetctl preview setup](https://fleetdm.com/fleetctl-preview)\n2. [permissions documentation](https://fleetdm.com/docs/using-fleet/permissions) \n3. premium tests require license key (needs renewal) `fleetctl preview --license-key=eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJGbGVldCBEZXZpY2UgTWFuYWdlbWVudCBJbmMuIiwiZXhwIjoxNjQwOTk1MjAwLCJzdWIiOiJkZXZlbG9wbWVudCIsImRldmljZXMiOjEwMCwibm90ZSI6ImZvciBkZXZlbG9wbWVudCBvbmx5IiwidGllciI6ImJhc2ljIiwiaWF0IjoxNjIyNDI2NTg2fQ.WmZ0kG4seW3IrNvULCHUPBSfFdqj38A_eiXdV_DFunMHechjHbkwtfkf1J6JQJoDyqn8raXpgbdhafDwv3rmDw`\n4. premium tests require license key (active - Expires Sunday, January 1, 2023 12:00:00 AM) `fleetctl preview --license-key=eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJGbGVldCBEZXZpY2UgTWFuYWdlbWVudCBJbmMuIiwiZXhwIjoxNjcyNTMxMjAwLCJzdWIiOiJGbGVldCBEZXZpY2UgTWFuYWdlbWVudCIsImRldmljZXMiOjEwMCwibm90ZSI6ImZvciBkZXZlbG9wbWVudCBvbmx5IiwidGllciI6InByZW1pdW0iLCJpYXQiOjE2NDI1MjIxODF9.EGHQjIzM73YyMbnCruswzg360DEYCsDi9uz48YcDwQHq90BabGT5PIXRiculw79emGj5sk2aKgccTd2hU5J7Jw`\n\n# Smoke Tests\nSmoke tests are limited to core functionality and serve as a pre-release final review. If smoke tests are failing, a release cannot proceed.\n\n## Fleet core:\n\n**Fleet version** (Head to the \"My account\" page in the Fleet UI or run `fleetctl version`):\n\n**Web browser** _(e.g. Chrome 88.0.4324)_: \n\n### Prerequisites\n\n1. `fleetctl preview` is set up and running the desired test version using [`--tag` parameters.](https://fleetdm.com/handbook/engineering#run-fleet-locally-for-qa-purposes)\n2. Unless you are explicitly testing older browser versions, browser is up to date.\n3. Certificate \u0026 flagfile are in place to create new host.\n4. In your browser, clear local storage using devtools.\n\n### Orchestration\n\u003ctable\u003e\n\u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eUpdate flow\u003c/td\u003e\u003ctd\u003e\n\n1. remove all fleet processes/agents/etc using `fleetctl preview reset` for a clean slate\n2. run `fleetctl preview` with no tag for latest stable\n3. create a host/query to later confirm upgrade with\n4. STOP fleet-preview-server instances in containers/apps on Docker\n5. run `fleetctl preview` with appropriate testing tag \u003c/td\u003e\u003ctd\u003eAll previously created hosts/queries are verified to still exist\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eLogin flow\u003c/td\u003e\u003ctd\u003e\n\n1. navigate to the login page and attempt to login with both valid and invalid credentials to verify some combination of expected results.\n2. navigate to the login page and attempt to login with both valid and invalid sso credentials to verify expected results.\n\u003c/td\u003e\u003ctd\u003e\n\n1. text fields prompt when blank\n2. correct error message is \"authentication failed\"\n3. forget password link prompts for email\n4. valid credentials result in a successful login.\n5. valid sso credentials result in a successful login\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003ePacks flow\u003c/td\u003e\u003ctd\u003eVerify management, operation, and logging of [\"2017 packs\"](https://fleetdm.com/handbook/company/why-this-way#why-does-fleet-support-query-packs).\u003c/td\u003e\u003ctd\u003e\n\n1. Packs successfully run on host machines after migrations \n2. New Packs can be created\n3. Packs can be edited and deleted\n4. Packs results information is logged\n \n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eLog destination flow\u003c/td\u003e\u003ctd\u003eVerify log destination for software, query, policy, and packs.\u003c/td\u003e\u003ctd\u003e\n\n1. Software, query, policy, and packs logs are successfully sent to external log destinations\n2. Software, query, policy, and packs logs are successfully sent to Filesystem log destinations\n \n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eOS settings\u003c/td\u003e\u003ctd\u003eVerify OS settings functionality\u003c/td\u003e\u003ctd\u003e\n\n1. Verify able to configure Disk encryption (macOS, Windows, \u0026 Linux).\n2. Verify host enrolled with Disk encryption enforced successfully encrypts.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003c/table\u003e\n\n### MDM\n\u003ctable\u003e\n\u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eMDM enrollment flow\u003c/td\u003e\u003ctd\u003eVerify MDM enrollments, run MDM commands\u003c/td\u003e\u003ctd\u003e\n  \n1. Erase an ADE-eligible macOS host and verify able to complete automated enrollment flow.\n2. With Windows MDM turned On, enroll a Windows host and verify MDM is turned On for the host.\n3. Verify able to run MDM commands on both macOS and Windows hosts from the CLI.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eMDM migration flow\u003c/td\u003e\u003ctd\u003eVerify MDM migration for ADE and non-ADE hosts\u003c/td\u003e\u003ctd\u003e\n  \n1. Turn off MDM on an ADE-eligible macOS host and verify that the native, \"Device Enrollment\" macOS notification appears.\n2. On the My device page, follow the \"Turn on MDM\" instructions and verify that MDM is turned on.\n3. Turn off MDM on a non ADE-eligible macOS host.\n4. On the My device page, follow the \"Turn on MDM\" instructions and verify that MDM is turned on.\n5. Verify Windows host migrates from 3rd party MDM to Fleet when automatic migration is turned on.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eOS settings\u003c/td\u003e\u003ctd\u003eVerify OS settings functionality\u003c/td\u003e\u003ctd\u003e\n\n1. Verify Profiles upload/download/delete (macOS \u0026 Windows).\n2. Verify Profiles are delivered to host and applied. \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eSetup experience\u003c/td\u003e\u003ctd\u003eVerify macOS Setup experience\u003c/td\u003e\u003ctd\u003e\n\n1. Configure End user authentication.\n3. Upload a Bootstrap package.\n4. Add software (FMA, VPP, \u0026 Custom pkg)\n5. Add a script\n6. Enroll an ADE-eligible macOS host and verify successful authentication.\n7. Verify Bootstrap package is delivered.\n8. Verify SwiftDialogue window displays.\n9. Verify software installs and script runs.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eOS updates\u003c/td\u003e\u003ctd\u003eVerify OS updates flow\u003c/td\u003e\u003ctd\u003e\n\n1. Configure OS updates (macOS \u0026 Windows).\n2. Verify on-device that Nudge prompt appears (macOS 13).\n3. Verify enforce minimumOS occurs during enrollment (macOS 14+).\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eiOS/iPadOS\u003c/td\u003e\u003ctd\u003eVerify enrollment, profiles, \u0026 software installs\u003c/td\u003e\u003ctd\u003e\n\n1. Verify ADE enrollment.\n2. Verify OTA enrollment.\n3. Verify Profiles are delivered to host and applied.\n4. Verify VPP apps install \u0026 display correctly in Activity feed.\n5. Verify `Turn Off MDM` for BYOD \u0026 ADE hosts.\n \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\n\u003ctr\u003e\u003ctd\u003eLock \u0026 Wipe\u003c/td\u003e\u003ctd\u003eVerify hosts can be locked \u0026 wiped\u003c/td\u003e\u003ctd\u003e\n\n1. Verify locking a host from the Fleet UI (macOS, Windows, \u0026 Linux)\n2. Verify unlocking a host from the Fleet UI (macOS, Windows, \u0026 Linux)\n3. Verify wiping a host from the Fleet UI (macOS, Windows, \u0026 Linux)\n4. Verify wiping and locking hosts using `fleetctl` (macOS, Windows, \u0026 Linux)\n \n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\n\u003ctr\u003e\u003ctd\u003eCertificates Upload\u003c/td\u003e\u003ctd\u003eAPNs cert and ABM token renewal workflow\u003c/td\u003e\u003ctd\u003e\n\n1. Renew APNs Certificate.\n2. Renew ABM Token.\n3. Ensure ADE hosts can enroll.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003c/table\u003e\n\n### Software\n\u003ctable\u003e\n\u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eQuery flow\u003c/td\u003e\u003ctd\u003eCreate, edit, run, and delete queries. \u003c/td\u003e\u003ctd\u003e\n\n1. permissions regarding creating/editing/deleting queries are up to date with documentation\n2. syntax errors result in error messaging\n3. queries can be run manually \n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eHost Flow\u003c/td\u003e\u003ctd\u003eVerify a new host can be added and removed following modal instructions using your own device.\u003c/td\u003e\u003ctd\u003e\n\n1. Host is added via command line\n2. Host serial number and date added are accurate\n3. Host is not visible after it is deleted\n4. Warning and informational modals show when expected and make sense\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eMy device page\u003c/td\u003e\u003ctd\u003eVerify the end user's my device page loads successfully.\u003c/td\u003e\u003ctd\u003e\n\n1. Clicking the Fleet desktop item, then \"My device\" successfully loads the my device page.\n2. The \"My device\" page is populated correctly and as expected. \n3. Styling and padding appears correct.\n \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eScripts\u003c/td\u003e\u003ctd\u003eVerify script library and execution\u003c/td\u003e\u003ctd\u003e\n\n1. Verify able to run a script on all host types from CLI.\n2. Verify scripts library upload/download/delete.\n3. From Host details (macOS, Windows, \u0026 Linux) run a script that should PASS, verify.\n4. From Host details (macOS, Windows, \u0026 Linux) run a script that should FAIL, verify.\n5. Verify UI loading state and statuses for scripts.\n8. Disable scripts globally and verify unable to run.\n9. Verify scripts display correctly in Activity feed.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eSoftware\u003c/td\u003e\u003ctd\u003eVerify software library and install / download\u003c/td\u003e\u003ctd\u003e\n\n1. Verify software library upload/download/delete.\n2. From Host details (macOS, Windows, \u0026 Linux) run an install that should PASS, verify.\n3. From My Device (macOS, Windows, \u0026 Linux) software tab should have self-service items available, verify.\n4. Verify UI loading state and statuses for installing software.\n7. Verify software installs display correctly in Activity feed.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\n\u003ctr\u003e\u003ctd\u003eMigration Test\u003c/td\u003e\u003ctd\u003eVerify Fleet can migrate to the next version with no issues.\u003c/td\u003e\u003ctd\u003e\n\nUsing the github action https://github.com/fleetdm/fleet/actions/workflows/db-upgrade-test.yml\n1. Using the most recent stable version of Fleet and `main`, click `Run workflow`\n2. Enter the Docker tag of Fleet starting version, e.g. 'v4.64.2'\n3. Enter the Docker tag of Fleet version to upgrade to, e.g. 'rc-minor-fleet-v4.65.0'\n4. Click `Run workflow`.\n5. Action should complete successfully.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003c/table\u003e\n\n### All Product Groups\n\u003ctable\u003e\n \u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eRelease blockers\u003c/td\u003e\u003ctd\u003eVerify there are no outstanding release blocking tickets.\u003c/td\u003e\u003ctd\u003e\n  \n1. Check [this](https://github.com/fleetdm/fleet/labels/~release%20blocker) filter to view all open `~release blocker` tickets.\n2. If any are found raise an alarm in the `#help-engineering` and `#g-mdm` (or `#g-endpoint-ops`)  channels.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\n\u003ctr\u003e\u003ctd\u003eLoad tests - minor releases only unless otherwise specified\u003c/td\u003e\u003ctd\u003eVerify all load test metrics are within acceptable range on final build of RC.\u003c/td\u003e\u003ctd\u003e\n  \n1. Check [this Google doc](https://docs.google.com/document/d/1V6QtFzcGDsLnn2PIvGin74DAxdAN_3likjxSssOMMQI/edit?tab=t.0#heading=h.15acjob4ji20) to review load test key metrics and checks.\n2. After all expected changes have been merged to the RC branch, two load tests will need to be run - a new instance with no data, and a migrated instance.\n3. For the new instance with no data, set up a load test environment using the RC branch and allow it at least 24hrs of run time.\n4. For the migrated instance, set up a load test environment on the previous minor release branch. Once the environment has been set up and stabilized, follow the instructions in [Deploying code changes to fleet](https://github.com/fleetdm/fleet/blob/main/infrastructure/loadtesting/terraform/readme.md#deploying-code-changes-to-fleet) to migrate to the RC branch. Monitor the metrics post-migration to determine if any performance issues arise.\n5. Record metrics in [this spreadsheet](https://docs.google.com/spreadsheets/d/1FOF0ykFVoZ7DJSTfrveip0olfyRQsY9oT1uXCCZmuKc/edit?usp=drive_link) for the two load test runs. \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e \n\u003c/table\u003e\n\n### Notes\n\nIssues found new to this version:\n\nIssues found that reproduce in last stable version: \n\nWhat has not been tested:\n\nInclude any notes on whether issues should block release or not as needed:\n\n\u003cbr\u003e\n\u003cbr\u003e\n\n"
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgc-TB0",
        "issueNumber": 31274,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdj4pY",
        "status": "✅ Ready for release",
        "comments": [
          {
            "author": {
              "login": "AndreyKizimenko"
            },
            "body": "Was able to reproduce this on Dogfood on 4.72\nDoes not happen on 4.71"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "Bug I pushed, seeing how I can remove it without wrecking the fix to clientside sort bug on sorted table resetting when clicking an action\n"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "**QA Notes**\n\n1. Click on the \"Policies\" tab\n2. Grab a random policy\n3. Click on the selected policy\n4. Click the \"Run\" button\n5. On 'Select targets' page click the \"Run\" button\n6. Wait for query to finish\n7. Scroll to bottom and click 'Next' button\n- [x] Verify 'Next' button changes list page on click\n- [x] Also check various other pages that use the table component and ensure pagination is working\n- [x] Also confirmed no regression for #31632"
          }
        ],
        "issueNumber": 31805,
        "changeType": "modified"
      },
      {
        "estimate": 5,
        "id": "PVTI_lADOBDAnic4A4BEUzgdAjcc",
        "comments": [
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "Confirmed during 8/4 standup:: This was previously approved in #31384, but since much of the code has been in flux, I am holding off until 4.72 is completely QAed and this PR will solely be a code organization PR and no changes to ensure another deep dive QA will be unnecessary"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "Upped this from a 3 to a 5 because I realized that there are 0 tests on the VPP install modal, software package install modal, and software uninstall modal. \n\nNeeded tests on each of those modals: \n- various status message based on what page they're on and whether it's successfulxpendingxfailed\n- whether they show versions or not\n- whether they show more details\n- what the action button is (since it's different for self-service vs admin)"
          }
        ],
        "issueNumber": 31309,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdUxWw",
        "labels": [
          "bug",
          ":release",
          "P1",
          "#g-software",
          "prospect-vulcano"
        ],
        "milestone": {
          "dueOn": "2025-08-08T00:00:00Z",
          "title": "4.72.0"
        },
        "status": "✅ Ready for release",
        "comments": [
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "@lukeheath added `P1` because I just learned from @allenhouchins that several prospects are running into this bug. I think we can call this workflow broken.\n\n\u003cimg width=\"774\" height=\"224\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/28a203d9-9d36-4b3b-9a5f-3c4282ef4c2f\" /\u003e"
          },
          {
            "author": {
              "login": "lukeheath"
            },
            "body": "@noahtalerman Agreed. Have we been able to reproduce in our own environment? "
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "Changed milestone to 4.72 since this was cherry picked in to the release."
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "**QA Notes**\n\nTested locally\n\n1. Upload an automatic software installer X to \"No team\".\n2. Wait for software to be installed X on a host in \"No team\".\n3. Run vulnerability scanning (to update host counts).\n4. Go to Software\u003e All teams and use the filter to find the software X.\n\n- [x] Verify there is no longer a \"Something's gone wrong\" error (or a panic in the server logs)\n\nAlso confirmed with @allenhouchins that the issue no longer occurs in the prospect's environment after the fix is applied."
          }
        ],
        "issueNumber": 31571,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdCk80",
        "status": "🦤 ‎In review",
        "issueNumber": 31164,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdg7ps",
        "labels": [
          "bug",
          "~vulnerability-management",
          ":product",
          "customer-stazzema",
          "#g-software",
          "~qa-on-branch"
        ],
        "issueNumber": 31474,
        "changeType": "modified"
      }
    ]
  },
  {
    "timestamp": "2025-08-13T19:05:07.759627096Z",
    "items": [
      {
        "content": {
          "body": "\n# Goal: easy-to-follow test steps for checking a release manually\n\n# Important reference data\n\n1. [fleetctl preview setup](https://fleetdm.com/fleetctl-preview)\n2. [permissions documentation](https://fleetdm.com/docs/using-fleet/permissions) \n3. premium tests require license key (needs renewal) `fleetctl preview --license-key=eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJGbGVldCBEZXZpY2UgTWFuYWdlbWVudCBJbmMuIiwiZXhwIjoxNjQwOTk1MjAwLCJzdWIiOiJkZXZlbG9wbWVudCIsImRldmljZXMiOjEwMCwibm90ZSI6ImZvciBkZXZlbG9wbWVudCBvbmx5IiwidGllciI6ImJhc2ljIiwiaWF0IjoxNjIyNDI2NTg2fQ.WmZ0kG4seW3IrNvULCHUPBSfFdqj38A_eiXdV_DFunMHechjHbkwtfkf1J6JQJoDyqn8raXpgbdhafDwv3rmDw`\n4. premium tests require license key (active - Expires Sunday, January 1, 2023 12:00:00 AM) `fleetctl preview --license-key=eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJGbGVldCBEZXZpY2UgTWFuYWdlbWVudCBJbmMuIiwiZXhwIjoxNjcyNTMxMjAwLCJzdWIiOiJGbGVldCBEZXZpY2UgTWFuYWdlbWVudCIsImRldmljZXMiOjEwMCwibm90ZSI6ImZvciBkZXZlbG9wbWVudCBvbmx5IiwidGllciI6InByZW1pdW0iLCJpYXQiOjE2NDI1MjIxODF9.EGHQjIzM73YyMbnCruswzg360DEYCsDi9uz48YcDwQHq90BabGT5PIXRiculw79emGj5sk2aKgccTd2hU5J7Jw`\n\n# Smoke Tests\nSmoke tests are limited to core functionality and serve as a pre-release final review. If smoke tests are failing, a release cannot proceed.\n\n## Fleet core:\n\n**Fleet version** (Head to the \"My account\" page in the Fleet UI or run `fleetctl version`):\n\n**Web browser** _(e.g. Chrome 88.0.4324)_: \n\n### Prerequisites\n\n1. `fleetctl preview` is set up and running the desired test version using [`--tag` parameters.](https://fleetdm.com/handbook/engineering#run-fleet-locally-for-qa-purposes)\n2. Unless you are explicitly testing older browser versions, browser is up to date.\n3. Certificate \u0026 flagfile are in place to create new host.\n4. In your browser, clear local storage using devtools.\n\n### Orchestration\n\u003ctable\u003e\n\u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eUpdate flow\u003c/td\u003e\u003ctd\u003e\n\n1. remove all fleet processes/agents/etc using `fleetctl preview reset` for a clean slate\n2. run `fleetctl preview` with no tag for latest stable\n3. create a host/query to later confirm upgrade with\n4. STOP fleet-preview-server instances in containers/apps on Docker\n5. run `fleetctl preview` with appropriate testing tag \u003c/td\u003e\u003ctd\u003eAll previously created hosts/queries are verified to still exist\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eLogin flow\u003c/td\u003e\u003ctd\u003e\n\n1. navigate to the login page and attempt to login with both valid and invalid credentials to verify some combination of expected results.\n2. navigate to the login page and attempt to login with both valid and invalid sso credentials to verify expected results.\n\u003c/td\u003e\u003ctd\u003e\n\n1. text fields prompt when blank\n2. correct error message is \"authentication failed\"\n3. forget password link prompts for email\n4. valid credentials result in a successful login.\n5. valid sso credentials result in a successful login\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003ePacks flow\u003c/td\u003e\u003ctd\u003eVerify management, operation, and logging of [\"2017 packs\"](https://fleetdm.com/handbook/company/why-this-way#why-does-fleet-support-query-packs).\u003c/td\u003e\u003ctd\u003e\n\n1. Packs successfully run on host machines after migrations \n2. New Packs can be created\n3. Packs can be edited and deleted\n4. Packs results information is logged\n \n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eLog destination flow\u003c/td\u003e\u003ctd\u003eVerify log destination for software, query, policy, and packs.\u003c/td\u003e\u003ctd\u003e\n\n1. Software, query, policy, and packs logs are successfully sent to external log destinations\n2. Software, query, policy, and packs logs are successfully sent to Filesystem log destinations\n \n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eOS settings\u003c/td\u003e\u003ctd\u003eVerify OS settings functionality\u003c/td\u003e\u003ctd\u003e\n\n1. Verify able to configure Disk encryption (macOS, Windows, \u0026 Linux).\n2. Verify host enrolled with Disk encryption enforced successfully encrypts.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003c/table\u003e\n\n### MDM\n\u003ctable\u003e\n\u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eMDM enrollment flow\u003c/td\u003e\u003ctd\u003eVerify MDM enrollments, run MDM commands\u003c/td\u003e\u003ctd\u003e\n  \n1. Erase an ADE-eligible macOS host and verify able to complete automated enrollment flow.\n2. With Windows MDM turned On, enroll a Windows host and verify MDM is turned On for the host.\n3. Verify able to run MDM commands on both macOS and Windows hosts from the CLI.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eMDM migration flow\u003c/td\u003e\u003ctd\u003eVerify MDM migration for ADE and non-ADE hosts\u003c/td\u003e\u003ctd\u003e\n  \n1. Turn off MDM on an ADE-eligible macOS host and verify that the native, \"Device Enrollment\" macOS notification appears.\n2. On the My device page, follow the \"Turn on MDM\" instructions and verify that MDM is turned on.\n3. Turn off MDM on a non ADE-eligible macOS host.\n4. On the My device page, follow the \"Turn on MDM\" instructions and verify that MDM is turned on.\n5. Verify Windows host migrates from 3rd party MDM to Fleet when automatic migration is turned on.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eOS settings\u003c/td\u003e\u003ctd\u003eVerify OS settings functionality\u003c/td\u003e\u003ctd\u003e\n\n1. Verify Profiles upload/download/delete (macOS \u0026 Windows).\n2. Verify Profiles are delivered to host and applied. \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eSetup experience\u003c/td\u003e\u003ctd\u003eVerify macOS Setup experience\u003c/td\u003e\u003ctd\u003e\n\n1. Configure End user authentication.\n3. Upload a Bootstrap package.\n4. Add software (FMA, VPP, \u0026 Custom pkg)\n5. Add a script\n6. Enroll an ADE-eligible macOS host and verify successful authentication.\n7. Verify Bootstrap package is delivered.\n8. Verify SwiftDialogue window displays.\n9. Verify software installs and script runs.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eOS updates\u003c/td\u003e\u003ctd\u003eVerify OS updates flow\u003c/td\u003e\u003ctd\u003e\n\n1. Configure OS updates (macOS \u0026 Windows).\n2. Verify on-device that Nudge prompt appears (macOS 13).\n3. Verify enforce minimumOS occurs during enrollment (macOS 14+).\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eiOS/iPadOS\u003c/td\u003e\u003ctd\u003eVerify enrollment, profiles, \u0026 software installs\u003c/td\u003e\u003ctd\u003e\n\n1. Verify ADE enrollment.\n2. Verify OTA enrollment.\n3. Verify Profiles are delivered to host and applied.\n4. Verify VPP apps install \u0026 display correctly in Activity feed.\n5. Verify `Turn Off MDM` for BYOD \u0026 ADE hosts.\n \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\n\u003ctr\u003e\u003ctd\u003eLock \u0026 Wipe\u003c/td\u003e\u003ctd\u003eVerify hosts can be locked \u0026 wiped\u003c/td\u003e\u003ctd\u003e\n\n1. Verify locking a host from the Fleet UI (macOS, Windows, \u0026 Linux)\n2. Verify unlocking a host from the Fleet UI (macOS, Windows, \u0026 Linux)\n3. Verify wiping a host from the Fleet UI (macOS, Windows, \u0026 Linux)\n4. Verify wiping and locking hosts using `fleetctl` (macOS, Windows, \u0026 Linux)\n \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\n\u003ctr\u003e\u003ctd\u003eCertificates Upload\u003c/td\u003e\u003ctd\u003eAPNs cert and ABM token renewal workflow\u003c/td\u003e\u003ctd\u003e\n\n1. Renew APNs Certificate.\n2. Renew ABM Token.\n3. Ensure ADE hosts can enroll.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003c/table\u003e\n\n### Software\n\u003ctable\u003e\n\u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eQuery flow\u003c/td\u003e\u003ctd\u003eCreate, edit, run, and delete queries. \u003c/td\u003e\u003ctd\u003e\n\n1. permissions regarding creating/editing/deleting queries are up to date with documentation\n2. syntax errors result in error messaging\n3. queries can be run manually \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eHost Flow\u003c/td\u003e\u003ctd\u003eVerify a new host can be added and removed following modal instructions using your own device.\u003c/td\u003e\u003ctd\u003e\n\n1. Host is added via command line\n2. Host serial number and date added are accurate\n3. Host is not visible after it is deleted\n4. Warning and informational modals show when expected and make sense\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eMy device page\u003c/td\u003e\u003ctd\u003eVerify the end user's my device page loads successfully.\u003c/td\u003e\u003ctd\u003e\n\n1. Clicking the Fleet desktop item, then \"My device\" successfully loads the my device page.\n2. The \"My device\" page is populated correctly and as expected. \n3. Styling and padding appears correct.\n \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eScripts\u003c/td\u003e\u003ctd\u003eVerify script library and execution\u003c/td\u003e\u003ctd\u003e\n\n1. Verify able to run a script on all host types from CLI.\n2. Verify scripts library upload/download/delete.\n3. From Host details (macOS, Windows, \u0026 Linux) run a script that should PASS, verify.\n4. From Host details (macOS, Windows, \u0026 Linux) run a script that should FAIL, verify.\n5. Verify UI loading state and statuses for scripts.\n8. Disable scripts globally and verify unable to run.\n9. Verify scripts display correctly in Activity feed.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eSoftware\u003c/td\u003e\u003ctd\u003eVerify software library and install / download\u003c/td\u003e\u003ctd\u003e\n\n1. Verify software library upload/download/delete.\n2. From Host details (macOS, Windows, \u0026 Linux) run an install that should PASS, verify.\n3. From My Device (macOS, Windows, \u0026 Linux) software tab should have self-service items available, verify.\n4. Verify UI loading state and statuses for installing software.\n7. Verify software installs display correctly in Activity feed.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\n\u003ctr\u003e\u003ctd\u003eMigration Test\u003c/td\u003e\u003ctd\u003eVerify Fleet can migrate to the next version with no issues.\u003c/td\u003e\u003ctd\u003e\n\nUsing the github action https://github.com/fleetdm/fleet/actions/workflows/db-upgrade-test.yml\n1. Using the most recent stable version of Fleet and `main`, click `Run workflow`\n2. Enter the Docker tag of Fleet starting version, e.g. 'v4.64.2'\n3. Enter the Docker tag of Fleet version to upgrade to, e.g. 'rc-minor-fleet-v4.65.0'\n4. Click `Run workflow`.\n5. Action should complete successfully.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003c/table\u003e\n\n### All Product Groups\n\u003ctable\u003e\n \u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eRelease blockers\u003c/td\u003e\u003ctd\u003eVerify there are no outstanding release blocking tickets.\u003c/td\u003e\u003ctd\u003e\n  \n1. Check [this](https://github.com/fleetdm/fleet/labels/~release%20blocker) filter to view all open `~release blocker` tickets.\n2. If any are found raise an alarm in the `#help-engineering` and `#g-mdm` (or `#g-endpoint-ops`)  channels.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\n\u003ctr\u003e\u003ctd\u003eLoad tests - minor releases only unless otherwise specified\u003c/td\u003e\u003ctd\u003eVerify all load test metrics are within acceptable range on final build of RC.\u003c/td\u003e\u003ctd\u003e\n  \n1. Check [this Google doc](https://docs.google.com/document/d/1V6QtFzcGDsLnn2PIvGin74DAxdAN_3likjxSssOMMQI/edit?tab=t.0#heading=h.15acjob4ji20) to review load test key metrics and checks.\n2. After all expected changes have been merged to the RC branch, two load tests will need to be run - a new instance with no data, and a migrated instance.\n3. For the new instance with no data, set up a load test environment using the RC branch and allow it at least 24hrs of run time.\n4. For the migrated instance, set up a load test environment on the previous minor release branch. Once the environment has been set up and stabilized, follow the instructions in [Deploying code changes to fleet](https://github.com/fleetdm/fleet/blob/main/infrastructure/loadtesting/terraform/readme.md#deploying-code-changes-to-fleet) to migrate to the RC branch. Monitor the metrics post-migration to determine if any performance issues arise.\n5. Record metrics in [this spreadsheet](https://docs.google.com/spreadsheets/d/1FOF0ykFVoZ7DJSTfrveip0olfyRQsY9oT1uXCCZmuKc/edit?usp=drive_link) for the two load test runs. \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e \n\u003c/table\u003e\n\n### Notes\n\nIssues found new to this version:\n\nIssues found that reproduce in last stable version: \n\nWhat has not been tested:\n\nInclude any notes on whether issues should block release or not as needed:\n\n\u003cbr\u003e\n\u003cbr\u003e\n\n"
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgc-TB0",
        "status": "✅ Ready for release",
        "comments": [
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "```\nFLEET_VERSION_A=v4.71.1 FLEET_VERSION_B=rc-minor-fleet-v4.72.0 go test -v\n--- PASS: TestUpgradeAToB (57.07s)\nPASS\nok  \tgithub.com/fleetdm/fleet/v4/test/upgrade\t57.084s\n```\n\n```\nFLEET_VERSION_A=v4.71.0 FLEET_VERSION_B=rc-minor-fleet-v4.72.0 go test -v\n--- PASS: TestUpgradeAToB (52.56s)\nPASS\nok  \tgithub.com/fleetdm/fleet/v4/test/upgrade\t52.577s\n```\n\n```\nFLEET_VERSION_A=v4.70.0 FLEET_VERSION_B=rc-minor-fleet-v4.72.0 go test -v\n--- PASS: TestUpgradeAToB (112.70s)\nPASS\nok  \tgithub.com/fleetdm/fleet/v4/test/upgrade\t112.715s\n```\n\n```\nFLEET_VERSION_A=v4.69.0 FLEET_VERSION_B=rc-minor-fleet-v4.72.0 go test -v\n--- PASS: TestUpgradeAToB (68.57s)\nPASS\nok  \tgithub.com/fleetdm/fleet/v4/test/upgrade\t68.590s\n```"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "```\nFLEET_VERSION_A=v4.69.0 FLEET_VERSION_B=rc-minor-fleet-v4.72.0 go test -v\n--- PASS: TestUpgradeAToB (52.77s)\nPASS\nok  \tgithub.com/fleetdm/fleet/v4/test/upgrade\t52.785s\n```\n\n```\nFLEET_VERSION_A=v4.70.0 FLEET_VERSION_B=rc-minor-fleet-v4.72.0 go test -v\n--- PASS: TestUpgradeAToB (69.75s)\nPASS\nok  \tgithub.com/fleetdm/fleet/v4/test/upgrade\t69.764s\n```\n\n```\nFLEET_VERSION_A=v4.71.0 FLEET_VERSION_B=rc-minor-fleet-v4.72.0 go test -v\n--- PASS: TestUpgradeAToB (48.14s)\nPASS\nok  \tgithub.com/fleetdm/fleet/v4/test/upgrade\t48.160s\n```\n\n```\nFLEET_VERSION_A=v4.71.1 FLEET_VERSION_B=rc-minor-fleet-v4.72.0 go test -v\n--- PASS: TestUpgradeAToB (47.34s)\nPASS\nok  \tgithub.com/fleetdm/fleet/v4/test/upgrade\t47.360s\n```"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "Software gives 👍 for release."
          }
        ],
        "issueNumber": 31274,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdCxBg",
        "status": "🐣 In progress",
        "comments": [
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@iansltx I see that the steps to reproduce is still a **to do**.\n\nHowever, the way you've written it sounds like part of the ticket will be to find a way to reproduce this. I'm a little uncertain how to proceed. Should I move this forward and indicate that todo as part of the fix area?\n\ncc @mostlikelee "
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "Whoops, my bad on removing `:reproduce`"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@eugkuo Yeah, this will need to be moved through to engineering with the reproduce tag intact as we'll likely need to coordinate with customers to get a repro."
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "let's timebox this, whether it is reproduction, or adding logging"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Pulling the :reproduce label off of this since that makes it less clear whose work queue this is in. Timebox is for investigation/repro by an engineer."
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "@ksykulev heads up that this is a related ticket: https://github.com/fleetdm/fleet/issues/29050"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@noahtalerman @marko-lisica See [this Slack thread](https://fleetdm.slack.com/archives/C086V2QK76X/p1754591131297309) for context on why this is Waiting. We have some product questions on whether/when we should clear \"last opened\", and the behavior may not be consistent right now cross-os (e.g. @zwass mentioned that we don't take version into account when checking package last-opened times in Linux)."
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "Was able to reproduce the warning in the log:\n\n```\nlevel=warn ts=2025-08-07T19:08:27.209411Z msg=\"updateModifiedHostSoftwareDB: last opened at is nil for new software, but not for current software\" new_software=\"Microsoft Word\" current_software=\"Microsoft Word\" bundle_identifier=com.microsoft.Word\n```\nBy doing the following:\n\n1. Install Microsoft Word, and open\n2. Refetch host vitals\n3. Confirm \"Last used\" time is shown on Host \u003e Software \u003eInventory tab\n4. Reinstall or Update Microsoft Word via Fleet, do not open\n5. Refetch completes after installation automatically\n6. \"Last used\" time is cleared out on Host \u003e Software \u003eInventory tab\n\nAdded steps to repro in description."
          },
          {
            "author": {
              "login": "ksykulev"
            },
            "body": "Not sure we need more confirmation, but..\nI downloaded firefox 139.0.4, installed it\n\n\u003cimg width=\"1206\" height=\"105\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/9c714aa4-6e4b-4e9a-9741-8f5bdddcd980\" /\u003e\n\nOpened firefox\n\n\u003cimg width=\"1219\" height=\"126\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/a07f13ee-cacb-4f58-bbde-092b31846c7b\" /\u003e\n\nDownloaded firefox 141.0.3, installed it\n\n\u003cimg width=\"1203\" height=\"126\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/9f4138ea-edd9-4bf8-9c00-e1c274526c2f\" /\u003e"
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "\u003e @noahtalerman @marko-lisica See [this Slack thread](https://fleetdm.slack.com/archives/C086V2QK76X/p1754591131297309) for context on why this is Waiting. We have some product questions on whether/when we should clear \"last opened\", and the behavior may not be consistent right now cross-os (e.g. @zwass mentioned that we don't take version into account when checking package last-opened times in Linux).\n\nUp to @marko-lisica "
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "waiting on copy change, documenting the oddity"
          }
        ],
        "issueNumber": 29061,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdCoeo",
        "status": "✔️Awaiting QA",
        "issueNumber": 25636,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdg7ps",
        "status": "🦤 ‎In review",
        "issueNumber": 31474,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdUaqU",
        "status": "✔️Awaiting QA",
        "issueNumber": 31268,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcYi4Y",
        "status": "✔️Awaiting QA",
        "comments": [
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "FYI @lukeheath marking this story as `P2`. The current behavior makes it look like Fleet does not understand how people actually use CVSS.  But now we do."
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "TODO RAchel: first draft of test plan"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@jmwatts Just filled in this story checklist so it's ready for User Story Review (credit to @RachelElysia for the test plan)."
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "assigning to @RachelElysia to estimate"
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "@lukeheath needs your estimate here and we can move it to the software board"
          },
          {
            "author": {
              "login": "jacobshandling"
            },
            "body": "For everyone's info, I was asked to estimate this this morning and estimated it at a 4. Looks like changing the project removed the estimate. @sharon-fdm @mostlikelee "
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "oh no that's my bad.  we discussed in sprint kickoff review that Luke is going to take this one @jacobshandling "
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "I'll assign a 4 here and move it to the software board for Luke"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@lukeheath Might be minimal extra work to solve #30524 alongside this since filter + sort seems like it would be sufficient there. Maybe dev this with that request in mind and check with the customer to see whether that solves their issue?"
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "removing milestone.  will not get to this story this sprint"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@lukeheath Can you create Sprint 45 and move this into it?"
          },
          {
            "author": {
              "login": "lukeheath"
            },
            "body": "@RachelElysia Thanks for taking this. I thought I'd be able to squeeze it in, but wasn't able to."
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "**QA Notes** (In Progress)\n\n- [x] Min max is present and new help text is present\n- [x] Min max is enabled only if vuln software toggle is enabled\n- [x] Defaults to \"Any severity\"\n- [x] If a user clicks on a given severity like \"Critical severity\", the min and max will be auto populated\n- [x] If a user clicks on \"Any severity\", the min and max are cleared\n- [x] If a user clicks on \"Custom severity\", the min and max do not change\n- [x] If a user types in a custom min or custom max, the dropdown will change to \"Custom severity\"\n- [x] If a user clears both custom min/max, the dropdown will change to \"Any severity\" but returns to \"Custom severity\" if they start typing\n- [x] If the user hits apply with no severity entered, it will apply any severity\n- [x] If the user clicks apply with only a min entered, it will only apply the min (e.g. \u003e=4.0)\n- [x] If the user clicks apply with only a max entered, it will only apply the max (e.g. \u003c= 8.0)\n- [x] If the user types in an invalid number into either min/max (e.g. 4.11 or -3), the in label error states it must be a number between 0-10 with an increment of 0.1\n- [x] 12b. The user cannot type in string as the input is limited to type number\n- [x] If the user types in a min larger than the max, the Apply button is disabled with a tooltip stating that the min can not be greater than the max.\n- [x] By clicking \"Apply\", the severity ranges will filter results to only vulnerable software with severity scores in the selected range\n- [x] Clearing the filter should show all software\n\n@RachelElysia Questions:\n❓ The Figma appears to show placeholder text but I don't see any in the UI - should that be there?\n❓ The modal accepts 010 as a number - should it?\n❓ If I enter 10 in the max, it clears it out on save - should it?\n❓ If I set the filter to \"Critical Severity\" it changes it to \"Custom Severity\" on save and clears out the max value - should it?"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "Thanks @jmwatts for your thoroughness!\n\n❓ The Figma appears to show placeholder text but I don't see any in the UI - should that be there?\nIt should, putting in a followup PR for this\n\n❓ The modal accepts 010 as a number - should it?\nLooking at this, I would have to add a check to `InputField` `type number`'s `onInputChange` function, but I'd be worried it might be too restrictive if someone needs to use input field with leading zeros? It feels hacky, so I think we should only add this into  `InputField` `type number`'s `onInputChange` function if it prevents a bug, but the UI/API kindly handles 0003 so I think it's okay to leave it in. Thoughts @marko-lisica \n\n❓ If I enter 10 in the max, it clears it out on save - should it?\nI did this to minimize the number of unnecessary parameters passed, like if they input 0 and 10, it really means no cvss custom range... but if it's causing Critical Severity to change to custom, it's buggy. so I'll add it back in and only clear both min and max if both values are set (\"0\" and \"10\")\n\n❓ If I set the filter to \"Critical Severity\" it changes it to \"Custom Severity\" on save and clears out the max value - should it?\nIt should stay Critical Severity, putting in a followup PR for this"
          },
          {
            "author": {
              "login": "marko-lisica"
            },
            "body": "\u003e Looking at this, I would have to add a check to InputField type number's onInputChange function, but I'd be worried it might be too restrictive if someone needs to use input field with leading zeros? It feels hacky, so I think we should only add this into InputField type number's onInputChange function if it prevents a bug, but the UI/API kindly handles 0003 so I think it's okay to leave it in. Thoughts @marko-lisica\n\n@RachelElysia Sounds good to me.\n\n"
          }
        ],
        "issueNumber": 30248,
        "changeType": "modified"
      },
      {
        "assignees": [
          "ksykulev"
        ],
        "id": "PVTI_lADOBDAnic4A4BEUzgdCk88",
        "issueNumber": 31165,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdcmxA",
        "status": "Done",
        "issueNumber": 31728,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdCpok",
        "status": "🐣 In progress",
        "issueNumber": 31214,
        "changeType": "modified"
      },
      {
        "assignees": [
          "jkatz01"
        ],
        "content": {
          "body": "**Fleet version**: \u003c!-- Copy this from the \"My account\" page in the Fleet UI, or run `fleetctl --version` --\u003e\n\n**Web browser and operating system**: \u003c!-- e.g. Chrome 88.0.4324 running on macOS --\u003e\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\n\u003c!-- What did you see?  Paste a screenshot, include a 30s video, or write 1-2 sentences describing the issue you observed. --\u003e\nI was seeing this ugly 404 for this API endpoint of a pending uninstall `https://localhost:8080/api/latest/fleet/scripts/results/1c4a9400-e43c-4f9b-90a2-e129636b92bd`\n\n\u003cimg width=\"1478\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/6f973369-93f7-48ae-81e4-cba74223b600\" /\u003e\n\nUpon testing the API endpoint of a pending uninstall, this is my findings:\n\n:white_check_mark: macOS pending uninstall initiated by end user\n:white_check_mark: macOS pending uninstall initiated by fleet admin\n:x: windows pending uninstall initiated by fleet admin\n:white_check_mark: windows pending uninstall initiated by end user \n:x:  This also happens for macOS FMA installs/uninstalls and VPP installs when a host is offline\n\n:white_check_mark: windows pending uninstall initiated by fleet admin is now working when the host is online\ngonna try when they're offline again\n\nOk, closed my windows VM, waited until it showed offline, added a new windows FMA, clicked uninstall, and got the same error\n:x: windows pending uninstall initiated by fleet admin when the host is offline\n\nHere's the second confirmation immediately after adding a windows fma app (to ensure it wasn't an issue with some old data in the db)\n\n\u003cimg width=\"1504\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/b6c7bf98-f95a-4ab3-8eda-262f1293da56\" /\u003e\n\n### 🧑‍💻  Steps to reproduce\n\u003c!-- Provide step-by-step actions of how to recreate this bug in a clean install of Fleet. (This helps others understand and fix it more quickly.) --\u003e\n1. Have a windows host that is offline\n2. Add a windows FMA\n3. Click the \"uninstall\" button on the windows FMA from the host details \u003e software \u003e library page\n4. See it go pending\n5. Go to host details \u003e details \u003e activity \u003e upcoming and try to click on the information\n6. Notice that we get a 404 in the modal about the information\n\n### 🕯️ More info _(optional)_\n\u003c!-- Add any additional details you think could be relevant to solving or reproducing the bug (e.g., \"this does not reproduce when...\") --\u003e\nI listed the various successful behaviors above. However, I want to note that I did not attempt\n❔macOS pending uninstall initiated by fleet admin on an offline host because my only macOS is my own laptop which is most def online\n\n\n\u003c!-- If this is a performance issue, follow these steps to generate and attach a debug archive: https://fleetdm.com/docs/using-fleet/monitoring-fleet#debugging-performance-issues --\u003e\n\n### 🛠️ To fix\nProduct designer: @marko-lisica \n\nIt should function the same way on Windows as it does on macOS.",
          "number": 30383,
          "repository": "fleetdm/fleet",
          "title": "Admin initiated Windows Uninstall pending script returning 404 when host is offline",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/30383"
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgdmlbY",
        "labels": [
          "bug",
          "~backend",
          "~released bug",
          ":product",
          "#g-software"
        ],
        "repository": "https://github.com/fleetdm/fleet",
        "status": "Done",
        "title": "Admin initiated Windows Uninstall pending script returning 404 when host is offline",
        "comments": [
          {
            "author": {
              "login": "jkatz01"
            },
            "body": "### Root cause\n\nShowing the details for an uninstall activity relies on a query from the endpoint `/scripts/results/{execution_id}` that ends up in the function `GetHostScriptExecutionResultDB()`. The query in this function fails when the table `host_script_results` does not have the `execution_id` for the activity. Since no uninstall activity [except the one at the top of the queue](https://github.com/fleetdm/fleet/blob/main/server/datastore/mysql/activities.go#L1213) is **activated**,  their execution_id isn't in the table and the api returns 404.\n\n### Fix\n\nI looked into this bug and came up with 2 options on how to fix it. The first is a small cover up fix in the frontend, this should be sufficient for this issue, but it hides an underlying (probably minor) backend issue. The second is a backend fix that I believe is more correct, please tell me what you think.\n\n1. A cover up frontend fix to not show the ugly message. The pop-up message only shows the software title and host display name, so it's possible to just show those without getting the script results from the backend. \n\n\u003cimg width=\"1414\" height=\"625\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/a2d8ad0d-75f0-423c-a9c9-29af62093c91\" /\u003e\n\n.\n\n2. The `/scripts/results/{execution_id}` endpoint uses an incorrect query in the function `getHostScriptExecutionResultDB()` that fails. I suggest either writing a new endpoint, or modifying the existing `/software/uninstall/{execution_id}/results` endpoint, to use a new function that uses a correct query for an uninstall activity. Here is a working query: \n\n```\nconst getUpcomingStmt = `\nSELECT\n\t0 as id,\n\tua.host_id,\n\tua.execution_id,\n\tsc.contents as script_contents,\n\tsiua.software_installer_id as script_id,\n\tsiua.policy_id as policy_id,\n\t'' as output,\n\t0 as runtime,\n\tNULL as exit_code,\n\tNULL as timeout,\n\tua.created_at,\n\tua.user_id,\n\tCOALESCE(ua.payload-\u003e'$.sync_request', 0) as sync_request,\n\tNULL as host_deleted_at,\n\t0 as setup_experience_script_id,\n\t0 as canceled\nFROM\n\tupcoming_activities ua\n\tINNER JOIN software_install_upcoming_activities siua\n\t\tON ua.id = siua.upcoming_activity_id\n\tINNER JOIN\n\t\tsoftware_installers si\n\t\tON siua.software_installer_id = si.id\n\tINNER JOIN\n\t\tscript_contents sc\n\t\tON si.uninstall_script_content_id = sc.id\nWHERE\n\tua.execution_id = ? AND\n\tua.activity_type = 'software_uninstall'\n`\n```\n\ncc: @mostlikelee"
          }
        ],
        "issueNumber": 30383,
        "changeType": "added"
      },
      {
        "assignees": [
          "zwass"
        ],
        "content": {
          "body": "- `customer-numa`: Gong snippet: Customer does not allow call recordings\n- @noahtalerman: _User requested this because_ they want to replace the Flexera agent with the Fleet agent on Linux hosts and need `last_opened_at` data to support software usage tracking in Flexera. This way, they can answer these questions:\n  - DEX: Who's actually using the app? This way, we can decide how to support the app. For example, when a new vulnerability comes out, do we provide documentation/training on how to delete it or update it?\n  - DEX: Maybe we can provide docs to help the few people that are using it?\n  - Do we have too many Parallels licenses? Who's actually using it?\n  - @noahtalerman: _In the interim_ they might be able to run customer PowerShell scripts to get this data. \n    - @allenhouchins: Users could also get this info for third-party apps by looking at login data from the third-party software. \n  - @noahtalerman: _Eventually_ Fleet could collect and return `last_opened_at` timestamps for software on Linux hosts via the `GET /api/v1/fleet/hosts/:id` endpoint.\n\n---\n",
          "number": 27902,
          "repository": "fleetdm/fleet",
          "title": "Software inventory: See last time Linux software was used",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/27902"
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgdnBvc",
        "labels": [
          ":help-customers",
          "customer-numa",
          "#g-software"
        ],
        "repository": "https://github.com/fleetdm/fleet",
        "status": "✔️Awaiting QA",
        "title": "Software inventory: See last time Linux software was used",
        "comments": [
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "\u003c!-- Describe the problem you're trying to solve. What are you trying to accomplish? \n\nExample: I want to order a pair of shoes from my food delivery app, which does not show options for stores that don't carry food. --\u003e\nThe `GET /api/v1/fleet/hosts/:id` API endpoint returns a `last_opened_at` timestamp for macOS hosts. Linux hosts do not have this timestamp.\n\n`customer-numa` uses Flexera for software asset management. Rather than deploy the Flexera agent, they would like to just deploy the Fleet agent and build a connector to get the relevant information into Flexera. `last_opened_at` for Linux hosts is something numa would need from Fleet today in order to accomplish that.\n\nThis is similar to #27087, but for Linux.\n\n## What have you tried?\n\n\u003c!-- Described what actions you have taken in the product today to try and solve this problem. Why didn't that workflow or result work for you? What is missing? \n\nExample: I searched for shoe stores in my food delivery app, but there were no results available. --\u003e\nI made a `GET /api/v1/fleet/hosts/:id` API call to a Linux host to try to get last_opened_at timestamps for installed software. However, none of the objects in the software array in the response contained a `last_opened_at` property.\n\n## Potential solutions\n\n\u003c!-- Propose a solution. What would your ideal workflow look like? You can also attach any screenshots or other visuals that might help convey your meaning. \n\nExample: My food delivery app should have a new search mapping for other categories of goods that can be delivered like 'clothing' or 'home goods' in the suggested searches menu. --\u003e\nFleet would need to identify a way to reliably collect the last opened time for applications on Linux hosts, then return that timestamp on a per-host basis in the API response.\n\n## What is the expected workflow as a result of your proposal?\n\n\u003c!-- Example: I search for the shoe store \u003e I click on the pair of shoes in the size and color I want \u003e I am given an estimated delivery time and price \u003e I pay for my order  \u003e A driver picks up the order and delivers it to me \u003e I am able to track the delivery in the same way I would track a food order. --\u003e \n`customer-numa` would use the Fleet API to build a Flexera connector. They would deploy the Fleet agent to their Linux hosts and _would not_ deploy the Flexera agent. The connector would call the Fleet API to ingest all relevant information into Flexera, including the last time an application was opened on a host."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Heads-up: the only data source where we currently support `last_opened_time`, for any platform, is macOS apps (and only `apps`; other macOS sources like homebrew packages don't include a last opened time). The column is is [implemented here](https://github.com/osquery/osquery/blob/master/osquery/tables/system/darwin/apps.mm#L187-L203), which looks to collect the last opened time for the app directory I believe, which works because that's how macOS apps work.\n\nOur [Linux software detail query](https://fleetdm.com/vitals/software-linux#linux) pulls from DEB packages, RPM packages, Chrome extensions, Firefox addons, Python packages (via an additional query), NPM packages, and Portage packages. Of those, npm/Chrome/Firefox/Python packages include installed paths; the others don't. `rpm_package_files` could likely be joined to `rpm_packages` to get package paths there, but an equivalent table doesn't exist for `deb_packages`.\n\nFor cases where we can access installed paths, we could probably join against `file` to get `atime`, though that would give us one entry per package file rather than a higher-certainty \"this app was opened last at X time,\" and I'm not sure what performance looks like on that since you'd wind up stat'ing a large percentage of a machine's file system to pull the data.\n\nFor _at least_ package types that don't have installed paths (`deb_packages` being the big one), we'd need to do osquery changes of some sort no matter what to get either package files or a more opinionated last-opened time...and we'd need to do this for each table that we want to extract from.\n\nGiven the above, first step seems like it would be to confirm that relevant software is being inventoried (counterexample: snap packages). Next, for a representative double-handful of Linux software, determine what the \"correct\" last opened time is and how to programmatically get that. Then figure out a fast/light/consistent way of pulling that data, determine how that should be exposed in osquery, and add the missing functionality (again, for deb package we'll have to add _something_ no matter what)."
          },
          {
            "author": {
              "login": "zwass"
            },
            "body": "Ian's analysis seems pretty thorough here. It's a highly nontrivial problem. Another potential roadblock is that apparently Ubuntu systems by default don't update atime for files which makes that approach even less viable."
          },
          {
            "author": {
              "login": "zwass"
            },
            "body": "@ddribeiro or anyone else, do we know which OS versions they are looking to do this on?\n\nFlexera has tons of different documentation pages mentioning different compatiblity with Linux flavors and versions.\n\nGenerally though, it seems like they use an approach similar to what @iansltx described with listing the package files:\n\n\u003e On Unix-like operating systems, usage can be metered for any process that is running an executable included in the list of files installed by the native packaging technology for the operating system (RPM for Linux, llp for AIX, etc.)\n\n(https://flexerasoftware.my.site.com/revenera/s/article/Application-usage-metering-using-the-FlexNet-inventory-agent)\n\nAt a glance, it seems like it would be possible to list the installed files for a DEB package like osquery does with RPM, which could make Ian's approach theoretically viable. The issue of atime recording being on is perhaps a big one (and that may impact performance even beyond osquery). It's not clear how performant the osquery query would be if quite a few files on the filesystem need to be scanned."
          },
          {
            "author": {
              "login": "ddribeiro"
            },
            "body": "@zwass Primarily looking to use this on Ubuntu 24.04."
          },
          {
            "author": {
              "login": "zwass"
            },
            "body": "Once `deb_package_files` is implemented, this query seems to work to get the most recent atime for binaries installed from a given package:\n\n```\nselect package, max(atime), datetime(max(atime), 'unixepoch', 'localtime') from deb_package_files join file using (path) where type = 'regular' and regex_match(file.mode, '[1357]', 0) group by package order by max(atime) desc;\n```\n\nStill not entirely sure how performant it is."
          },
          {
            "author": {
              "login": "zwass"
            },
            "body": "`deb_package_files` implementation PR: https://github.com/osquery/osquery/pull/8657"
          }
        ],
        "issueNumber": 27902,
        "changeType": "added"
      }
    ]
  },
  {
    "timestamp": "2025-08-14T07:06:13.480633592Z",
    "items": [
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdCpok",
        "status": "🦤 ‎In review",
        "issueNumber": 31214,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcX120",
        "status": "Done",
        "comments": [
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "Found this: \n\n```\n#### Articles\n\n[Create an \"📝 Article\" issue](https://github.com/fleetdm/fleet/issues/new?template=fleet-article.md) and follow the instructions in the template to propose a new article for Fleet to publish.\n```"
          },
          {
            "author": {
              "login": "fleet-release"
            },
            "body": "Self-service updates,\nGuide lights path in the cloud,\nClear, knowledge elates."
          }
        ],
        "issueNumber": 29914,
        "changeType": "modified"
      },
      {
        "content": {
          "body": "\n# Goal: easy-to-follow test steps for checking a release manually\n\n# Important reference data\n\n1. [fleetctl preview setup](https://fleetdm.com/fleetctl-preview)\n2. [permissions documentation](https://fleetdm.com/docs/using-fleet/permissions) \n3. premium tests require license key (needs renewal) `fleetctl preview --license-key=eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJGbGVldCBEZXZpY2UgTWFuYWdlbWVudCBJbmMuIiwiZXhwIjoxNjQwOTk1MjAwLCJzdWIiOiJkZXZlbG9wbWVudCIsImRldmljZXMiOjEwMCwibm90ZSI6ImZvciBkZXZlbG9wbWVudCBvbmx5IiwidGllciI6ImJhc2ljIiwiaWF0IjoxNjIyNDI2NTg2fQ.WmZ0kG4seW3IrNvULCHUPBSfFdqj38A_eiXdV_DFunMHechjHbkwtfkf1J6JQJoDyqn8raXpgbdhafDwv3rmDw`\n4. premium tests require license key (active - Expires Sunday, January 1, 2023 12:00:00 AM) `fleetctl preview --license-key=eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJGbGVldCBEZXZpY2UgTWFuYWdlbWVudCBJbmMuIiwiZXhwIjoxNjcyNTMxMjAwLCJzdWIiOiJGbGVldCBEZXZpY2UgTWFuYWdlbWVudCIsImRldmljZXMiOjEwMCwibm90ZSI6ImZvciBkZXZlbG9wbWVudCBvbmx5IiwidGllciI6InByZW1pdW0iLCJpYXQiOjE2NDI1MjIxODF9.EGHQjIzM73YyMbnCruswzg360DEYCsDi9uz48YcDwQHq90BabGT5PIXRiculw79emGj5sk2aKgccTd2hU5J7Jw`\n\n# Smoke Tests\nSmoke tests are limited to core functionality and serve as a pre-release final review. If smoke tests are failing, a release cannot proceed.\n\n## Fleet core:\n\n**Fleet version** (Head to the \"My account\" page in the Fleet UI or run `fleetctl version`):\n\n**Web browser** _(e.g. Chrome 88.0.4324)_: \n\n### Prerequisites\n\n1. `fleetctl preview` is set up and running the desired test version using [`--tag` parameters.](https://fleetdm.com/handbook/engineering#run-fleet-locally-for-qa-purposes)\n2. Unless you are explicitly testing older browser versions, browser is up to date.\n3. Certificate \u0026 flagfile are in place to create new host.\n4. In your browser, clear local storage using devtools.\n\n### Orchestration\n\u003ctable\u003e\n\u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eUpdate flow\u003c/td\u003e\u003ctd\u003e\n\n1. remove all fleet processes/agents/etc using `fleetctl preview reset` for a clean slate\n2. run `fleetctl preview` with no tag for latest stable\n3. create a host/query to later confirm upgrade with\n4. STOP fleet-preview-server instances in containers/apps on Docker\n5. run `fleetctl preview` with appropriate testing tag \u003c/td\u003e\u003ctd\u003eAll previously created hosts/queries are verified to still exist\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eLogin flow\u003c/td\u003e\u003ctd\u003e\n\n1. navigate to the login page and attempt to login with both valid and invalid credentials to verify some combination of expected results.\n2. navigate to the login page and attempt to login with both valid and invalid sso credentials to verify expected results.\n\u003c/td\u003e\u003ctd\u003e\n\n1. text fields prompt when blank\n2. correct error message is \"authentication failed\"\n3. forget password link prompts for email\n4. valid credentials result in a successful login.\n5. valid sso credentials result in a successful login\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003ePacks flow\u003c/td\u003e\u003ctd\u003eVerify management, operation, and logging of [\"2017 packs\"](https://fleetdm.com/handbook/company/why-this-way#why-does-fleet-support-query-packs).\u003c/td\u003e\u003ctd\u003e\n\n1. Packs successfully run on host machines after migrations \n2. New Packs can be created\n3. Packs can be edited and deleted\n4. Packs results information is logged\n \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eLog destination flow\u003c/td\u003e\u003ctd\u003eVerify log destination for software, query, policy, and packs.\u003c/td\u003e\u003ctd\u003e\n\n1. Software, query, policy, and packs logs are successfully sent to external log destinations\n2. Software, query, policy, and packs logs are successfully sent to Filesystem log destinations\n \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eOS settings\u003c/td\u003e\u003ctd\u003eVerify OS settings functionality\u003c/td\u003e\u003ctd\u003e\n\n1. Verify able to configure Disk encryption (macOS, Windows, \u0026 Linux).\n2. Verify host enrolled with Disk encryption enforced successfully encrypts.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003c/table\u003e\n\n### MDM\n\u003ctable\u003e\n\u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eMDM enrollment flow\u003c/td\u003e\u003ctd\u003eVerify MDM enrollments, run MDM commands\u003c/td\u003e\u003ctd\u003e\n  \n1. Erase an ADE-eligible macOS host and verify able to complete automated enrollment flow.\n2. With Windows MDM turned On, enroll a Windows host and verify MDM is turned On for the host.\n3. Verify able to run MDM commands on both macOS and Windows hosts from the CLI.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eMDM migration flow\u003c/td\u003e\u003ctd\u003eVerify MDM migration for ADE and non-ADE hosts\u003c/td\u003e\u003ctd\u003e\n  \n1. Turn off MDM on an ADE-eligible macOS host and verify that the native, \"Device Enrollment\" macOS notification appears.\n2. On the My device page, follow the \"Turn on MDM\" instructions and verify that MDM is turned on.\n3. Turn off MDM on a non ADE-eligible macOS host.\n4. On the My device page, follow the \"Turn on MDM\" instructions and verify that MDM is turned on.\n5. Verify Windows host migrates from 3rd party MDM to Fleet when automatic migration is turned on.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eOS settings\u003c/td\u003e\u003ctd\u003eVerify OS settings functionality\u003c/td\u003e\u003ctd\u003e\n\n1. Verify Profiles upload/download/delete (macOS \u0026 Windows).\n2. Verify Profiles are delivered to host and applied. \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eSetup experience\u003c/td\u003e\u003ctd\u003eVerify macOS Setup experience\u003c/td\u003e\u003ctd\u003e\n\n1. Configure End user authentication.\n3. Upload a Bootstrap package.\n4. Add software (FMA, VPP, \u0026 Custom pkg)\n5. Add a script\n6. Enroll an ADE-eligible macOS host and verify successful authentication.\n7. Verify Bootstrap package is delivered.\n8. Verify SwiftDialogue window displays.\n9. Verify software installs and script runs.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eOS updates\u003c/td\u003e\u003ctd\u003eVerify OS updates flow\u003c/td\u003e\u003ctd\u003e\n\n1. Configure OS updates (macOS \u0026 Windows).\n2. Verify on-device that Nudge prompt appears (macOS 13).\n3. Verify enforce minimumOS occurs during enrollment (macOS 14+).\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eiOS/iPadOS\u003c/td\u003e\u003ctd\u003eVerify enrollment, profiles, \u0026 software installs\u003c/td\u003e\u003ctd\u003e\n\n1. Verify ADE enrollment.\n2. Verify OTA enrollment.\n3. Verify Profiles are delivered to host and applied.\n4. Verify VPP apps install \u0026 display correctly in Activity feed.\n5. Verify `Turn Off MDM` for BYOD \u0026 ADE hosts.\n \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\n\u003ctr\u003e\u003ctd\u003eLock \u0026 Wipe\u003c/td\u003e\u003ctd\u003eVerify hosts can be locked \u0026 wiped\u003c/td\u003e\u003ctd\u003e\n\n1. Verify locking a host from the Fleet UI (macOS, Windows, \u0026 Linux)\n2. Verify unlocking a host from the Fleet UI (macOS, Windows, \u0026 Linux)\n3. Verify wiping a host from the Fleet UI (macOS, Windows, \u0026 Linux)\n4. Verify wiping and locking hosts using `fleetctl` (macOS, Windows, \u0026 Linux)\n \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\n\u003ctr\u003e\u003ctd\u003eCertificates Upload\u003c/td\u003e\u003ctd\u003eAPNs cert and ABM token renewal workflow\u003c/td\u003e\u003ctd\u003e\n\n1. Renew APNs Certificate.\n2. Renew ABM Token.\n3. Ensure ADE hosts can enroll.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003c/table\u003e\n\n### Software\n\u003ctable\u003e\n\u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eQuery flow\u003c/td\u003e\u003ctd\u003eCreate, edit, run, and delete queries. \u003c/td\u003e\u003ctd\u003e\n\n1. permissions regarding creating/editing/deleting queries are up to date with documentation\n2. syntax errors result in error messaging\n3. queries can be run manually \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eHost Flow\u003c/td\u003e\u003ctd\u003eVerify a new host can be added and removed following modal instructions using your own device.\u003c/td\u003e\u003ctd\u003e\n\n1. Host is added via command line\n2. Host serial number and date added are accurate\n3. Host is not visible after it is deleted\n4. Warning and informational modals show when expected and make sense\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eMy device page\u003c/td\u003e\u003ctd\u003eVerify the end user's my device page loads successfully.\u003c/td\u003e\u003ctd\u003e\n\n1. Clicking the Fleet desktop item, then \"My device\" successfully loads the my device page.\n2. The \"My device\" page is populated correctly and as expected. \n3. Styling and padding appears correct.\n \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eScripts\u003c/td\u003e\u003ctd\u003eVerify script library and execution\u003c/td\u003e\u003ctd\u003e\n\n1. Verify able to run a script on all host types from CLI.\n2. Verify scripts library upload/download/delete.\n3. From Host details (macOS, Windows, \u0026 Linux) run a script that should PASS, verify.\n4. From Host details (macOS, Windows, \u0026 Linux) run a script that should FAIL, verify.\n5. Verify UI loading state and statuses for scripts.\n8. Disable scripts globally and verify unable to run.\n9. Verify scripts display correctly in Activity feed.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eSoftware\u003c/td\u003e\u003ctd\u003eVerify software library and install / download\u003c/td\u003e\u003ctd\u003e\n\n1. Verify software library upload/download/delete.\n2. From Host details (macOS, Windows, \u0026 Linux) run an install that should PASS, verify.\n3. From My Device (macOS, Windows, \u0026 Linux) software tab should have self-service items available, verify.\n4. Verify UI loading state and statuses for installing software.\n7. Verify software installs display correctly in Activity feed.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\n\n\u003ctr\u003e\u003ctd\u003eMigration Test\u003c/td\u003e\u003ctd\u003eVerify Fleet can migrate to the next version with no issues.\u003c/td\u003e\u003ctd\u003e\n\nUsing the github action https://github.com/fleetdm/fleet/actions/workflows/db-upgrade-test.yml\n1. Using the most recent stable version of Fleet and `main`, click `Run workflow`\n2. Enter the Docker tag of Fleet starting version, e.g. 'v4.64.2'\n3. Enter the Docker tag of Fleet version to upgrade to, e.g. 'rc-minor-fleet-v4.65.0'\n4. Click `Run workflow`.\n5. Action should complete successfully.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e\n\u003c/table\u003e\n\n### All Product Groups\n\u003ctable\u003e\n \u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eRelease blockers\u003c/td\u003e\u003ctd\u003eVerify there are no outstanding release blocking tickets.\u003c/td\u003e\u003ctd\u003e\n  \n1. Check [this](https://github.com/fleetdm/fleet/labels/~release%20blocker) filter to view all open `~release blocker` tickets.\n2. If any are found raise an alarm in the `#help-engineering` and `#g-mdm` (or `#g-endpoint-ops`)  channels.\n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\n\u003ctr\u003e\u003ctd\u003eLoad tests - minor releases only unless otherwise specified\u003c/td\u003e\u003ctd\u003eVerify all load test metrics are within acceptable range on final build of RC.\u003c/td\u003e\u003ctd\u003e\n  \n1. Check [this Google doc](https://docs.google.com/document/d/1V6QtFzcGDsLnn2PIvGin74DAxdAN_3likjxSssOMMQI/edit?tab=t.0#heading=h.15acjob4ji20) to review load test key metrics and checks.\n2. After all expected changes have been merged to the RC branch, two load tests will need to be run - a new instance with no data, and a migrated instance.\n3. For the new instance with no data, set up a load test environment using the RC branch and allow it at least 24hrs of run time.\n4. For the migrated instance, set up a load test environment on the previous minor release branch. Once the environment has been set up and stabilized, follow the instructions in [Deploying code changes to fleet](https://github.com/fleetdm/fleet/blob/main/infrastructure/loadtesting/terraform/readme.md#deploying-code-changes-to-fleet) to migrate to the RC branch. Monitor the metrics post-migration to determine if any performance issues arise.\n5. Record metrics in [this spreadsheet](https://docs.google.com/spreadsheets/d/1FOF0ykFVoZ7DJSTfrveip0olfyRQsY9oT1uXCCZmuKc/edit?usp=drive_link) for the two load test runs. \n\u003c/td\u003e\u003ctd\u003epass\u003c/td\u003e\u003c/tr\u003e \n\u003c/table\u003e\n\n### Notes\n\nIssues found new to this version:\n\nIssues found that reproduce in last stable version: \n\nWhat has not been tested:\n\nInclude any notes on whether issues should block release or not as needed:\n\n\u003cbr\u003e\n\u003cbr\u003e\n\n"
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgc-TB0",
        "status": "Done",
        "comments": [
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "```\nFLEET_VERSION_A=v4.71.1 FLEET_VERSION_B=rc-minor-fleet-v4.72.0 go test -v\n--- PASS: TestUpgradeAToB (57.07s)\nPASS\nok  \tgithub.com/fleetdm/fleet/v4/test/upgrade\t57.084s\n```\n\n```\nFLEET_VERSION_A=v4.71.0 FLEET_VERSION_B=rc-minor-fleet-v4.72.0 go test -v\n--- PASS: TestUpgradeAToB (52.56s)\nPASS\nok  \tgithub.com/fleetdm/fleet/v4/test/upgrade\t52.577s\n```\n\n```\nFLEET_VERSION_A=v4.70.0 FLEET_VERSION_B=rc-minor-fleet-v4.72.0 go test -v\n--- PASS: TestUpgradeAToB (112.70s)\nPASS\nok  \tgithub.com/fleetdm/fleet/v4/test/upgrade\t112.715s\n```\n\n```\nFLEET_VERSION_A=v4.69.0 FLEET_VERSION_B=rc-minor-fleet-v4.72.0 go test -v\n--- PASS: TestUpgradeAToB (68.57s)\nPASS\nok  \tgithub.com/fleetdm/fleet/v4/test/upgrade\t68.590s\n```"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "```\nFLEET_VERSION_A=v4.69.0 FLEET_VERSION_B=rc-minor-fleet-v4.72.0 go test -v\n--- PASS: TestUpgradeAToB (52.77s)\nPASS\nok  \tgithub.com/fleetdm/fleet/v4/test/upgrade\t52.785s\n```\n\n```\nFLEET_VERSION_A=v4.70.0 FLEET_VERSION_B=rc-minor-fleet-v4.72.0 go test -v\n--- PASS: TestUpgradeAToB (69.75s)\nPASS\nok  \tgithub.com/fleetdm/fleet/v4/test/upgrade\t69.764s\n```\n\n```\nFLEET_VERSION_A=v4.71.0 FLEET_VERSION_B=rc-minor-fleet-v4.72.0 go test -v\n--- PASS: TestUpgradeAToB (48.14s)\nPASS\nok  \tgithub.com/fleetdm/fleet/v4/test/upgrade\t48.160s\n```\n\n```\nFLEET_VERSION_A=v4.71.1 FLEET_VERSION_B=rc-minor-fleet-v4.72.0 go test -v\n--- PASS: TestUpgradeAToB (47.34s)\nPASS\nok  \tgithub.com/fleetdm/fleet/v4/test/upgrade\t47.360s\n```"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "Software gives 👍 for release."
          },
          {
            "author": {
              "login": "xpkoala"
            },
            "body": "Orchestration gives 👍 for release."
          },
          {
            "author": {
              "login": "AndreyKizimenko"
            },
            "body": "MDM gives 👍 for release. "
          },
          {
            "author": {
              "login": "fleet-release"
            },
            "body": "Test steps clear as day,\nEase for users on their way,\nFleet sails in smooth bay."
          }
        ],
        "issueNumber": 31274,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdCxBg",
        "comments": [
          {
            "author": {
              "login": "eugkuo"
            },
            "body": "@iansltx I see that the steps to reproduce is still a **to do**.\n\nHowever, the way you've written it sounds like part of the ticket will be to find a way to reproduce this. I'm a little uncertain how to proceed. Should I move this forward and indicate that todo as part of the fix area?\n\ncc @mostlikelee "
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "Whoops, my bad on removing `:reproduce`"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@eugkuo Yeah, this will need to be moved through to engineering with the reproduce tag intact as we'll likely need to coordinate with customers to get a repro."
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "let's timebox this, whether it is reproduction, or adding logging"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Pulling the :reproduce label off of this since that makes it less clear whose work queue this is in. Timebox is for investigation/repro by an engineer."
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "@ksykulev heads up that this is a related ticket: https://github.com/fleetdm/fleet/issues/29050"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@noahtalerman @marko-lisica See [this Slack thread](https://fleetdm.slack.com/archives/C086V2QK76X/p1754591131297309) for context on why this is Waiting. We have some product questions on whether/when we should clear \"last opened\", and the behavior may not be consistent right now cross-os (e.g. @zwass mentioned that we don't take version into account when checking package last-opened times in Linux)."
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "Was able to reproduce the warning in the log:\n\n```\nlevel=warn ts=2025-08-07T19:08:27.209411Z msg=\"updateModifiedHostSoftwareDB: last opened at is nil for new software, but not for current software\" new_software=\"Microsoft Word\" current_software=\"Microsoft Word\" bundle_identifier=com.microsoft.Word\n```\nBy doing the following:\n\n1. Install Microsoft Word, and open\n2. Refetch host vitals\n3. Confirm \"Last used\" time is shown on Host \u003e Software \u003eInventory tab\n4. Reinstall or Update Microsoft Word via Fleet, do not open\n5. Refetch completes after installation automatically\n6. \"Last used\" time is cleared out on Host \u003e Software \u003eInventory tab\n\nAdded steps to repro in description."
          },
          {
            "author": {
              "login": "ksykulev"
            },
            "body": "Not sure we need more confirmation, but..\nI downloaded firefox 139.0.4, installed it\n\n\u003cimg width=\"1206\" height=\"105\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/9c714aa4-6e4b-4e9a-9741-8f5bdddcd980\" /\u003e\n\nOpened firefox\n\n\u003cimg width=\"1219\" height=\"126\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/a07f13ee-cacb-4f58-bbde-092b31846c7b\" /\u003e\n\nDownloaded firefox 141.0.3, installed it\n\n\u003cimg width=\"1203\" height=\"126\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/9f4138ea-edd9-4bf8-9c00-e1c274526c2f\" /\u003e"
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "\u003e @noahtalerman @marko-lisica See [this Slack thread](https://fleetdm.slack.com/archives/C086V2QK76X/p1754591131297309) for context on why this is Waiting. We have some product questions on whether/when we should clear \"last opened\", and the behavior may not be consistent right now cross-os (e.g. @zwass mentioned that we don't take version into account when checking package last-opened times in Linux).\n\nUp to @marko-lisica "
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "waiting on copy change, documenting the oddity"
          },
          {
            "author": {
              "login": "ksykulev"
            },
            "body": "- A tooltip will be added on macOS hosts to indicate that updating the application in place will resets last opened time\n- A tooltip will be added on Windows/Linux hosts to indicate that last open time is tied to an install path/package name verse a version. So updating an application in place will not clear the last open time.\n- Add documentation in the API endpoint describing the nuance.\n- Change the log level when it is detected that a last open time will be changed to null and the source is not apps (aka windows/linux)"
          }
        ],
        "issueNumber": 29061,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdj4pY",
        "status": "Done",
        "comments": [
          {
            "author": {
              "login": "AndreyKizimenko"
            },
            "body": "Was able to reproduce this on Dogfood on 4.72\nDoes not happen on 4.71"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "Bug I pushed, seeing how I can remove it without wrecking the fix to clientside sort bug on sorted table resetting when clicking an action\n"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "**QA Notes**\n\n1. Click on the \"Policies\" tab\n2. Grab a random policy\n3. Click on the selected policy\n4. Click the \"Run\" button\n5. On 'Select targets' page click the \"Run\" button\n6. Wait for query to finish\n7. Scroll to bottom and click 'Next' button\n- [x] Verify 'Next' button changes list page on click\n- [x] Also check various other pages that use the table component and ensure pagination is working\n- [x] Also confirmed no regression for #31632"
          },
          {
            "author": {
              "login": "fleet-release"
            },
            "body": "\"Next\" button stuck,\nSmooth as glass city transits,\nFleet's journey unbroken."
          }
        ],
        "issueNumber": 31805,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdXQh4",
        "status": "Done",
        "comments": [
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "\u003cimg width=\"774\" height=\"247\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/0fe51c60-9700-4a6b-bfb7-4de9e00d5d0e\" /\u003e"
          },
          {
            "author": {
              "login": "AndreyKizimenko"
            },
            "body": "Moving to in-progress since this hasn't been fully resolved. @RachelElysia is aware and will be looking into it on Monday\n\nSlack convo:  https://fleetdm.slack.com/archives/C086V2QK76X/p1754680621910399"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "**QA Notes**\n\n1. On an enrolled macOS host that has MDM enabled, install an app that also exists or can be added in your VPP token. \n2. Add the App to the team's software library via VPP, making it available in Self-service\n3. Refetch host vitals\n4. Open Self-service for the host and notice the app is showing as \"Installed\" and \"Installed\" is clickable\n5. Click \"Installed\"\n\nI'm seeing the correct message now:\n\u003cimg width=\"1494\" height=\"458\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/eb8de26b-2917-45c8-b809-c788189d52b0\" /\u003e\n\nAlso confirmed that if no mdm command is found for a pending install, the modal doesn't error out, but retries 3x and still populates the pending install copy as expected.\n\n\u003cimg width=\"1498\" height=\"744\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/f0838eec-0f7b-4b59-b8dc-272367728606\" /\u003e\n\nWill investigate the underlying backend piece of that 2nd part ^ and file accordingly. "
          },
          {
            "author": {
              "login": "fleet-release"
            },
            "body": "In Fleet's vast cloud city,\nMisplaced apps find their duty.\nClarity's new beauty."
          }
        ],
        "issueNumber": 31652,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdVayQ",
        "status": "Done",
        "comments": [
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "Requires a new UI status and to check refetch time stamps against last_install to ensure \"updated\" vs. \"update available\", write tests 🫠"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "cc: @noahtalerman @marko-lisica @jmwatts \n\nDesign decision additions today during design-review: \n- Add temporary \"Installed\" status requires a new UI status and to check refetch time stamps against `last_install` to ensure \"installed\" vs. \"whatever other status would show\", write tests\n- Add temporary \"---\" status requires a new UI status and to check refetch time stamps against `last_uninstall` to ensure \"---\" vs. \"whatever other staus would show\", write tests\n- Add tooltips to all 3 temporary statuses to ensure users know it's a temporary status \"Fleet successfully [installed/uninstalled/updated] software and is fetching latest software inventory.\""
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "Tested this with a cherry pick from the PR to 4.72.0 on Windows, macOS, and Ubuntu, Firefox, Edge and Chrome. Looks good, as long as there are no functional changes, this one should be good to merge to main and the RC.\n\n\u003cimg width=\"1070\" height=\"497\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/f8c60a77-97dd-43b8-b64f-607c5cf127f5\" /\u003e\n\n\u003cimg width=\"1130\" height=\"555\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/9c3e245d-9e13-4a3f-ba5c-bf1d2d831e1c\" /\u003e\n\n\u003cimg width=\"1398\" height=\"578\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/c4d3ae00-66e7-46ee-a907-b8be0a165c6d\" /\u003e"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "**QA Notes**\n\n- [x] Update available when installed by Fleet - Shows in Carousel with \"Update\" and list with linked \"Update available\" with modal\n- [x] Recently updated (update complete, refetching) - Shows non-linked \"Updated\" with hover \"Fleet successfully updated software and is fetching latest software inventory\"\n- [x] Recently installed (install complete, refetching)- Shows non-linked \"Installed\" with hover \"Fleet successfully installed software and is fetching latest software inventory\"\n- [🔴 ]  tgz installed - Should this have a linked \"Installed\"? I get a non-linked installed and the hover text says \"Fleet successfully installed software and is fetching latest software inventory\" but it's not refetching anymore - Filed #31721\n- [x] “normal” installed (refetch complete) - When refetch is complete it turns into a linked \"Installed\" with modal\n- [x] “normal” uninstalled (refetch complete) - After refetch is complete it's --- and says \"\u003cPackage name\u003e can be installed on the host. Select Actions \u003e Install to install\""
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "merged to RC with https://github.com/fleetdm/fleet/pull/31718"
          },
          {
            "author": {
              "login": "fleet-release"
            },
            "body": "Green check mark's glow,\nUpdated status shall show,\nSmooth flow users know."
          }
        ],
        "issueNumber": 31629,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdVLLc",
        "status": "Done",
        "comments": [
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "@marko-lisica \n I suggest:\n1. Updates section we change to drop down to 2 cards per page for under 880px (breakpoint small) instead of the current behavior down to 2 for under 768px (breakpoint xs)\n2. Self-service section, we could make this a scrollable table (which won't work if you end up making additional actions a dropdown) or we have a max width on the name column which is causing the push off the page\n3. Updates section, Add 16px (or whatever px) gap between Update all button and header on left side\n\nScreenshot of improvements in PR: https://github.com/fleetdm/fleet/pull/31627\n\n4. Maybe we truncate long software names on the update cards as well since that'll squish off the page too"
          },
          {
            "author": {
              "login": "marko-lisica"
            },
            "body": "\u003e 1. Updates section we change to drop down to 2 cards per page for under 880px (breakpoint small) instead of the current behavior down to 2 for under 768px (breakpoint xs)\n\n@RachelElysia sounds good to me.\n\n\u003e 2. Self-service section, we could make this a scrollable table (which won't work if you end up making additional actions a dropdown) or we have a max width on the name column which is causing the push off the page\n\nI think it makes sense to have max width on the name column, and if the name can't fit we truncate + tooltip on hover to show the full name.\n\n\u003e 3. Updates section, Add 16px (or whatever px) gap between Update all button and header on left side\n\nSounds good to me.\n\n\u003e 4. Maybe we truncate long software names on the update cards as well since that'll squish off the page too\n\nLet's do this as well.\n"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "@marko-lisica and @RachelElysia I just want to confirm this is correct:\nI see 2 cards under 880px\nI see 3 cards between 880px and 1400px\nI see 4 cards over 1400px\n\nI see the comment above regarding \"change to drop down to 2 cards per page for under 880px\" which tracks with what I'm seeing, just wasn't sure about the 1400px breakpoint. \n"
          },
          {
            "author": {
              "login": "marko-lisica"
            },
            "body": "\u003e [@marko-lisica](https://github.com/marko-lisica) and [@RachelElysia](https://github.com/RachelElysia) I just want to confirm this is correct: I see 2 cards under 880px I see 3 cards between 880px and 1400px I see 4 cards over 1400px\n\u003e \n\u003e I see the comment above regarding \"change to drop down to 2 cards per page for under 880px\" which tracks with what I'm seeing, just wasn't sure about the 1400px breakpoint.\n\n@jmwatts @RachelElysia I think it makes sense to have 4 over 1400px. I tried on the larger screen, and it looks ok."
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "**QA Notes**\n\n- [x] Verify 2 cards under 880px\n- [x] Verify 3 cards between 880px and 1400px\n- [x] Verify 4 cards over 1400px\n- [x] Verify table (list) doesn't overflow at lower widths"
          },
          {
            "author": {
              "login": "fleet-release"
            },
            "body": "Designs adapt like trees,\nUniformity brings peace,\nFleet's view finds its ease."
          }
        ],
        "issueNumber": 31621,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdXiVE",
        "status": "Done",
        "comments": [
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "@marko-lisica The figma looks like we deliberately removed Uninstall script content, and since there's no output for tarballs this is empty.\n\nI'm proposing we should show whatever is available only. So for tarballs it shows script content, for others it might show both content and output. \n\nWDYT? Like why are we hiding script content if it's being returned from the API?\n\nGoing to add it back in for both install and uninstall modals."
          },
          {
            "author": {
              "login": "marko-lisica"
            },
            "body": "\u003e [@marko-lisica](https://github.com/marko-lisica) The figma looks like we deliberately removed Uninstall script content, and since there's no output for tarballs this is empty.\n\u003e \n\u003e I'm proposing we should show whatever is available only. So for tarballs it shows script content, for others it might show both content and output.\n\u003e \n\u003e WDYT? Like why are we hiding script content if it's being returned from the API?\n\u003e \n\u003e Going to add it back in for both install and uninstall modals.\n\n@RachelElysia sounds good!"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "yay, ok, PR incoming\n\nAlso, I realized install script results don't return script content so I filed [a bug to do so](https://github.com/fleetdm/fleet/issues/31668)"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "**QA Notes**\n\n1. Add a tar.gz file to the team's library, specifying appropriate install and uninstall scripts. (Ex: go1.24.2.linux-arm64.tar.gz, install script is: mv $INSTALLER_PATH/* /usr/local, uninstall script is: rm -rf /usr/local/go\n2. Install the tar.gz on a Linux host\n3. Uninstall the tar.gz from the Linux host\n4. View the Activity feed and click on details to open modal.\n5. Click on details dropdown\n- [x] Verify \"install script output\" is shown for installs\n- [x] Verify that \"uninstall script content\" is shown for uninstalls\n- [x] Verify that \"uninstall script output\" is shown for uninstalls if available \n\n\u003cimg width=\"655\" height=\"419\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/0a4d9002-1be0-43b4-a394-a8a7974a3091\" /\u003e\n\n\u003cimg width=\"660\" height=\"403\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/d83f8a28-039b-4ea6-ad31-845c260a2b91\" /\u003e\n\n\u003cimg width=\"657\" height=\"509\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/8b475d5d-d470-459e-9853-39c9be499620\" /\u003e"
          },
          {
            "author": {
              "login": "fleet-release"
            },
            "body": "Tar.gz files whisper,\nUninstall script clarity,\nIn dropdown, shines light."
          }
        ],
        "issueNumber": 31660,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdVb6w",
        "status": "Done",
        "comments": [
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "The link is within a link cell \u003e.\u003c\n\nEst: under 2 hours"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "**QA Notes**\n\nConfirmed Learn more link is now linking to https://fleetdm.com/guides/software-self-service"
          },
          {
            "author": {
              "login": "fleet-release"
            },
            "body": "Link that once misled,\nNow guides through cloud city's streets,\nKnowledge in each step."
          }
        ],
        "issueNumber": 31630,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdVI0g",
        "status": "Done",
        "comments": [
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "Your issue with fill colors changing when you switch pages is likely caused by how SVG linear gradients with IDs are defined and referenced. When multiple copies of the SVG are rendered on a single page (like in a React app with client-side navigation), SVG definitions such as `` are injected into the global DOM, and IDs may clash or lose reference, causing gradients to display incorrectly or revert to fallback fills.\n\n**Why does this happen?**\n- The `id=\"paint0_linear_1157_2708\"` and similar IDs are **global in the HTML DOM**. If the same SVG is rendered multiple times or React remounts it, the IDs may point to a wrong/previous/undefined gradient, or multiple elements may try to use the same ID, leading to fill issues.\n\n**How to solve this (Best Practices):**\n1. **Make IDs Unique Per Instance.**\n   - Use a library like [[react-uid](https://www.npmjs.com/package/react-uid)](https://www.npmjs.com/package/react-uid), [[react-unique-id](https://www.npmjs.com/package/react-unique-id)](https://www.npmjs.com/package/react-unique-id), or generate unique IDs at runtime.\n   - Pass a unique suffix into your SVG component and append it to all `id` attributes and their references (e.g., `url(#paint0_linear_${uniqueId})`).\n\n2. **Use `currentColor` or solid colors if you don't need gradients.**\n   - If you can accept a flat color, just use `\"fill='currentColor'\"` and control color with CSS.\n\n**Example Fix: Generating Unique IDs per Instance**\nHere’s how you can patch your component using `useId` from React 18+:\n\n```jsx\nimport React, { useId } from \"react\";\n\nconst Brave = (props) =\u003e {\n  const id = useId();\n  return (\n    \n      {/* ... */}\n      \n      {/* ... */}\n      \n        \n          {/* ... */}\n        \n        {/* ...other gradients with the id suffixed by {id} */}\n      \n    \n  );\n};\n```\n- Also update all `url(#...)` references and corresponding `id` attributes in ``.\n\n**Summary:**  \nSVG gradient/color glitches in React occur because of global ID conflicts. The solution is to scope SVG IDs uniquely per component render using React's `useId` or a similar utility. This will make gradients reliable when navigating or rendering multiple copies across the app.\n\n[1] http://www.w3.org/2000/svg"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "Post-Est: 1\n\nTook me 90 minutes to dev"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "**QA Notes**\n\n1. Install 8 older versions of software on a macOS host\n2. Add the newest software installers to Fleet in the Team's library, making them available in Self Service\n3. Open Self service on the host, notice that all 8 apps should show in the updates carousel (4 at a time)\n\n- [x] Click Next and verify that the icons are no longer changing colors in the list view below "
          },
          {
            "author": {
              "login": "fleet-release"
            },
            "body": "Color fades away,\nUnique IDs restore the hue,\nSoft as morning's day."
          }
        ],
        "issueNumber": 31619,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdSLuM",
        "status": "Done",
        "comments": [
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "cc: @iansltx @jmwatts \nEst: 1 (under 2 hours) + tests\n\nCan get a PR in before lunch if I priortize this"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "**QA Notes**\n\nTested on-branch ([30240-tarballz-uninstall-bug](https://github.com/fleetdm/fleet/tree/30240-tarballz-uninstall-bug))\n\n- [x] tar.gz files now have uninstall action if they were previously installed\n- [x] \"Installing\", \"Uninstalling\", \"failed\" (install and uninstall), and \"successful\" install and uninstall statuses in Self-service and on Library page all appear correctly and launch the appropriate modals."
          },
          {
            "author": {
              "login": "fleet-release"
            },
            "body": "Uninstall button blooms,\nTar.gz files flutter free,\nCloud city breathes deep."
          }
        ],
        "issueNumber": 31578,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdCntE",
        "status": "Done",
        "comments": [
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "This was surfaced with BYOD Apple devices. I tagged it with g-software but it could be `#g-mdm`\n@georgekarrv @mostlikelee preference on who tackles this one?\n\nWhen a BYOD (personal) iPhone is enrolled, we only collect inventory for apps that Fleet installs (Managed apps). \nWe are currently showing \"Vulnerabilities are not supported for this type of host\" as the empty state for Inventory, but we should be showing a message telling the user that there are no apps displayed and that only managed apps are reported in inventory, unless they have added the vulnerabilities filter (then it makes sense to show the no vulnerabilities empty state).\n\n\u003cimg width=\"1186\" height=\"374\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/8c7dc1a7-ac0e-497a-91df-08dc8fb31702\" /\u003e"
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "@georgekarrv we're going to take this.  removing it off your board"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "\u003e When a BYOD (personal) iPhone is enrolled, we only collect inventory for apps that Fleet installs (Managed apps).\nWe are currently showing \"Vulnerabilities are not supported for this type of host\" as the empty state for Inventory, but we should be showing a message telling the user that there are no apps displayed and that only managed apps are reported in inventory, unless they have added the vulnerabilities filter (then it makes sense to show the no vulnerabilities empty state).\n\nAbout to put in a PR to show the generic No software detected empty state (plus tests). @marko-lisica if @jmwatts is correct for a different empty state, can you update this ticket if it's imperative for 4.72, or open a new ticket for 4.73 to track the new empty state?\n\nThank you!"
          },
          {
            "author": {
              "login": "marko-lisica"
            },
            "body": "@RachelElysia I just realized this is already on g-software board. I added a few more copy changes that depend on the platform and enrollment type (MDM status). Not sure if you want to estimate this? I can add to planning poker.\n\nFigma link is in issue description."
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "In between in progress \u003c\u003e in review \u003c\u003e in design. PR open, just need some confirmation on specs "
          },
          {
            "author": {
              "login": "AndreyKizimenko"
            },
            "body": "Confirmed that this has been addressed on the latest 4.72. Moving to Ready for Release \n\u003cimg width=\"3794\" height=\"1386\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/6060b878-7697-4a2f-b23d-620aefd1ea1b\" /\u003e"
          },
          {
            "author": {
              "login": "fleet-release"
            },
            "body": "Vulnerability check,\nTrue state now reveals itself,\nSecure clouds reflect."
          }
        ],
        "issueNumber": 31329,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdVfUY",
        "status": "Done",
        "comments": [
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "@RachelElysia I'm still seeing this occasionally happen. If I never try to reorder the sort for name or status, it doesn't happen, but if I do that, then set it back to sorted by name, then try an action, it happens.\n\nhttps://github.com/user-attachments/assets/f37c46de-538f-4f57-be0b-a1498e4dd638"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "Rachel:\nTODO:\nAdd all clientside filtering to URL bar to keep this from happening (I think it's missing categories, sort)"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "Changed this to a 3 to match all the extra work it took to figure out wth was going on with react-table and data changing causing resets"
          },
          {
            "author": {
              "login": "AndreyKizimenko"
            },
            "body": "QA notes: \n\n- Confirmed that with 4+ pages the user remains on the page where they interacted with the software no matter what filtration is selected. \n   - Tried installing, uninstalling, and reinstalling \n- Additionally confirmed that if an admin is also pushing software to the host it has no effect on the pagination on the host's side. \n\nMoving to **Ready for Release** "
          },
          {
            "author": {
              "login": "fleet-release"
            },
            "body": "In cloud city's glass,\nPagination fixed at last,\nEase in tasks amassed."
          }
        ],
        "issueNumber": 31632,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdLKz4",
        "status": "Done",
        "comments": [
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "**QA Notes**\n\n1. Trigger a vpp app to be installed by fleet\n2. Wait for the successful install\n3. Refetch host vitals\n4. Open up the library page, show Dev tools and inspect the API response, click \"Installed\" link\n- [x] last_install field should not be null\n- [x] Install details modal should have dropdown with install details\n\nNoticed edge case for when app was previously installed with no install information (installed outside of fleet) and a VPP app exists for the same application - last_install will be null (expected) but the \"installed\" status will be clickable, and the modal will show \"Fleet is installing or will install...\" even though the software is not being installed. Will file separately. "
          },
          {
            "author": {
              "login": "fleet-release"
            },
            "body": "VPP apps installed,\nIn Fleet's library, now seen.\nClarity restored."
          }
        ],
        "issueNumber": 31459,
        "changeType": "modified"
      },
      {
        "estimate": 5,
        "id": "PVTI_lADOBDAnic4A4BEUzgdCnk8",
        "issueNumber": 31319,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdK3Mg",
        "status": "Done",
        "comments": [
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "FYI @jmwatts @mostlikelee I assigned myself and took a stab at this is an unreleased bug: \n- #31449\n\nWill move it to \"Ready for QA\" once the PR merges."
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "@noahtalerman Is this an unreleased bug for 4.72? If so, please add the milestone per https://fleetdm.com/handbook/engineering#run-fleet-locally-for-qa-purposes \n\nAdditionally we'll need a cherry pick into the RC branch. Thanks!"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "**QA Notes**\n\n\u003cimg width=\"981\" height=\"476\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/4d2b9050-fb6d-42eb-aa71-6aca42cb56c8\" /\u003e"
          },
          {
            "author": {
              "login": "fleet-release"
            },
            "body": "Software out of date,\nIn the cloud city, we bring\nSecure, swift update fate."
          }
        ],
        "issueNumber": 31414,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdUxWw",
        "status": "Done",
        "comments": [
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "@lukeheath added `P1` because I just learned from @allenhouchins that several prospects are running into this bug. I think we can call this workflow broken.\n\n\u003cimg width=\"774\" height=\"224\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/28a203d9-9d36-4b3b-9a5f-3c4282ef4c2f\" /\u003e"
          },
          {
            "author": {
              "login": "lukeheath"
            },
            "body": "@noahtalerman Agreed. Have we been able to reproduce in our own environment? "
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "Changed milestone to 4.72 since this was cherry picked in to the release."
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "**QA Notes**\n\nTested locally\n\n1. Upload an automatic software installer X to \"No team\".\n2. Wait for software to be installed X on a host in \"No team\".\n3. Run vulnerability scanning (to update host counts).\n4. Go to Software\u003e All teams and use the filter to find the software X.\n\n- [x] Verify there is no longer a \"Something's gone wrong\" error (or a panic in the server logs)\n\nAlso confirmed with @allenhouchins that the issue no longer occurs in the prospect's environment after the fix is applied."
          },
          {
            "author": {
              "login": "fleet-release"
            },
            "body": "Team tabs work, just one,\nSoftware's error blooms like moon,\nFleet will fix it soon."
          }
        ],
        "issueNumber": 31571,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcX124",
        "title": "Self-Service Update: Frontend",
        "issueNumber": 29944,
        "changeType": "removed"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcX2Wc",
        "title": "[ GitOps ] Cannot create automation for software uploaded as a custom package in Fleet",
        "issueNumber": 30435,
        "changeType": "removed"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcdkTI",
        "title": "New FMA: Yubikey manager",
        "issueNumber": 30739,
        "changeType": "removed"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcX6m4",
        "title": "🪲Windows Chrome FMAs don't have hashes specified in manifests",
        "issueNumber": 27756,
        "changeType": "removed"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcX12Q",
        "title": "🖥️ Fleet Desktop \u003e Self-service: Add \"Update\" actions when updates are detected for installed software",
        "issueNumber": 27983,
        "changeType": "removed"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcX8R4",
        "title": "🪲One particular software installer gets updated every time gitops run is conducted",
        "issueNumber": 29286,
        "changeType": "removed"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgc-Xts",
        "title": "Fleet UI: Fleet Desktop \u003e Software \u003e Type sort broken",
        "issueNumber": 30746,
        "changeType": "removed"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcX7do",
        "title": "🪲Software vuln count off",
        "issueNumber": 27580,
        "changeType": "removed"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcgftg",
        "title": "New FMA: VNC Viewer (macOS)",
        "issueNumber": 30802,
        "changeType": "removed"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcp4X0",
        "title": "osquery-perf refuses to process software install requests for macOS",
        "issueNumber": 30913,
        "changeType": "removed"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcdLoc",
        "title": "New FMA: Beyond Compare",
        "issueNumber": 30727,
        "changeType": "removed"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcz8Es",
        "title": "Fleet provided uninstall script for msi custom packages works but outputs errors",
        "issueNumber": 31077,
        "changeType": "removed"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcX6Nk",
        "title": "🪲Custom package MSI uninstall scripts don't uninstall other versions of the software",
        "issueNumber": 27758,
        "changeType": "removed"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgck8sI",
        "title": "Show appropriate self-service status and actions in the self-service table at all times",
        "issueNumber": 30861,
        "changeType": "removed"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcX1-s",
        "title": "Show appropriate self-service actions based on whether software is on the host",
        "issueNumber": 30240,
        "changeType": "removed"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcgXr8",
        "title": "[fleetctl] fail api command when args present after uri",
        "issueNumber": 30797,
        "changeType": "removed"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcX8dE",
        "title": "🪲FMA/Custom packages not respecting custom scoping \"exclude any\" for label that doesn't exist on host",
        "issueNumber": 29315,
        "changeType": "removed"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcX5dM",
        "title": "🪲Incorrect software title name (MacFULL) when uploading SubEthaEdit",
        "issueNumber": 25587,
        "changeType": "removed"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcX6VI",
        "title": "🪲Auto-install queries for custom MSI packages fail when a different version of the same software is installed",
        "issueNumber": 27447,
        "changeType": "removed"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcX7Ag",
        "title": "🪲macOS Chrome FMA downloads latest version instead of specified version in UI",
        "issueNumber": 27919,
        "changeType": "removed"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcdwYg",
        "title": "Pending and failed software installs show in Host \u003e\u003e Software \u003e\u003e Inventory tab",
        "issueNumber": 30747,
        "changeType": "removed"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgc8aTI",
        "title": "Amazon DCV Viewer FMA version mismatch",
        "issueNumber": 31123,
        "changeType": "removed"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcdAFs",
        "title": "New FMA:  iTerm2",
        "issueNumber": 30724,
        "changeType": "removed"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcX2sI",
        "title": "🪲 Self-service serves incompatible packages to Linux hosts",
        "issueNumber": 29849,
        "changeType": "removed"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcX4XA",
        "title": "🪲 Microsoft Office for Mac Fleet-maintained apps version mismatches",
        "issueNumber": 30082,
        "changeType": "removed"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcX420",
        "title": "🪲OS list/detail shows the same CVE twice when an OS version has multiple architectures",
        "issueNumber": 27061,
        "changeType": "removed"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgcX7LA",
        "title": "🪲Software vuln detected dates do not match between screens",
        "issueNumber": 26618,
        "changeType": "removed"
      }
    ]
  },
  {
    "timestamp": "2025-08-14T19:04:58.98453511Z",
    "items": [
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdL8SA",
        "status": "✔️Awaiting QA",
        "issueNumber": 30004,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdCxFk",
        "status": "✔️Awaiting QA",
        "issueNumber": 30803,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdbCMM",
        "status": "🐣 In progress",
        "comments": [
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Reassigning because I'm right in the middle of the interrupt work swimlane :("
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@RachelElysia thanks for noticing that _uninstall_ is the tooltip being shown, so we're going to want an API response for this one to troubleshoot further. Given that @jmwatts is out and to avoid a repro rabbit trail, going to make the call of not blocking the release for this; we'll troubleshoot and resolve in 4.73."
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "More info:\nrecently_uninstalled UI status would only show if `newerDate === lastUninstallDate` which is super bizarre in this case and would require repro with API responses"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "Updated ticket to show install UI status\n"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "@jmwatts / @iansltx I might need more help reproducing this, maybe in a call?\n\nBasically, something in `getUiStatus` helper function is pointing this installer to the wrong ui_status\n\nHere's the code:\n```\nexport const getUiStatus = (\n  software: IHostSoftware,\n  isHostOnline: boolean,\n  hostSoftwareUpdatedAt?: string | null\n): IHostSoftwareUiStatus =\u003e {\n  const { status, installed_versions } = software;\n\n  const lastInstallDate = getLastInstall(software)?.installed_at;\n  const lastUninstallDate = getLastUninstall(software)?.uninstalled_at;\n  const installerVersion = getInstallerVersion(software);\n\n  // 1. Failed install states\n  if (status === \"failed_install\") {\n    if (\n      installerVersion \u0026\u0026\n      installed_versions \u0026\u0026\n      installed_versions.some(\n        (iv) =\u003e compareVersions(iv.version, installerVersion) === -1\n      )\n    ) {\n      return \"failed_install_update_available\";\n    }\n    return \"failed_install\";\n  }\n\n  // 2. Failed uninstall states\n  if (status === \"failed_uninstall\") {\n    if (\n      installerVersion \u0026\u0026\n      installed_versions \u0026\u0026\n      installed_versions.some(\n        (iv) =\u003e compareVersions(iv.version, installerVersion) === -1\n      )\n    ) {\n      return \"failed_uninstall_update_available\";\n    }\n    return \"failed_uninstall\";\n  }\n\n  // 3. Pending install/update\n  if (status === \"pending_install\") {\n    if (\n      installed_versions \u0026\u0026\n      installed_versions.length \u003e 0 \u0026\u0026\n      installerVersion\n    ) {\n      const isUpdate = installed_versions.some(\n        (iv) =\u003e compareVersions(iv.version, installerVersion) === -1\n      );\n      if (isUpdate) {\n        return isHostOnline ? \"updating\" : \"pending_update\";\n      }\n    }\n    return isHostOnline ? \"installing\" : \"pending_install\";\n  }\n\n  // 4. Pending uninstall\n  if (status === \"pending_uninstall\") {\n    return isHostOnline ? \"uninstalling\" : \"pending_uninstall\";\n  }\n\n  // **Recently_uninstalled check comes BEFORE update_available**\n  if (software.status === null \u0026\u0026 lastUninstallDate \u0026\u0026 hostSoftwareUpdatedAt) {\n    const newerDate = getNewerDate(hostSoftwareUpdatedAt, lastUninstallDate);\n    if (newerDate === lastUninstallDate) {\n      return \"recently_uninstalled\";\n    }\n  }\n\n  // 5. Update available and recently updated\n  if (\n    installerVersion \u0026\u0026\n    installed_versions \u0026\u0026\n    installed_versions.some(\n      (iv) =\u003e compareVersions(iv.version, installerVersion) === -1\n    )\n  ) {\n    if (!lastInstallDate) {\n      return \"update_available\";\n    }\n    const newerDate = hostSoftwareUpdatedAt\n      ? getNewerDate(hostSoftwareUpdatedAt, lastInstallDate)\n      : lastInstallDate;\n    return newerDate === lastInstallDate\n      ? \"recently_updated\"\n      : \"update_available\";\n  }\n\n  // 6. Recently installed (not an update)\n  if (\n    software.status === \"installed\" \u0026\u0026\n    lastInstallDate \u0026\u0026\n    hostSoftwareUpdatedAt\n  ) {\n    const newerDate = getNewerDate(hostSoftwareUpdatedAt, lastInstallDate);\n    if (newerDate === lastInstallDate) {\n      return \"recently_installed\";\n    }\n  }\n\n  // 7. Tarballs edge case\n  if (software.source === \"tgz_packages\" \u0026\u0026 software.status === \"installed\") {\n    return \"installed\";\n  }\n\n  // 8. Default to installed or uninstalled based on installed_versions\n  if (installed_versions \u0026\u0026 installed_versions.length \u003e 0) return \"installed\";\n\n  return \"uninstalled\";\n};\n```\n\nSomehow it's passing both if statements in line 6 where it should be failing at least one of them:\nEither should fail:\n```\n    software.status === \"installed\" \u0026\u0026\n    lastInstallDate \u0026\u0026\n    hostSoftwareUpdatedAt\n```\n\nor should fail \n```\n    const newerDate = getNewerDate(hostSoftwareUpdatedAt, lastInstallDate);\n    if (newerDate === lastInstallDate) {\n```\n\nbut I can't tell which or why without help repro in real time.\n\nHere's a diagram of what we want fixed (crossed out is current behavior, circled is wanted behavior):\n\n\u003cimg width=\"396\" height=\"703\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/de100dc2-cee1-4260-bd33-9ff8ffc5cc61\" /\u003e\n"
          }
        ],
        "issueNumber": 31721,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdCpok",
        "status": "✔️Awaiting QA",
        "issueNumber": 31214,
        "changeType": "modified"
      },
      {
        "content": {
          "body": "**Fleet version**: \u003e= 4.67.3\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\n\nSee #28626. We've avoided the nil pointer panic (via #28674) but there's still probably an underlying issue for getting us to the warning point in the first place.\n\n### 🧑‍💻  Steps to reproduce\n\nTODO; primary effort for this ticket will be finding a valid repro scenario, and confirmaing expected behavior on software ingest for that repro behavior.\n\nTo see \n```\nlevel=warn msg=\"updateModifiedHostSoftwareDB: last opened at is nil for new software, but not for current software\" \n```\nSteps to reproduce are:\n\n1. Install software via fleet that does not automatically open after install (do not use CloudFlare Warp or TeamViewer), and open the software after install, then close it.\n2. Refetch host vitals\n3. Confirm \"Last used\" time is shown on Host \u003e Software \u003e Inventory tab\n4. Reinstall or Update the software via Fleet and make sure it doesn't open on its own. Do not open it. \n5. Refetch completes automatically after installation (or refetch manually)\n6. \"Last used\" time is cleared out on Host \u003e Software \u003eInventory tab\n7. Warning is shown in the log\n\n\n### 🕯️ More info\n\nThusfar we have only been able to reproduce this issue in customer environments, so what we probably need is enough logging to determine which host(s) have this issue, and then both snapshots of current host software and incoming detail queries to reproduce the broad issue.\n\n### 🛠️ To fix\n\nProduct designer: @marko-lisica \n\n- Drop the level of the last opened time exists -\u003e null swap warning (either remove entirely, keep as debug, or only log for when the source is something other than apps?)\n- Tooltip on macOS hosts to indicate that new versions reset last opened time\n  - ...\n- Tooltip on Windows/Linux hosts to indicate that new versions do not reset last opened time\n  - ...\n- TODO: Document the above…somewhere other than the UI, probably at least on the API endpoints since this is a significant nuance."
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgdCxBg",
        "issueNumber": 29061,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdCpoQ",
        "status": "✔️Awaiting QA",
        "issueNumber": 30738,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdB-kE",
        "status": "✔️Awaiting QA",
        "issueNumber": 31212,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdCk8Q",
        "status": "🐣 In progress",
        "issueNumber": 30095,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdmlbY",
        "comments": [
          {
            "author": {
              "login": "jkatz01"
            },
            "body": "On the current fleet version 4.72.0 I can't reproduce this anymore.\nI was able to reproduce it a few weeks ago. I would guess this change [edf7bec](https://github.com/fleetdm/fleet/commit/edf7bec845130d9952b8aed9c6035f4cddd2984c) fixed it.\n\n"
          }
        ],
        "issueNumber": 30383,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdnBvc",
        "status": "✔️Awaiting QA",
        "issueNumber": 27902,
        "changeType": "modified"
      }
    ]
  },
  {
    "timestamp": "2025-08-15T07:05:52.626394169Z",
    "items": [
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdbCMM",
        "labels": [
          "bug",
          "~backend",
          ":release",
          ":incoming",
          "#g-software"
        ],
        "status": "Waiting",
        "comments": [
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Reassigning because I'm right in the middle of the interrupt work swimlane :("
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@RachelElysia thanks for noticing that _uninstall_ is the tooltip being shown, so we're going to want an API response for this one to troubleshoot further. Given that @jmwatts is out and to avoid a repro rabbit trail, going to make the call of not blocking the release for this; we'll troubleshoot and resolve in 4.73."
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "More info:\nrecently_uninstalled UI status would only show if `newerDate === lastUninstallDate` which is super bizarre in this case and would require repro with API responses"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "Updated ticket to show install UI status\n"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "@jmwatts / @iansltx I might need more help reproducing this, maybe in a call?\n\nBasically, something in `getUiStatus` helper function is pointing this installer to the wrong ui_status\n\nHere's the code:\n```\nexport const getUiStatus = (\n  software: IHostSoftware,\n  isHostOnline: boolean,\n  hostSoftwareUpdatedAt?: string | null\n): IHostSoftwareUiStatus =\u003e {\n  const { status, installed_versions } = software;\n\n  const lastInstallDate = getLastInstall(software)?.installed_at;\n  const lastUninstallDate = getLastUninstall(software)?.uninstalled_at;\n  const installerVersion = getInstallerVersion(software);\n\n  // 1. Failed install states\n  if (status === \"failed_install\") {\n    if (\n      installerVersion \u0026\u0026\n      installed_versions \u0026\u0026\n      installed_versions.some(\n        (iv) =\u003e compareVersions(iv.version, installerVersion) === -1\n      )\n    ) {\n      return \"failed_install_update_available\";\n    }\n    return \"failed_install\";\n  }\n\n  // 2. Failed uninstall states\n  if (status === \"failed_uninstall\") {\n    if (\n      installerVersion \u0026\u0026\n      installed_versions \u0026\u0026\n      installed_versions.some(\n        (iv) =\u003e compareVersions(iv.version, installerVersion) === -1\n      )\n    ) {\n      return \"failed_uninstall_update_available\";\n    }\n    return \"failed_uninstall\";\n  }\n\n  // 3. Pending install/update\n  if (status === \"pending_install\") {\n    if (\n      installed_versions \u0026\u0026\n      installed_versions.length \u003e 0 \u0026\u0026\n      installerVersion\n    ) {\n      const isUpdate = installed_versions.some(\n        (iv) =\u003e compareVersions(iv.version, installerVersion) === -1\n      );\n      if (isUpdate) {\n        return isHostOnline ? \"updating\" : \"pending_update\";\n      }\n    }\n    return isHostOnline ? \"installing\" : \"pending_install\";\n  }\n\n  // 4. Pending uninstall\n  if (status === \"pending_uninstall\") {\n    return isHostOnline ? \"uninstalling\" : \"pending_uninstall\";\n  }\n\n  // **Recently_uninstalled check comes BEFORE update_available**\n  if (software.status === null \u0026\u0026 lastUninstallDate \u0026\u0026 hostSoftwareUpdatedAt) {\n    const newerDate = getNewerDate(hostSoftwareUpdatedAt, lastUninstallDate);\n    if (newerDate === lastUninstallDate) {\n      return \"recently_uninstalled\";\n    }\n  }\n\n  // 5. Update available and recently updated\n  if (\n    installerVersion \u0026\u0026\n    installed_versions \u0026\u0026\n    installed_versions.some(\n      (iv) =\u003e compareVersions(iv.version, installerVersion) === -1\n    )\n  ) {\n    if (!lastInstallDate) {\n      return \"update_available\";\n    }\n    const newerDate = hostSoftwareUpdatedAt\n      ? getNewerDate(hostSoftwareUpdatedAt, lastInstallDate)\n      : lastInstallDate;\n    return newerDate === lastInstallDate\n      ? \"recently_updated\"\n      : \"update_available\";\n  }\n\n  // 6. Recently installed (not an update)\n  if (\n    software.status === \"installed\" \u0026\u0026\n    lastInstallDate \u0026\u0026\n    hostSoftwareUpdatedAt\n  ) {\n    const newerDate = getNewerDate(hostSoftwareUpdatedAt, lastInstallDate);\n    if (newerDate === lastInstallDate) {\n      return \"recently_installed\";\n    }\n  }\n\n  // 7. Tarballs edge case\n  if (software.source === \"tgz_packages\" \u0026\u0026 software.status === \"installed\") {\n    return \"installed\";\n  }\n\n  // 8. Default to installed or uninstalled based on installed_versions\n  if (installed_versions \u0026\u0026 installed_versions.length \u003e 0) return \"installed\";\n\n  return \"uninstalled\";\n};\n```\n\nSomehow it's passing both if statements in line 6 where it should be failing at least one of them:\nEither should fail:\n```\n    software.status === \"installed\" \u0026\u0026\n    lastInstallDate \u0026\u0026\n    hostSoftwareUpdatedAt\n```\n\nor should fail \n```\n    const newerDate = getNewerDate(hostSoftwareUpdatedAt, lastInstallDate);\n    if (newerDate === lastInstallDate) {\n```\n\nbut I can't tell which or why without help repro in real time.\n\nHere's a diagram of what we want fixed (crossed out is current behavior, circled is wanted behavior):\n\n\u003cimg width=\"396\" height=\"703\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/de100dc2-cee1-4260-bd33-9ff8ffc5cc61\" /\u003e\n"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "2nd to last API response:\n```\n{\n  \"host\": {\n    \"created_at\": \"2025-08-14T15:02:47Z\",\n    \"updated_at\": \"2025-08-14T20:55:26Z\",\n    \"software_updated_at\": \"2025-08-14T20:49:24Z\",\n    \"id\": 46,\n    \"detail_updated_at\": \"2025-08-14T20:49:25Z\",\n    \"label_updated_at\": \"2025-08-14T20:49:25Z\",\n    \"policy_updated_at\": \"2025-08-14T20:49:25Z\",\n    \"last_enrolled_at\": \"2025-08-14T15:02:47Z\",\n    \"seen_time\": \"2025-08-14T20:55:31Z\",\n    \"refetch_requested\": true,\n    \"hostname\": \"nimda-Vivobook\",\n    \"uuid\": \"18005795-ed98-4640-89fe-f123c7dc0919\",\n    \"platform\": \"ubuntu\",\n    \"osquery_version\": \"5.19.0\",\n    \"orbit_version\": \"25.8.8984\",\n    \"fleet_desktop_version\": \"1.45.1\",\n    \"scripts_enabled\": true,\n    \"os_version\": \"Ubuntu 24.04.2 LTS\",\n    \"build\": \"\",\n    \"platform_like\": \"debian\",\n    \"code_name\": \"noble\",\n    \"uptime\": 283194000000000,\n    \"memory\": 16378298368,\n    \"cpu_type\": \"x86_64\",\n    \"cpu_subtype\": \"186\",\n    \"cpu_brand\": \"13th Gen Intel(R) Core(TM) i3-1315U\",\n    \"cpu_physical_cores\": 6,\n    \"cpu_logical_cores\": 8,\n    \"hardware_vendor\": \"ASUSTeK COMPUTER INC.\",\n    \"hardware_model\": \"Vivobook_ASUSLaptop X1404VA_X1404VA\",\n    \"hardware_version\": \"1.0\",\n    \"hardware_serial\": \"T2N0CX02929507A\",\n    \"computer_name\": \"nimda-Vivobook\",\n    \"primary_mac\": \"ec:8e:77:85:3b:c6\",\n    \"distributed_interval\": 10,\n    \"config_tls_refresh\": 60,\n    \"logger_tls_period\": 4,\n    \"team_id\": null,\n    \"pack_stats\": null,\n    \"team_name\": null,\n    \"users\": [\n      {\n        \"uid\": 0,\n        \"username\": \"root\",\n        \"type\": \"\",\n        \"groupname\": \"root\",\n        \"shell\": \"/bin/bash\"\n      },\n      {\n        \"uid\": 1000,\n        \"username\": \"nimda\",\n        \"type\": \"\",\n        \"groupname\": \"nimda\",\n        \"shell\": \"/bin/bash\"\n      }\n    ],\n    \"gigs_disk_space_available\": 938.2,\n    \"percent_disk_space_available\": 93,\n    \"gigs_total_disk_space\": 1006.45,\n    \"issues\": {\n      \"failing_policies_count\": 0,\n      \"critical_vulnerabilities_count\": 0,\n      \"total_issues_count\": 0\n    },\n    \"mdm\": {\n      \"enrollment_status\": null,\n      \"dep_profile_error\": false,\n      \"server_url\": null,\n      \"name\": \"\",\n      \"encryption_key_available\": false,\n      \"encryption_key_archived\": false,\n      \"os_settings\": {\n        \"disk_encryption\": {\n          \"status\": null,\n          \"detail\": \"\"\n        }\n      },\n      \"profiles\": null,\n      \"macos_setup\": {\n        \"bootstrap_package_status\": \"\",\n        \"detail\": \"\",\n        \"bootstrap_package_name\": \"\"\n      },\n      \"device_status\": \"unlocked\",\n      \"pending_action\": \"\",\n      \"connected_to_fleet\": false\n    },\n    \"refetch_critical_queries_until\": null,\n    \"dep_assigned_to_fleet\": false,\n    \"last_restarted_at\": \"2025-08-11T14:09:31Z\",\n    \"policies\": [],\n    \"labels\": [\n      {\n        \"created_at\": \"2025-03-06T15:26:01Z\",\n        \"updated_at\": \"2025-03-06T15:26:01Z\",\n        \"id\": 9,\n        \"author_id\": null,\n        \"name\": \"All Hosts\",\n        \"description\": \"All hosts which have enrolled in Fleet\",\n        \"query\": \"select 1;\",\n        \"platform\": \"\",\n        \"label_type\": \"builtin\",\n        \"label_membership_type\": \"dynamic\"\n      },\n      {\n        \"created_at\": \"2025-03-06T15:26:01Z\",\n        \"updated_at\": \"2025-03-06T15:26:01Z\",\n        \"id\": 11,\n        \"author_id\": null,\n        \"name\": \"Ubuntu Linux\",\n        \"description\": \"All Ubuntu hosts\",\n        \"query\": \"select 1 from os_version where platform = 'ubuntu';\",\n        \"platform\": \"\",\n        \"label_type\": \"builtin\",\n        \"label_membership_type\": \"dynamic\"\n      },\n      {\n        \"created_at\": \"2025-03-06T15:26:01Z\",\n        \"updated_at\": \"2025-03-06T15:26:01Z\",\n        \"id\": 15,\n        \"author_id\": null,\n        \"name\": \"All Linux\",\n        \"description\": \"All Linux distributions\",\n        \"query\": \"SELECT 1 FROM osquery_info WHERE build_platform LIKE '%ubuntu%' OR build_distro LIKE '%centos%';\",\n        \"platform\": \"\",\n        \"label_type\": \"builtin\",\n        \"label_membership_type\": \"dynamic\"\n      }\n    ],\n    \"packs\": [\n      {\n        \"created_at\": \"2025-03-06T19:03:44Z\",\n        \"updated_at\": \"2025-03-06T19:03:44Z\",\n        \"id\": 1,\n        \"name\": \"something\",\n        \"disabled\": false,\n        \"type\": null,\n        \"labels\": null,\n        \"label_ids\": null,\n        \"hosts\": null,\n        \"host_ids\": null,\n        \"teams\": null,\n        \"team_ids\": null\n      }\n    ],\n    \"batteries\": null,\n    \"last_mdm_enrolled_at\": null,\n    \"last_mdm_checked_in_at\": null,\n    \"status\": \"online\",\n    \"display_text\": \"nimda-Vivobook\",\n    \"display_name\": \"nimda-Vivobook\"\n  },\n  \"self_service\": true,\n  \"org_logo_url\": \"\",\n  \"org_logo_url_light_background\": \"\",\n  \"org_contact_url\": \"https://fleetdm.com/company/contact\",\n  \"license\": {\n    \"tier\": \"premium\",\n    \"organization\": \"Fleet Device Management Inc.\",\n    \"device_count\": 100,\n    \"expiration\": \"2025-12-30T18:00:00-06:00\",\n    \"note\": \"Created with Fleet License key dispenser\",\n    \"managed_cloud\": false\n  },\n  \"global_config\": {\n    \"mdm\": {\n      \"enabled_and_configured\": true\n    },\n    \"features\": {\n      \"enable_software_inventory\": true\n    }\n  }\n}\n\n```\nResponse after refetch completed:\n```\n{\n  \"host\": {\n    \"created_at\": \"2025-08-14T15:02:47Z\",\n    \"updated_at\": \"2025-08-14T20:56:05Z\",\n    \"software_updated_at\": \"2025-08-14T20:49:24Z\",\n    \"id\": 46,\n    \"detail_updated_at\": \"2025-08-14T20:56:06Z\",\n    \"label_updated_at\": \"2025-08-14T20:56:06Z\",\n    \"policy_updated_at\": \"2025-08-14T20:56:06Z\",\n    \"last_enrolled_at\": \"2025-08-14T15:02:47Z\",\n    \"seen_time\": \"2025-08-14T20:55:31Z\",\n    \"refetch_requested\": false,\n    \"hostname\": \"nimda-Vivobook\",\n    \"uuid\": \"18005795-ed98-4640-89fe-f123c7dc0919\",\n    \"platform\": \"ubuntu\",\n    \"osquery_version\": \"5.19.0\",\n    \"orbit_version\": \"25.8.8984\",\n    \"fleet_desktop_version\": \"1.45.1\",\n    \"scripts_enabled\": true,\n    \"os_version\": \"Ubuntu 24.04.2 LTS\",\n    \"build\": \"\",\n    \"platform_like\": \"debian\",\n    \"code_name\": \"noble\",\n    \"uptime\": 283595000000000,\n    \"memory\": 16378298368,\n    \"cpu_type\": \"x86_64\",\n    \"cpu_subtype\": \"186\",\n    \"cpu_brand\": \"13th Gen Intel(R) Core(TM) i3-1315U\",\n    \"cpu_physical_cores\": 6,\n    \"cpu_logical_cores\": 8,\n    \"hardware_vendor\": \"ASUSTeK COMPUTER INC.\",\n    \"hardware_model\": \"Vivobook_ASUSLaptop X1404VA_X1404VA\",\n    \"hardware_version\": \"1.0\",\n    \"hardware_serial\": \"T2N0CX02929507A\",\n    \"computer_name\": \"nimda-Vivobook\",\n    \"primary_mac\": \"ec:8e:77:85:3b:c6\",\n    \"distributed_interval\": 10,\n    \"config_tls_refresh\": 60,\n    \"logger_tls_period\": 4,\n    \"team_id\": null,\n    \"pack_stats\": null,\n    \"team_name\": null,\n    \"users\": [\n      {\n        \"uid\": 0,\n        \"username\": \"root\",\n        \"type\": \"\",\n        \"groupname\": \"root\",\n        \"shell\": \"/bin/bash\"\n      },\n      {\n        \"uid\": 1000,\n        \"username\": \"nimda\",\n        \"type\": \"\",\n        \"groupname\": \"nimda\",\n        \"shell\": \"/bin/bash\"\n      }\n    ],\n    \"gigs_disk_space_available\": 937.9,\n    \"percent_disk_space_available\": 93,\n    \"gigs_total_disk_space\": 1006.45,\n    \"issues\": {\n      \"failing_policies_count\": 0,\n      \"critical_vulnerabilities_count\": 0,\n      \"total_issues_count\": 0\n    },\n    \"mdm\": {\n      \"enrollment_status\": null,\n      \"dep_profile_error\": false,\n      \"server_url\": null,\n      \"name\": \"\",\n      \"encryption_key_available\": false,\n      \"encryption_key_archived\": false,\n      \"os_settings\": {\n        \"disk_encryption\": {\n          \"status\": null,\n          \"detail\": \"\"\n        }\n      },\n      \"profiles\": null,\n      \"macos_setup\": {\n        \"bootstrap_package_status\": \"\",\n        \"detail\": \"\",\n        \"bootstrap_package_name\": \"\"\n      },\n      \"device_status\": \"unlocked\",\n      \"pending_action\": \"\",\n      \"connected_to_fleet\": false\n    },\n    \"refetch_critical_queries_until\": null,\n    \"dep_assigned_to_fleet\": false,\n    \"last_restarted_at\": \"2025-08-11T14:09:31Z\",\n    \"policies\": [],\n    \"labels\": [\n      {\n        \"created_at\": \"2025-03-06T15:26:01Z\",\n        \"updated_at\": \"2025-03-06T15:26:01Z\",\n        \"id\": 9,\n        \"author_id\": null,\n        \"name\": \"All Hosts\",\n        \"description\": \"All hosts which have enrolled in Fleet\",\n        \"query\": \"select 1;\",\n        \"platform\": \"\",\n        \"label_type\": \"builtin\",\n        \"label_membership_type\": \"dynamic\"\n      },\n      {\n        \"created_at\": \"2025-03-06T15:26:01Z\",\n        \"updated_at\": \"2025-03-06T15:26:01Z\",\n        \"id\": 11,\n        \"author_id\": null,\n        \"name\": \"Ubuntu Linux\",\n        \"description\": \"All Ubuntu hosts\",\n        \"query\": \"select 1 from os_version where platform = 'ubuntu';\",\n        \"platform\": \"\",\n        \"label_type\": \"builtin\",\n        \"label_membership_type\": \"dynamic\"\n      },\n      {\n        \"created_at\": \"2025-03-06T15:26:01Z\",\n        \"updated_at\": \"2025-03-06T15:26:01Z\",\n        \"id\": 15,\n        \"author_id\": null,\n        \"name\": \"All Linux\",\n        \"description\": \"All Linux distributions\",\n        \"query\": \"SELECT 1 FROM osquery_info WHERE build_platform LIKE '%ubuntu%' OR build_distro LIKE '%centos%';\",\n        \"platform\": \"\",\n        \"label_type\": \"builtin\",\n        \"label_membership_type\": \"dynamic\"\n      }\n    ],\n    \"packs\": [\n      {\n        \"created_at\": \"2025-03-06T19:03:44Z\",\n        \"updated_at\": \"2025-03-06T19:03:44Z\",\n        \"id\": 1,\n        \"name\": \"something\",\n        \"disabled\": false,\n        \"type\": null,\n        \"labels\": null,\n        \"label_ids\": null,\n        \"hosts\": null,\n        \"host_ids\": null,\n        \"teams\": null,\n        \"team_ids\": null\n      }\n    ],\n    \"batteries\": null,\n    \"last_mdm_enrolled_at\": null,\n    \"last_mdm_checked_in_at\": null,\n    \"status\": \"online\",\n    \"display_text\": \"nimda-Vivobook\",\n    \"display_name\": \"nimda-Vivobook\"\n  },\n  \"self_service\": true,\n  \"org_logo_url\": \"\",\n  \"org_logo_url_light_background\": \"\",\n  \"org_contact_url\": \"https://fleetdm.com/company/contact\",\n  \"license\": {\n    \"tier\": \"premium\",\n    \"organization\": \"Fleet Device Management Inc.\",\n    \"device_count\": 100,\n    \"expiration\": \"2025-12-30T18:00:00-06:00\",\n    \"note\": \"Created with Fleet License key dispenser\",\n    \"managed_cloud\": false\n  },\n  \"global_config\": {\n    \"mdm\": {\n      \"enabled_and_configured\": true\n    },\n    \"features\": {\n      \"enable_software_inventory\": true\n    }\n  }\n}\n\n```\n\nSoftware response after refetch:\n```\n {\n      \"id\": 3526,\n      \"name\": \"go1.24.3.linux-amd64.tar.gz\",\n      \"source\": \"tgz_packages\",\n      \"status\": \"installed\",\n      \"installed_versions\": null,\n      \"software_package\": {\n        \"name\": \"go1.24.3.linux-amd64.tar.gz\",\n        \"automatic_install_policies\": null,\n        \"version\": \"\",\n        \"platform\": \"linux\",\n        \"self_service\": true,\n        \"icon_url\": null,\n        \"last_install\": {\n          \"install_uuid\": \"fdf7eeae-2df2-4694-95a1-e3665bfc0f6a\",\n          \"installed_at\": \"2025-08-14T20:55:26.882191Z\"\n        },\n        \"last_uninstall\": null,\n        \"package_url\": null\n      },\n      \"app_store_app\": null\n    },\n```"
          },
          {
            "author": {
              "login": "RachelElysia"
            },
            "body": "Looks like this is a backend bug, specifically, `software_updated_at` on the host isn't getting updated after refetch:\n\n`\"software_updated_at\": \"2025-08-14T20:49:24Z\",`\nSo the frontend thinks the refetch hasn't happened because the API isn't returning an updated `software_updated_at` timestamp that's newer than the `last_install.installed_at`, which it has, but BE some reason didn't update `software_updated_at`"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@marko-lisica So, this appears to currently be expected behavior, but we need to figure out how to handle this. Bringing this to design review. Context:\n\n1. Currently, FE “recently installed” UX relies on software last updated\n2. This persists for tar.gz installers when they’re the only thing that changed on a host because tarballs don’t get inventoried even after the auto-refetch post-install\n3. Because there are no changes in inventory resulting from a tarball install, we hit the no-op branch when running software inventory even though we refetched successfully, which means that the software updated timestamp isn't touched\n4. If inventory doesn't change, we explicitly shouldn’t update software last updated timestamp per [this test](https://github.com/fleetdm/fleet/blob/250d26f53a0592f2748329f32c7df5e110ddc919/server/datastore/mysql/hosts_test.go#L3149-L3160)\n5. We _also_ no-op when last opened time on all inventoried software differs by less than a configured delta; the default is currently one hour despite changes in 4.71 for refetching vitals more often; if we touch the software last updated time on no-ops while retaining this delta we'll be shwoing software as recently updated when last opened times are stale\n6. Potential option: have FE look at details-updated timestamp rather than software-updated timestamp and keep existing behavior (don’t touch updated timestamp on no-op)\n\n[More context in Slack](https://fleetdm.slack.com/archives/C086V2QK76X/p1755195429676139)"
          }
        ],
        "issueNumber": 31721,
        "changeType": "modified"
      },
      {
        "assignees": [
          "ksykulev"
        ],
        "content": {
          "body": "**Fleet version**: 4.72\n**Web browser and operating system**: Version 139.0.7258.127\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\nTwo versions installed of a software on a host. Both version are associated to the same software_title. The softwares are installed at different paths. One software has a last open time and the other software has a null last open time.\n```\n+--------+---------+------------+----------+---------------------+\n| id     | name    | version    | title_id | last_opened_at      |\n+--------+---------+------------+----------+---------------------+\n| 570198 | Spotify | 1.2.69.449 |     2839 | 2025-08-12 19:09:04 |\n| 573034 | Spotify | 1.2.70.409 |     2839 | NULL                |\n+--------+---------+------------+----------+---------------------+\n```\nAPI returns null last open time for both softwares\n\u003cimg width=\"1215\" height=\"900\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/e1934b8a-bc61-44e9-8985-ebb6f1a01985\" /\u003e\n\n### 🛠️ To fix\nThe `ListHostSoftware` code properly fetches `last_opened_at` time for each software.\nhttps://github.com/fleetdm/fleet/blob/main/server/datastore/mysql/software.go#L2424\nIt looks like something is going on here when assigning the `LastOpenTime` to the version\nhttps://github.com/fleetdm/fleet/blob/main/server/datastore/mysql/software.go#L4196\n\n### 🧑‍💻  Steps to reproduce\n1. Install a software of version a\n2. Open that software\n3. Install a software of version b on a different path\n4. Run host vitals refresh\n5. open software inventory tab for the host\n\nIt's important to note that this only happens with there is 2+ version of the software title.\nThe other key thing here to note is that one version doesn't have a last_open_time.\n\nDepending on database order you may get no `last_opened_at` timestamp, or you may see them both have the same one. This is the bug.\n\n### 🕯️ More info _(optional)_\n\n\n\u003c!-- If this is a performance issue, follow these steps to generate and attach a debug archive: https://fleetdm.com/docs/using-fleet/monitoring-fleet#debugging-performance-issues --\u003e\n",
          "number": 31932,
          "repository": "fleetdm/fleet",
          "title": "last_opened_at not properly returned on host software inventory",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/31932"
        },
        "estimate": 2,
        "id": "PVTI_lADOBDAnic4A4BEUzgdqQM4",
        "labels": [
          "bug",
          ":incoming",
          "customer-numa",
          "#g-software"
        ],
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "status": "✔️Awaiting QA",
        "title": "last_opened_at not properly returned on host software inventory",
        "comments": [
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "adding `customer-numa` as they recently requested last_opened_at on windows"
          }
        ],
        "issueNumber": 31932,
        "changeType": "added"
      }
    ]
  },
  {
    "timestamp": "2025-08-15T19:04:26.467688839Z",
    "items": [
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdCnk8",
        "status": "Done",
        "comments": [
          {
            "author": {
              "login": "fleet-release"
            },
            "body": "Icons bespoke, unique,\nGuide users, like stars in the sky.\nEffortless journeys."
          }
        ],
        "issueNumber": 31319,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdg7ps",
        "status": "✔️Awaiting QA",
        "issueNumber": 31474,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdAjcc",
        "status": "🐣 In progress",
        "issueNumber": 31309,
        "changeType": "modified"
      },
      {
        "content": {
          "body": "**Fleet version**: 4.72\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\n\u003c!-- What did you see?  Paste a screenshot, include a 30s video, or write 1-2 sentences describing the issue you observed. --\u003e\n\n\u003cimg width=\"720\" height=\"592\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/3fb10186-89d6-4b2f-9d51-de7941e432a2\" /\u003e\n\n### 🛠️ To fix\n\nOverride install statuses in the correct order (and update JS tests to repro this issue)\n\nProduct designer: @iansltx\n\n### 🧑‍💻  Steps to reproduce\n\u003c!-- Provide step-by-step actions of how to recreate this bug in a clean install of Fleet. (This helps others understand and fix it more quickly.) --\u003e\n1. Add a tar.gz file to a team's library, made available for Self Service. Include install and uninstall scripts.\nFor a physical linux box you can use the go tar.gz file here: https://drive.google.com/file/d/15uKzk2J7IYH7MNYhBHdPAKP_uvVXSx1Z/view?usp=sharing\nFor a linux VM on Apple Silicon you can use the go tar.gz file here: https://drive.google.com/file/d/1ktV0lZH88Q7lqdFUIo3YCt_mgcql1NUN/view?usp=sharing\nInstall script is: `mv $INSTALLER_PATH/* /usr/local`\nUninstall script is: `rm -rf /usr/local/go`\n2. On enrolled linux host, open Self service and click \"Install\"\n3. Wait for install to complete, refetch to complete, then hover over \"Installed\" status\n\n### 🕯️ More info _(optional)_\n\u003c!-- Add any additional details you think could be relevant to solving or reproducing the bug (e.g., \"this does not reproduce when...\") --\u003e\nI used a different tar.gz when reproducing to gather additional info, seems this is only happening for the first install.\nAPI Response:\n```\n    {\n      \"id\": 3875,\n      \"name\": \"gimp-3.0.0.tar.gz\",\n      \"source\": \"tgz_packages\",\n      \"status\": \"installed\",\n      \"installed_versions\": null,\n      \"software_package\": {\n        \"name\": \"gimp-3.0.0.tar.gz\",\n        \"automatic_install_policies\": null,\n        \"version\": \"\",\n        \"platform\": \"linux\",\n        \"self_service\": true,\n        \"icon_url\": null,\n        \"last_install\": {\n          \"install_uuid\": \"e48dbdaf-dde1-44cb-b8c2-6f29839eeaec\",\n          \"installed_at\": \"2025-08-11T14:28:44.201641Z\"\n        },\n        \"last_uninstall\": null,\n        \"package_url\": null\n      },\n      \"app_store_app\": null\n    },\n```\n\u003c!-- If this is a performance issue, follow these steps to generate and attach a debug archive: https://fleetdm.com/docs/using-fleet/monitoring-fleet#debugging-performance-issues --\u003e\n\n## 🛠️ To fix\n\nProduct designer @marko-lisica \n\nDo a special case for tarballs, so we don't have a state where we wait for refetch, as it's not in the inventory.\nIt should be possible to click on the status to see more information about script results in details modal."
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgdbCMM",
        "labels": [
          "bug",
          "~backend",
          ":release",
          "#g-software"
        ],
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "issueNumber": 31721,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdL8SA",
        "milestone": {
          "dueOn": "2025-08-29T00:00:00Z",
          "title": "4.73.0"
        },
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "issueNumber": 30004,
        "changeType": "modified"
      },
      {
        "content": {
          "body": "**Fleet version**: \u003e= 4.67.3\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\n\nSee #28626. We've avoided the nil pointer panic (via #28674) but there's still probably an underlying issue for getting us to the warning point in the first place.\n\n### 🧑‍💻  Steps to reproduce\n\nTODO; primary effort for this ticket will be finding a valid repro scenario, and confirmaing expected behavior on software ingest for that repro behavior.\n\nTo see \n```\nlevel=warn msg=\"updateModifiedHostSoftwareDB: last opened at is nil for new software, but not for current software\" \n```\nSteps to reproduce are:\n\n1. Install software via fleet that does not automatically open after install (do not use CloudFlare Warp or TeamViewer), and open the software after install, then close it.\n2. Refetch host vitals\n3. Confirm \"Last used\" time is shown on Host \u003e Software \u003e Inventory tab\n4. Reinstall or Update the software via Fleet and make sure it doesn't open on its own. Do not open it. \n5. Refetch completes automatically after installation (or refetch manually)\n6. \"Last used\" time is cleared out on Host \u003e Software \u003eInventory tab\n7. Warning is shown in the log\n\n\n### 🕯️ More info\n\nThusfar we have only been able to reproduce this issue in customer environments, so what we probably need is enough logging to determine which host(s) have this issue, and then both snapshots of current host software and incoming detail queries to reproduce the broad issue.\n\n### 🛠️ To fix\n\nProduct designer: @marko-lisica \n\nUI changes [in Figma](https://www.figma.com/design/zST6dTwgH0B58BvtWEIzcQ/-29061%F0%9F%AA%B2Warning-state-on-last-opened-time-calculation-when-changing-the-name-of-an-existing-software?node-id=0-1\u0026t=0OUFyz3ugeIP80eA-1) plus changes below:\n\n- Drop the level of the last opened time exists -\u003e null swap warning (either remove entirely, keep as debug, or only log for when the source is something other than apps?)\n- API docs changes: #31958",
          "title": "🪲Warning state on last-opened time calculation when changing the name of an existing software"
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgdCxBg",
        "title": "🪲Warning state on last-opened time calculation when changing the name of an existing software",
        "issueNumber": 29061,
        "changeType": "modified"
      },
      {
        "content": {
          "body": "**Fleet version**: 4.72.0\n\n**Web browser and operating system**: \u003c!-- e.g. Chrome 88.0.4324 running on macOS --\u003e\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\n\u003c!-- What did you see?  Paste a screenshot, include a 30s video, or write 1-2 sentences describing the issue you observed. --\u003e\nVulns that should show up for RHEL (CentOS and Fedora) OS' Linux kernels are not shown in Fleet.\n\n### 🛠️ To fix\n\nHere's what we decided during #g-software design review on 2025-08-15:\n\n\u003cimg width=\"964\" height=\"581\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/71e39c76-c548-4038-baa5-183a15935d8a\" /\u003e\n\nIan: Also need \"Not supported\" on the OS details page. In the Kernels list. And the Software version detail page (kernel view):\n\n\u003cimg width=\"1142\" height=\"711\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/1e52ee41-54ae-4f3f-a9ca-b875c59bca2d\" /\u003e\n\n\u003cimg width=\"611\" height=\"401\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/b296aa88-f525-4666-b1cc-b306212c03fb\" /\u003e\n\n### 🧑‍💻  Steps to reproduce\n\u003c!-- Provide step-by-step actions of how to recreate this bug in a clean install of Fleet. (This helps others understand and fix it more quickly.) --\u003e\n1. Enroll a RHEL (CentOS or Fedora) host in Fleet. \n2. Run vulns processing\n3. Note that the Linux kernel shows up as software for this host, but does not have any vulnerabilities.\n\n### 🕯️ More info _(optional)_\n\u003c!-- Add any additional details you think could be relevant to solving or reproducing the bug (e.g., \"this does not reproduce when...\") --\u003e\nN/A\n\n\u003c!-- If this is a performance issue, follow these steps to generate and attach a debug archive: https://fleetdm.com/docs/using-fleet/monitoring-fleet#debugging-performance-issues --\u003e\n"
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgdhCgY",
        "comments": [
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "Here's what we decided during #g-software design review on 2025-08-15:\n\n\u003cimg width=\"964\" height=\"581\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/71e39c76-c548-4038-baa5-183a15935d8a\" /\u003e\n\nIan: Also need \"Not supported\" on the OS details page. In the Kernels list. And the Software version detail page (kernel view):\n\n\u003cimg width=\"1142\" height=\"711\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/1e52ee41-54ae-4f3f-a9ca-b875c59bca2d\" /\u003e\n\n\u003cimg width=\"611\" height=\"401\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/b296aa88-f525-4666-b1cc-b306212c03fb\" /\u003e"
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "FYI @jahzielv @mostlikelee ^"
          }
        ],
        "issueNumber": 31495,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdj4pY",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "issueNumber": 31805,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdVayQ",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "issueNumber": 31629,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdVLLc",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "issueNumber": 31621,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdXiVE",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "issueNumber": 31660,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdVb6w",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "issueNumber": 31630,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdVI0g",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "issueNumber": 31619,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdVfUY",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "issueNumber": 31632,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdCk8s",
        "status": "🐣 In progress",
        "issueNumber": 31163,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdF67w",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "issueNumber": 31396,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdF8xw",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "issueNumber": 31398,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdI9dE",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "issueNumber": 30696,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdK3Mg",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "issueNumber": 31414,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdLZck",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "issueNumber": 31468,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdUxWw",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "issueNumber": 31571,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdS0W4",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "issueNumber": 31595,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdVUIs",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "issueNumber": 31476,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdmlbY",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "status": "Done",
        "comments": [
          {
            "author": {
              "login": "jkatz01"
            },
            "body": "On the current fleet version 4.72.0 I can't reproduce this anymore.\nI was able to reproduce it a few weeks ago. I would guess this change [edf7bec](https://github.com/fleetdm/fleet/commit/edf7bec845130d9952b8aed9c6035f4cddd2984c) fixed it.\n\n"
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "Thanks @jkatz01 !  I'll close this out"
          },
          {
            "author": {
              "login": "fleet-release"
            },
            "body": "Offline Windows host sits,\nUninstall script now fixed, peace.\nFleet sails, no more drift."
          }
        ],
        "issueNumber": 30383,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdnBvc",
        "milestone": {
          "dueOn": "2025-08-29T00:00:00Z",
          "title": "4.73.0"
        },
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "issueNumber": 27902,
        "changeType": "modified"
      },
      {
        "content": {
          "body": "**Fleet version**: 4.72\n**Web browser and operating system**: Version 139.0.7258.127\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\nTwo versions installed of a software on a host. Both version are associated to the same software_title. The softwares are installed at different paths. One software has a last open time and the other software has a null last open time.\n```\n+--------+---------+------------+----------+---------------------+\n| id     | name    | version    | title_id | last_opened_at      |\n+--------+---------+------------+----------+---------------------+\n| 570198 | Spotify | 1.2.69.449 |     2839 | 2025-08-12 19:09:04 |\n| 573034 | Spotify | 1.2.70.409 |     2839 | NULL                |\n+--------+---------+------------+----------+---------------------+\n```\nAPI returns null last open time for both softwares\n\u003cimg width=\"1215\" height=\"900\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/e1934b8a-bc61-44e9-8985-ebb6f1a01985\" /\u003e\n\n### 🛠️ To fix\nThe `ListHostSoftware` code properly fetches `last_opened_at` time for each software.\nhttps://github.com/fleetdm/fleet/blob/main/server/datastore/mysql/software.go#L2424\nIt looks like something is going on here when assigning the `LastOpenTime` to the version\nhttps://github.com/fleetdm/fleet/blob/main/server/datastore/mysql/software.go#L4196\n\n### 🧑‍💻  Steps to reproduce\n1. Install a software of version a\n2. Open that software\n3. Install a software of version b on a different path\n4. Run host vitals refresh\n5. open software inventory tab for the host\n\nIt's important to note that this only happens with there is 2+ version of the software title.\nThe other key thing here to note is that one version doesn't have a last_open_time.\n\nDepending on database order you may get no `last_opened_at` timestamp, or you may see them both have the same one. This is the bug.\n\n### 🕯️ More info _(optional)_\n\n\n\u003c!-- If this is a performance issue, follow these steps to generate and attach a debug archive: https://fleetdm.com/docs/using-fleet/monitoring-fleet#debugging-performance-issues --\u003e\n"
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgdqQM4",
        "milestone": {
          "dueOn": "2025-08-29T00:00:00Z",
          "title": "4.73.0"
        },
        "status": "✔️Awaiting QA",
        "issueNumber": 31932,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgbpzkM",
        "comments": [
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "The version reported in osquery is 16.0 but when I look in \"About this Mac\" and System Settings \u003e\u003e General it's 26.0\nIt does get the build right though... 25A5279m"
          },
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "When I try to enforce encryption I'm not seeing the banner instructing me to restart or log out, until I've restarted or logged out. Then it stays there no matter how many times I restart. I'm not seeing the banner clear and even after running the `cleanups_then_aggregation` cron the encryption status isn't updated and it says `unrecognized`:\n\n![Image](https://github.com/user-attachments/assets/f3c0b064-8aae-4c39-9993-bd01af2fbd84)\n\nOn the host, I can see the disk encryption profile in System Settings and Filevault is turned on and a recovery key has been set:\n\n\u003cimg width=\"741\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/013cc568-6b97-4bbb-be68-a458bbbdf56b\" /\u003e\n\n\u003cimg width=\"730\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/986b4c3e-42f2-4b9c-9756-f1acc8e1f302\" /\u003e"
          },
          {
            "author": {
              "login": "PezHub"
            },
            "body": "Apple introduced a new Device Migration feature (that only works with the latest OSes) which will move your host from a 3rd party MDM server over to Fleet,  all via ABM. It works! however during the enrollment to Fleet the Setup Experience SwiftDialogue window did not display the software Fleet was installing in the background"
          },
          {
            "author": {
              "login": "zayhanlon"
            },
            "body": "@PezHub from customer-numa\nmacOS 26 - MDM migration invokes Setup Experience (silently) - awaitconfigured\n\n- Upgraded endpoint to macOS 26 \n- ABM recognizes that\n- Able to set a deadline\n- Device starts to migrate\n- Unenrolled from previous MDM (didn’t have to initiate anything)\n- Recognizes that it needs to enroll into Fleet\n- Waiting for ‘device configured’ command\n- Starts going through setup experience again (calling through all apps, VPP apps, setup script)\n\nExpected behavior: Assume host has all apps already installed. It’s been previously managed. It’s not a net new device so it shouldn’t run setup experience. VPP apps would get removed from previous MDM so those would be the one thing that should run again\n\nNote from @mostlikelee : Technically, as soon as the device gets the Fleet MDM profile, the apps should come along with it. We should test"
          },
          {
            "author": {
              "login": "zayhanlon"
            },
            "body": "@PezHub from customer-eponym\nFleet menu bar item doesn't show up after enrollment in beta 2"
          },
          {
            "author": {
              "login": "Sampfluger88"
            },
            "body": "Linked to Unthread ticket:\n\u003e [Fleet menu not showing after enrollment in macOS 26 beta 2 #6834](https://fleetdm.unthread.io/dashboard/inbox/all/conversations/3ec39176-1e2a-49ec-aea4-3c44108d90d0)"
          },
          {
            "author": {
              "login": "AndreyKizimenko"
            },
            "body": "Changing MDMs without a deadline doesn't not show a notification on the host. Maybe it takes a lot more time (writing this after waiting for 2-3 hours)"
          },
          {
            "author": {
              "login": "PezHub"
            },
            "body": "Hi all 👋 , any issues directly related to the new MDM migration feature Apple introduced in ABM should be tracked separately here https://github.com/orgs/fleetdm/projects/58/views/9?pane=issue\u0026itemId=119675644\u0026issue=fleetdm%7Cfleet%7C30695\n"
          },
          {
            "author": {
              "login": "AndreyKizimenko"
            },
            "body": "Noticed that MacOS26 isn't getting orbit updates from a local tuf server. WIll retest it later next week and file an issue "
          },
          {
            "author": {
              "login": "reeblybeebly"
            },
            "body": "`customer-thumper` reported several occurrences of a host enrollment issue on macOS Tahoe 26, where the \"setup is complete\" dialog box is blank, as evident in the provided screenshot.\n\n**Fleet Version:** 4.71.1\n**macOS Version:** 26.0 Beta 25A5316i\n\nPotentially related logging pulled from server\n```{\ncalendarTime:Mon Aug 11 14:15:05 2025 UTC\nhostIdentifier:B397E6E6-7985-56BF-9BAC-B297B186F192\nunixTime:1754921705\nquery_id:373\nname:pack/team-2/\u003ccustomer-thumper\u003e usr directory\nnumerics:false\naction:snapshot\nepoch:0\ndecorations:{\nhost_uuid:B397E6E6-7985-56BF-9BAC-B297B186F192\nhostname:10bd3a85e979-mac\n}\ncounter:0\nsnapshot:[\n{\ndirectory_status:Exists\nprimary_user:\u003cuser\u003e\n}\n]\n}\n```\n**Screenshot**\n\n\u003cimg width=\"3024\" height=\"1964\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/876d80db-d518-49f3-bc05-9bd50edcaa27\" /\u003e"
          },
          {
            "author": {
              "login": "Sampfluger88"
            },
            "body": "Linked to Unthread ticket:\n\u003e [Issue during macOS 26 onboarding #7769](https://fleetdm.unthread.io/dashboard/inbox/all/conversations/7384f042-079b-4283-a4e7-5e079beb7fc9)"
          },
          {
            "author": {
              "login": "Sampfluger88"
            },
            "body": "Linked to Unthread ticket:\n\u003e [Issue with macOS 26 beta 6 (25A5338b) #7782](https://fleetdm.unthread.io/dashboard/inbox/all/conversations/d2c77f6f-b5f2-42be-8b6c-12ae96bfa4fd)"
          }
        ],
        "issueNumber": 30136,
        "changeType": "modified"
      },
      {
        "assignees": [
          "Illbjorn"
        ],
        "content": {
          "body": "# Welcome to Fleet!  \n\n## First things first, let's get you up and running! 🏃💨\n\n#### Slack\n\n- [x] Accept the invitation to join [Fleet's Slack workspace](http://fleetdm.slack.com/) sent to your `@fleetdm.com` email address.\n- [x] Introduce yourself in `#random` in Fleet's Slack. If this is your first time using Slack, review the [Slack quick start guide](https://slack.com/help/articles/360059928654-How-to-use-Slack--your-quick-start-guide). \n\n\n#### Google \n\n- [x] Accept the invitation to Fleet's Google Workspace sent to your personal email and access your `@fleetdm.com` email address, calendar, and the [\"Fleet\" shared drive](https://drive.google.com/drive/u/0/folders/0AExI02dV1NO8Uk9PVA) in Google Drive.\n- [x] Set up [two-factor authentication](https://fleetdm.com/handbook/security#2step-verification) for Google Workspace using thier [YubiKeys](https://fleetdm.com/handbook/security#hardware-security-keys). \n- [x] Set up your emergency [backup method](https://support.google.com/accounts/answer/9289445?hl=en\u0026co=GENIE.Platform%3DAndroid). This is only to be used if you are unable to use your YubiKeys for two-factor authentication.\n\n\n#### GitHub\n\n- [x] Accept the invite to the `@fleetdm` org [as a top-level member in the \"Teammates\" team](https://github.com/orgs/fleetdm/teams/teammates/members).\n- [x] To avoid confusion, ensure your name in GitHub is your actual name (not just your user name). Click on your profile icon in the top right of screen, click \"Your profile\", then under your GitHub image click \"Edit profile\" and change your name to your preferred name.\n- [x] Access Fleet's private repos, namely [fleetdm/confidential](https://github.com/fleetdm/confidential). Sometimes seeing a \"404 Not Found\" page on GitHub might _actually_ mean you don't have access to the page you're trying to reach.  (For example, if you haven't accepted your invitation yet, or if you aren't logged in to GitHub.)\n- [x] If you don't already have a set of \"Managed bookmarks\" Download and import this [set of bookmarks](https://drive.google.com/uc?export=download\u0026id=1Nih_CACAzPQJE4_BZ7TsK3tro6WrJg8o).\n- [x] Check off the steps you've already taken as part of this tools setup meeting!\n\n\n## Now that we've got that out of the way, grab your breakfast of champions ☕️ and read a bit about our training.\n\nTraining and onboarding [are important](https://fleetdm.com/handbook/company/why-this-way#why-the-emphasis-on-training). Your **first three days at Fleet** are dedicated (exclusively) for training and working on this onboarding issue, and it will be **the major focus of your first two weeks**.\n\n\u003e If other tasks or priorities emerge other than working on this issue during your first 3 days, **please don't do them**.  Instead, work on this issue.  If you are unsure, please send a Slack DM to our CEO ([@mikermcneil](https://fleetdm.slack.com/archives/D04V67ZA97H)) who will help make sure everyone is on the same page about the importance of onboarding at the company.\n\n\u003cins\u003e ☀ Your first day \u003c/ins\u003e\n\nOn your first day, you'll have a [tool setup call](#first-day-setup-call) with the Head of People and Head of Digital Workplace \u0026 GTM Systems and [your first manager 1:1](#your-first-11-meeting). Here's a breakdown of what to expect to cover in those calls.\n\n\n### Prepare for your first-day calls\n\nPlease complete the following as early as possible during your first day to prepare for your first-day meetings. It's fine to complete these steps after your first-day set-up call, but best to have them completed before your first manager 1:1.\n\n- [x] **Schedule your onboarding calls**: Schedule a 30-minute recurring call once every weekday for your first 2 weeks at Fleet with your manager. \n  - [x] Subscribe to your manager's calendar to find a time daily that works for both of you.\n  - [x] Schedule the recurring call with your manager in Google Calendar.\n- [x] Schedule a contributor experience training call using this [calendly link](https://calendly.com/fleetdm/contributor-experience-training). Read more about this call [in our handbook](https://fleetdm.com/handbook/company/communications#contributor-experience-training).\n- [x] **Set up your 1:1 agenda doc**: Make a copy of [Fleet's 1:1 agenda template](https://docs.google.com/document/d/1IkGQJ4PPU0MyW35Xo8BuvoUPKpStsmcw_nHWt71W2yE/copy) and rename your new agenda doc to `[your GitHub username]:[your manager's GitHub username]`. This helps your manager find your 1:1 agenda quickly, which means you're more likely to get prompt, useful feedback.\n  - [x] Share the document with your manager to using their `@fleetdm.com` email address, and grant \"Edit\" access.\n  - [x] Copy your job description commit URL (column \"W\") from your row in [🧑‍🚀 Fleeties](https://docs.google.com/spreadsheets/d/1OSLn-ZCbGSjPusHPiR5dwQhheH1K8-xqyZdsOe9y7qc/edit?gid=0#gid=0\u0026range=W1) and paste it next to \"Job description:\" in the \"Vision\" section of your 1:1 document.\n  - [x] Lastly, check out the [link in the footnote of your new agenda doc](https://about.gitlab.com/handbook/leadership/1-1/suggested-agenda-format/#hallway) to learn more about the agenda doc format and how to use it.\n\n\n### Your first 1:1 meeting\n\nIn your first 1:1 meeting with your manager we encourage you to cover the topics in this section. If you have time for more, you can take a look at [\"Discussions with your manager in daily onboarding 1:1's\"](#discussions-with-your-manager-in-daily-onboarding-11s) and get a headstart on future 1:1's.\n\n\n#### Suggested agenda\n\n - [x] Talk a little bit about yourself, and your background.\n - [x] Discuss your job title, responsibilities, and function.\n - [x] Discuss with your manager who all of their other direct reports are (your peers).\n - [x] Discuss with your manager who they anticipate you will work with day-to-day outside your department. Pick 2 people with your manager and schedule time with them to introduce yourself and your role and learn how they've successfully collaborated with people in your role in the past.\n - [x] Discuss with your manager the importance of this [Google doc regarding licenses](https://docs.google.com/document/d/1BXGAYt_7FTfQOjYIuXDgmxd7DX4JMiSRoOWknGgfp1c/edit).\n\n\n### Remote work\n\n- [x] Set up your personal workspace. Fleet is 100% remote, so get comfortable! Your work schedule should be sustainable and your workspace ergonomic.\n- [x] Find yourself in [\"Fleeties\" spreadsheet](https://docs.google.com/spreadsheets/d/1OSLn-ZCbGSjPusHPiR5dwQhheH1K8-xqyZdsOe9y7qc/edit#gid=0) and update any incomplete or incorrect information.\n  - [x] Take the [Enneagram test](https://docs.google.com/spreadsheets/d/1OSLn-ZCbGSjPusHPiR5dwQhheH1K8-xqyZdsOe9y7qc/edit#gid=0\u0026range=AA1) and fill in your results in the \"Enneagram\" column of [\"Fleeties\"](https://docs.google.com/spreadsheets/d/1OSLn-ZCbGSjPusHPiR5dwQhheH1K8-xqyZdsOe9y7qc/edit?gid=0#gid=0\u0026range=AA1) (Pay with your Brex card)\n- [x] Study the [\"Company\" page](https://fleetdm.com/handbook/company) to learn Fleet's purpose, values, history, and advisors.  The links to external website and articles are carefully curated.  (It's worthwhile to click and read them, too.)\n- [x] Study the [\"Why this way\" page](https://fleetdm.com/handbook/company/why-this-way) to learn Fleet's most important decisions about the best way to work and the reasoning for them.  (The links to external websites and articles on that page are carefully curated.  It's worthwhile to click and read them.)\n- [x] Read Fleet's [\"Communications\"](https://fleetdm.com/handbook/company/communications) page to learn our policies on company equipment, spending company money, travel, receiving feedback, meetings, Slack etiquette, and more.  \n- [ ] At Fleet, everyone uses the handbook, so it's important to learn how to quickly use it and contribute to it.\n  - [x] First, study the philosophy behind why Fleet uses a [\"handbook-first\" strategy\"](https://fleetdm.com/handbook/company/why-this-way#why-handbook-first-strategy).\n  - [x] Then,  study the [basics of markdown syntax](https://fleetdm.com/handbook/company/communications#writing-in-fleet-flavored-markdown) (bold text, italics, links, bullet points, and headings) so that you can contribute yourself.\n  - [ ] Next, read [how the handbook is structured](https://fleetdm.com/handbook/company/leadership#outline-of-departmental-page-structure).\n  - [ ] Find your department and add yourself to its \"Team\" section by making a pull request (aka \"PR\" aka \"merge request\" aka \"MR\"). At Fleet, everyone makes pull requests; not just engineers. Open source is forever.  Any changes you make in a repository are permanently visible in the history, even if you revert them.\n  - [ ] Add your GitHub user name to the [list of humans](https://github.com/fleetdm/fleet/blob/26ada37c501870b5329cd80da32366b8a96ea32b/website/api/controllers/webhooks/receive-from-github.js#L57). \n\n\n\n# 🌙 Your first few days - Getting oriented at Fleet\n\nHopefully by this point you've completed your day 1 meetings and are looking forward to the rest of the week! In this section, we'll prompt you to seek out information about your role, your responsibilities, how the Fleet product works, and dive deeper into customizing your workspace tools for efficiency.\n\n\n### CEO shadow program\n\n- [x] Locate the three-day \"CEO shadow program\" event on your calendar (it's usually within your first two weeks) and create an \"Out Of Office\" event on your calendar for the same dates to make sure you're available for the program.\n  - [x] Read through the [CEO shadow program](https://fleetdm.com/handbook/company/leadership#ceo-shadow-program) and [prepare for the program](https://fleetdm.com/handbook/company/leadership#[prepare-for-the-program) sections of the handbook and discuss any questions with Digital Experience during your onboarding.\n\n\n### Device transparency \n\n- [x] Read [what we can see about your work computer](https://fleetdm.com/transparency). (If you have any concerns or would prefer not to enroll your personal device, talk to your manager.)\n- [x] Visit our [Fleet dogfood instance](https://dogfood.fleetdm.com) and use the \"Sign on with Google\" option with your `@fleetdm.com` email to log in and become a user on our internal version of Fleet.\n\n\n## Discussions with your manager in daily onboarding 1:1's\n\n### GitHub\n\n - [x] Discuss with your manager [which kanban board](https://fleetdm.com/handbook/company/why-this-way#why-make-work-visible) that you, your manager, and your team use to track work in progress. \n   - There is one board per team and they correspond with the [Fleet handbook](https://fleetdm.com/handbook).\n - [x] Pull your onboarding issue into your team's Github Project board, and move it to \"In progress\".\n - [x] Discuss with your manager when to make a public issue versus a confidential issue. (At Fleet, everything we do is [public by default](https://fleetdm.com/handbook/company#openness).)\n - [x] Discuss the [preferred alternatives to posting `@fleetdm.com` email addresses publicly](https://github.com/fleetdm/confidential/issues/224) in repositories, issue trackers, blog posts, social media, or anywhere else viewable by people (and bots) outside the company.\n\n\n### Security\n\n- [x] Discuss with your manager the dangers of phishing emails, and why it's important not to click links in an untrusted email.\n\n\n### Holidays\n\n- [ ] Discuss with your manager [Fleet's time off policy](https://fleetdm.com/handbook/company/communications#paid-time-off), and you understand how to [take time off at Fleet](https://fleetdm.com/handbook/company/communications#taking-time-off).\n- [ ] Choose one of the following [holiday schedules](https://fleetdm.com/handbook/company/communications#holidays) and let your manager know your preference:\n- [ ] Add your holidays to your calendar based on the country where you work (If you are not in the US, please tell your manager the dates of national holidays)\n- [ ] Mark these and any other dates you plan to be out of office in the calendar using the [time-off process](https://fleetdm.com/handbook/company/communications#taking-time-off).\n\n\n### Performance feedback\n\n- [ ] You understand [how performance feedback at Fleet works, from the perspective of your manager](https://fleetdm.com/handbook/company/communications#feedback).\n- [ ] You understand and have read the relevant section in the handbook about how [compensation decisions](https://fleetdm.com/handbook/company/communications#compensation) are evaluated and updated shortly after the yearly workiversary.\n\n\n## Customizing your tools\n\nYou will have accessed most of our standard tools during the tool setup meeting with Digital Experience. Now you're set up, here are some ways to customize them to be most efficient for our use of them at Fleet. Take your time and read through each prompt.\n\n### Google Workspace \n\n#### Gmail\n\n- [ ] Set up your fleetdm email signature by following the instructions in [this guide](https://docs.google.com/document/d/1SaAjH8G8DwAcpsiytIDMq8cImiQzVb6Lj-75Y-w1aGs).\n\n\n#### Google Calendar\n\n\n##### How to use Google Calendar at Fleet\n\n- Check your calendar every morning to see if anything has been added. \n- Schedule internal meetings with Google Calendar and not personal Calendly links so all team members attending can add meeting notes and attachments. For calendar event descriptions, use \"Agenda: LINK\", where \"LINK\" is the URL of your 1:1 doc (this is important to play nicely with some automation we have set up. Be sure to put the string \"Agenda: \" at the beginning of the description for any calendar event for a recurring meeting -- otherwise, unexpected automation may trigger).\n- Please do not move events between calendars or add new calendars.\n- [ ] Share your calendar with the \"everyone@fleetdm.com\" group and select \"make changes to events.\"\n       \n\u003cimg width=\"768\" alt=\"Screenshot 2023-01-17 at 9 50 18 AM\" src=\"https://user-images.githubusercontent.com/100798688/212967248-76717523-031e-4606-8893-3868f9b85328.png\"\u003e\n\n- [x] [Set your working hours in Google Calendar](https://support.google.com/calendar/answer/7638168?hl=en#zippy=%2Csee-how-to-set-working-hours).\n- [ ] Use this link to subscribe to the [\"Celebrations\" calendar](https://calendar.google.com/calendar/u/0?cid=Y19kaW9lNzlrYWk1cnY4bzgxamd2cnF2NWk1Z0Bncm91cC5jYWxlbmRhci5nb29nbGUuY29t) in Google Calendar and add your birthday as an all-day event with your full name in the title (\"Jasmine Stone's birthday\"), and set it up to recur annually.\n- Subscribe to the following calendars in Google Calendar:\n  - [ ] The [\"Events and speaking dates\" calendar](https://calendar.google.com/calendar/u/0?cid=Y19qa2w5OWs0Z29qdGpyNGZmYzJiczhmbTRhZ0Bncm91cC5jYWxlbmRhci5nb29nbGUuY29t). \n  - [ ] The [\"Scrum: MDM\" calendar](https://calendar.google.com/calendar/u/0?cid=Y18yNGI5MDI2YmZiM2Q1ZDA5NWRkMzcwNmUxMzFkN2YxNmEyZjQ4YzdhNTA1NTQ3MTcwNTY5ZjA3ODgzYjZlNzMyQGdyb3VwLmNhbGVuZGFyLmdvb2dsZS5jb20).\n  - [ ] The [\"Scrum: Orchestration\" calendar](https://calendar.google.com/calendar/u/0?cid=Y19jYzdlMGU1Y2JjMGZjOTE1NDlmM2MyNTc3NTI3YjYxYTUxMmQ3ZjI4ZGZiM2UxYWYyNzE2MGVlYjIyZWUxZTViQGdyb3VwLmNhbGVuZGFyLmdvb2dsZS5jb20).\n  - [ ] The [\"Scrum: Software\" calendar](https://calendar.google.com/calendar/u/0?cid=Y180MzExYTdhNGQ2NDgzMGM4NzEzYjIzMTU3Nzc3ZDk5NmZkOWRkZWQ5ZGZiZjMxMjdiZjg1ZDJmZmUzMjdlODczQGdyb3VwLmNhbGVuZGFyLmdvb2dsZS5jb20).\n  - [ ] The [\"Fleet releases\" calendar](https://calendar.google.com/calendar/u/0?cid=Y192Nzk0M2RlcW4xdW5zNDg4YTY1djJkOTRic0Bncm91cC5jYWxlbmRhci5nb29nbGUuY29t).\n  - [ ] The [\"Office hours\"](https://calendar.google.com/calendar/u/0?cid=Y18zMjIzNzY4MmRkZTk4ZTMyODI1YTU2NWQxMmY5NDAxMjZjYzFiNGQ5Y2I2YzY4MmM0NjI3MWRmNDdlMzYzOTQ2QGdyb3VwLmNhbGVuZGFyLmdvb2dsZS5jb20) calendar in Google Calendar and talk to your manager about which meetings you should add yourself to. These calls are for you to meet everyone and learn who does what so that when you need something, you know who to reach out to for help.\n\n \n#### Google Drive\n\n- [x] Access and explore the Fleet shared drive in Google Drive and see how it [is organized](https://docs.google.com/drawings/d/1rl_q3Meph74h5md2g1GLanFIwQbkhvoK3cbD-FubTwc/edit).  \n- [ ] Watch [this video](https://www.loom.com/share/89314389ccab44558d42ed88a70d9d24) _(4m)_ to learn how we share files with each other in Google Drive.  (It is different than the default way.)\n\n\n### Your equipment\n\n- [ ] Tag `@Allen Houchins` in the [#help-onboarding](https://fleetdm.slack.com/archives/C02QG7P5571) Slack channel with your laptop's serial number and operating system. Why?  Now that you've received the new laptop, a Fleet administrator will ensure you're successfully enrolled in Fleet with MDM turned on, and with all of Fleet's baseline system preferences and other settings (\"configuration profiles\").\n\n\n#### Security and compliance\n\n- [ ] Configure your [YubiKeys](https://www.loom.com/share/e0d428ec49ee448d9b851b033a387364).\n- [x] Complete your initial Vanta security training (you will be emailed an invite to the training)\n\n\n### Slack\n\n- [ ] **Slack + GitHub:** Install and configure the [Toast Slack app](https://fleetdm.slack.com/apps/AC6M092SD-toast-for-github)\n  - [ ] After installing, be sure to **finish configuration**: \n\n  \u003cimg width=\"1636\" alt=\"image\" src=\"https://user-images.githubusercontent.com/618009/220965748-30cb47be-e386-4cbb-b5b5-fe8e892d435d.png\"\u003e\n  \n  - [ ] Confirm that you get a Slack notification when someone mentions you in a GitHub issue comment. If this didn't happen, grab time with Sam Pfluger or manager before the end of your first two weeks to perform this test. the [Toast app working correctly](https://fleetdm.com/handbook/company/communications#getting-github-notifications-in-slack) is critical for working at Fleet.)\n  \n- [x] **Slack + Google Calendar:** Install the [Google Calendar + Slack integration](https://fleetdm.slack.com/apps/ADZ494LHY-google-calendar) and configure this tool so that you're notified in Slack just before your scheduled calendar events start (e.g. at t-minus one minute).\n- **Optional**: Join the [#random-coffee](https://fleetdm.slack.com/archives/C06BF23ALDA) channel to virtually meet up with a fellow Fleetie every week.\n\n\n### Zoom\n\n- [ ] Update your Zoom display name to be `[your name] | [your title]` (e.g. \"Jayne Doo | Train Conductor\").\n- [ ] Create a Google Calendar Task for the night before or morning of your first day of the CEO shadow program to update your Zoom display name to be `CEO shadow | [your name]` (e.g. \"CEO shadow | Jayne Doo\")\n- [ ] Create a Google Calendar Task for the end of the last day of the CEO shadow program to update your Zoom display name to be `[your name] | [your title]` (e.g. \"Jayne Doo | Train Conductor\").\n- [x] **Google Calendar + Zoom:** Verify you can host meetings using your Fleet Zoom account and your `@fleetdm.com` calendar in Google Calendar.\n\n\n### Unblocked\n\nYou have access to Fleet's instance of Unblocked. \n- [x] [Sign into Unblocked using GitHub](https://getunblocked.com/). You'll automatically be granted access to the [Fleet team]([url](https://getunblocked.com/dashboard/team/8e9a24fe-5638-4bc0-a8c2-b09d53b4621a/questions/team)). Unblocked is an LLM that has been trained on our GitHub repo, and is capable of answering a variety of questions about how Fleet works.\n\n\n\n## 🗓️ Your first two weeks\n\n\n### Immerse yourself in the world of device management and security\n\nIf you aren't already familiar with device management/security, this can be a lot to take in. Don't worry if you're still confused.\n- [x] Check out this list of [commonly used terms](https://fleetdm.com/handbook/company/communications#commonly-used-terms)\n- [x] Read the [2024 investor memo](https://docs.google.com/document/d/1VWRVwp0Ar8qASmHkP-uW3Da1ZParupO2OUCx9BN5GGg/edit). \n- [x] Read [Why Fleet?](https://docs.google.com/document/d/1E0VU4AcB6UTVRd4JKD45Saxh9Gz-mkO3LnGSTBDLEZo/edit#heading=h.vfxwnwufxzzi) to learn about the company's roadmap, and what people are using the product for in the real world. You'll get to know the customer persona and a few example case studies.\n- [x] Read [The Five Dysfunctions of a Team](https://wtf.tw/ref/lencioni.pdf) or check out the [audio book](https://www.audible.co.uk/pd/The-Five-Dysfunctions-of-a-Team-Audiobook/B004EXKC5M).\n- [ ] The first two-thirds of [The Phoenix Project](https://www.audible.com/pd/The-Phoenix-Project-Audiobook/B00VAZZY32) to live a few days in the life of one of Fleet's customers, an IT leader named Bill, a CISO named John, a couple of IT middle managers named Patty and Wes, and an IT engineer named Brent.  You'll also get a good perspective on why Fleet works the way we do.\n- [ ] **New managers**: Please also read [\"No rules rules\"](https://www.audible.com/pd/No-Rules-Rules-Audiobook/1984891170?qid=1729182831\u0026sr=1-1\u0026ref_pageloadid=not_applicable\u0026pf_rd_p=83218cca-c308-412f-bfcf-90198b687a2f\u0026pf_rd_r=EB42E4EEBQEPGH7E6HD7\u0026pageLoadId=gJnRnUoPxOnoqcIA\u0026creativeId=0d6f6720-f41c-457e-a42b-8c8dceb62f2c\u0026ref=a_search_c3_lProduct_1_1 ) and [\"The goal\"](https://www.audible.com/pd/The-Goal-Audiobook/B00IFG88SM?qid=1729183058\u0026sr=1-1\u0026ref_pageloadid=not_applicable\u0026pf_rd_p=83218cca-c308-412f-bfcf-90198b687a2f\u0026pf_rd_r=DDZQ8MX4GS8QATQ5QGEX\u0026pageLoadId=pR8nv6URmTfyvTHk\u0026creativeId=0d6f6720-f41c-457e-a42b-8c8dceb62f2c\u0026ref=a_search_c3_lProduct_1_1 ) and the [\"Leadership\" page](https://fleetdm.com/handbook/company/leadership).\n\n\n### Open-source community\n\n- [ ] Join the \"Mac Admins\" Slack to get connected with the community of sysadmin users who use Fleet.\n  - Sign up for the [Mac Admins Slack workspace](https://join.slack.com/t/macadmins/shared_invite/zt-34vzyf677-v4FuM9xOWQu1Yu7dAFHpZg)\n  - Join the [`#fleet`](https://macadmins.slack.com/archives/C0214NELAE7) and [`#osquery`](https://macadmins.slack.com/archives/C07DGNRGS) channels\n  - Set your status with the `:fleet:` emoji and text like \"Software Engineer, Fleet\" (replace with your title). See [Mike (@mikermcneil) for an example](https://osquery.slack.com/team/U019VQA6R5F)\n  - Introduce yourself to the community in the channel.\n- [ ] Join the osquery Slack to get connected with the community of osquery aficionados who use Fleet.\n  - Sign up for the osquery [Slack workspace](https://fleetdm.com/community) using your work email address\n  - Set your standard profile pic\n  - Join the [`#fleet`](https://osquery.slack.com/archives/C01DXJL16D8) channel\n  - Set your status with the `:fleet:` emoji and text like \"Software Engineer, Fleet\" (replace with your title). See [Mike (@mikermcneil) for an example](https://osquery.slack.com/team/U019VQA6R5F)\n  - Lurk a bit and see what folks talk about, and how often and how quickly folks from Fleet respond.\n  - Introduce yourself to the community in the channel.\n\n\n## 🎉 Making it official\n\n- [ ] Order one hoodie, backpack, t-shirt or other piece of branded merchandise for yourself using your Brex card at [Printful (login in 1password)](https://www.printful.com/dashboard/default). Select one item from Product templates or from the order history.\n- [ ] **LinkedIn:** Update your LinkedIn profile and send connection requests to your colleagues. This is a suggestion, not a requirement. Consider using the same picture as your LinkedIn everywhere at Fleet for continuity.\n- [ ] **GitHub:** You've [publicized your membership](https://github.com/orgs/fleetdm/people) in [Fleet's GitHub org](https://github.com/fleetdm) if you are comfortable doing so. This is a suggestion, not a requirement.  It will help folks in the community understand that you are part of the Fleet Device Management team.  \n\n### Engineering\n\n - [ ] Talk with your manager about the on-call rotation.\n    - If you've been added to the on-call rotation, talk with your manager about the responsibilities of an on-call engineer.\n - [ ] Bookmark this list of [\"triaged\"](https://github.com/issues?q=is%3Aopen+archived%3Afalse+org%3Afleetdm+no%3Amilestone+no%3Aassignee+sort%3Aupdated-desc+) issues.\n  - [ ] Add yourself to the recurring engineering meetings (i.e. roundup, standup, and release retrospectives) and understand the purpose of each of these meetings.\n  - [ ] Request access to [☁️ Customer environments \u0026 license keys](https://docs.google.com/spreadsheets/d/1nGgy7Gx1Y3sYHinL8kFWnhejghV1QDtv9uQgKu91F9E/edit#gid=0)\n  - [ ] Accept the invite to the @fleetdm GitHub org [in a special team like \"Core engineering\" or \"Growth engineering\", so that you have full write access](https://github.com/orgs/fleetdm/teams/teammates/teams) \n   - Ask your manager about a good first code change of some kind that you can push a PR for on your first day. \n  - [ ] [Front-end engineers](https://github.com/orgs/fleetdm/teams/frontend) only: [Request a \"full\" Figma license](https://www.figma.com/team_invite/redeem/7GHxFEQ5ruTld3Z61l1IRC) in order to interact with wireframes easier. \n- [ ] Discuss with your manager why we use [Bootstrap 4](https://getbootstrap.com/docs/4.6/getting-started/introduction/) when working on fleetdm.com.\n  - [ ] Discuss with your manager why we avoid writing custom CSS/LESS in stylesheets, instead opting for inline Bootstrap classes and, occasionally, inline styles where possible.  \n  - [ ] Discuss with your manager why we custom stylesheets are still sometimes used, especially for media queries, but we favor custom selectors like `[purpose=\"navbar-button\"] {  }` rather than `.navbar-button { }`. \n    - This helps make Bootstrap classes easier to distinguish in the HTML since it means every class in the HTML is a Bootstrap class.\n\n\u003c!--\n### 🐋 Sales onboarding\n\nThis issue is to be started after finishing your welcoming onboarding ticket. It is intended to get you more familiar with how we sell at Fleet, and it will help you ramp and get you closer to being able to contribute to revenue generation.\n\n## Get to know the team\n- [ ] Schedule 1:1s with at least 3 team members, including one Solution Consultant\n  - [ ] Ask SC to show you dogfood and help you open it\n- [ ] Begin attending daily standup meetings\n- [ ] Ask teammates what recurring meetings you should attend\n- [ ] Ask one person to be your “onboarding buddy” to help with daily flow\n- [ ] Take the [Enneagram test](https://docs.google.com/spreadsheets/d/1OSLn-ZCbGSjPusHPiR5dwQhheH1K8-xqyZdsOe9y7qc/edit#gid=0\u0026range=AA1) (pay with your Brex card)\n\n## Get familiar with the [Why Fleet](https://docs.google.com/document/d/1E0VU4AcB6UTVRd4JKD45Saxh9Gz-mkO3LnGSTBDLEZo/edit?usp=sharing) document\n- [ ] Bookmark this file, the main source of all Fleet product marketing information\n- Read the file to learn:\n   - [ ] The high-level positioning of Fleet\n   - [ ] Product categories Fleet plays in\n   - [ ] Fleet’s Ideal Customer Profile\n   - [ ] Personas that Fleet sells to and works with\n   - [ ] Buying situations\n \n## Familiarize yourself with prospect/customer calls\n- [ ] Go to the [Gong Sales Onboarding folder](https://us-65885.app.gong.io/library/company?workspace-id=9148397688380544352\u0026folder-id=2713722867517278137#) and start watching call recordings, making note of the comments both at the folder level describing each call and during the call where notes are made about what is being said in the call at that time; add your own notes to the calls as desired\n- [ ] Find the notes for these calls in Google Drive (Docs) and learn the format and types of items captured\n- [ ] Bring questions to daily standups, sales office hours and sales enablement meetings\n- [ ] Ask CRO which upcoming calls you should shadow\n\n\n## Learn tech stack - in an AE 1:1 or CRO 1:1, discuss tools used and which you'll need to request a license for\n- [ ] Once licenses are obtained, walk through each of the tools with the CRO and then again with an AE\n   - [ ] Salesforce+Einstein activity capture\n   - [ ] Sales nav\n   - [ ] Dripify\n   - [ ] Snitcher\n   - [ ] Calendly\n   - [ ] Gong\n\n\n## Watch videos and read content to learn why customers bought Fleet\n- [ ] Start with clips at top of fleetdm.com\n  - [ ] Watch Austin from Rivian discuss [why they bought Fleet](https://us-65885.app.gong.io/call?id=6020709985747924682)\n  - [ ] Watch Nick from Reddit discuss [why they bought Fleet](https://us-65885.app.gong.io/call?id=320232857290997743)\n  - [ ] Find the notes for these calls in Google Drive (Docs) and learn the format and types of items captured\n- [ ] Read why other customers bought Fleet Premium [here](https://docs.google.com/spreadsheets/d/1yrsjltGJ9DZohCw6hhJ-uWMDjbWvEuGTF0yGJeyxwrI/edit?usp=sharing)\n\n\n## Learn how we sell at Fleet\n- [ ] Read the [Sales Playbook One Pager](https://docs.google.com/document/d/1v5qEUH-aMxIQFQDIs6gdGorr8_iDD7f6/edit?usp=sharing\u0026ouid=101039358388338051104\u0026rtpof=true\u0026sd=true) and the detailed [Sales Playbook](https://docs.google.com/document/d/1xVmpCYoxWbOvzQdwGhf9xMQ6ZYoLVjsDA_cEeJb0mEE/edit?usp=sharing)\n- [ ] Schedule 1:1 with another AE to discuss the sales process and how Salesforce is used\n- [ ] Schedule (or use existing) 1:1 with CRO to review all the above\n- [ ] If not already invited to the weekly Sales Enablement meeting, add yourself and attend!\n- [ ] Review the [GitLab MEDDPPICC content](https://handbook.gitlab.com/handbook/sales/meddppicc/).\n\n\n## Review content and collateral\n- [ ] [Sales collateral list](https://docs.google.com/document/d/1grgxTXRIDEDrwk4xDQCZcxvZK0La407b7O3tTvrOnlE/edit?usp=sharing)\n- [ ] [Security Tools Terms](https://docs.google.com/spreadsheets/d/1bF7ct4Ibyo-GPaehFRwZrlN2PQqQmyi1D1gx-gqNlpc/edit?usp=sharing)\n- [ ] [Fleet ROI](https://docs.google.com/spreadsheets/d/14Cfj77ynOB6z4pmb9DD7HNRGo0kcKJuEIifgnz-YO50/edit?usp=sharing)\n- [ ] [TEMPLATE - Prospect discovery/qualification](https://docs.google.com/document/d/14kgtz7o3kwXy-T3YysLyeakiIGNVFDpHQ9CiJ_k8uXI/edit?usp=sharing)\n\n\n--\u003e\n\n## 🏁 All good?\n\n- [ ] Run through the checklists above one last time to make sure there's nothing you might have overlooked.\n- [ ] Remove your Fleet Google account from the [\"onboarding@\" Google group](https://groups.google.com/).\n- [ ] Schedule a [quick onboarding retrospective](https://calendly.com/fleetdm/onboarding-retro) to reflect on your onboarding experience, while it's still top of mind.\n\n---------\n\n🙌 That's it!  Thank you for all of your patience and attention to detail.  We are all very excited to have you on the team, and we can't wait to see what you accomplish.\n",
          "number": 11828,
          "repository": "fleetdm/confidential",
          "title": "🧑‍🚀 Welcoming Anthony Maxwell (due 2025-08-27)",
          "type": "Issue",
          "url": "https://github.com/fleetdm/confidential/issues/11828"
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgdrGeE",
        "labels": [
          ":help-people",
          ":help-it-and-enablement",
          ":it-and-gtm"
        ],
        "repository": "https://github.com/fleetdm/confidential",
        "sprint": {
          "duration": 21,
          "iterationId": "c0338111",
          "startDate": "2025-07-28",
          "title": "Sprint 45"
        },
        "status": "🐣 In progress",
        "title": "🧑‍🚀 Welcoming Anthony Maxwell (due 2025-08-27)",
        "comments": [
          {
            "author": {
              "login": "fleet-release"
            },
            "body": "ChromeOS joins Fleet,\nA wider platform unites,\nFilter, ease, delight."
          }
        ],
        "issueNumber": 11828,
        "changeType": "added"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdOJOc",
        "title": "Release QA: 4.71.1",
        "issueNumber": 31533,
        "changeType": "removed"
      }
    ]
  },
  {
    "timestamp": "2025-08-16T07:04:28.520058625Z",
    "items": [
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdCk8Q",
        "labels": [
          "story",
          ":release",
          "customer-faltona",
          "~pushed",
          "customer-numa",
          "#g-software",
          "~context"
        ],
        "milestone": {
          "dueOn": "2025-09-19T00:00:00Z",
          "title": "4.74.0"
        },
        "comments": [
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@ksykulev Per comments on the original request from @noahtalerman and @mostlikelee, we want to:\n\n1. Add a `setup_experience` bool on the same level as `self_service` on custom packages, VPP apps, and FMAs, default `false`. Use that to determine whether software is included in setup experience.\n2. Stub the `macos_setup.software` key in GitOps; if it exists in a config, hard-fail with a link to docs for the new way of specifying setup experience.\n\nPlan will be that we _don't_ have a deprecation period on this to keep the code clean and avoid drawing out instances where we have to support both cases. Throwing a prompt at an LLM or two to see if we can make a bot do the work of moving YAML around (we might want a step 3 above of providing a tool to move YAML around)."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Actually, scratch the LLM option for now, as the migration path is more nuanced. One nuance here is that if Team A and Team B both import a set of software, but Team A has a piece of software marked for setup experience and Team B does not, we now need two software files (one with the setup experience flag set, one without) where we previously had one.\n\n@allenhouchins Does this tweak (and its downstream requirements) make sense? In our case the Workstations team has setup experience software defined, but the corresponding canary team doesn't, so for our own setup we'd need to split package YAMLs.\n\nFor reference, here's the prompt I threw into JetBrains Junie, as well as Zed + Claude Sonnet 4:\n\n```\nIn `it-and-security`, for each app store app under `macos_setup.software`, remove it from there and add `setup_experience: true` under the corresponding entry in `app_store_apps` in the same team file. For each software package under `macos_setup.software`, remove it from there and add `setup_experience: true` inside the corresponding YAML file. Finally, remove the `macos_setup.software` key in the YAML file.\n```\n\nNote that the above does _not_ cover the package YAML splitting nuance, and my attempts at making this work with an open-weights model small enough to run in 64GB unified memory failed."
          },
          {
            "author": {
              "login": "allenhouchins"
            },
            "body": "I much prefer the current set up of adding it to the `software` block to basically say \"make this software available to this team\" then creating a secondary reference in `macos_setup.software` to say \"make this software available through this method\". For any software we expect all employees to use (\"critical\"), I want it to be installed via `macos_setup`, `auto-install` if its removed, and available in `self-service` for patching and easy re-installation/troubleshooting. I don't want to have to create multiple `software_title.yml` to achieve this. \n\nI'm already running into challenges with some of the recent changes we've made to software where I will have to [create multiple software entries if I want software scoped differently in teams](https://github.com/fleetdm/fleet/issues/29567) so anything we can do to handle additional logic behind the scenes and avoid having to create multiple software entries of the same software just to use it differently, will always get my vote.\n\n\u003e run in 64GB unified memory failed.\n\n64GB?! Yikes! "
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "\u003e I much prefer the current set up of adding it to the software block to basically say \"make this software available to this team\" then creating a secondary reference in macos_setup.software to say \"make this software available through this method\".\n\n@allenhouchins interesting! I added you to Tuesday's #g-software design review to take a look at the current designs and discuss."
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "Decided to push this story (T-shirt size: S) out of the current design sprint because we won't have space to ship it in 4.72. Here's what we're shipping instead:\n\n- Fleet-maintained apps bugs\n- https://github.com/fleetdm/fleet/issues/30240\n- https://github.com/fleetdm/fleet/issues/27983"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@marko-lisica based on the late, significant scope reduction on #27983, there's now enough backend capacity in the 4.72 sprint to bring this in if it's ready in time, though based on the source of this original request the software GitOps update activity should be split into its own story, as the customer isn't asking for that, \"core to Fleet\" notwithstanding, as the activity work is likely the majority of the effort on this ticket if it's brought in. Splitting stories allows for easier parallelization, and allows for derisking both stories."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@noahtalerman Based on linked issues, looks like we missed calling out some scope here. I'm assuming that allowing specifying macOS setup experience in `fleet_maintained_apps`, as well as in `app_store_apps`, is in scope here. Revising YAML docs so that's clearer now (as well as contributor API docs).\n\nEDIT: Never mind. YAML docs don't include this explicitly, but it's dev note'd in a comment on the PR. And it's in the test plan."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Turns out, the contributor API for this already has the correct (per-package) format, so these changes won't have a server-side component (all `fleetctl`)."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@noahtalerman I thought we had missed frontend scope here because there might have been changes to the modals/exports we added in #28110. But it looks like we don't show custom targets, self-service, and categories in the sample YAML there already so moving them around wouldn't make a difference to what we would display?"
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "\u003e it looks like we don't show custom targets, self-service, and categories in the sample YAML there already so moving them around wouldn't make a difference to what we would display?\n\n@iansltx that's right!"
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "\u003e - [x] REST API changes: No changes\n\n@iansltx also, for future stories can you please leave in the explicit \"No changes\" items in the \"Product\" section? (example above). I added them back this time.\n\nThis helps us remember during [confirm and celebrate](https://fleetdm.com/handbook/product-design#confirm-and-celebrate) and 3 months from now whether or not we intended.\n\nWe've learned that removing the checkboxes introduces questions later like \"did we mean to make UI changes for this story?\""
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "\u003e \u003e * [x]  REST API changes: No changes\n\u003e \n\u003e [@iansltx](https://github.com/iansltx) also, for future stories can you please leave in the explicit \"No changes\" items in the \"Product\" section? (example above). I added them back this time.\n\u003e \n\u003e This helps us remember during [confirm and celebrate](https://fleetdm.com/handbook/product-design#confirm-and-celebrate) and 3 months from now whether or not we intended.\n\u003e \n\u003e We've learned that removing the checkboxes introduces questions later like \"did we mean to make UI changes for this story?\"\n\n@noahtalerman All of the \"no changes\" items are still in the issue description, under the \"No-ops\" heading (\"Product no-ops\" probably makes more sense here, and I've used that heading title on other tickets where I've done this). Sounds like you missed them because they were \"below the fold\" but they're there, and splitting them out should actually make the \"we intentionally didn't do these things\" rundown easier. Thoughts on maintaining that \"split out into a subheading\" pattern, but moving that subheading up above the Engineering section?\n\nMy reason for doing this tweak (was going to mention this in chat channels but ran out of time, but discussed this with @mostlikelee ahead of time) is that stories are generally 80-95% \"No changes\", and when spec'ing/dev'ing it's easy to miss actual work in a sea of \"No changes\" items, and missing a spec item while in spec or development has more serious consequences than having to scroll down in the Confirm and celebrate ritual.\n\nAdditionally, the act of explicitly moving items to a \"these are the things that won't change\" heading during spec provides another \"are we _sure_ this isn't changing\" checkpoint prior to estimation. That actually wound up helpful on #30849, as some GitOps Mode UI changes had been miscategorized as generic UI changes. Moving the Figma link to the more appropriate checkbox decreased likelihood of confusion during both development (imminently) and Confirm and celebrate (later), while maintaining an explicit list of parts of the product that are out of scope for the story.\n\nI hadn't PR'd a handbook/story template change for this because I wanted to dial in how it looked with real-world examples first, hence why you're seeing this for the first time here."
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "\u003e stories are generally 80-95% \"No changes\", and when spec'ing/dev'ing it's easy to miss actual work in a sea of \"No changes\" items, and missing a spec item while in spec or development\n\n@iansltx ah, I hear you but the current way has been working for the other product groups. We just have to look at all the checkboxes to see which have \"No changes\".\n\nTo keep things consistent across product groups and reduce change for now let's please keep the story issue template the same. I removed \n\nThanks for testing it out!\n\n\u003eThat actually wound up helpful on https://github.com/fleetdm/fleet/issues/30849, as some GitOps Mode UI changes had been miscategorized as generic UI changes.\n\nIt sounds like we (it was me) messed up in this case. That's a whoops from me. I forgot about the new GitOps mode checkbox."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "Pulled this back to Ready for spec as there are outstanding test plan questions that we're working through."
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "@noahtalerman heads up that this story is getting pushed to sprint 46"
          }
        ],
        "issueNumber": 30095,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdCoAQ",
        "labels": [
          "story",
          ":release",
          "~pushed",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-09-19T00:00:00Z",
          "title": "4.74.0"
        },
        "comments": [
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "DONE @noahtalerman: What do we do about policy automations? Right now policies in GitOps assume one package per package YAML file.\n  - @iansltx: Today, `fleetctl generate-gitops` works around this by using a `hash_256` to specify the hash. Maybe we can use the same to solve this.\n \n@noahtalerman: Decided like this: either use hash or path to a file. If the file has more than one package, Fleet will error. Specified in [this dev note](https://github.com/fleetdm/fleet/pull/31086/files#r2222732518)."
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "\u003e - [ ] In your team YAML, for your two custom packages, specify `self_service`, `setup_experience`, and labels. Run GitOps, and verify that the options are applied to both packages. \n\u003e   - @noahtalerman: I think testing this requires the changes in this separate user story: https://github.com/fleetdm/fleet/issues/30095\n\nDONE: @noahtalerman: Pull this into #30095\n\n- @noahtalerman: Added the below to the test plan for #30095.\n\n#### Multiple custom packages in one package YAML\n\n- [ ] Create a package YAML file with two custom packages specified by url. Reference the package YAML in a team YAML file and run GitOps. Verify that the two packages are added to the correct team in Fleet. \n- Next, In a team YAML, for your two custom packages, specify `self_service`, `setup_experience`, and labels. Run GitOps, and verify that the options are applied to both packages."
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "FYI @iansltx @jmwatts ^"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "TODOs (will write these up better later):\n\n* Deprecating non-list behavior (vs. not deprecating vs. removing/erroring + adding an automatic migration)\n* Documenting \"error if multiple packages in setup experience YAML file\"\n* Documenting that \"list length of 1\" is valid for places where a single YAML path is expected now?"
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "\u003e Deprecating non-list behavior (vs. not deprecating vs. removing/erroring + adding an automatic migration)\n\nWe decided to deprecate support for the non-list behavior but maintain backwards compatibility. See this dev note: https://github.com/fleetdm/fleet/pull/31086/files#r2219494344\n\n\u003e Documenting \"error if multiple packages in setup experience YAML file\"\n\nIn this [separate GitOps story](https://github.com/fleetdm/fleet/issues/30095), we decided to support applying `setup_experience`. From that separate stories QA plan:\n\n#### Multiple custom packages in one package YAML\n\n- [ ] Create a package YAML file with two custom packages specified by url. Reference the package YAML in a team YAML file and run GitOps. Verify that the two packages are added to the correct team in Fleet. \n- Next, In a team YAML, for your two custom packages, specify `self_service`, `setup_experience`, and labels. Run GitOps, and verify that the options are applied to both packages. \n\n\u003e Documenting that \"list length of 1\" is valid for places where a single YAML path is expected now?\n\nI think this is covered by the [YAML reference doc updates](https://github.com/fleetdm/fleet/pull/31086). We're showing that a list length of 1 is the best practice."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@noahtalerman FYI we'll need to make some slight tweaks to the modal implemented in #28110 if we're removing the top-level style of software package YAML from documentation, otherwise we'll be recommending that people use an undocumented/deprecated format.\n\nAlso, thoughts on removing the old functionality and adding a script to fix existing software YAML files (linked from the \"this was removed\" error) instead of moving the schema to undocumented but still incurring the maintenance burden of supporting it? If we think this is the proper way to format software packages, \"indent the existing file by two spaces and prepend a `- ` to the first line might be simple enough to perform with a single sed/awk command."
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "- UPDATE: @noahtalerman: Added [Figma wireframes](https://www.figma.com/design/VEN5nFcJKd4JOloCgcOOr2/-30849-GitOps--Support-multiple-software-packages-in-one-YAML-file?node-id=0-1\u0026t=84pueN40iALwPkhk-1) to the issue description (including test plan).\n\n\u003e FYI we'll need to make some slight tweaks to the modal implemented in https://github.com/fleetdm/fleet/issues/28110 if we're removing the top-level style of software package YAML from documentation, otherwise we'll be recommending that people use an undocumented/deprecated format.\n\nYep! We want to tweak the UI here with an indent and a hyphen.\n\nDONE: @noahtalerman \n\nAlso, update the package name to include `.package`:\n\n\u003cimg width=\"597\" height=\"83\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/6b09f13a-630f-48bf-81b7-4555fc4c81a5\" /\u003e"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@jmwatts Sorry for the delay on this one. Subtasks are created. Ask away with questions you have."
          },
          {
            "author": {
              "login": "mostlikelee"
            },
            "body": "@noahtalerman heads up that this story is getting pushed to sprint 46"
          }
        ],
        "issueNumber": 30849,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdI9dE",
        "labels": [
          "story",
          "#g-mdm",
          "#g-orchestration",
          "#g-software",
          "macos26"
        ],
        "issueNumber": 30696,
        "changeType": "modified"
      },
      {
        "id": "PVTI_lADOBDAnic4A4BEUzgdVUIs",
        "sprint": {},
        "issueNumber": 31476,
        "changeType": "modified"
      },
      {
        "assignees": [
          "jkatz01"
        ],
        "content": {
          "body": "### 🧑‍💻  Expected behavior\nWhen a new host first enrolls and has not yet sent software to Fleet (i.e. before the host's first check in with the software inventory), the `GET /host/:id` endpoint should return empty slice for the `software` field.\n\n### 💥  Actual behavior\n`software` field is not present in API response.\n\n### To fix\n- If there's no software, include the `software` field (empty array) in the `GET /host/:id` API endpoint.\n",
          "number": 4498,
          "repository": "fleetdm/fleet",
          "title": "`GET /host/:id` endpoint should return empty array for `software`",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/4498"
        },
        "estimate": 2,
        "id": "PVTI_lADOBDAnic4A4BEUzgdsLBo",
        "labels": [
          "bug",
          "~backend",
          ":product",
          "#g-software"
        ],
        "milestone": {
          "dueOn": "2025-09-19T00:00:00Z",
          "title": "4.74.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "1636da2b",
          "startDate": "2025-08-18",
          "title": "Sprint 46"
        },
        "status": "🦤 ‎In review",
        "title": "`GET /host/:id` endpoint should return empty array for `software`",
        "comments": [
          {
            "author": {
              "login": "mikermcneil"
            },
            "body": "+💯 had to add a bunch of assertions for this in some code that uses the API myself."
          },
          {
            "author": {
              "login": "lukeheath"
            },
            "body": "@noahtalerman What do you think of triaging this as a bug? Should be a very quick code change so seems like it's not worth going through the full user story process. "
          },
          {
            "author": {
              "login": "lukeheath"
            },
            "body": "@iansltx Assigning to you since you brought it back to life. "
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@lukeheath Fair point on keeping this as a bug, since that's what it's ticketed as. I've assigned to @marko-lisica for triage as a bug (with the fix scope being just the `software` entry) to run through the bug process."
          }
        ],
        "issueNumber": 4498,
        "changeType": "added"
      },
      {
        "assignees": [
          "xpkoala",
          "PezHub",
          "jmwatts"
        ],
        "content": {
          "body": "\n# Goal: easy-to-follow test steps for checking a release manually\n\n# Important reference data\n\n1. [fleetctl preview setup](https://fleetdm.com/fleetctl-preview)\n2. [permissions documentation](https://fleetdm.com/docs/using-fleet/permissions) \n3. premium tests require license key (needs renewal) `fleetctl preview --license-key=eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJGbGVldCBEZXZpY2UgTWFuYWdlbWVudCBJbmMuIiwiZXhwIjoxNjQwOTk1MjAwLCJzdWIiOiJkZXZlbG9wbWVudCIsImRldmljZXMiOjEwMCwibm90ZSI6ImZvciBkZXZlbG9wbWVudCBvbmx5IiwidGllciI6ImJhc2ljIiwiaWF0IjoxNjIyNDI2NTg2fQ.WmZ0kG4seW3IrNvULCHUPBSfFdqj38A_eiXdV_DFunMHechjHbkwtfkf1J6JQJoDyqn8raXpgbdhafDwv3rmDw`\n4. premium tests require license key (active - Expires Sunday, January 1, 2023 12:00:00 AM) `fleetctl preview --license-key=eyJhbGciOiJFUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJGbGVldCBEZXZpY2UgTWFuYWdlbWVudCBJbmMuIiwiZXhwIjoxNjcyNTMxMjAwLCJzdWIiOiJGbGVldCBEZXZpY2UgTWFuYWdlbWVudCIsImRldmljZXMiOjEwMCwibm90ZSI6ImZvciBkZXZlbG9wbWVudCBvbmx5IiwidGllciI6InByZW1pdW0iLCJpYXQiOjE2NDI1MjIxODF9.EGHQjIzM73YyMbnCruswzg360DEYCsDi9uz48YcDwQHq90BabGT5PIXRiculw79emGj5sk2aKgccTd2hU5J7Jw`\n\n# Smoke Tests\nSmoke tests are limited to core functionality and serve as a pre-release final review. If smoke tests are failing, a release cannot proceed.\n\n## Fleet core:\n\n**Fleet version** (Head to the \"My account\" page in the Fleet UI or run `fleetctl version`):\n\n**Web browser** _(e.g. Chrome 88.0.4324)_: \n\n### Prerequisites\n\n1. `fleetctl preview` is set up and running the desired test version using [`--tag` parameters.](https://fleetdm.com/handbook/engineering#run-fleet-locally-for-qa-purposes)\n2. Unless you are explicitly testing older browser versions, browser is up to date.\n3. Certificate \u0026 flagfile are in place to create new host.\n4. In your browser, clear local storage using devtools.\n\n### Orchestration\n\u003ctable\u003e\n\u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eUpdate flow\u003c/td\u003e\u003ctd\u003e\n\n1. remove all fleet processes/agents/etc using `fleetctl preview reset` for a clean slate\n2. run `fleetctl preview` with no tag for latest stable\n3. create a host/query to later confirm upgrade with\n4. STOP fleet-preview-server instances in containers/apps on Docker\n5. run `fleetctl preview` with appropriate testing tag \u003c/td\u003e\u003ctd\u003eAll previously created hosts/queries are verified to still exist\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eLogin flow\u003c/td\u003e\u003ctd\u003e\n\n1. navigate to the login page and attempt to login with both valid and invalid credentials to verify some combination of expected results.\n2. navigate to the login page and attempt to login with both valid and invalid sso credentials to verify expected results.\n\u003c/td\u003e\u003ctd\u003e\n\n1. text fields prompt when blank\n2. correct error message is \"authentication failed\"\n3. forget password link prompts for email\n4. valid credentials result in a successful login.\n5. valid sso credentials result in a successful login\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003ePacks flow\u003c/td\u003e\u003ctd\u003eVerify management, operation, and logging of [\"2017 packs\"](https://fleetdm.com/handbook/company/why-this-way#why-does-fleet-support-query-packs).\u003c/td\u003e\u003ctd\u003e\n\n1. Packs successfully run on host machines after migrations \n2. New Packs can be created\n3. Packs can be edited and deleted\n4. Packs results information is logged\n \n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eLog destination flow\u003c/td\u003e\u003ctd\u003eVerify log destination for software, query, policy, and packs.\u003c/td\u003e\u003ctd\u003e\n\n1. Software, query, policy, and packs logs are successfully sent to external log destinations\n2. Software, query, policy, and packs logs are successfully sent to Filesystem log destinations\n \n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eOS settings\u003c/td\u003e\u003ctd\u003eVerify OS settings functionality\u003c/td\u003e\u003ctd\u003e\n\n1. Verify able to configure Disk encryption (macOS, Windows, \u0026 Linux).\n2. Verify host enrolled with Disk encryption enforced successfully encrypts.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003c/table\u003e\n\n### MDM\n\u003ctable\u003e\n\u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eMDM enrollment flow\u003c/td\u003e\u003ctd\u003eVerify MDM enrollments, run MDM commands\u003c/td\u003e\u003ctd\u003e\n  \n1. Erase an ADE-eligible macOS host and verify able to complete automated enrollment flow.\n2. With Windows MDM turned On, enroll a Windows host and verify MDM is turned On for the host.\n3. Verify able to run MDM commands on both macOS and Windows hosts from the CLI.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eMDM migration flow\u003c/td\u003e\u003ctd\u003eVerify MDM migration for ADE and non-ADE hosts\u003c/td\u003e\u003ctd\u003e\n  \n1. Turn off MDM on an ADE-eligible macOS host and verify that the native, \"Device Enrollment\" macOS notification appears.\n2. On the My device page, follow the \"Turn on MDM\" instructions and verify that MDM is turned on.\n3. Turn off MDM on a non ADE-eligible macOS host.\n4. On the My device page, follow the \"Turn on MDM\" instructions and verify that MDM is turned on.\n5. Verify Windows host migrates from 3rd party MDM to Fleet when automatic migration is turned on.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eOS settings\u003c/td\u003e\u003ctd\u003eVerify OS settings functionality\u003c/td\u003e\u003ctd\u003e\n\n1. Verify Profiles upload/download/delete (macOS \u0026 Windows).\n2. Verify Profiles are delivered to host and applied. \n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eSetup experience\u003c/td\u003e\u003ctd\u003eVerify macOS Setup experience\u003c/td\u003e\u003ctd\u003e\n\n1. Configure End user authentication.\n3. Upload a Bootstrap package.\n4. Add software (FMA, VPP, \u0026 Custom pkg)\n5. Add a script\n6. Enroll an ADE-eligible macOS host and verify successful authentication.\n7. Verify Bootstrap package is delivered.\n8. Verify SwiftDialogue window displays.\n9. Verify software installs and script runs.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eOS updates\u003c/td\u003e\u003ctd\u003eVerify OS updates flow\u003c/td\u003e\u003ctd\u003e\n\n1. Configure OS updates (macOS \u0026 Windows).\n2. Verify on-device that Nudge prompt appears (macOS 13).\n3. Verify enforce minimumOS occurs during enrollment (macOS 14+).\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eiOS/iPadOS\u003c/td\u003e\u003ctd\u003eVerify enrollment, profiles, \u0026 software installs\u003c/td\u003e\u003ctd\u003e\n\n1. Verify ADE enrollment.\n2. Verify OTA enrollment.\n3. Verify Profiles are delivered to host and applied.\n4. Verify VPP apps install \u0026 display correctly in Activity feed.\n5. Verify `Turn Off MDM` for BYOD \u0026 ADE hosts.\n \n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\n\u003ctr\u003e\u003ctd\u003eLock \u0026 Wipe\u003c/td\u003e\u003ctd\u003eVerify hosts can be locked \u0026 wiped\u003c/td\u003e\u003ctd\u003e\n\n1. Verify locking a host from the Fleet UI (macOS, Windows, \u0026 Linux)\n2. Verify unlocking a host from the Fleet UI (macOS, Windows, \u0026 Linux)\n3. Verify wiping a host from the Fleet UI (macOS, Windows, \u0026 Linux)\n4. Verify wiping and locking hosts using `fleetctl` (macOS, Windows, \u0026 Linux)\n \n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\n\u003ctr\u003e\u003ctd\u003eCertificates Upload\u003c/td\u003e\u003ctd\u003eAPNs cert and ABM token renewal workflow\u003c/td\u003e\u003ctd\u003e\n\n1. Renew APNs Certificate.\n2. Renew ABM Token.\n3. Ensure ADE hosts can enroll.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003c/table\u003e\n\n### Software\n\u003ctable\u003e\n\u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eQuery flow\u003c/td\u003e\u003ctd\u003eCreate, edit, run, and delete queries. \u003c/td\u003e\u003ctd\u003e\n\n1. permissions regarding creating/editing/deleting queries are up to date with documentation\n2. syntax errors result in error messaging\n3. queries can be run manually \n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eHost Flow\u003c/td\u003e\u003ctd\u003eVerify a new host can be added and removed following modal instructions using your own device.\u003c/td\u003e\u003ctd\u003e\n\n1. Host is added via command line\n2. Host serial number and date added are accurate\n3. Host is not visible after it is deleted\n4. Warning and informational modals show when expected and make sense\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eMy device page\u003c/td\u003e\u003ctd\u003eVerify the end user's my device page loads successfully.\u003c/td\u003e\u003ctd\u003e\n\n1. Clicking the Fleet desktop item, then \"My device\" successfully loads the my device page.\n2. The \"My device\" page is populated correctly and as expected. \n3. Styling and padding appears correct.\n \n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eScripts\u003c/td\u003e\u003ctd\u003eVerify script library and execution\u003c/td\u003e\u003ctd\u003e\n\n1. Verify able to run a script on all host types from CLI.\n2. Verify scripts library upload/download/delete.\n3. From Host details (macOS, Windows, \u0026 Linux) run a script that should PASS, verify.\n4. From Host details (macOS, Windows, \u0026 Linux) run a script that should FAIL, verify.\n5. Verify UI loading state and statuses for scripts.\n8. Disable scripts globally and verify unable to run.\n9. Verify scripts display correctly in Activity feed.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eSoftware\u003c/td\u003e\u003ctd\u003eVerify software library and install / download\u003c/td\u003e\u003ctd\u003e\n\n1. Verify software library upload/download/delete.\n2. From Host details (macOS, Windows, \u0026 Linux) run an install that should PASS, verify.\n3. From My Device (macOS, Windows, \u0026 Linux) software tab should have self-service items available, verify.\n4. Verify UI loading state and statuses for installing software.\n7. Verify software installs display correctly in Activity feed.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\n\u003ctr\u003e\u003ctd\u003eMigration Test\u003c/td\u003e\u003ctd\u003eVerify Fleet can migrate to the next version with no issues.\u003c/td\u003e\u003ctd\u003e\n\nUsing the github action https://github.com/fleetdm/fleet/actions/workflows/db-upgrade-test.yml\n1. Using the most recent stable version of Fleet and `main`, click `Run workflow`\n2. Enter the Docker tag of Fleet starting version, e.g. 'v4.64.2'\n3. Enter the Docker tag of Fleet version to upgrade to, e.g. 'rc-minor-fleet-v4.65.0'\n4. Click `Run workflow`.\n5. Action should complete successfully.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003c/table\u003e\n\n### All Product Groups\n\u003ctable\u003e\n \u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003eRelease blockers\u003c/td\u003e\u003ctd\u003eVerify there are no outstanding release blocking tickets.\u003c/td\u003e\u003ctd\u003e\n  \n1. Check [this](https://github.com/fleetdm/fleet/labels/~release%20blocker) filter to view all open `~release blocker` tickets.\n2. If any are found raise an alarm in the `#help-engineering` and `#g-mdm` (or `#g-endpoint-ops`)  channels.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\n\u003ctr\u003e\u003ctd\u003eLoad tests - minor releases only unless otherwise specified\u003c/td\u003e\u003ctd\u003eVerify all load test metrics are within acceptable range on final build of RC.\u003c/td\u003e\u003ctd\u003e\n  \n1. Check [this Google doc](https://docs.google.com/document/d/1V6QtFzcGDsLnn2PIvGin74DAxdAN_3likjxSssOMMQI/edit?tab=t.0#heading=h.15acjob4ji20) to review load test key metrics and checks.\n2. After all expected changes have been merged to the RC branch, two load tests will need to be run - a new instance with no data, and a migrated instance.\n3. For the new instance with no data, set up a load test environment using the RC branch and allow it at least 24hrs of run time.\n4. For the migrated instance, set up a load test environment on the previous minor release branch. Once the environment has been set up and stabilized, follow the instructions in [Deploying code changes to fleet](https://github.com/fleetdm/fleet/blob/main/infrastructure/loadtesting/terraform/readme.md#deploying-code-changes-to-fleet) to migrate to the RC branch. Monitor the metrics post-migration to determine if any performance issues arise.\n5. Record metrics in [this spreadsheet](https://docs.google.com/spreadsheets/d/1FOF0ykFVoZ7DJSTfrveip0olfyRQsY9oT1uXCCZmuKc/edit?usp=drive_link) for the two load test runs. \n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e \n\u003c/table\u003e\n\n### Notes\n\nIssues found new to this version:\n\nIssues found that reproduce in last stable version: \n\nWhat has not been tested:\n\nInclude any notes on whether issues should block release or not as needed:\n\n\u003cbr\u003e\n\u003cbr\u003e\n\n# `fleetd` agent:\n\nIncludes updates to: \n- Orbit: True / False\n- Desktop: True / False\n- Chrome extension: True / False\n\nList versions changes for any component updates below: \n\u003c!-- Remove items without updates --\u003e\n- Orbit `v1.xx.x` \u003e `v1.xx.x`\n- Desktop `v1.xx.x` \u003e `v1.xx.x`\n- Chrome extension `v1.xx.x` \u003e `v1.xx.x`\n\n## Testing gates for new `fleetd` release\n\n### Goal: Ensure new `fleetd` is tested and promoted from local \u003e edge \u003e stable channels\n\n1. Build a new `fleetd` from the release candidate branch as needed for Orbit, Desktop, and Chrome Extension.\n\n\u003ctable\u003e\n\u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e`fleetd` local testing\u003c/td\u003e\n\u003ctd\u003e\n1. Following [Testing TUF]([url](https://github.com/fleetdm/fleet/blob/main/tools/tuf/test/README.md)) instructions create binaries for Mac, Windows, and Ubuntu using your local TUF repository and install on macOS, Linux, and Windows hosts.\u003cbr\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n1. Confirm the hosts install with the updated version and are working correctly.\u003cbr\u003e\n2. Confirm any new features and/or bug fixes associated with this release are working as intended.\u003cbr\u003e\n\u003c/td\u003e\n\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctd\u003e`fleetd` auto-update tests\u003c/td\u003e\n\u003ctd\u003e\n1. Conduct the [`fleetd` auto-update n+1 test]([url](https://github.com/fleetdm/fleet/blob/main/tools/tuf/test/Fleetd-auto-update-test-guide.md))\u003cbr\u003e\n2. QA certifies new release by commenting in issue.\u003cbr\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n1. Agent successfully auto-updates.\u003cbr\u003e\n2. Issue is certified by QA.\u003cbr\u003e\n\u003c/td\u003e\n\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctd\u003e`fleetd` tests\u003c/td\u003e\n\u003ctd\u003e\n1. Set up a host in your instance to receive updates from the `edge` channels.\u003cbr\u003e\n2. Work with engineer leading the release to push changes to the `edge` channel.\u003cbr\u003e\n\u003c/td\u003e\n\u003ctd\u003e\n1. Confirm the hosts running on the edge channel receive the update and are working correctly.\u003cbr\u003e\n2. Confirm any new features and/or bug fixes associated with this release are working as intended.\u003cbr\u003e\n\u003c/td\u003e\n\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\u003c/tr\u003e\n\n\u003c/table\u003e\n\n## New `fleetd` pushed to edge\n\n### Goal: Ensure `fleetd` version pushed to edge is working with the current released version of fleet.\n\n1. Fleet server is running the latest released version available on [Fleet Releases](https://github.com/fleetdm/fleet/releases) page.\n2. Set Agent options to use edge in the Fleet server configuration. For example:\u003cbr\u003e\n `update_channels:` \u003cbr\u003e\n  `osqueryd: edge` \u003cbr\u003e\n  `orbit: edge` \u003cbr\u003e\n  `desktop: edge` \u003cbr\u003e\n\u003ctable\u003e\n\u003ctr\u003e\u003cth\u003eTest name\u003c/th\u003e\u003cth\u003eStep instructions\u003c/th\u003e\u003cth\u003eExpected result\u003c/th\u003e\u003cth\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\u003ctr\u003e\u003ctd\u003e$Name\u003c/td\u003e\u003ctd\u003e{what a tester should do}\u003c/td\u003e\u003ctd\u003e{what a tester should see when they do that}\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n \u003ctr\u003e\u003ctd\u003eQuery flow\u003c/td\u003e\u003ctd\u003eRun queries. \u003c/td\u003e\u003ctd\u003e\n1. Queries can be run manually \n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eHost Flow\u003c/td\u003e\u003ctd\u003eVerify a new host can be added using your own device.\u003c/td\u003e\u003ctd\u003e\n1. Hosts can enroll and report correct version of `fleetd` (orbit, osquery, desktop).\u003cbr\u003e\n2. Refetching host vitals completes and returns updated information.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eMy device page\u003c/td\u003e\u003ctd\u003eVerify the end user's my device page loads successfully.\u003c/td\u003e\u003ctd\u003e\n1. Clicking the Fleet desktop item, then \"My device\" successfully loads the my device page.\u003cbr\u003e\n2. The \"My device\" page is populated correctly and as expected. \u003cbr\u003e\n3. Styling and padding appears correct. \n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eScripts\u003c/td\u003e\u003ctd\u003eVerify script execution\u003c/td\u003e\u003ctd\u003e\n1. Verify able to run a script on all host types from CLI.\u003cbr\u003e\n2. From Host details (macOS, Windows, \u0026 Linux) run a script that should PASS, verify.\u003cbr\u003e\n3. From Host details (macOS, Windows, \u0026 Linux) run a script that should FAIL, verify.\u003cbr\u003e\n4. Verify script results display correctly in Activity feed.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eSoftware\u003c/td\u003e\u003ctd\u003eVerify software install / download\u003c/td\u003e\u003ctd\u003e\n1. From Host details (macOS, Windows, \u0026 Linux) run an install that should PASS, verify.\u003cbr\u003e\n2. From My Device (macOS, Windows, \u0026 Linux) software tab should have self-service items available, verify.\u003cbr\u003e\n3. Verify software installs display correctly in Activity feed.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003eOS settings\u003c/td\u003e\u003ctd\u003eVerify OS settings functionality\u003c/td\u003e\u003ctd\u003e\n1. Verify able to configure Disk encryption (macOS, Windows, \u0026 Linux).\u003cbr\u003e\n2. Verify host enrolled with Disk encryption enforced successfully encrypts.\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003ctr\u003e\u003ctd\u003ePacks flow\u003c/td\u003e\u003ctd\u003eVerify management, operation, and logging of [\"2017 packs\"](https://fleetdm.com/handbook/company/why-this-way#why-does-fleet-support-query-packs).\u003c/td\u003e\u003ctd\u003e\n1. Packs successfully run on host machines after migrations \u003cbr\u003e\n2. New Packs can be created. \u003cbr\u003e\n3. Packs can be edited and deleted \u003cbr\u003e\n4. Packs results information is logged\n\u003c/td\u003e\u003ctd\u003epass/fail\u003c/td\u003e\u003c/tr\u003e\n\n\u003c/table\u003e\n  \n# Notes\n\nIssues found new to this version:\n\nIssues found that reproduce in last stable version: \n\nWhat has not been tested:\n\n\nInclude any notes on whether issues should block release or not as needed:\n",
          "number": 31999,
          "repository": "fleetdm/fleet",
          "title": "Release QA: 4.73.0",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/31999"
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgdsS6Q",
        "labels": [
          ":release",
          "#g-mdm",
          "#g-orchestration",
          "#g-software"
        ],
        "repository": "https://github.com/fleetdm/fleet",
        "status": "🥚 Ready",
        "title": "Release QA: 4.73.0",
        "issueNumber": 31999,
        "changeType": "added"
      },
      {
        "assignees": [
          "noahtalerman"
        ],
        "content": {
          "body": "### Requestor\n\n- Application name: iTerm2\n- Application platform: macOS\n\n---\n\n### Validation\n\n- [X] The following outputs are generated\n        - `/outputs/\u003capp-name\u003e/darwin.json` created\n        - `/outputs/apps.json` updated\n- [X] Manifest name matches osquery `app.name` (macOS) or `programs.name` (Windows)\n- [X] Manifest version scheme matches osquery `app.short_bundle_version` (macOS) or `programs.version` (Windows) version scheme\n- [X] Manifest `unique_identifier` matches osquery `app.bundle_identifier` (macOS only)\n\n### QA\n\n- [X] App adds successfully to team's library\n- [X] App installs successfully on host\n- [X] App opens successfully on host\n- [X] App uninstalls successfully on host\n\n### Icon\n\n- [ ] Icon added to Figma\n- [x] Icon added to Fleet\n- [x] Correct icon appears in the app catalog",
          "number": 30724,
          "repository": "fleetdm/fleet",
          "title": "New FMA:  iTerm2",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/30724"
        },
        "id": "PVTI_lADOBDAnic4A4BEUzgdsTIY",
        "labels": [
          "story",
          ":release",
          "~mdm-maturity",
          "#g-software",
          "~context",
          "fma"
        ],
        "milestone": {
          "dueOn": "2025-08-08T00:00:00Z",
          "title": "4.72.0"
        },
        "repository": "https://github.com/fleetdm/fleet",
        "status": "🥚 Ready",
        "title": "New FMA:  iTerm2",
        "comments": [
          {
            "author": {
              "login": "jmwatts"
            },
            "body": "\u003cimg width=\"355\" height=\"131\" alt=\"Image\" src=\"https://github.com/user-attachments/assets/29f22707-2e02-46c6-981f-fb23ccf38d2b\" /\u003e"
          }
        ],
        "issueNumber": 30724,
        "changeType": "added"
      }
    ]
  },
  {
    "timestamp": "2025-08-17T07:05:14.155506786Z",
    "items": [
      {
        "assignees": [
          "iansltx"
        ],
        "content": {
          "body": "**Fleet version**: 4.70.0.\n\n\u003chr/\u003e\n\n### 💥  Actual behavior\n\nThe `deb_packages` table detects residual files from `.deb` packages, such as `screen`, even after they are removed using `sudo apt remove \u003cpackage_name\u003e`, leading to incorrect policy results.\n\nFleet's \"automatic install\" policy does not consider the `status`, resulting in Fleet failing to install a package that is actually missing.\n\n### 🧑‍💻  Steps to reproduce\n\u003c!-- Provide step-by-step actions of how to recreate this bug in a clean install of Fleet. (This helps others understand and fix it more quickly.) --\u003e\n1. Upload .deb pakage to Fleet\n2. Enable automatic install \n3. Once the sofware is installed, delete it using `sudo apt remove` command\n4. Verify that the software isn't installed again since the policy won't fail\n\n### 🕯️ More info _(optional)_\n\u003c!-- Add any additional details you think could be relevant to solving or reproducing the bug (e.g., \"this does not reproduce when...\") --\u003e\nN/A\n\n\u003c!-- ### 🛠️ To fix --\u003e\n\u003c!-- If this bug requires additional product design work, uncomment the heading above and add instructions to fix, Figma link, etc. here once design changes are settled. --\u003e\nProduct designer: @marko-lisica \n\nImprove query to take the `status` field (from the `deb_packages` table) into account. ",
          "number": 29894,
          "repository": "fleetdm/fleet",
          "title": "deb_packages auto-install query detects some packages that have been removed by apt remove",
          "type": "Issue",
          "url": "https://github.com/fleetdm/fleet/issues/29894"
        },
        "estimate": 1,
        "id": "PVTI_lADOBDAnic4A4BEUzgdtOjc",
        "labels": [
          "bug",
          "~osquery core",
          ":product",
          "customer-cisneros",
          "#g-software"
        ],
        "repository": "https://github.com/fleetdm/fleet",
        "sprint": {
          "duration": 21,
          "iterationId": "1636da2b",
          "startDate": "2025-08-18",
          "title": "Sprint 46"
        },
        "status": "🐣 In progress",
        "title": "deb_packages auto-install query detects some packages that have been removed by apt remove",
        "comments": [
          {
            "author": {
              "login": "pintomi1989"
            },
            "body": "Updated to include Gong snippet provided by customer-cisneros @ddribeiro @sharon-fdm "
          },
          {
            "author": {
              "login": "juan-fdz-hawa"
            },
            "body": "I don't think this is a bug. \n\nThe contents of the `deb_packages` table reflects the behavior of the `dpkg` tools. If they want to exclude packages that leave behind config files they can take a look at the status column:\n\n```\nosquery\u003e select name,status FROM deb_packages WHERE name='screen';\n+--------+----------------------+\n| name   | status               |\n+--------+----------------------+\n| screen | install ok installed |\n+--------+----------------------+\nosquery\u003e select name,status FROM deb_packages WHERE name='screen';\n+--------+---------------------------+\n| name   | status                    |\n+--------+---------------------------+\n| screen | deinstall ok config-files |\n+--------+---------------------------+\n\n```"
          },
          {
            "author": {
              "login": "AndreyKizimenko"
            },
            "body": "Was able to reproduce the initially described issue, also confirmed that a proposed policy will properly fail if we are checking for the status column. \n\nPolicy that I used: \n`SELECT 1 WHERE EXISTS (\n  SELECT 1 FROM deb_packages WHERE name = 'screen' AND status = 'install ok installed'\n);`\n\nRemoving the reproduce label and adding the product to decide whether this is an expected behavior or not "
          },
          {
            "author": {
              "login": "sharon-fdm"
            },
            "body": "@noahtalerman , we think this is not a bug.\nCare to close?"
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "@ddribeiro while it's not ideal, we learned that this is the current, expected behavior of osquery. Today, to detect if a package is installed, we have to write special policies against [`deb_packages`](https://fleetdm.com/tables/deb_packages) using the `status` column. For example:\n\n```sql\nSELECT 1 WHERE EXISTS ( SELECT 1 FROM deb_packages WHERE name = 'screen' AND status = 'install ok installed' );\n```\n\nI flipped this bug to a feature request."
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "Moved the original bug report here:\n\n### 💥  Actual behavior\n\u003c!-- What did you see?  Paste a screenshot, include a 30s video, or write 1-2 sentences describing the issue you observed. --\u003e\nSome .deb files leave residual files on disk when they are removed using `sudo apt remove \u003cpackage_name\u003e`. In these cases, the `deb_packages` osquery table detects them as still present on the system, even though they have been removed.\n\nSome examples of packages that behave like this are `duo-desktop` and `screen`.\n\nThis is especially problematic for Fleet admins who use the `deb_packages` table to write polices that trigger automations to detect and install specific software on their hosts.\n\n### 🧑‍💻  Steps to reproduce\n\u003c!-- Provide step-by-step actions of how to recreate this bug in a clean install of Fleet. (This helps others understand and fix it more quickly.) --\u003e\n1. Install a .deb package that is known to leave residual files after being removed on a Linux host. I used `screen` (`sudo apt install screen`).\n2. Write a policy that uses the deb_packages table to detect if screen is installed. This policy should pass when `screen` is installed and fail when it's not installed. Example:\n```\nSELECT 1 WHERE EXISTS (\n    SELECT 1 WHERE (SELECT COUNT(*) FROM deb_packages) = 0\n) OR EXISTS (\n    SELECT 1 FROM deb_packages WHERE name = 'screen'\n);\n````\n3. Remove the screen package by using `sudo apt remove screen`. Refetch vitals on your test host, **observe that the policy is still passing**, despite `screen` being removed from the system.\n4. Run `sudo purge -y screen` to purge the package from the system. Refetch vitals on your test host, observe that running this command fully removes the package and gets the policy to fail.\n\n### 🕯️ More info _(optional)_\n\u003c!-- Add any additional details you think could be relevant to solving or reproducing the bug (e.g., \"this does not reproduce when...\") --\u003e\nSlack thread for more context: https://fleetdm.slack.com/archives/C072L58U878/p1748879907377119\n\nIt seems most Linux users would use `sudo apt remove` instead of `sudo apt purge -y`, which is what makes this problematic.\n\n\u003c!-- If this is a performance issue, follow these steps to generate and attach a debug archive: https://fleetdm.com/docs/using-fleet/monitoring-fleet#debugging-performance-issues --\u003e\n\n\u003c!-- ### 🛠️ To fix --\u003e\n\u003c!-- If this bug requires additional product design work, uncomment the heading above and add instructions to fix, Figma link, etc. here once design changes are settled. --\u003e\n\u003c!-- Product designer: _________________________ --\u003e \u003c!-- Who is the product designer to contact if folks have questions about this fix? --\u003e"
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@noahtalerman FYI this is 100% something on the osquery side, as this affects the built-in osquery `deb_packages` table. Our [software host vital](https://fleetdm.com/vitals/software-linux#linux) already takes `deb_packages` behavior into account.\n\nWith that said, our current default auto-install policies for `deb_packages` _don't_ take this into account, so we're reporting software that was installed and removed as still installed, so the automation won't fire.\n\nThis feels like a bug with automatic install policies, and the fix would be to revise the default automatic install policy to account for this nuance. This is a 1-2pt fix  that I could likely turn around on Monday if you and @mostlikelee are up for it, and I'm betting this would go a long way toward solving the underlying problem without expecting osquery to change."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "To the above point, our [guide with sample policies](https://fleetdm.com/guides/automatic-software-install-in-fleet#debian-based-deb) doesn't account for status in the query, and in this case it should because if you're trying to enforce \"installed and latest\" you don't want \"installed and latest, but was removed\" to pass."
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "\u003e This feels like a bug with automatic install policies, and the fix would be to revise the default automatic install policy to account for this nuance. \n\n@iansltx aha! Thanks for calling this out. It sounds like `cisneros` reported this because they're using automatic install policies. \n\nI though they wrote a custom policy. I was wrong.\n\nIf our automatic install policies don't take this into account, I agree this is a bug. Can you please help us update this issue into bug format?\n\nAlso, good call on the guide. I think we address the guide change as part of this bug.\n\nAnd, I think if you want to jump on the bug, go for it. cc @mostlikelee "
          },
          {
            "author": {
              "login": "noahtalerman"
            },
            "body": "\u003e @iansltx aha! Thanks for calling this out. It sounds like `cisneros` reported this because they're using automatic install policies. \n\u003e \n\u003e I though they wrote a custom policy. I was wrong.\n\u003e \n\u003e If our automatic install policies don't take this into account, I agree this is a bug.\n\nFYI @ddribeiro "
          },
          {
            "author": {
              "login": "marko-lisica"
            },
            "body": "Original issue description:\n\n---\n\n- `customer-cisneros` Gong snippet: https://us-65885.app.gong.io/call?id=4834666570271096977\u0026highlights=%5B%7B%22type%22%3A%22SHARE%22%2C%22from%22%3A4%2C%22to%22%3A223%7D%5D\n* @noahtalerman: *User requested this because* The `deb_packages` table detects residual files from `.deb` packages, such as `screen`, even after they are removed using `sudo apt remove \u003cpackage_name\u003e`, leading to incorrect policy results.\n\n  - @noahtalerman *In the interim* IT admins can detect if a package is installed by writing a special policy against [`deb_packages`](https://fleetdm.com/tables/deb_packages) using the `status` column. For example:\n\n```sql\nSELECT 1 WHERE EXISTS ( SELECT 1 FROM deb_packages WHERE name = 'screen' AND status = 'install ok installed' );\n```\n\n  * @noahtalerman: *Eventually* Fleet could ensure that the `deb_packages` table correctly reflects the absence of packages even after `sudo apt remove` is used, potentially by addressing residual files or providing a more reliable method for package removal detection."
          },
          {
            "author": {
              "login": "iansltx"
            },
            "body": "@ddribeiro @marko-lisica Updated the issue title because the thing we'll be fixing here is the auto-install query; we _won't_ be making changes to the underlying osquery table as part of this fix. Our understanding is that fixes the customer issue, but would want a different issue if it doesn't."
          }
        ],
        "issueNumber": 29894,
        "changeType": "added"
      }
    ]
  }
]